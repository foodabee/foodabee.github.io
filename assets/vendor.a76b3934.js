function pw(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const MU="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",LU=pw(MU);function RR(e){return!!e||e===""}function vw(e){if(Ie(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Qt(r)?jU(r):vw(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(Qt(e))return e;if(Ut(e))return e}}const FU=/;(?![^(]*\))/g,UU=/:(.+)/;function jU(e){const t={};return e.split(FU).forEach(n=>{if(n){const r=n.split(UU);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function gw(e){let t="";if(Qt(e))t=e;else if(Ie(e))for(let n=0;n<e.length;n++){const r=gw(e[n]);r&&(t+=r+" ")}else if(Ut(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const PJ=e=>Qt(e)?e:e==null?"":Ie(e)||Ut(e)&&(e.toString===DR||!Pe(e.toString))?JSON.stringify(e,NR,2):String(e),NR=(e,t)=>t&&t.__v_isRef?NR(e,t.value):Ga(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:PR(t)?{[`Set(${t.size})`]:[...t.values()]}:Ut(t)&&!Ie(t)&&!xR(t)?String(t):t,ot={},Wa=[],Hr=()=>{},VU=()=>!1,BU=/^on[^a-z]/,up=e=>BU.test(e),mw=e=>e.startsWith("onUpdate:"),_n=Object.assign,yw=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},qU=Object.prototype.hasOwnProperty,Ke=(e,t)=>qU.call(e,t),Ie=Array.isArray,Ga=e=>cp(e)==="[object Map]",PR=e=>cp(e)==="[object Set]",Pe=e=>typeof e=="function",Qt=e=>typeof e=="string",_w=e=>typeof e=="symbol",Ut=e=>e!==null&&typeof e=="object",OR=e=>Ut(e)&&Pe(e.then)&&Pe(e.catch),DR=Object.prototype.toString,cp=e=>DR.call(e),KU=e=>cp(e).slice(8,-1),xR=e=>cp(e)==="[object Object]",ww=e=>Qt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,zh=pw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lp=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},HU=/-(\w)/g,mi=lp(e=>e.replace(HU,(t,n)=>n?n.toUpperCase():"")),WU=/\B([A-Z])/g,ku=lp(e=>e.replace(WU,"-$1").toLowerCase()),fp=lp(e=>e.charAt(0).toUpperCase()+e.slice(1)),Jm=lp(e=>e?`on${fp(e)}`:""),hl=(e,t)=>!Object.is(e,t),Qh=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},cd=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},By=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let HS;const GU=()=>HS||(HS=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Pi;class $U{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Pi&&(this.parent=Pi,this.index=(Pi.scopes||(Pi.scopes=[])).push(this)-1)}run(t){if(this.active)try{return Pi=this,t()}finally{Pi=this.parent}}on(){Pi=this}off(){Pi=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function zU(e,t=Pi){t&&t.active&&t.effects.push(e)}const bw=e=>{const t=new Set(e);return t.w=0,t.n=0,t},MR=e=>(e.w&ko)>0,LR=e=>(e.n&ko)>0,QU=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ko},YU=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];MR(i)&&!LR(i)?i.delete(e):t[n++]=i,i.w&=~ko,i.n&=~ko}t.length=n}},qy=new WeakMap;let qc=0,ko=1;const Ky=30;let li;const Cs=Symbol(""),Hy=Symbol("");class Ew{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,zU(this,r)}run(){if(!this.active)return this.fn();let t=li,n=wo;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=li,li=this,wo=!0,ko=1<<++qc,qc<=Ky?QU(this):WS(this),this.fn()}finally{qc<=Ky&&YU(this),ko=1<<--qc,li=this.parent,wo=n,this.parent=void 0}}stop(){this.active&&(WS(this),this.onStop&&this.onStop(),this.active=!1)}}function WS(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let wo=!0;const FR=[];function Ru(){FR.push(wo),wo=!1}function Nu(){const e=FR.pop();wo=e===void 0?!0:e}function cr(e,t,n){if(wo&&li){let r=qy.get(e);r||qy.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=bw()),UR(i)}}function UR(e,t){let n=!1;qc<=Ky?LR(e)||(e.n|=ko,n=!MR(e)):n=!e.has(li),n&&(e.add(li),li.deps.push(e))}function Vi(e,t,n,r,i,s){const u=qy.get(e);if(!u)return;let c=[];if(t==="clear")c=[...u.values()];else if(n==="length"&&Ie(e))u.forEach((l,h)=>{(h==="length"||h>=r)&&c.push(l)});else switch(n!==void 0&&c.push(u.get(n)),t){case"add":Ie(e)?ww(n)&&c.push(u.get("length")):(c.push(u.get(Cs)),Ga(e)&&c.push(u.get(Hy)));break;case"delete":Ie(e)||(c.push(u.get(Cs)),Ga(e)&&c.push(u.get(Hy)));break;case"set":Ga(e)&&c.push(u.get(Cs));break}if(c.length===1)c[0]&&Wy(c[0]);else{const l=[];for(const h of c)h&&l.push(...h);Wy(bw(l))}}function Wy(e,t){for(const n of Ie(e)?e:[...e])(n!==li||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const XU=pw("__proto__,__v_isRef,__isVue"),jR=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(_w)),JU=Tw(),ZU=Tw(!1,!0),ej=Tw(!0),GS=tj();function tj(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=$e(this);for(let s=0,u=this.length;s<u;s++)cr(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map($e)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Ru();const r=$e(this)[t].apply(this,n);return Nu(),r}}),e}function Tw(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?mj:HR:t?KR:qR).get(r))return r;const u=Ie(r);if(!e&&u&&Ke(GS,i))return Reflect.get(GS,i,s);const c=Reflect.get(r,i,s);return(_w(i)?jR.has(i):XU(i))||(e||cr(r,"get",i),t)?c:tn(c)?!u||!ww(i)?c.value:c:Ut(c)?e?WR(c):Gl(c):c}}const nj=VR(),rj=VR(!0);function VR(e=!1){return function(n,r,i,s){let u=n[r];if(dl(u)&&tn(u)&&!tn(i))return!1;if(!e&&!dl(i)&&(GR(i)||(i=$e(i),u=$e(u)),!Ie(n)&&tn(u)&&!tn(i)))return u.value=i,!0;const c=Ie(n)&&ww(r)?Number(r)<n.length:Ke(n,r),l=Reflect.set(n,r,i,s);return n===$e(s)&&(c?hl(i,u)&&Vi(n,"set",r,i):Vi(n,"add",r,i)),l}}function ij(e,t){const n=Ke(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Vi(e,"delete",t,void 0),r}function oj(e,t){const n=Reflect.has(e,t);return(!_w(t)||!jR.has(t))&&cr(e,"has",t),n}function sj(e){return cr(e,"iterate",Ie(e)?"length":Cs),Reflect.ownKeys(e)}const BR={get:JU,set:nj,deleteProperty:ij,has:oj,ownKeys:sj},aj={get:ej,set(e,t){return!0},deleteProperty(e,t){return!0}},uj=_n({},BR,{get:ZU,set:rj}),Iw=e=>e,hp=e=>Reflect.getPrototypeOf(e);function Ah(e,t,n=!1,r=!1){e=e.__v_raw;const i=$e(e),s=$e(t);t!==s&&!n&&cr(i,"get",t),!n&&cr(i,"get",s);const{has:u}=hp(i),c=r?Iw:n?Aw:pl;if(u.call(i,t))return c(e.get(t));if(u.call(i,s))return c(e.get(s));e!==i&&e.get(t)}function kh(e,t=!1){const n=this.__v_raw,r=$e(n),i=$e(e);return e!==i&&!t&&cr(r,"has",e),!t&&cr(r,"has",i),e===i?n.has(e):n.has(e)||n.has(i)}function Rh(e,t=!1){return e=e.__v_raw,!t&&cr($e(e),"iterate",Cs),Reflect.get(e,"size",e)}function $S(e){e=$e(e);const t=$e(this);return hp(t).has.call(t,e)||(t.add(e),Vi(t,"add",e,e)),this}function zS(e,t){t=$e(t);const n=$e(this),{has:r,get:i}=hp(n);let s=r.call(n,e);s||(e=$e(e),s=r.call(n,e));const u=i.call(n,e);return n.set(e,t),s?hl(t,u)&&Vi(n,"set",e,t):Vi(n,"add",e,t),this}function QS(e){const t=$e(this),{has:n,get:r}=hp(t);let i=n.call(t,e);i||(e=$e(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&Vi(t,"delete",e,void 0),s}function YS(){const e=$e(this),t=e.size!==0,n=e.clear();return t&&Vi(e,"clear",void 0,void 0),n}function Nh(e,t){return function(r,i){const s=this,u=s.__v_raw,c=$e(u),l=t?Iw:e?Aw:pl;return!e&&cr(c,"iterate",Cs),u.forEach((h,d)=>r.call(i,l(h),l(d),s))}}function Ph(e,t,n){return function(...r){const i=this.__v_raw,s=$e(i),u=Ga(s),c=e==="entries"||e===Symbol.iterator&&u,l=e==="keys"&&u,h=i[e](...r),d=n?Iw:t?Aw:pl;return!t&&cr(s,"iterate",l?Hy:Cs),{next(){const{value:v,done:m}=h.next();return m?{value:v,done:m}:{value:c?[d(v[0]),d(v[1])]:d(v),done:m}},[Symbol.iterator](){return this}}}}function io(e){return function(...t){return e==="delete"?!1:this}}function cj(){const e={get(s){return Ah(this,s)},get size(){return Rh(this)},has:kh,add:$S,set:zS,delete:QS,clear:YS,forEach:Nh(!1,!1)},t={get(s){return Ah(this,s,!1,!0)},get size(){return Rh(this)},has:kh,add:$S,set:zS,delete:QS,clear:YS,forEach:Nh(!1,!0)},n={get(s){return Ah(this,s,!0)},get size(){return Rh(this,!0)},has(s){return kh.call(this,s,!0)},add:io("add"),set:io("set"),delete:io("delete"),clear:io("clear"),forEach:Nh(!0,!1)},r={get(s){return Ah(this,s,!0,!0)},get size(){return Rh(this,!0)},has(s){return kh.call(this,s,!0)},add:io("add"),set:io("set"),delete:io("delete"),clear:io("clear"),forEach:Nh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Ph(s,!1,!1),n[s]=Ph(s,!0,!1),t[s]=Ph(s,!1,!0),r[s]=Ph(s,!0,!0)}),[e,n,t,r]}const[lj,fj,hj,dj]=cj();function Sw(e,t){const n=t?e?dj:hj:e?fj:lj;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Ke(n,i)&&i in r?n:r,i,s)}const pj={get:Sw(!1,!1)},vj={get:Sw(!1,!0)},gj={get:Sw(!0,!1)},qR=new WeakMap,KR=new WeakMap,HR=new WeakMap,mj=new WeakMap;function yj(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _j(e){return e.__v_skip||!Object.isExtensible(e)?0:yj(KU(e))}function Gl(e){return dl(e)?e:Cw(e,!1,BR,pj,qR)}function wj(e){return Cw(e,!1,uj,vj,KR)}function WR(e){return Cw(e,!0,aj,gj,HR)}function Cw(e,t,n,r,i){if(!Ut(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const u=_j(e);if(u===0)return e;const c=new Proxy(e,u===2?r:n);return i.set(e,c),c}function $a(e){return dl(e)?$a(e.__v_raw):!!(e&&e.__v_isReactive)}function dl(e){return!!(e&&e.__v_isReadonly)}function GR(e){return!!(e&&e.__v_isShallow)}function $R(e){return $a(e)||dl(e)}function $e(e){const t=e&&e.__v_raw;return t?$e(t):e}function zR(e){return cd(e,"__v_skip",!0),e}const pl=e=>Ut(e)?Gl(e):e,Aw=e=>Ut(e)?WR(e):e;function QR(e){wo&&li&&(e=$e(e),UR(e.dep||(e.dep=bw())))}function YR(e,t){e=$e(e),e.dep&&Wy(e.dep)}function tn(e){return!!(e&&e.__v_isRef===!0)}function bj(e){return XR(e,!1)}function Ej(e){return XR(e,!0)}function XR(e,t){return tn(e)?e:new Tj(e,t)}class Tj{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:$e(t),this._value=n?t:pl(t)}get value(){return QR(this),this._value}set value(t){t=this.__v_isShallow?t:$e(t),hl(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:pl(t),YR(this))}}function Gc(e){return tn(e)?e.value:e}const Ij={get:(e,t,n)=>Gc(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return tn(i)&&!tn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function JR(e){return $a(e)?e:new Proxy(e,Ij)}class Sj{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Ew(t,()=>{this._dirty||(this._dirty=!0,YR(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=$e(this);return QR(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Cj(e,t,n=!1){let r,i;const s=Pe(e);return s?(r=e,i=Hr):(r=e.get,i=e.set),new Sj(r,i,s||!i,n)}Promise.resolve();function bo(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){dp(s,t,n)}return i}function Sr(e,t,n,r){if(Pe(e)){const s=bo(e,t,n,r);return s&&OR(s)&&s.catch(u=>{dp(u,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Sr(e[s],t,n,r));return i}function dp(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const u=t.proxy,c=n;for(;s;){const h=s.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,u,c)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){bo(l,null,10,[e,u,c]);return}}Aj(e,n,i,r)}function Aj(e,t,n,r=!0){console.error(e)}let ld=!1,Gy=!1;const ir=[];let Di=0;const $c=[];let Kc=null,La=0;const zc=[];let lo=null,Fa=0;const ZR=Promise.resolve();let kw=null,$y=null;function eN(e){const t=kw||ZR;return e?t.then(this?e.bind(this):e):t}function kj(e){let t=Di+1,n=ir.length;for(;t<n;){const r=t+n>>>1;vl(ir[r])<e?t=r+1:n=r}return t}function tN(e){(!ir.length||!ir.includes(e,ld&&e.allowRecurse?Di+1:Di))&&e!==$y&&(e.id==null?ir.push(e):ir.splice(kj(e.id),0,e),nN())}function nN(){!ld&&!Gy&&(Gy=!0,kw=ZR.then(oN))}function Rj(e){const t=ir.indexOf(e);t>Di&&ir.splice(t,1)}function rN(e,t,n,r){Ie(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?r+1:r))&&n.push(e),nN()}function Nj(e){rN(e,Kc,$c,La)}function Pj(e){rN(e,lo,zc,Fa)}function Rw(e,t=null){if($c.length){for($y=t,Kc=[...new Set($c)],$c.length=0,La=0;La<Kc.length;La++)Kc[La]();Kc=null,La=0,$y=null,Rw(e,t)}}function iN(e){if(zc.length){const t=[...new Set(zc)];if(zc.length=0,lo){lo.push(...t);return}for(lo=t,lo.sort((n,r)=>vl(n)-vl(r)),Fa=0;Fa<lo.length;Fa++)lo[Fa]();lo=null,Fa=0}}const vl=e=>e.id==null?1/0:e.id;function oN(e){Gy=!1,ld=!0,Rw(e),ir.sort((n,r)=>vl(n)-vl(r));const t=Hr;try{for(Di=0;Di<ir.length;Di++){const n=ir[Di];n&&n.active!==!1&&bo(n,null,14)}}finally{Di=0,ir.length=0,iN(),ld=!1,kw=null,(ir.length||$c.length||zc.length)&&oN(e)}}function Oj(e,t,...n){const r=e.vnode.props||ot;let i=n;const s=t.startsWith("update:"),u=s&&t.slice(7);if(u&&u in r){const d=`${u==="modelValue"?"model":u}Modifiers`,{number:v,trim:m}=r[d]||ot;m?i=n.map(y=>y.trim()):v&&(i=n.map(By))}let c,l=r[c=Jm(t)]||r[c=Jm(mi(t))];!l&&s&&(l=r[c=Jm(ku(t))]),l&&Sr(l,e,6,i);const h=r[c+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,Sr(h,e,6,i)}}function sN(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let u={},c=!1;if(!Pe(e)){const l=h=>{const d=sN(h,t,!0);d&&(c=!0,_n(u,d))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!c?(r.set(e,null),null):(Ie(s)?s.forEach(l=>u[l]=null):_n(u,s),r.set(e,u),u)}function Nw(e,t){return!e||!up(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ke(e,t[0].toLowerCase()+t.slice(1))||Ke(e,ku(t))||Ke(e,t))}let _r=null,aN=null;function fd(e){const t=_r;return _r=e,aN=e&&e.type.__scopeId||null,t}function Dj(e,t=_r,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&aC(-1);const s=fd(t),u=e(...i);return fd(s),r._d&&aC(1),u};return r._n=!0,r._c=!0,r._d=!0,r}function Zm(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[u],slots:c,attrs:l,emit:h,render:d,renderCache:v,data:m,setupState:y,ctx:w,inheritAttrs:E}=e;let T,k;const P=fd(e);try{if(n.shapeFlag&4){const K=i||r;T=ui(d.call(K,K,v,s,y,m,w)),k=l}else{const K=t;T=ui(K.length>1?K(s,{attrs:l,slots:c,emit:h}):K(s,null)),k=t.props?l:xj(l)}}catch(K){Qc.length=0,dp(K,e,1),T=Kn(yi)}let M=T;if(k&&E!==!1){const K=Object.keys(k),{shapeFlag:Q}=M;K.length&&Q&7&&(u&&K.some(mw)&&(k=Mj(k,u)),M=Za(M,k))}return n.dirs&&(M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&(M.transition=n.transition),T=M,fd(P),T}const xj=e=>{let t;for(const n in e)(n==="class"||n==="style"||up(n))&&((t||(t={}))[n]=e[n]);return t},Mj=(e,t)=>{const n={};for(const r in e)(!mw(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Lj(e,t,n){const{props:r,children:i,component:s}=e,{props:u,children:c,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?XS(r,u,h):!!u;if(l&8){const d=t.dynamicProps;for(let v=0;v<d.length;v++){const m=d[v];if(u[m]!==r[m]&&!Nw(h,m))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===u?!1:r?u?XS(r,u,h):!0:!!u;return!1}function XS(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Nw(n,s))return!0}return!1}function Fj({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const Uj=e=>e.__isSuspense;function jj(e,t){t&&t.pendingBranch?Ie(e)?t.effects.push(...e):t.effects.push(e):Pj(e)}function Yh(e,t){if(Wt){let n=Wt.provides;const r=Wt.parent&&Wt.parent.provides;r===n&&(n=Wt.provides=Object.create(r)),n[e]=t}}function Eo(e,t,n=!1){const r=Wt||_r;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Pe(t)?t.call(r.proxy):t}}const JS={};function Xh(e,t,n){return uN(e,t,n)}function uN(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:u}=ot){const c=Wt;let l,h=!1,d=!1;if(tn(e)?(l=()=>e.value,h=GR(e)):$a(e)?(l=()=>e,r=!0):Ie(e)?(d=!0,h=e.some($a),l=()=>e.map(k=>{if(tn(k))return k.value;if($a(k))return ys(k);if(Pe(k))return bo(k,c,2)})):Pe(e)?t?l=()=>bo(e,c,2):l=()=>{if(!(c&&c.isUnmounted))return v&&v(),Sr(e,c,3,[m])}:l=Hr,t&&r){const k=l;l=()=>ys(k())}let v,m=k=>{v=T.onStop=()=>{bo(k,c,4)}};if(gl)return m=Hr,t?n&&Sr(t,c,3,[l(),d?[]:void 0,m]):l(),Hr;let y=d?[]:JS;const w=()=>{if(!!T.active)if(t){const k=T.run();(r||h||(d?k.some((P,M)=>hl(P,y[M])):hl(k,y)))&&(v&&v(),Sr(t,c,3,[k,y===JS?void 0:y,m]),y=k)}else T.run()};w.allowRecurse=!!t;let E;i==="sync"?E=w:i==="post"?E=()=>qn(w,c&&c.suspense):E=()=>{!c||c.isMounted?Nj(w):w()};const T=new Ew(l,E);return t?n?w():y=T.run():i==="post"?qn(T.run.bind(T),c&&c.suspense):T.run(),()=>{T.stop(),c&&c.scope&&yw(c.scope.effects,T)}}function Vj(e,t,n){const r=this.proxy,i=Qt(e)?e.includes(".")?cN(r,e):()=>r[e]:e.bind(r,r);let s;Pe(t)?s=t:(s=t.handler,n=t);const u=Wt;eu(this);const c=uN(i,s.bind(r),n);return u?eu(u):ks(),c}function cN(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function ys(e,t){if(!Ut(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),tn(e))ys(e.value,t);else if(Ie(e))for(let n=0;n<e.length;n++)ys(e[n],t);else if(PR(e)||Ga(e))e.forEach(n=>{ys(n,t)});else if(xR(e))for(const n in e)ys(e[n],t);return e}function Bj(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return pN(()=>{e.isMounted=!0}),vN(()=>{e.isUnmounting=!0}),e}const yr=[Function,Array],qj={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:yr,onEnter:yr,onAfterEnter:yr,onEnterCancelled:yr,onBeforeLeave:yr,onLeave:yr,onAfterLeave:yr,onLeaveCancelled:yr,onBeforeAppear:yr,onAppear:yr,onAfterAppear:yr,onAppearCancelled:yr},setup(e,{slots:t}){const n=RV(),r=Bj();let i;return()=>{const s=t.default&&fN(t.default(),!0);if(!s||!s.length)return;const u=$e(e),{mode:c}=u,l=s[0];if(r.isLeaving)return ey(l);const h=ZS(l);if(!h)return ey(l);const d=zy(h,u,r,n);Qy(h,d);const v=n.subTree,m=v&&ZS(v);let y=!1;const{getTransitionKey:w}=h.type;if(w){const E=w();i===void 0?i=E:E!==i&&(i=E,y=!0)}if(m&&m.type!==yi&&(!ps(h,m)||y)){const E=zy(m,u,r,n);if(Qy(m,E),c==="out-in")return r.isLeaving=!0,E.afterLeave=()=>{r.isLeaving=!1,n.update()},ey(l);c==="in-out"&&h.type!==yi&&(E.delayLeave=(T,k,P)=>{const M=lN(r,m);M[String(m.key)]=m,T._leaveCb=()=>{k(),T._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=P})}return l}}},Kj=qj;function lN(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function zy(e,t,n,r){const{appear:i,mode:s,persisted:u=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:v,onLeave:m,onAfterLeave:y,onLeaveCancelled:w,onBeforeAppear:E,onAppear:T,onAfterAppear:k,onAppearCancelled:P}=t,M=String(e.key),K=lN(n,e),Q=(re,te)=>{re&&Sr(re,r,9,te)},F={mode:s,persisted:u,beforeEnter(re){let te=c;if(!n.isMounted)if(i)te=E||c;else return;re._leaveCb&&re._leaveCb(!0);const Ee=K[M];Ee&&ps(e,Ee)&&Ee.el._leaveCb&&Ee.el._leaveCb(),Q(te,[re])},enter(re){let te=l,Ee=h,N=d;if(!n.isMounted)if(i)te=T||l,Ee=k||h,N=P||d;else return;let _t=!1;const Et=re._enterCb=Qr=>{_t||(_t=!0,Qr?Q(N,[re]):Q(Ee,[re]),F.delayedLeave&&F.delayedLeave(),re._enterCb=void 0)};te?(te(re,Et),te.length<=1&&Et()):Et()},leave(re,te){const Ee=String(e.key);if(re._enterCb&&re._enterCb(!0),n.isUnmounting)return te();Q(v,[re]);let N=!1;const _t=re._leaveCb=Et=>{N||(N=!0,te(),Et?Q(w,[re]):Q(y,[re]),re._leaveCb=void 0,K[Ee]===e&&delete K[Ee])};K[Ee]=e,m?(m(re,_t),m.length<=1&&_t()):_t()},clone(re){return zy(re,t,n,r)}};return F}function ey(e){if(pp(e))return e=Za(e),e.children=null,e}function ZS(e){return pp(e)?e.children?e.children[0]:void 0:e}function Qy(e,t){e.shapeFlag&6&&e.component?Qy(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function fN(e,t=!1){let n=[],r=0;for(let i=0;i<e.length;i++){const s=e[i];s.type===ai?(s.patchFlag&128&&r++,n=n.concat(fN(s.children,t))):(t||s.type!==yi)&&n.push(s)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function hN(e){return Pe(e)?{setup:e,name:e.name}:e}const Yy=e=>!!e.type.__asyncLoader,pp=e=>e.type.__isKeepAlive;function Hj(e,t){dN(e,"a",t)}function Wj(e,t){dN(e,"da",t)}function dN(e,t,n=Wt){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(vp(t,r,n),n){let i=n.parent;for(;i&&i.parent;)pp(i.parent.vnode)&&Gj(r,t,n,i),i=i.parent}}function Gj(e,t,n,r){const i=vp(t,e,r,!0);gN(()=>{yw(r[t],i)},n)}function vp(e,t,n=Wt,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...u)=>{if(n.isUnmounted)return;Ru(),eu(n);const c=Sr(t,n,e,u);return ks(),Nu(),c});return r?i.unshift(s):i.push(s),s}}const Wi=e=>(t,n=Wt)=>(!gl||e==="sp")&&vp(e,t,n),$j=Wi("bm"),pN=Wi("m"),zj=Wi("bu"),Qj=Wi("u"),vN=Wi("bum"),gN=Wi("um"),Yj=Wi("sp"),Xj=Wi("rtg"),Jj=Wi("rtc");function Zj(e,t=Wt){vp("ec",e,t)}let Xy=!0;function eV(e){const t=yN(e),n=e.proxy,r=e.ctx;Xy=!1,t.beforeCreate&&eC(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:u,watch:c,provide:l,inject:h,created:d,beforeMount:v,mounted:m,beforeUpdate:y,updated:w,activated:E,deactivated:T,beforeDestroy:k,beforeUnmount:P,destroyed:M,unmounted:K,render:Q,renderTracked:F,renderTriggered:re,errorCaptured:te,serverPrefetch:Ee,expose:N,inheritAttrs:_t,components:Et,directives:Qr,filters:Yr}=t;if(h&&tV(h,r,null,e.appContext.config.unwrapInjectedRef),u)for(const Qe in u){const Ae=u[Qe];Pe(Ae)&&(r[Qe]=Ae.bind(n))}if(i){const Qe=i.call(n,n);Ut(Qe)&&(e.data=Gl(Qe))}if(Xy=!0,s)for(const Qe in s){const Ae=s[Qe],ln=Pe(Ae)?Ae.bind(n,n):Pe(Ae.get)?Ae.get.bind(n,n):Hr,Qn=!Pe(Ae)&&Pe(Ae.set)?Ae.set.bind(n):Hr,Yn=ci({get:ln,set:Qn});Object.defineProperty(r,Qe,{enumerable:!0,configurable:!0,get:()=>Yn.value,set:Xn=>Yn.value=Xn})}if(c)for(const Qe in c)mN(c[Qe],r,n,Qe);if(l){const Qe=Pe(l)?l.call(n):l;Reflect.ownKeys(Qe).forEach(Ae=>{Yh(Ae,Qe[Ae])})}d&&eC(d,e,"c");function ct(Qe,Ae){Ie(Ae)?Ae.forEach(ln=>Qe(ln.bind(n))):Ae&&Qe(Ae.bind(n))}if(ct($j,v),ct(pN,m),ct(zj,y),ct(Qj,w),ct(Hj,E),ct(Wj,T),ct(Zj,te),ct(Jj,F),ct(Xj,re),ct(vN,P),ct(gN,K),ct(Yj,Ee),Ie(N))if(N.length){const Qe=e.exposed||(e.exposed={});N.forEach(Ae=>{Object.defineProperty(Qe,Ae,{get:()=>n[Ae],set:ln=>n[Ae]=ln})})}else e.exposed||(e.exposed={});Q&&e.render===Hr&&(e.render=Q),_t!=null&&(e.inheritAttrs=_t),Et&&(e.components=Et),Qr&&(e.directives=Qr)}function tV(e,t,n=Hr,r=!1){Ie(e)&&(e=Jy(e));for(const i in e){const s=e[i];let u;Ut(s)?"default"in s?u=Eo(s.from||i,s.default,!0):u=Eo(s.from||i):u=Eo(s),tn(u)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>u.value,set:c=>u.value=c}):t[i]=u}}function eC(e,t,n){Sr(Ie(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function mN(e,t,n,r){const i=r.includes(".")?cN(n,r):()=>n[r];if(Qt(e)){const s=t[e];Pe(s)&&Xh(i,s)}else if(Pe(e))Xh(i,e.bind(n));else if(Ut(e))if(Ie(e))e.forEach(s=>mN(s,t,n,r));else{const s=Pe(e.handler)?e.handler.bind(n):t[e.handler];Pe(s)&&Xh(i,s,e)}}function yN(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:u}}=e.appContext,c=s.get(t);let l;return c?l=c:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(h=>hd(l,h,u,!0)),hd(l,t,u)),s.set(t,l),l}function hd(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&hd(e,s,n,!0),i&&i.forEach(u=>hd(e,u,n,!0));for(const u in t)if(!(r&&u==="expose")){const c=nV[u]||n&&n[u];e[u]=c?c(e[u],t[u]):t[u]}return e}const nV={data:tC,props:ls,emits:ls,methods:ls,computed:ls,beforeCreate:kn,created:kn,beforeMount:kn,mounted:kn,beforeUpdate:kn,updated:kn,beforeDestroy:kn,beforeUnmount:kn,destroyed:kn,unmounted:kn,activated:kn,deactivated:kn,errorCaptured:kn,serverPrefetch:kn,components:ls,directives:ls,watch:iV,provide:tC,inject:rV};function tC(e,t){return t?e?function(){return _n(Pe(e)?e.call(this,this):e,Pe(t)?t.call(this,this):t)}:t:e}function rV(e,t){return ls(Jy(e),Jy(t))}function Jy(e){if(Ie(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function kn(e,t){return e?[...new Set([].concat(e,t))]:t}function ls(e,t){return e?_n(_n(Object.create(null),e),t):t}function iV(e,t){if(!e)return t;if(!t)return e;const n=_n(Object.create(null),e);for(const r in t)n[r]=kn(e[r],t[r]);return n}function oV(e,t,n,r=!1){const i={},s={};cd(s,gp,1),e.propsDefaults=Object.create(null),_N(e,t,i,s);for(const u in e.propsOptions[0])u in i||(i[u]=void 0);n?e.props=r?i:wj(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function sV(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:u}}=e,c=$e(i),[l]=e.propsOptions;let h=!1;if((r||u>0)&&!(u&16)){if(u&8){const d=e.vnode.dynamicProps;for(let v=0;v<d.length;v++){let m=d[v];const y=t[m];if(l)if(Ke(s,m))y!==s[m]&&(s[m]=y,h=!0);else{const w=mi(m);i[w]=Zy(l,c,w,y,e,!1)}else y!==s[m]&&(s[m]=y,h=!0)}}}else{_N(e,t,i,s)&&(h=!0);let d;for(const v in c)(!t||!Ke(t,v)&&((d=ku(v))===v||!Ke(t,d)))&&(l?n&&(n[v]!==void 0||n[d]!==void 0)&&(i[v]=Zy(l,c,v,void 0,e,!0)):delete i[v]);if(s!==c)for(const v in s)(!t||!Ke(t,v)&&!0)&&(delete s[v],h=!0)}h&&Vi(e,"set","$attrs")}function _N(e,t,n,r){const[i,s]=e.propsOptions;let u=!1,c;if(t)for(let l in t){if(zh(l))continue;const h=t[l];let d;i&&Ke(i,d=mi(l))?!s||!s.includes(d)?n[d]=h:(c||(c={}))[d]=h:Nw(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,u=!0)}if(s){const l=$e(n),h=c||ot;for(let d=0;d<s.length;d++){const v=s[d];n[v]=Zy(i,l,v,h[v],e,!Ke(h,v))}}return u}function Zy(e,t,n,r,i,s){const u=e[n];if(u!=null){const c=Ke(u,"default");if(c&&r===void 0){const l=u.default;if(u.type!==Function&&Pe(l)){const{propsDefaults:h}=i;n in h?r=h[n]:(eu(i),r=h[n]=l.call(null,t),ks())}else r=l}u[0]&&(s&&!c?r=!1:u[1]&&(r===""||r===ku(n))&&(r=!0))}return r}function wN(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,u={},c=[];let l=!1;if(!Pe(e)){const d=v=>{l=!0;const[m,y]=wN(v,t,!0);_n(u,m),y&&c.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!s&&!l)return r.set(e,Wa),Wa;if(Ie(s))for(let d=0;d<s.length;d++){const v=mi(s[d]);nC(v)&&(u[v]=ot)}else if(s)for(const d in s){const v=mi(d);if(nC(v)){const m=s[d],y=u[v]=Ie(m)||Pe(m)?{type:m}:m;if(y){const w=oC(Boolean,y.type),E=oC(String,y.type);y[0]=w>-1,y[1]=E<0||w<E,(w>-1||Ke(y,"default"))&&c.push(v)}}}const h=[u,c];return r.set(e,h),h}function nC(e){return e[0]!=="$"}function rC(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function iC(e,t){return rC(e)===rC(t)}function oC(e,t){return Ie(t)?t.findIndex(n=>iC(n,e)):Pe(t)&&iC(t,e)?0:-1}const bN=e=>e[0]==="_"||e==="$stable",Pw=e=>Ie(e)?e.map(ui):[ui(e)],aV=(e,t,n)=>{const r=Dj((...i)=>Pw(t(...i)),n);return r._c=!1,r},EN=(e,t,n)=>{const r=e._ctx;for(const i in e){if(bN(i))continue;const s=e[i];if(Pe(s))t[i]=aV(i,s,r);else if(s!=null){const u=Pw(s);t[i]=()=>u}}},TN=(e,t)=>{const n=Pw(t);e.slots.default=()=>n},uV=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=$e(t),cd(t,"_",n)):EN(t,e.slots={})}else e.slots={},t&&TN(e,t);cd(e.slots,gp,1)},cV=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,u=ot;if(r.shapeFlag&32){const c=t._;c?n&&c===1?s=!1:(_n(i,t),!n&&c===1&&delete i._):(s=!t.$stable,EN(t,i)),u=t}else t&&(TN(e,t),u={default:1});if(s)for(const c in i)!bN(c)&&!(c in u)&&delete i[c]};function OJ(e,t){const n=_r;if(n===null)return e;const r=n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[u,c,l,h=ot]=t[s];Pe(u)&&(u={mounted:u,updated:u}),u.deep&&ys(c),i.push({dir:u,instance:r,value:c,oldValue:void 0,arg:l,modifiers:h})}return e}function ss(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let u=0;u<i.length;u++){const c=i[u];s&&(c.oldValue=s[u].value);let l=c.dir[r];l&&(Ru(),Sr(l,n,8,[e.el,c,e,t]),Nu())}}function IN(){return{app:null,config:{isNativeTag:VU,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lV=0;function fV(e,t){return function(r,i=null){i!=null&&!Ut(i)&&(i=null);const s=IN(),u=new Set;let c=!1;const l=s.app={_uid:lV++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:LV,get config(){return s.config},set config(h){},use(h,...d){return u.has(h)||(h&&Pe(h.install)?(u.add(h),h.install(l,...d)):Pe(h)&&(u.add(h),h(l,...d))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,d){return d?(s.components[h]=d,l):s.components[h]},directive(h,d){return d?(s.directives[h]=d,l):s.directives[h]},mount(h,d,v){if(!c){const m=Kn(r,i);return m.appContext=s,d&&t?t(m,h):e(m,h,v),c=!0,l._container=h,h.__vue_app__=l,xw(m.component)||m.component.proxy}},unmount(){c&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,d){return s.provides[h]=d,l}};return l}}function e_(e,t,n,r,i=!1){if(Ie(e)){e.forEach((m,y)=>e_(m,t&&(Ie(t)?t[y]:t),n,r,i));return}if(Yy(r)&&!i)return;const s=r.shapeFlag&4?xw(r.component)||r.component.proxy:r.el,u=i?null:s,{i:c,r:l}=e,h=t&&t.r,d=c.refs===ot?c.refs={}:c.refs,v=c.setupState;if(h!=null&&h!==l&&(Qt(h)?(d[h]=null,Ke(v,h)&&(v[h]=null)):tn(h)&&(h.value=null)),Pe(l))bo(l,c,12,[u,d]);else{const m=Qt(l),y=tn(l);if(m||y){const w=()=>{if(e.f){const E=m?d[l]:l.value;i?Ie(E)&&yw(E,s):Ie(E)?E.includes(s)||E.push(s):m?d[l]=[s]:(l.value=[s],e.k&&(d[e.k]=l.value))}else m?(d[l]=u,Ke(v,l)&&(v[l]=u)):tn(l)&&(l.value=u,e.k&&(d[e.k]=u))};u?(w.id=-1,qn(w,n)):w()}}}const qn=jj;function hV(e){return dV(e)}function dV(e,t){const n=GU();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:u,createText:c,createComment:l,setText:h,setElementText:d,parentNode:v,nextSibling:m,setScopeId:y=Hr,cloneNode:w,insertStaticContent:E}=e,T=(S,R,D,L=null,j=null,W=null,ne=!1,$=null,Y=!!R.dynamicChildren)=>{if(S===R)return;S&&!ps(S,R)&&(L=J(S),Tn(S,j,W,!0),S=null),R.patchFlag===-2&&(Y=!1,R.dynamicChildren=null);const{type:q,ref:de,shapeFlag:ue}=R;switch(q){case Ow:k(S,R,D,L);break;case yi:P(S,R,D,L);break;case Jh:S==null&&M(R,D,L,ne);break;case ai:Qr(S,R,D,L,j,W,ne,$,Y);break;default:ue&1?F(S,R,D,L,j,W,ne,$,Y):ue&6?Yr(S,R,D,L,j,W,ne,$,Y):(ue&64||ue&128)&&q.process(S,R,D,L,j,W,ne,$,Y,et)}de!=null&&j&&e_(de,S&&S.ref,W,R||S,!R)},k=(S,R,D,L)=>{if(S==null)r(R.el=c(R.children),D,L);else{const j=R.el=S.el;R.children!==S.children&&h(j,R.children)}},P=(S,R,D,L)=>{S==null?r(R.el=l(R.children||""),D,L):R.el=S.el},M=(S,R,D,L)=>{[S.el,S.anchor]=E(S.children,R,D,L,S.el,S.anchor)},K=({el:S,anchor:R},D,L)=>{let j;for(;S&&S!==R;)j=m(S),r(S,D,L),S=j;r(R,D,L)},Q=({el:S,anchor:R})=>{let D;for(;S&&S!==R;)D=m(S),i(S),S=D;i(R)},F=(S,R,D,L,j,W,ne,$,Y)=>{ne=ne||R.type==="svg",S==null?re(R,D,L,j,W,ne,$,Y):N(S,R,j,W,ne,$,Y)},re=(S,R,D,L,j,W,ne,$)=>{let Y,q;const{type:de,props:ue,shapeFlag:pe,transition:_e,patchFlag:ce,dirs:tt}=S;if(S.el&&w!==void 0&&ce===-1)Y=S.el=w(S.el);else{if(Y=S.el=u(S.type,W,ue&&ue.is,ue),pe&8?d(Y,S.children):pe&16&&Ee(S.children,Y,null,L,j,W&&de!=="foreignObject",ne,$),tt&&ss(S,null,L,"created"),ue){for(const nt in ue)nt!=="value"&&!zh(nt)&&s(Y,nt,null,ue[nt],W,S.children,L,j,X);"value"in ue&&s(Y,"value",null,ue.value),(q=ue.onVnodeBeforeMount)&&oi(q,L,S)}te(Y,S,S.scopeId,ne,L)}tt&&ss(S,null,L,"beforeMount");const Ve=(!j||j&&!j.pendingBranch)&&_e&&!_e.persisted;Ve&&_e.beforeEnter(Y),r(Y,R,D),((q=ue&&ue.onVnodeMounted)||Ve||tt)&&qn(()=>{q&&oi(q,L,S),Ve&&_e.enter(Y),tt&&ss(S,null,L,"mounted")},j)},te=(S,R,D,L,j)=>{if(D&&y(S,D),L)for(let W=0;W<L.length;W++)y(S,L[W]);if(j){let W=j.subTree;if(R===W){const ne=j.vnode;te(S,ne,ne.scopeId,ne.slotScopeIds,j.parent)}}},Ee=(S,R,D,L,j,W,ne,$,Y=0)=>{for(let q=Y;q<S.length;q++){const de=S[q]=$?fo(S[q]):ui(S[q]);T(null,de,R,D,L,j,W,ne,$)}},N=(S,R,D,L,j,W,ne)=>{const $=R.el=S.el;let{patchFlag:Y,dynamicChildren:q,dirs:de}=R;Y|=S.patchFlag&16;const ue=S.props||ot,pe=R.props||ot;let _e;D&&as(D,!1),(_e=pe.onVnodeBeforeUpdate)&&oi(_e,D,R,S),de&&ss(R,S,D,"beforeUpdate"),D&&as(D,!0);const ce=j&&R.type!=="foreignObject";if(q?_t(S.dynamicChildren,q,$,D,L,ce,W):ne||ln(S,R,$,null,D,L,ce,W,!1),Y>0){if(Y&16)Et($,R,ue,pe,D,L,j);else if(Y&2&&ue.class!==pe.class&&s($,"class",null,pe.class,j),Y&4&&s($,"style",ue.style,pe.style,j),Y&8){const tt=R.dynamicProps;for(let Ve=0;Ve<tt.length;Ve++){const nt=tt[Ve],Fn=ue[nt],at=pe[nt];(at!==Fn||nt==="value")&&s($,nt,Fn,at,j,S.children,D,L,X)}}Y&1&&S.children!==R.children&&d($,R.children)}else!ne&&q==null&&Et($,R,ue,pe,D,L,j);((_e=pe.onVnodeUpdated)||de)&&qn(()=>{_e&&oi(_e,D,R,S),de&&ss(R,S,D,"updated")},L)},_t=(S,R,D,L,j,W,ne)=>{for(let $=0;$<R.length;$++){const Y=S[$],q=R[$],de=Y.el&&(Y.type===ai||!ps(Y,q)||Y.shapeFlag&70)?v(Y.el):D;T(Y,q,de,null,L,j,W,ne,!0)}},Et=(S,R,D,L,j,W,ne)=>{if(D!==L){for(const $ in L){if(zh($))continue;const Y=L[$],q=D[$];Y!==q&&$!=="value"&&s(S,$,q,Y,ne,R.children,j,W,X)}if(D!==ot)for(const $ in D)!zh($)&&!($ in L)&&s(S,$,D[$],null,ne,R.children,j,W,X);"value"in L&&s(S,"value",D.value,L.value)}},Qr=(S,R,D,L,j,W,ne,$,Y)=>{const q=R.el=S?S.el:c(""),de=R.anchor=S?S.anchor:c("");let{patchFlag:ue,dynamicChildren:pe,slotScopeIds:_e}=R;_e&&($=$?$.concat(_e):_e),S==null?(r(q,D,L),r(de,D,L),Ee(R.children,D,de,j,W,ne,$,Y)):ue>0&&ue&64&&pe&&S.dynamicChildren?(_t(S.dynamicChildren,pe,D,j,W,ne,$),(R.key!=null||j&&R===j.subTree)&&SN(S,R,!0)):ln(S,R,D,de,j,W,ne,$,Y)},Yr=(S,R,D,L,j,W,ne,$,Y)=>{R.slotScopeIds=$,S==null?R.shapeFlag&512?j.ctx.activate(R,D,L,ne,Y):dr(R,D,L,j,W,ne,Y):ct(S,R,Y)},dr=(S,R,D,L,j,W,ne)=>{const $=S.component=kV(S,L,j);if(pp(S)&&($.ctx.renderer=et),NV($),$.asyncDep){if(j&&j.registerDep($,Qe),!S.el){const Y=$.subTree=Kn(yi);P(null,Y,R,D)}return}Qe($,S,R,D,j,W,ne)},ct=(S,R,D)=>{const L=R.component=S.component;if(Lj(S,R,D))if(L.asyncDep&&!L.asyncResolved){Ae(L,R,D);return}else L.next=R,Rj(L.update),L.update();else R.component=S.component,R.el=S.el,L.vnode=R},Qe=(S,R,D,L,j,W,ne)=>{const $=()=>{if(S.isMounted){let{next:de,bu:ue,u:pe,parent:_e,vnode:ce}=S,tt=de,Ve;as(S,!1),de?(de.el=ce.el,Ae(S,de,ne)):de=ce,ue&&Qh(ue),(Ve=de.props&&de.props.onVnodeBeforeUpdate)&&oi(Ve,_e,de,ce),as(S,!0);const nt=Zm(S),Fn=S.subTree;S.subTree=nt,T(Fn,nt,v(Fn.el),J(Fn),S,j,W),de.el=nt.el,tt===null&&Fj(S,nt.el),pe&&qn(pe,j),(Ve=de.props&&de.props.onVnodeUpdated)&&qn(()=>oi(Ve,_e,de,ce),j)}else{let de;const{el:ue,props:pe}=R,{bm:_e,m:ce,parent:tt}=S,Ve=Yy(R);if(as(S,!1),_e&&Qh(_e),!Ve&&(de=pe&&pe.onVnodeBeforeMount)&&oi(de,tt,R),as(S,!0),ue&&Ce){const nt=()=>{S.subTree=Zm(S),Ce(ue,S.subTree,S,j,null)};Ve?R.type.__asyncLoader().then(()=>!S.isUnmounted&&nt()):nt()}else{const nt=S.subTree=Zm(S);T(null,nt,D,L,S,j,W),R.el=nt.el}if(ce&&qn(ce,j),!Ve&&(de=pe&&pe.onVnodeMounted)){const nt=R;qn(()=>oi(de,tt,nt),j)}R.shapeFlag&256&&S.a&&qn(S.a,j),S.isMounted=!0,R=D=L=null}},Y=S.effect=new Ew($,()=>tN(S.update),S.scope),q=S.update=Y.run.bind(Y);q.id=S.uid,as(S,!0),q()},Ae=(S,R,D)=>{R.component=S;const L=S.vnode.props;S.vnode=R,S.next=null,sV(S,R.props,L,D),cV(S,R.children,D),Ru(),Rw(void 0,S.update),Nu()},ln=(S,R,D,L,j,W,ne,$,Y=!1)=>{const q=S&&S.children,de=S?S.shapeFlag:0,ue=R.children,{patchFlag:pe,shapeFlag:_e}=R;if(pe>0){if(pe&128){Yn(q,ue,D,L,j,W,ne,$,Y);return}else if(pe&256){Qn(q,ue,D,L,j,W,ne,$,Y);return}}_e&8?(de&16&&X(q,j,W),ue!==q&&d(D,ue)):de&16?_e&16?Yn(q,ue,D,L,j,W,ne,$,Y):X(q,j,W,!0):(de&8&&d(D,""),_e&16&&Ee(ue,D,L,j,W,ne,$,Y))},Qn=(S,R,D,L,j,W,ne,$,Y)=>{S=S||Wa,R=R||Wa;const q=S.length,de=R.length,ue=Math.min(q,de);let pe;for(pe=0;pe<ue;pe++){const _e=R[pe]=Y?fo(R[pe]):ui(R[pe]);T(S[pe],_e,D,null,j,W,ne,$,Y)}q>de?X(S,j,W,!0,!1,ue):Ee(R,D,L,j,W,ne,$,Y,ue)},Yn=(S,R,D,L,j,W,ne,$,Y)=>{let q=0;const de=R.length;let ue=S.length-1,pe=de-1;for(;q<=ue&&q<=pe;){const _e=S[q],ce=R[q]=Y?fo(R[q]):ui(R[q]);if(ps(_e,ce))T(_e,ce,D,null,j,W,ne,$,Y);else break;q++}for(;q<=ue&&q<=pe;){const _e=S[ue],ce=R[pe]=Y?fo(R[pe]):ui(R[pe]);if(ps(_e,ce))T(_e,ce,D,null,j,W,ne,$,Y);else break;ue--,pe--}if(q>ue){if(q<=pe){const _e=pe+1,ce=_e<de?R[_e].el:L;for(;q<=pe;)T(null,R[q]=Y?fo(R[q]):ui(R[q]),D,ce,j,W,ne,$,Y),q++}}else if(q>pe)for(;q<=ue;)Tn(S[q],j,W,!0),q++;else{const _e=q,ce=q,tt=new Map;for(q=ce;q<=pe;q++){const fn=R[q]=Y?fo(R[q]):ui(R[q]);fn.key!=null&&tt.set(fn.key,q)}let Ve,nt=0;const Fn=pe-ce+1;let at=!1,Yu=0;const Jn=new Array(Fn);for(q=0;q<Fn;q++)Jn[q]=0;for(q=_e;q<=ue;q++){const fn=S[q];if(nt>=Fn){Tn(fn,j,W,!0);continue}let lt;if(fn.key!=null)lt=tt.get(fn.key);else for(Ve=ce;Ve<=pe;Ve++)if(Jn[Ve-ce]===0&&ps(fn,R[Ve])){lt=Ve;break}lt===void 0?Tn(fn,j,W,!0):(Jn[lt-ce]=q+1,lt>=Yu?Yu=lt:at=!0,T(fn,R[lt],D,null,j,W,ne,$,Y),nt++)}const Pr=at?pV(Jn):Wa;for(Ve=Pr.length-1,q=Fn-1;q>=0;q--){const fn=ce+q,lt=R[fn],Xu=fn+1<de?R[fn+1].el:L;Jn[q]===0?T(null,lt,D,Xu,j,W,ne,$,Y):at&&(Ve<0||q!==Pr[Ve]?Xn(lt,D,Xu,2):Ve--)}}},Xn=(S,R,D,L,j=null)=>{const{el:W,type:ne,transition:$,children:Y,shapeFlag:q}=S;if(q&6){Xn(S.component.subTree,R,D,L);return}if(q&128){S.suspense.move(R,D,L);return}if(q&64){ne.move(S,R,D,et);return}if(ne===ai){r(W,R,D);for(let ue=0;ue<Y.length;ue++)Xn(Y[ue],R,D,L);r(S.anchor,R,D);return}if(ne===Jh){K(S,R,D);return}if(L!==2&&q&1&&$)if(L===0)$.beforeEnter(W),r(W,R,D),qn(()=>$.enter(W),j);else{const{leave:ue,delayLeave:pe,afterLeave:_e}=$,ce=()=>r(W,R,D),tt=()=>{ue(W,()=>{ce(),_e&&_e()})};pe?pe(W,ce,tt):tt()}else r(W,R,D)},Tn=(S,R,D,L=!1,j=!1)=>{const{type:W,props:ne,ref:$,children:Y,dynamicChildren:q,shapeFlag:de,patchFlag:ue,dirs:pe}=S;if($!=null&&e_($,null,D,S,!0),de&256){R.ctx.deactivate(S);return}const _e=de&1&&pe,ce=!Yy(S);let tt;if(ce&&(tt=ne&&ne.onVnodeBeforeUnmount)&&oi(tt,R,S),de&6)se(S.component,D,L);else{if(de&128){S.suspense.unmount(D,L);return}_e&&ss(S,null,R,"beforeUnmount"),de&64?S.type.remove(S,R,D,j,et,L):q&&(W!==ai||ue>0&&ue&64)?X(q,R,D,!1,!0):(W===ai&&ue&384||!j&&de&16)&&X(Y,R,D),L&&aa(S)}(ce&&(tt=ne&&ne.onVnodeUnmounted)||_e)&&qn(()=>{tt&&oi(tt,R,S),_e&&ss(S,null,R,"unmounted")},D)},aa=S=>{const{type:R,el:D,anchor:L,transition:j}=S;if(R===ai){U(D,L);return}if(R===Jh){Q(S);return}const W=()=>{i(D),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(S.shapeFlag&1&&j&&!j.persisted){const{leave:ne,delayLeave:$}=j,Y=()=>ne(D,W);$?$(S.el,W,Y):Y()}else W()},U=(S,R)=>{let D;for(;S!==R;)D=m(S),i(S),S=D;i(R)},se=(S,R,D)=>{const{bum:L,scope:j,update:W,subTree:ne,um:$}=S;L&&Qh(L),j.stop(),W&&(W.active=!1,Tn(ne,S,R,D)),$&&qn($,R),qn(()=>{S.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},X=(S,R,D,L=!1,j=!1,W=0)=>{for(let ne=W;ne<S.length;ne++)Tn(S[ne],R,D,L,j)},J=S=>S.shapeFlag&6?J(S.component.subTree):S.shapeFlag&128?S.suspense.next():m(S.anchor||S.el),Ye=(S,R,D)=>{S==null?R._vnode&&Tn(R._vnode,null,null,!0):T(R._vnode||null,S,R,null,null,null,D),iN(),R._vnode=S},et={p:T,um:Tn,m:Xn,r:aa,mt:dr,mc:Ee,pc:ln,pbc:_t,n:J,o:e};let Se,Ce;return t&&([Se,Ce]=t(et)),{render:Ye,hydrate:Se,createApp:fV(Ye,Se)}}function as({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function SN(e,t,n=!1){const r=e.children,i=t.children;if(Ie(r)&&Ie(i))for(let s=0;s<r.length;s++){const u=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=fo(i[s]),c.el=u.el),n||SN(u,c))}}function pV(e){const t=e.slice(),n=[0];let r,i,s,u,c;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(i=n[n.length-1],e[i]<h){t[r]=i,n.push(r);continue}for(s=0,u=n.length-1;s<u;)c=s+u>>1,e[n[c]]<h?s=c+1:u=c;h<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,u=n[s-1];s-- >0;)n[s]=u,u=t[u];return n}const vV=e=>e.__isTeleport,CN="components";function DJ(e,t){return mV(CN,e,!0,t)||e}const gV=Symbol();function mV(e,t,n=!0,r=!1){const i=_r||Wt;if(i){const s=i.type;if(e===CN){const c=xV(s);if(c&&(c===t||c===mi(t)||c===fp(mi(t))))return s}const u=sC(i[e]||s[e],t)||sC(i.appContext[e],t);return!u&&r?s:u}}function sC(e,t){return e&&(e[t]||e[mi(t)]||e[fp(mi(t))])}const ai=Symbol(void 0),Ow=Symbol(void 0),yi=Symbol(void 0),Jh=Symbol(void 0),Qc=[];let As=null;function yV(e=!1){Qc.push(As=e?null:[])}function _V(){Qc.pop(),As=Qc[Qc.length-1]||null}let dd=1;function aC(e){dd+=e}function AN(e){return e.dynamicChildren=dd>0?As||Wa:null,_V(),dd>0&&As&&As.push(e),e}function xJ(e,t,n,r,i,s){return AN(RN(e,t,n,r,i,s,!0))}function wV(e,t,n,r,i){return AN(Kn(e,t,n,r,i,!0))}function t_(e){return e?e.__v_isVNode===!0:!1}function ps(e,t){return e.type===t.type&&e.key===t.key}const gp="__vInternal",kN=({key:e})=>e!=null?e:null,Zh=({ref:e,ref_key:t,ref_for:n})=>e!=null?Qt(e)||tn(e)||Pe(e)?{i:_r,r:e,k:t,f:!!n}:e:null;function RN(e,t=null,n=null,r=0,i=null,s=e===ai?0:1,u=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&kN(t),ref:t&&Zh(t),scopeId:aN,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return c?(Dw(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=Qt(n)?8:16),dd>0&&!u&&As&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&As.push(l),l}const Kn=bV;function bV(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===gV)&&(e=yi),t_(e)){const c=Za(e,t,!0);return n&&Dw(c,n),c}if(MV(e)&&(e=e.__vccOpts),t){t=EV(t);let{class:c,style:l}=t;c&&!Qt(c)&&(t.class=gw(c)),Ut(l)&&($R(l)&&!Ie(l)&&(l=_n({},l)),t.style=vw(l))}const u=Qt(e)?1:Uj(e)?128:vV(e)?64:Ut(e)?4:Pe(e)?2:0;return RN(e,t,n,r,i,u,s,!0)}function EV(e){return e?$R(e)||gp in e?_n({},e):e:null}function Za(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:u}=e,c=t?IV(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&kN(c),ref:t&&t.ref?n&&i?Ie(i)?i.concat(Zh(t)):[i,Zh(t)]:Zh(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ai?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Za(e.ssContent),ssFallback:e.ssFallback&&Za(e.ssFallback),el:e.el,anchor:e.anchor}}function TV(e=" ",t=0){return Kn(Ow,null,e,t)}function MJ(e,t){const n=Kn(Jh,null,e);return n.staticCount=t,n}function LJ(e="",t=!1){return t?(yV(),wV(yi,null,e)):Kn(yi,null,e)}function ui(e){return e==null||typeof e=="boolean"?Kn(yi):Ie(e)?Kn(ai,null,e.slice()):typeof e=="object"?fo(e):Kn(Ow,null,String(e))}function fo(e){return e.el===null||e.memo?e:Za(e)}function Dw(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ie(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Dw(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(gp in t)?t._ctx=_r:i===3&&_r&&(_r.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Pe(t)?(t={default:t,_ctx:_r},n=32):(t=String(t),r&64?(n=16,t=[TV(t)]):n=8);e.children=t,e.shapeFlag|=n}function IV(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=gw([t.class,r.class]));else if(i==="style")t.style=vw([t.style,r.style]);else if(up(i)){const s=t[i],u=r[i];u&&s!==u&&!(Ie(s)&&s.includes(u))&&(t[i]=s?[].concat(s,u):u)}else i!==""&&(t[i]=r[i])}return t}function oi(e,t,n,r=null){Sr(e,t,7,[n,r])}function FJ(e,t,n,r){let i;const s=n&&n[r];if(Ie(e)||Qt(e)){i=new Array(e.length);for(let u=0,c=e.length;u<c;u++)i[u]=t(e[u],u,void 0,s&&s[u])}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=t(u+1,u,void 0,s&&s[u])}else if(Ut(e))if(e[Symbol.iterator])i=Array.from(e,(u,c)=>t(u,c,void 0,s&&s[c]));else{const u=Object.keys(e);i=new Array(u.length);for(let c=0,l=u.length;c<l;c++){const h=u[c];i[c]=t(e[h],h,c,s&&s[c])}}else i=[];return n&&(n[r]=i),i}const n_=e=>e?NN(e)?xw(e)||e.proxy:n_(e.parent):null,pd=_n(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>n_(e.parent),$root:e=>n_(e.root),$emit:e=>e.emit,$options:e=>yN(e),$forceUpdate:e=>()=>tN(e.update),$nextTick:e=>eN.bind(e.proxy),$watch:e=>Vj.bind(e)}),SV={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:u,type:c,appContext:l}=e;let h;if(t[0]!=="$"){const y=u[t];if(y!==void 0)switch(y){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(r!==ot&&Ke(r,t))return u[t]=1,r[t];if(i!==ot&&Ke(i,t))return u[t]=2,i[t];if((h=e.propsOptions[0])&&Ke(h,t))return u[t]=3,s[t];if(n!==ot&&Ke(n,t))return u[t]=4,n[t];Xy&&(u[t]=0)}}const d=pd[t];let v,m;if(d)return t==="$attrs"&&cr(e,"get",t),d(e);if((v=c.__cssModules)&&(v=v[t]))return v;if(n!==ot&&Ke(n,t))return u[t]=4,n[t];if(m=l.config.globalProperties,Ke(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return i!==ot&&Ke(i,t)?(i[t]=n,!0):r!==ot&&Ke(r,t)?(r[t]=n,!0):Ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},u){let c;return!!n[u]||e!==ot&&Ke(e,u)||t!==ot&&Ke(t,u)||(c=s[0])&&Ke(c,u)||Ke(r,u)||Ke(pd,u)||Ke(i.config.globalProperties,u)},defineProperty(e,t,n){return n.get!=null?this.set(e,t,n.get(),null):n.value!=null&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},CV=IN();let AV=0;function kV(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||CV,s={uid:AV++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new $U(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wN(r,i),emitsOptions:sN(r,i),emit:null,emitted:null,propsDefaults:ot,inheritAttrs:r.inheritAttrs,ctx:ot,data:ot,props:ot,attrs:ot,slots:ot,refs:ot,setupState:ot,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Oj.bind(null,s),e.ce&&e.ce(s),s}let Wt=null;const RV=()=>Wt||_r,eu=e=>{Wt=e,e.scope.on()},ks=()=>{Wt&&Wt.scope.off(),Wt=null};function NN(e){return e.vnode.shapeFlag&4}let gl=!1;function NV(e,t=!1){gl=t;const{props:n,children:r}=e.vnode,i=NN(e);oV(e,n,i,t),uV(e,r);const s=i?PV(e,t):void 0;return gl=!1,s}function PV(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=zR(new Proxy(e.ctx,SV));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?DV(e):null;eu(e),Ru();const s=bo(r,e,0,[e.props,i]);if(Nu(),ks(),OR(s)){if(s.then(ks,ks),t)return s.then(u=>{uC(e,u,t)}).catch(u=>{dp(u,e,0)});e.asyncDep=s}else uC(e,s,t)}else PN(e,t)}function uC(e,t,n){Pe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ut(t)&&(e.setupState=JR(t)),PN(e,n)}let cC;function PN(e,t,n){const r=e.type;if(!e.render){if(!t&&cC&&!r.render){const i=r.template;if(i){const{isCustomElement:s,compilerOptions:u}=e.appContext.config,{delimiters:c,compilerOptions:l}=r,h=_n(_n({isCustomElement:s,delimiters:c},u),l);r.render=cC(i,h)}}e.render=r.render||Hr}eu(e),Ru(),eV(e),Nu(),ks()}function OV(e){return new Proxy(e.attrs,{get(t,n){return cr(e,"get","$attrs"),t[n]}})}function DV(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=OV(e))},slots:e.slots,emit:e.emit,expose:t}}function xw(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(JR(zR(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in pd)return pd[n](e)}}))}function xV(e){return Pe(e)&&e.displayName||e.name}function MV(e){return Pe(e)&&"__vccOpts"in e}const ci=(e,t)=>Cj(e,t,gl);function ON(e,t,n){const r=arguments.length;return r===2?Ut(t)&&!Ie(t)?t_(t)?Kn(e,null,[t]):Kn(e,t):Kn(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&t_(n)&&(n=[n]),Kn(e,t,n))}const LV="3.2.31",FV="http://www.w3.org/2000/svg",vs=typeof document!="undefined"?document:null,lC=vs&&vs.createElement("template"),UV={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?vs.createElementNS(FV,e):vs.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>vs.createTextNode(e),createComment:e=>vs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>vs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,i,s){const u=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{lC.innerHTML=r?`<svg>${e}</svg>`:e;const c=lC.content;if(r){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}t.insertBefore(c,n)}return[u?u.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function jV(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function VV(e,t,n){const r=e.style,i=Qt(n);if(n&&!i){for(const s in n)r_(r,s,n[s]);if(t&&!Qt(t))for(const s in t)n[s]==null&&r_(r,s,"")}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const fC=/\s*!important$/;function r_(e,t,n){if(Ie(n))n.forEach(r=>r_(e,t,r));else if(t.startsWith("--"))e.setProperty(t,n);else{const r=BV(e,t);fC.test(n)?e.setProperty(ku(r),n.replace(fC,""),"important"):e[r]=n}}const hC=["Webkit","Moz","ms"],ty={};function BV(e,t){const n=ty[t];if(n)return n;let r=mi(t);if(r!=="filter"&&r in e)return ty[t]=r;r=fp(r);for(let i=0;i<hC.length;i++){const s=hC[i]+r;if(s in e)return ty[t]=s}return t}const dC="http://www.w3.org/1999/xlink";function qV(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(dC,t.slice(6,t.length)):e.setAttributeNS(dC,t,n);else{const s=LU(t);n==null||s&&!RR(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function KV(e,t,n,r,i,s,u){if(t==="innerHTML"||t==="textContent"){r&&u(r,i,s),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const c=n==null?"":n;(e.value!==c||e.tagName==="OPTION")&&(e.value=c),n==null&&e.removeAttribute(t);return}if(n===""||n==null){const c=typeof e[t];if(c==="boolean"){e[t]=RR(n);return}else if(n==null&&c==="string"){e[t]="",e.removeAttribute(t);return}else if(c==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=n}catch{}}let vd=Date.now,DN=!1;if(typeof window!="undefined"){vd()>document.createEvent("Event").timeStamp&&(vd=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);DN=!!(e&&Number(e[1])<=53)}let i_=0;const HV=Promise.resolve(),WV=()=>{i_=0},GV=()=>i_||(HV.then(WV),i_=vd());function Ua(e,t,n,r){e.addEventListener(t,n,r)}function $V(e,t,n,r){e.removeEventListener(t,n,r)}function zV(e,t,n,r,i=null){const s=e._vei||(e._vei={}),u=s[t];if(r&&u)u.value=r;else{const[c,l]=QV(t);if(r){const h=s[t]=YV(r,i);Ua(e,c,h,l)}else u&&($V(e,c,u,l),s[t]=void 0)}}const pC=/(?:Once|Passive|Capture)$/;function QV(e){let t;if(pC.test(e)){t={};let n;for(;n=e.match(pC);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[ku(e.slice(2)),t]}function YV(e,t){const n=r=>{const i=r.timeStamp||vd();(DN||i>=n.attached-1)&&Sr(XV(r,n.value),t,5,[r])};return n.value=e,n.attached=GV(),n}function XV(e,t){if(Ie(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const vC=/^on[a-z]/,JV=(e,t,n,r,i=!1,s,u,c,l)=>{t==="class"?jV(e,r,i):t==="style"?VV(e,n,r):up(t)?mw(t)||zV(e,t,n,r,u):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ZV(e,t,r,i))?KV(e,t,r,s,u,c,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),qV(e,t,r,i))};function ZV(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&vC.test(t)&&Pe(n)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||vC.test(t)&&Qt(n)?!1:t in e}const e4={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Kj.props;const gC=e=>{const t=e.props["onUpdate:modelValue"];return Ie(t)?n=>Qh(t,n):t};function t4(e){e.target.composing=!0}function mC(e){const t=e.target;t.composing&&(t.composing=!1,n4(t,"input"))}function n4(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const UJ={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=gC(i);const s=r||i.props&&i.props.type==="number";Ua(e,t?"change":"input",u=>{if(u.target.composing)return;let c=e.value;n?c=c.trim():s&&(c=By(c)),e._assign(c)}),n&&Ua(e,"change",()=>{e.value=e.value.trim()}),t||(Ua(e,"compositionstart",t4),Ua(e,"compositionend",mC),Ua(e,"change",mC))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},s){if(e._assign=gC(s),e.composing||document.activeElement===e&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&By(e.value)===t))return;const u=t==null?"":t;e.value!==u&&(e.value=u)}},r4=_n({patchProp:JV},UV);let yC;function i4(){return yC||(yC=hV(r4))}const jJ=(...e)=>{const t=i4().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=o4(r);if(!i)return;const s=t._component;!Pe(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const u=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),u},t};function o4(e){return Qt(e)?document.querySelector(e):e}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var o_=function(e,t){return o_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},o_(e,t)};function ee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ge=function(){return ge=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ge.apply(this,arguments)};function A(e,t,n,r){function i(s){return s instanceof n?s:new n(function(u){u(s)})}return new(n||(n=Promise))(function(s,u){function c(d){try{h(r.next(d))}catch(v){u(v)}}function l(d){try{h(r.throw(d))}catch(v){u(v)}}function h(d){d.done?s(d.value):i(d.value).then(c,l)}h((r=r.apply(e,t||[])).next())})}function C(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(h){return function(d){return l([h,d])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(d){h=[6,d],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function zt(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nn(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],u;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){u={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return s}function Ne(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xN={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=function(e,t){if(!e)throw Pu(t)},Pu=function(e){return new Error("Firebase Database ("+xN.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MN=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},s4=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=e[n++],u=e[n++],c=e[n++],l=((i&7)<<18|(s&63)<<12|(u&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|u&63)}}return t.join("")},mp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],u=i+1<e.length,c=u?e[i+1]:0,l=i+2<e.length,h=l?e[i+2]:0,d=s>>2,v=(s&3)<<4|c>>4,m=(c&15)<<2|h>>6,y=h&63;l||(y=64,u||(m=64)),r.push(n[d],n[v],n[m],n[y])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(MN(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):s4(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],u=i<e.length,c=u?n[e.charAt(i)]:0;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;++i;var d=i<e.length,v=d?n[e.charAt(i)]:64;if(++i,s==null||c==null||h==null||v==null)throw Error();var m=s<<2|c>>4;if(r.push(m),h!==64){var y=c<<4&240|h>>2;if(r.push(y),v!==64){var w=h<<6&192|v;r.push(w)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},LN=function(e){var t=MN(e);return mp.encodeByteArray(t,!0)},_C=function(e){return LN(e).replace(/\./g,"")},wC=function(e){try{return mp.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(e){return ml(void 0,e)}function ml(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!a4(r)||(e[r]=ml(e[r],t[r]));return e}function a4(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,i))}},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var u=ge({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),c="";return[_C(JSON.stringify(n)),_C(JSON.stringify(u)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lw(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ms())}function UN(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function u4(){return typeof self=="object"&&self.self===self}function Fw(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function jN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c4(){return Ms().indexOf("Electron/")>=0}function l4(){var e=Ms();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function f4(){return Ms().indexOf("MSAppHost/")>=0}function VN(){return xN.NODE_ADMIN===!0}function h4(){return!UN()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $l(){return"indexedDB"in self&&indexedDB!=null}function Uw(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(s){t(s)}})}function BN(){return!(!navigator||!navigator.cookieEnabled)}function d4(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p4="FirebaseError",Ou=function(e){ee(t,e);function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name=p4,Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,Gi.prototype.create),s}return t}(Error),Gi=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+t,u=this.errors[t],c=u?v4(u,i):"Error",l=this.serviceName+": "+c+" ("+s+").",h=new Ou(s,l,i);return h},e}();function v4(e,t){return e.replace(g4,function(n,r){var i=t[r];return i!=null?String(i):"<"+r+"?>"})}var g4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(e){return JSON.parse(e)}function Mt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jw=function(e){var t={},n={},r={},i="";try{var s=e.split(".");t=yl(wC(s[0])||""),n=yl(wC(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},m4=function(e){var t=jw(e).claims;return typeof t=="object"&&t.hasOwnProperty("iat")?t.iat:null},y4=function(e){var t=jw(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},_4=function(e){var t=jw(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ls(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function s_(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function gd(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(e){for(var t=[],n=function(l,h){Array.isArray(h)?h.forEach(function(d){t.push(encodeURIComponent(l)+"="+encodeURIComponent(d))}):t.push(encodeURIComponent(l)+"="+encodeURIComponent(h))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r],u=s[0],c=s[1];n(u,c)}return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b4=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,n){n||(n=0);var r=this.W_;if(typeof t=="string")for(var i=0;i<16;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(var i=16;i<80;i++){var s=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(s<<1|s>>>31)&4294967295}for(var u=this.chain_[0],c=this.chain_[1],l=this.chain_[2],h=this.chain_[3],d=this.chain_[4],v,m,i=0;i<80;i++){i<40?i<20?(v=h^c&(l^h),m=1518500249):(v=c^l^h,m=1859775393):i<60?(v=c&l|h&(c|l),m=2400959708):(v=c^l^h,m=3395469782);var s=(u<<5|u>>>27)+v+d+m+r[i]&4294967295;d=h,h=l,l=(c<<30|c>>>2)&4294967295,c=u,u=s}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},e.prototype.update=function(t,n){if(t!=null){n===void 0&&(n=t.length);for(var r=n-this.blockSize,i=0,s=this.buf_,u=this.inbuf_;i<n;){if(u===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[u]=t.charCodeAt(i),++u,++i,u===this.blockSize){this.compress_(s),u=0;break}}else for(;i<n;)if(s[u]=t[i],++u,++i,u===this.blockSize){this.compress_(s),u=0;break}}this.inbuf_=u,this.total_+=n}},e.prototype.digest=function(){var t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t},e}();function E4(e,t){var n=new T4(e,t);return n.subscribe.bind(n)}var T4=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(i){r.error(i)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var i=this,s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");I4(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=ny),s.error===void 0&&(s.error=ny),s.complete===void 0&&(s.complete=ny);var u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch{}}),this.observers.push(s),u},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();function I4(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&typeof e[i]=="function")return!0}return!1}function ny(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=n===0?"none":"no more than "+n),i){var s=e+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Wn(e,t){return e+" failed: "+t+" argument "}function qt(e,t,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Wn(e,t)+"must be a valid function.")}function bC(e,t,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(Wn(e,t)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S4=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,G(r<e.length,"Surrogate pair missing trail surrogate.");var u=e.charCodeAt(r)-56320;i=65536+(s<<10)+u}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},yp=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C4=1e3,A4=2,k4=4*60*60*1e3,R4=.5;function a_(e,t,n){t===void 0&&(t=C4),n===void 0&&(n=A4);var r=t*Math.pow(n,e),i=Math.round(R4*r*(Math.random()-.5)*2);return Math.min(k4,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(e){return e&&e._delegate?e._delegate:e}var wn=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qN=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(t){var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new Gt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n,r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,!!this.shouldAutoInitialize()){if(P4(t))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}try{for(var i=zt(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var u=nn(s.value,2),c=u[0],l=u[1],h=this.normalizeInstanceIdentifier(c);try{var d=this.getOrInitializeService({instanceIdentifier:h});l.resolve(d)}catch{}}}catch(v){n={error:v}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},e.prototype.clearInstance=function(t){t===void 0&&(t=fs),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Ne(Ne([],nn(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),nn(t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=fs),this.instances.has(t)},e.prototype.getOptions=function(t){return t===void 0&&(t=fs),this.instancesOptions.get(t)||{}},e.prototype.initialize=function(t){var n,r;t===void 0&&(t={});var i=t.options,s=i===void 0?{}:i,u=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:s});try{for(var l=zt(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=nn(h.value,2),v=d[0],m=d[1],y=this.normalizeInstanceIdentifier(v);u===y&&m.resolve(c)}}catch(w){n={error:w}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return c},e.prototype.onInit=function(t,n){var r,i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);var u=this.instances.get(i);return u&&t(u,i),function(){s.delete(t)}},e.prototype.invokeOnInitCallbacks=function(t,n){var r,i,s=this.onInitCallbacks.get(n);if(!!s)try{for(var u=zt(s),c=u.next();!c.done;c=u.next()){var l=c.value;try{l(t,n)}catch{}}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}},e.prototype.getOrInitializeService=function(t){var n=t.instanceIdentifier,r=t.options,i=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:N4(n),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch{}return s||null},e.prototype.normalizeInstanceIdentifier=function(t){return t===void 0&&(t=fs),this.component?this.component.multipleInstances?t:fs:t},e.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},e}();function N4(e){return e===fs?void 0:e}function P4(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KN=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new qN(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Br(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],u=0,c=s.length;u<c;u++,i++)r[i]=s[u];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var us,Vw=[],Me;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Me||(Me={}));var HN={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},O4=Me.INFO,D4=(us={},us[Me.DEBUG]="log",us[Me.VERBOSE]="log",us[Me.INFO]="info",us[Me.WARN]="warn",us[Me.ERROR]="error",us),x4=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=new Date().toISOString(),s=D4[t];if(s)console[s].apply(console,Br(["["+i+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},zs=function(){function e(t){this.name=t,this._logLevel=O4,this._logHandler=x4,this._userLogHandler=null,Vw.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Me))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?HN[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Br([this,Me.DEBUG],t)),this._logHandler.apply(this,Br([this,Me.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Br([this,Me.VERBOSE],t)),this._logHandler.apply(this,Br([this,Me.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Br([this,Me.INFO],t)),this._logHandler.apply(this,Br([this,Me.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Br([this,Me.WARN],t)),this._logHandler.apply(this,Br([this,Me.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Br([this,Me.ERROR],t)),this._logHandler.apply(this,Br([this,Me.ERROR],t))},e}();function M4(e){Vw.forEach(function(t){t.setLogLevel(e)})}function L4(e,t){for(var n=function(u){var c=null;t&&t.level&&(c=HN[t.level]),e===null?u.userLogHandler=null:u.userLogHandler=function(l,h){for(var d=[],v=2;v<arguments.length;v++)d[v-2]=arguments[v];var m=d.map(function(y){if(y==null)return null;if(typeof y=="string")return y;if(typeof y=="number"||typeof y=="boolean")return y.toString();if(y instanceof Error)return y.message;try{return JSON.stringify(y)}catch{return null}}).filter(function(y){return y}).join(" ");h>=(c!=null?c:l.logLevel)&&e({level:Me[h].toLowerCase(),message:m,args:d,type:l.name})}},r=0,i=Vw;r<i.length;r++){var s=i[r];n(s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oo,F4=(oo={},oo["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",oo["bad-app-name"]="Illegal App name: '{$appName}",oo["duplicate-app"]="Firebase App named '{$appName}' already exists",oo["app-deleted"]="Firebase App named '{$appName}' already deleted",oo["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",oo["invalid-log-argument"]="First argument to `onLog` must be null or a function.",oo),ja=new Gi("app","Firebase",F4),WN="@firebase/app",U4="0.6.30",j4="@firebase/analytics",V4="@firebase/app-check",B4="@firebase/auth",q4="@firebase/database",K4="@firebase/functions",H4="@firebase/installations",W4="@firebase/messaging",G4="@firebase/performance",$4="@firebase/remote-config",z4="@firebase/storage",Q4="@firebase/firestore",Y4="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,md="[DEFAULT]",X4=(hn={},hn[WN]="fire-core",hn[j4]="fire-analytics",hn[V4]="fire-app-check",hn[B4]="fire-auth",hn[q4]="fire-rtdb",hn[K4]="fire-fn",hn[H4]="fire-iid",hn[W4]="fire-fcm",hn[G4]="fire-perf",hn[$4]="fire-rc",hn[z4]="fire-gcs",hn[Q4]="fire-fst",hn["fire-js"]="fire-js",hn[Y4]="fire-js-all",hn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tu=new zs("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ed=function(){function e(t,n,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=FN(t),this.container=new KN(n.name),this._addComponent(new wn("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(s){return i._addComponent(s)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){var r;n===void 0&&(n=md),this.checkDestroyed_();var i=this.container.getProvider(t);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=md),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){tu.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ja.create("app-deleted",{appName:this.name_})},e}();ed.prototype.name&&ed.prototype.options||ed.prototype.delete||console.log("dc");var J4="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(e){var t={},n=new Map,r={__esModule:!0,initializeApp:u,app:s,registerVersion:h,setLogLevel:M4,onLog:d,apps:null,SDK_VERSION:J4,INTERNAL:{registerComponent:l,removeApp:i,components:n,useAsService:v}};r.default=r,Object.defineProperty(r,"apps",{get:c});function i(m){delete t[m]}function s(m){if(m=m||md,!lr(t,m))throw ja.create("no-app",{appName:m});return t[m]}s.App=e;function u(m,y){if(y===void 0&&(y={}),typeof y!="object"||y===null){var w=y;y={name:w}}var E=y;E.name===void 0&&(E.name=md);var T=E.name;if(typeof T!="string"||!T)throw ja.create("bad-app-name",{appName:String(T)});if(lr(t,T))throw ja.create("duplicate-app",{appName:T});var k=new e(m,E,r);return t[T]=k,k}function c(){return Object.keys(t).map(function(m){return t[m]})}function l(m){var y=m.name;if(n.has(y))return tu.debug("There were multiple attempts to register component "+y+"."),m.type==="PUBLIC"?r[y]:null;if(n.set(y,m),m.type==="PUBLIC"){var w=function(P){if(P===void 0&&(P=s()),typeof P[y]!="function")throw ja.create("invalid-app-argument",{appName:y});return P[y]()};m.serviceProps!==void 0&&ml(w,m.serviceProps),r[y]=w,e.prototype[y]=function(){for(var P=[],M=0;M<arguments.length;M++)P[M]=arguments[M];var K=this._getService.bind(this,y);return K.apply(this,m.multipleInstances?P:[])}}for(var E=0,T=Object.keys(t);E<T.length;E++){var k=T[E];t[k]._addComponent(m)}return m.type==="PUBLIC"?r[y]:null}function h(m,y,w){var E,T=(E=X4[m])!==null&&E!==void 0?E:m;w&&(T+="-"+w);var k=T.match(/\s|\//),P=y.match(/\s|\//);if(k||P){var M=['Unable to register library "'+T+'" with version "'+y+'":'];k&&M.push('library name "'+T+'" contains illegal characters (whitespace or "/")'),k&&P&&M.push("and"),P&&M.push('version name "'+y+'" contains illegal characters (whitespace or "/")'),tu.warn(M.join(" "));return}l(new wn(T+"-version",function(){return{library:T,version:y}},"VERSION"))}function d(m,y){if(m!==null&&typeof m!="function")throw ja.create("invalid-log-argument");L4(m,y)}function v(m,y){if(y==="serverAuth")return null;var w=y;return w}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(){var e=Z4(ed);e.INTERNAL=ge(ge({},e.INTERNAL),{createFirebaseNamespace:GN,extendNamespace:t,createSubscribe:E4,ErrorFactory:Gi,deepExtend:ml});function t(n){ml(e,n)}return e}var Bw=GN();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eB=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(tB(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();function tB(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(e,t){e.INTERNAL.registerComponent(new wn("platform-logger",function(n){return new eB(n)},"PRIVATE")),e.registerVersion(WN,U4,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(u4()&&self.firebase!==void 0){tu.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var EC=self.firebase.SDK_VERSION;EC&&EC.indexOf("LITE")>=0&&tu.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var rB=Bw.initializeApp;Bw.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return UN()&&tu.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),rB.apply(void 0,e)};var fe=Bw;nB(fe);(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,a,f){o!=Array.prototype&&o!=Object.prototype&&(o[a]=f.value)};function n(o){o=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,o];for(var a=0;a<o.length;++a){var f=o[a];if(f&&f.Math==Math)return f}return globalThis}var r=n(this);function i(o,a){if(a){var f=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var g=o[p];g in f||(f[g]={}),f=f[g]}o=o[o.length-1],p=f[o],a=a(p),a!=p&&a!=null&&t(f,o,{configurable:!0,writable:!0,value:a})}}function s(o){var a=0;return function(){return a<o.length?{done:!1,value:o[a++]}:{done:!0}}}function u(o){var a=typeof Symbol!="undefined"&&Symbol.iterator&&o[Symbol.iterator];return a?a.call(o):{next:s(o)}}i("Promise",function(o){function a(b){this.b=0,this.c=void 0,this.a=[];var I=this.f();try{b(I.resolve,I.reject)}catch(x){I.reject(x)}}function f(){this.a=null}function p(b){return b instanceof a?b:new a(function(I){I(b)})}if(o)return o;f.prototype.b=function(b){if(this.a==null){this.a=[];var I=this;this.c(function(){I.g()})}this.a.push(b)};var g=r.setTimeout;f.prototype.c=function(b){g(b,0)},f.prototype.g=function(){for(;this.a&&this.a.length;){var b=this.a;this.a=[];for(var I=0;I<b.length;++I){var x=b[I];b[I]=null;try{x()}catch(V){this.f(V)}}}this.a=null},f.prototype.f=function(b){this.c(function(){throw b})},a.prototype.f=function(){function b(V){return function(we){x||(x=!0,V.call(I,we))}}var I=this,x=!1;return{resolve:b(this.m),reject:b(this.g)}},a.prototype.m=function(b){if(b===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof a)this.s(b);else{e:switch(typeof b){case"object":var I=b!=null;break e;case"function":I=!0;break e;default:I=!1}I?this.v(b):this.h(b)}},a.prototype.v=function(b){var I=void 0;try{I=b.then}catch(x){this.g(x);return}typeof I=="function"?this.u(I,b):this.h(b)},a.prototype.g=function(b){this.i(2,b)},a.prototype.h=function(b){this.i(1,b)},a.prototype.i=function(b,I){if(this.b!=0)throw Error("Cannot settle("+b+", "+I+"): Promise already settled in state"+this.b);this.b=b,this.c=I,this.l()},a.prototype.l=function(){if(this.a!=null){for(var b=0;b<this.a.length;++b)_.b(this.a[b]);this.a=null}};var _=new f;return a.prototype.s=function(b){var I=this.f();b.Ra(I.resolve,I.reject)},a.prototype.u=function(b,I){var x=this.f();try{b.call(I,x.resolve,x.reject)}catch(V){x.reject(V)}},a.prototype.then=function(b,I){function x(qe,Vt){return typeof qe=="function"?function(Ri){try{V(qe(Ri))}catch(Xm){we(Xm)}}:Vt}var V,we,Xe=new a(function(qe,Vt){V=qe,we=Vt});return this.Ra(x(b,V),x(I,we)),Xe},a.prototype.catch=function(b){return this.then(void 0,b)},a.prototype.Ra=function(b,I){function x(){switch(V.b){case 1:b(V.c);break;case 2:I(V.c);break;default:throw Error("Unexpected state: "+V.b)}}var V=this;this.a==null?_.b(x):this.a.push(x)},a.resolve=p,a.reject=function(b){return new a(function(I,x){x(b)})},a.race=function(b){return new a(function(I,x){for(var V=u(b),we=V.next();!we.done;we=V.next())p(we.value).Ra(I,x)})},a.all=function(b){var I=u(b),x=I.next();return x.done?p([]):new a(function(V,we){function Xe(Ri){return function(Xm){qe[Ri]=Xm,Vt--,Vt==0&&V(qe)}}var qe=[],Vt=0;do qe.push(void 0),Vt++,p(x.value).Ra(Xe(qe.length-1),we),x=I.next();while(!x.done)})},a});var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,d=null;function v(o){return(o=o.querySelector&&o.querySelector("script[nonce]"))&&(o=o.nonce||o.getAttribute("nonce"))&&h.test(o)?o:""}function m(){}function y(o){var a=typeof o;return a!="object"?a:o?Array.isArray(o)?"array":a:"null"}function w(o){var a=y(o);return a=="array"||a=="object"&&typeof o.length=="number"}function E(o){return y(o)=="function"}function T(o){var a=typeof o;return a=="object"&&o!=null||a=="function"}function k(o){return Object.prototype.hasOwnProperty.call(o,P)&&o[P]||(o[P]=++M)}var P="closure_uid_"+(1e9*Math.random()>>>0),M=0;function K(o,a,f){return o.call.apply(o.bind,arguments)}function Q(o,a,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,p),o.apply(a,g)}}return function(){return o.apply(a,arguments)}}function F(o,a,f){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?F=K:F=Q,F.apply(null,arguments)}function re(o,a){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function te(o,a){function f(){}f.prototype=a.prototype,o.bb=a.prototype,o.prototype=new f,o.prototype.constructor=o}function Ee(o){return o}function N(o,a,f){this.code=Et+o,this.message=a||Qr[o]||"",this.a=f||null}te(N,Error),N.prototype.w=function(){var o={code:this.code,message:this.message};return this.a&&(o.serverResponse=this.a),o},N.prototype.toJSON=function(){return this.w()};function _t(o){var a=o&&o.code;return a?new N(a.substring(Et.length),o.message,o.serverResponse):null}var Et="auth/",Qr={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Yr={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function dr(o){for(var a in Yr)if(Yr[a].id===o)return o=Yr[a],{firebaseEndpoint:o.Ua,secureTokenEndpoint:o.$a,identityPlatformEndpoint:o.Xa};return null}var ct;ct=dr("__EID__")?"__EID__":void 0;function Qe(o){if(!o)return!1;try{return!!o.$goog_Thenable}catch{return!1}}function Ae(o){if(Error.captureStackTrace)Error.captureStackTrace(this,Ae);else{var a=Error().stack;a&&(this.stack=a)}o&&(this.message=String(o))}te(Ae,Error),Ae.prototype.name="CustomError";function ln(o,a){o=o.split("%s");for(var f="",p=o.length-1,g=0;g<p;g++)f+=o[g]+(g<a.length?a[g]:"%s");Ae.call(this,f+o[p])}te(ln,Ae),ln.prototype.name="AssertionError";function Qn(o,a){throw new ln("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1))}function Yn(o,a){this.c=o,this.f=a,this.b=0,this.a=null}Yn.prototype.get=function(){if(0<this.b){this.b--;var o=this.a;this.a=o.next,o.next=null}else o=this.c();return o};function Xn(o,a){o.f(a),100>o.b&&(o.b++,a.next=o.a,o.a=a)}function Tn(){this.b=this.a=null}var aa=new Yn(function(){return new se},function(o){o.reset()});Tn.prototype.add=function(o,a){var f=aa.get();f.set(o,a),this.b?this.b.next=f:this.a=f,this.b=f};function U(){var o=RE,a=null;return o.a&&(a=o.a,o.a=o.a.next,o.a||(o.b=null),a.next=null),a}function se(){this.next=this.b=this.a=null}se.prototype.set=function(o,a){this.a=o,this.b=a,this.next=null},se.prototype.reset=function(){this.next=this.b=this.a=null};var X=Array.prototype.indexOf?function(o,a){return Array.prototype.indexOf.call(o,a,void 0)}:function(o,a){if(typeof o=="string")return typeof a!="string"||a.length!=1?-1:o.indexOf(a,0);for(var f=0;f<o.length;f++)if(f in o&&o[f]===a)return f;return-1},J=Array.prototype.forEach?function(o,a,f){Array.prototype.forEach.call(o,a,f)}:function(o,a,f){for(var p=o.length,g=typeof o=="string"?o.split(""):o,_=0;_<p;_++)_ in g&&a.call(f,g[_],_,o)};function Ye(o,a){for(var f=typeof o=="string"?o.split(""):o,p=o.length-1;0<=p;--p)p in f&&a.call(void 0,f[p],p,o)}var et=Array.prototype.filter?function(o,a){return Array.prototype.filter.call(o,a,void 0)}:function(o,a){for(var f=o.length,p=[],g=0,_=typeof o=="string"?o.split(""):o,b=0;b<f;b++)if(b in _){var I=_[b];a.call(void 0,I,b,o)&&(p[g++]=I)}return p},Se=Array.prototype.map?function(o,a){return Array.prototype.map.call(o,a,void 0)}:function(o,a){for(var f=o.length,p=Array(f),g=typeof o=="string"?o.split(""):o,_=0;_<f;_++)_ in g&&(p[_]=a.call(void 0,g[_],_,o));return p},Ce=Array.prototype.some?function(o,a){return Array.prototype.some.call(o,a,void 0)}:function(o,a){for(var f=o.length,p=typeof o=="string"?o.split(""):o,g=0;g<f;g++)if(g in p&&a.call(void 0,p[g],g,o))return!0;return!1};function S(o){e:{for(var a=pF,f=o.length,p=typeof o=="string"?o.split(""):o,g=0;g<f;g++)if(g in p&&a.call(void 0,p[g],g,o)){a=g;break e}a=-1}return 0>a?null:typeof o=="string"?o.charAt(a):o[a]}function R(o,a){return 0<=X(o,a)}function D(o,a){a=X(o,a);var f;return(f=0<=a)&&Array.prototype.splice.call(o,a,1),f}function L(o,a){var f=0;Ye(o,function(p,g){a.call(void 0,p,g,o)&&Array.prototype.splice.call(o,g,1).length==1&&f++})}function j(o){return Array.prototype.concat.apply([],arguments)}function W(o){var a=o.length;if(0<a){for(var f=Array(a),p=0;p<a;p++)f[p]=o[p];return f}return[]}var ne=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]},$=/&/g,Y=/</g,q=/>/g,de=/"/g,ue=/'/g,pe=/\x00/g,_e=/[\x00&<>"']/;function ce(o,a){return o.indexOf(a)!=-1}function tt(o,a){return o<a?-1:o>a?1:0}var Ve;e:{var nt=l.navigator;if(nt){var Fn=nt.userAgent;if(Fn){Ve=Fn;break e}}Ve=""}function at(o){return ce(Ve,o)}function Yu(o,a){for(var f in o)a.call(void 0,o[f],f,o)}function Jn(o){for(var a in o)return!1;return!0}function Pr(o){var a={},f;for(f in o)a[f]=o[f];return a}var fn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(o,a){for(var f,p,g=1;g<arguments.length;g++){p=arguments[g];for(f in p)o[f]=p[f];for(var _=0;_<fn.length;_++)f=fn[_],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function Xu(o,a){e:{try{var f=o&&o.ownerDocument,p=f&&(f.defaultView||f.parentWindow);if(p=p||l,p.Element&&p.Location){var g=p;break e}}catch{}g=null}if(g&&typeof g[a]!="undefined"&&(!o||!(o instanceof g[a])&&(o instanceof g.Location||o instanceof g.Element))){if(T(o))try{var _=o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o)}catch{_="<object could not be stringified>"}else _=o===void 0?"undefined":o===null?"null":typeof o;Qn("Argument is not a %s (or a non-Element, non-Location mock); got: %s",a,_)}}function Xr(o,a){this.a=o===Cf&&a||"",this.b=lE}Xr.prototype.ta=!0,Xr.prototype.sa=function(){return this.a},Xr.prototype.toString=function(){return"Const{"+this.a+"}"};function Iv(o){return o instanceof Xr&&o.constructor===Xr&&o.b===lE?o.a:(Qn("expected object of type Const, got '"+o+"'"),"type_error:Const")}var lE={},Cf={},Af;function fE(){if(Af===void 0){var o=null,a=l.trustedTypes;if(a&&a.createPolicy){try{o=a.createPolicy("goog#html",{createHTML:Ee,createScript:Ee,createScriptURL:Ee})}catch(f){l.console&&l.console.error(f.message)}Af=o}else Af=o}return Af}function ua(o,a){this.a=a===dE?o:""}ua.prototype.ta=!0,ua.prototype.sa=function(){return this.a.toString()},ua.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function hE(o){return o instanceof ua&&o.constructor===ua?o.a:(Qn("expected object of type TrustedResourceUrl, got '"+o+"' of type "+y(o)),"type_error:TrustedResourceUrl")}function Sv(o,a){var f=Iv(o);if(!KM.test(f))throw Error("Invalid TrustedResourceUrl format: "+f);return o=f.replace(qM,function(p,g){if(!Object.prototype.hasOwnProperty.call(a,g))throw Error('Found marker, "'+g+'", in format string, "'+f+'", but no valid label mapping found in args: '+JSON.stringify(a));return p=a[g],p instanceof Xr?Iv(p):encodeURIComponent(String(p))}),HM(o)}var qM=/%{(\w+)}/g,KM=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,dE={};function HM(o){var a=fE();return o=a?a.createScriptURL(o):o,new ua(o,dE)}function Un(o,a){this.a=a===Ju?o:""}Un.prototype.ta=!0,Un.prototype.sa=function(){return this.a.toString()},Un.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function kf(o){return o instanceof Un&&o.constructor===Un?o.a:(Qn("expected object of type SafeUrl, got '"+o+"' of type "+y(o)),"type_error:SafeUrl")}var WM=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,GM=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,pE=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function vE(o){if(o instanceof Un)return o;if(o=typeof o=="object"&&o.ta?o.sa():String(o),pE.test(o))o=new Un(o,Ju);else{o=String(o),o=o.replace(/(%0A|%0D)/g,"");var a=o.match(GM);o=a&&WM.test(a[1])?new Un(o,Ju):null}return o}function gE(o){return o instanceof Un?o:(o=typeof o=="object"&&o.ta?o.sa():String(o),pE.test(o)||(o="about:invalid#zClosurez"),new Un(o,Ju))}var Ju={},mE=new Un("about:invalid#zClosurez",Ju);function ca(o,a,f){this.a=f===yE?o:""}ca.prototype.ta=!0,ca.prototype.sa=function(){return this.a.toString()},ca.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function $M(o){return o instanceof ca&&o.constructor===ca?o.a:(Qn("expected object of type SafeHtml, got '"+o+"' of type "+y(o)),"type_error:SafeHtml")}var yE={};function zM(o,a){Xu(o,"HTMLScriptElement"),o.src=hE(a),(a=o.ownerDocument&&o.ownerDocument.defaultView)&&a!=l?a=v(a.document):(d===null&&(d=v(l.document)),a=d),a&&o.setAttribute("nonce",a)}function _E(o,a,f,p){return o=o instanceof Un?o:gE(o),a=a||l,f=f instanceof Xr?Iv(f):f||"",a.open(kf(o),f,p,void 0)}function wE(o,a){for(var f=o.split("%s"),p="",g=Array.prototype.slice.call(arguments,1);g.length&&1<f.length;)p+=f.shift()+g.shift();return p+f.join("%s")}function Cv(o){return _e.test(o)&&(o.indexOf("&")!=-1&&(o=o.replace($,"&amp;")),o.indexOf("<")!=-1&&(o=o.replace(Y,"&lt;")),o.indexOf(">")!=-1&&(o=o.replace(q,"&gt;")),o.indexOf('"')!=-1&&(o=o.replace(de,"&quot;")),o.indexOf("'")!=-1&&(o=o.replace(ue,"&#39;")),o.indexOf("\0")!=-1&&(o=o.replace(pe,"&#0;"))),o}function Av(o){return Av[" "](o),o}Av[" "]=m;function QM(o,a){var f=ZM;return Object.prototype.hasOwnProperty.call(f,o)?f[o]:f[o]=a(o)}var YM=at("Opera"),Or=at("Trident")||at("MSIE"),bE=at("Edge"),XM=bE||Or,EE=at("Gecko")&&!(ce(Ve.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),JM=ce(Ve.toLowerCase(),"webkit")&&!at("Edge");function TE(){var o=l.document;return o?o.documentMode:void 0}var Rf;e:{var kv="",Rv=function(){var o=Ve;if(EE)return/rv:([^\);]+)(\)|;)/.exec(o);if(bE)return/Edge\/([\d\.]+)/.exec(o);if(Or)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o);if(JM)return/WebKit\/(\S+)/.exec(o);if(YM)return/(?:Version)[ \/]?(\S+)/.exec(o)}();if(Rv&&(kv=Rv?Rv[1]:""),Or){var Nv=TE();if(Nv!=null&&Nv>parseFloat(kv)){Rf=String(Nv);break e}}Rf=kv}var ZM={};function IE(o){return QM(o,function(){for(var a=0,f=ne(String(Rf)).split("."),p=ne(String(o)).split("."),g=Math.max(f.length,p.length),_=0;a==0&&_<g;_++){var b=f[_]||"",I=p[_]||"";do{if(b=/(\d*)(\D*)(.*)/.exec(b)||["","","",""],I=/(\d*)(\D*)(.*)/.exec(I)||["","","",""],b[0].length==0&&I[0].length==0)break;a=tt(b[1].length==0?0:parseInt(b[1],10),I[1].length==0?0:parseInt(I[1],10))||tt(b[2].length==0,I[2].length==0)||tt(b[2],I[2]),b=b[3],I=I[3]}while(a==0)}return 0<=a})}var Pv;if(l.document&&Or){var SE=TE();Pv=SE||parseInt(Rf,10)||void 0}else Pv=void 0;var Yi=Pv;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var eL=!Or||9<=Number(Yi);function Zu(o){var a=document;return typeof o=="string"?a.getElementById(o):o}function CE(o,a){Yu(a,function(f,p){f&&typeof f=="object"&&f.ta&&(f=f.sa()),p=="style"?o.style.cssText=f:p=="class"?o.className=f:p=="for"?o.htmlFor=f:AE.hasOwnProperty(p)?o.setAttribute(AE[p],f):p.lastIndexOf("aria-",0)==0||p.lastIndexOf("data-",0)==0?o.setAttribute(p,f):o[p]=f})}var AE={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function tL(o,a,f){var p=arguments,g=document,_=String(p[0]),b=p[1];if(!eL&&b&&(b.name||b.type)){if(_=["<",_],b.name&&_.push(' name="',Cv(b.name),'"'),b.type){_.push(' type="',Cv(b.type),'"');var I={};lt(I,b),delete I.type,b=I}_.push(">"),_=_.join("")}return _=Nf(g,_),b&&(typeof b=="string"?_.className=b:Array.isArray(b)?_.className=b.join(" "):CE(_,b)),2<p.length&&nL(g,_,p),_}function nL(o,a,f){function p(I){I&&a.appendChild(typeof I=="string"?o.createTextNode(I):I)}for(var g=2;g<f.length;g++){var _=f[g];if(!w(_)||T(_)&&0<_.nodeType)p(_);else{e:{if(_&&typeof _.length=="number"){if(T(_)){var b=typeof _.item=="function"||typeof _.item=="string";break e}if(E(_)){b=typeof _.item=="function";break e}}b=!1}J(b?W(_):_,p)}}}function Nf(o,a){return a=String(a),o.contentType==="application/xhtml+xml"&&(a=a.toLowerCase()),o.createElement(a)}function kE(o){l.setTimeout(function(){throw o},0)}var Ov;function rL(){var o=l.MessageChannel;if(typeof o=="undefined"&&typeof window!="undefined"&&window.postMessage&&window.addEventListener&&!at("Presto")&&(o=function(){var g=Nf(document,"IFRAME");g.style.display="none",document.documentElement.appendChild(g);var _=g.contentWindow;g=_.document,g.open(),g.close();var b="callImmediate"+Math.random(),I=_.location.protocol=="file:"?"*":_.location.protocol+"//"+_.location.host;g=F(function(x){(I=="*"||x.origin==I)&&x.data==b&&this.port1.onmessage()},this),_.addEventListener("message",g,!1),this.port1={},this.port2={postMessage:function(){_.postMessage(b,I)}}}),typeof o!="undefined"&&!at("Trident")&&!at("MSIE")){var a=new o,f={},p=f;return a.port1.onmessage=function(){if(f.next!==void 0){f=f.next;var g=f.Hb;f.Hb=null,g()}},function(g){p.next={Hb:g},p=p.next,a.port2.postMessage(0)}}return function(g){l.setTimeout(g,0)}}function Pf(o,a){Of||iL(),Dv||(Of(),Dv=!0),RE.add(o,a)}var Of;function iL(){if(l.Promise&&l.Promise.resolve){var o=l.Promise.resolve(void 0);Of=function(){o.then(NE)}}else Of=function(){var a=NE;!E(l.setImmediate)||l.Window&&l.Window.prototype&&!at("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Ov||(Ov=rL()),Ov(a)):l.setImmediate(a)}}var Dv=!1,RE=new Tn;function NE(){for(var o;o=U();){try{o.a.call(o.b)}catch(a){kE(a)}Xn(aa,o)}Dv=!1}function Le(o,a){if(this.a=Bo,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,o!=m)try{var f=this;o.call(a,function(p){qo(f,ec,p)},function(p){if(!(p instanceof la))try{throw p instanceof Error?p:Error("Promise rejected.")}catch{}qo(f,Si,p)})}catch(p){qo(this,Si,p)}}var Bo=0,ec=2,Si=3;function PE(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}PE.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var OE=new Yn(function(){return new PE},function(o){o.reset()});function xv(o,a,f){var p=OE.get();return p.g=o,p.b=a,p.f=f,p}function ve(o){if(o instanceof Le)return o;var a=new Le(m);return qo(a,ec,o),a}function ht(o){return new Le(function(a,f){f(o)})}function DE(o,a,f){FE(o,a,f,null)||Pf(re(a,o))}function oL(o){return new Le(function(a,f){var p=o.length,g=[];if(p)for(var _=function(V,we){p--,g[V]=we,p==0&&a(g)},b=function(V){f(V)},I=0,x;I<o.length;I++)x=o[I],DE(x,re(_,I),b);else a(g)})}function xE(o){return new Le(function(a){var f=o.length,p=[];if(f)for(var g=function(I,x,V){f--,p[I]=x?{Qb:!0,value:V}:{Qb:!1,reason:V},f==0&&a(p)},_=0,b;_<o.length;_++)b=o[_],DE(b,re(g,_,!0),re(g,_,!1));else a(p)})}Le.prototype.then=function(o,a,f){return LE(this,E(o)?o:null,E(a)?a:null,f)},Le.prototype.$goog_Thenable=!0,e=Le.prototype,e.oa=function(o,a){return o=xv(o,o,a),o.c=!0,Mv(this,o),this},e.o=function(o,a){return LE(this,null,o,a)},e.cancel=function(o){if(this.a==Bo){var a=new la(o);Pf(function(){ME(this,a)},this)}};function ME(o,a){if(o.a==Bo)if(o.c){var f=o.c;if(f.b){for(var p=0,g=null,_=null,b=f.b;b&&(b.c||(p++,b.a==o&&(g=b),!(g&&1<p)));b=b.next)g||(_=b);g&&(f.a==Bo&&p==1?ME(f,a):(_?(p=_,p.next==f.f&&(f.f=p),p.next=p.next.next):jE(f),VE(f,g,Si,a)))}o.c=null}else qo(o,Si,a)}function Mv(o,a){o.b||o.a!=ec&&o.a!=Si||UE(o),o.f?o.f.next=a:o.b=a,o.f=a}function LE(o,a,f,p){var g=xv(null,null,null);return g.a=new Le(function(_,b){g.g=a?function(I){try{var x=a.call(p,I);_(x)}catch(V){b(V)}}:_,g.b=f?function(I){try{var x=f.call(p,I);x===void 0&&I instanceof la?b(I):_(x)}catch(V){b(V)}}:b}),g.a.c=o,Mv(o,g),g.a}e.$c=function(o){this.a=Bo,qo(this,ec,o)},e.ad=function(o){this.a=Bo,qo(this,Si,o)};function qo(o,a,f){o.a==Bo&&(o===f&&(a=Si,f=new TypeError("Promise cannot resolve to itself")),o.a=1,FE(f,o.$c,o.ad,o)||(o.i=f,o.a=a,o.c=null,UE(o),a!=Si||f instanceof la||aL(o,f)))}function FE(o,a,f,p){if(o instanceof Le)return Mv(o,xv(a||m,f||null,p)),!0;if(Qe(o))return o.then(a,f,p),!0;if(T(o))try{var g=o.then;if(E(g))return sL(o,g,a,f,p),!0}catch(_){return f.call(p,_),!0}return!1}function sL(o,a,f,p,g){function _(x){I||(I=!0,p.call(g,x))}function b(x){I||(I=!0,f.call(g,x))}var I=!1;try{a.call(o,b,_)}catch(x){_(x)}}function UE(o){o.h||(o.h=!0,Pf(o.gc,o))}function jE(o){var a=null;return o.b&&(a=o.b,o.b=a.next,a.next=null),o.b||(o.f=null),a}e.gc=function(){for(var o;o=jE(this);)VE(this,o,this.a,this.i);this.h=!1};function VE(o,a,f,p){if(f==Si&&a.b&&!a.c)for(;o&&o.g;o=o.c)o.g=!1;if(a.a)a.a.c=null,BE(a,f,p);else try{a.c?a.g.call(a.f):BE(a,f,p)}catch(g){qE.call(null,g)}Xn(OE,a)}function BE(o,a,f){a==ec?o.g.call(o.f,f):o.b&&o.b.call(o.f,f)}function aL(o,a){o.g=!0,Pf(function(){o.g&&qE.call(null,a)})}var qE=kE;function la(o){Ae.call(this,o)}te(la,Ae),la.prototype.name="cancel";function Df(){this.ya=this.ya,this.pa=this.pa}var uL=0,cL={};Df.prototype.ya=!1;function KE(o){if(!o.ya&&(o.ya=!0,o.Da(),uL!=0)){var a=k(o);delete cL[a]}}Df.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var lL=Object.freeze||function(o){return o},HE=!Or||9<=Number(Yi),fL=Or&&!IE("9"),hL=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,a=Object.defineProperty({},"passive",{get:function(){o=!0}});try{l.addEventListener("test",m,a),l.removeEventListener("test",m,a)}catch{}return o}();function jn(o,a){this.type=o,this.b=this.target=a,this.defaultPrevented=!1}jn.prototype.preventDefault=function(){this.defaultPrevented=!0};function Ko(o,a){if(jn.call(this,o?o.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.b=a,a=o.relatedTarget){if(EE){e:{try{Av(a.nodeName);var g=!0;break e}catch{}g=!1}g||(a=null)}}else f=="mouseover"?a=o.fromElement:f=="mouseout"&&(a=o.toElement);this.relatedTarget=a,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:dL[o.pointerType]||"",this.a=o,o.defaultPrevented&&this.preventDefault()}}te(Ko,jn);var dL=lL({2:"touch",3:"pen",4:"mouse"});Ko.prototype.preventDefault=function(){Ko.bb.preventDefault.call(this);var o=this.a;if(o.preventDefault)o.preventDefault();else if(o.returnValue=!1,fL)try{(o.ctrlKey||112<=o.keyCode&&123>=o.keyCode)&&(o.keyCode=-1)}catch{}},Ko.prototype.g=function(){return this.a};var tc="closure_listenable_"+(1e6*Math.random()|0),pL=0;function vL(o,a,f,p,g){this.listener=o,this.proxy=null,this.src=a,this.type=f,this.capture=!!p,this.Wa=g,this.key=++pL,this.wa=this.Qa=!1}function xf(o){o.wa=!0,o.listener=null,o.proxy=null,o.src=null,o.Wa=null}function Mf(o){this.src=o,this.a={},this.b=0}Mf.prototype.add=function(o,a,f,p,g){var _=o.toString();o=this.a[_],o||(o=this.a[_]=[],this.b++);var b=Fv(o,a,p,g);return-1<b?(a=o[b],f||(a.Qa=!1)):(a=new vL(a,this.src,_,!!p,g),a.Qa=f,o.push(a)),a};function Lv(o,a){var f=a.type;f in o.a&&D(o.a[f],a)&&(xf(a),o.a[f].length==0&&(delete o.a[f],o.b--))}function Fv(o,a,f,p){for(var g=0;g<o.length;++g){var _=o[g];if(!_.wa&&_.listener==a&&_.capture==!!f&&_.Wa==p)return g}return-1}var Uv="closure_lm_"+(1e6*Math.random()|0),jv={};function pr(o,a,f,p,g){if(p&&p.once)Vv(o,a,f,p,g);else if(Array.isArray(a))for(var _=0;_<a.length;_++)pr(o,a[_],f,p,g);else f=qv(f),o&&o[tc]?YE(o,a,f,T(p)?!!p.capture:!!p,g):WE(o,a,f,!1,p,g)}function WE(o,a,f,p,g,_){if(!a)throw Error("Invalid event type");var b=T(g)?!!g.capture:!!g,I=Lf(o);if(I||(o[Uv]=I=new Mf(o)),f=I.add(a,f,p,b,_),!f.proxy)if(p=gL(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)hL||(g=b),g===void 0&&(g=!1),o.addEventListener(a.toString(),p,g);else if(o.attachEvent)o.attachEvent($E(a.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.")}function gL(){var o=mL,a=HE?function(f){return o.call(a.src,a.listener,f)}:function(f){if(f=o.call(a.src,a.listener,f),!f)return f};return a}function Vv(o,a,f,p,g){if(Array.isArray(a))for(var _=0;_<a.length;_++)Vv(o,a[_],f,p,g);else f=qv(f),o&&o[tc]?Kv(o,a,f,T(p)?!!p.capture:!!p,g):WE(o,a,f,!0,p,g)}function Zn(o,a,f,p,g){if(Array.isArray(a))for(var _=0;_<a.length;_++)Zn(o,a[_],f,p,g);else p=T(p)?!!p.capture:!!p,f=qv(f),o&&o[tc]?(o=o.v,a=String(a).toString(),a in o.a&&(_=o.a[a],f=Fv(_,f,p,g),-1<f&&(xf(_[f]),Array.prototype.splice.call(_,f,1),_.length==0&&(delete o.a[a],o.b--)))):o&&(o=Lf(o))&&(a=o.a[a.toString()],o=-1,a&&(o=Fv(a,f,p,g)),(f=-1<o?a[o]:null)&&GE(f))}function GE(o){if(typeof o!="number"&&o&&!o.wa){var a=o.src;if(a&&a[tc])Lv(a.v,o);else{var f=o.type,p=o.proxy;a.removeEventListener?a.removeEventListener(f,p,o.capture):a.detachEvent?a.detachEvent($E(f),p):a.addListener&&a.removeListener&&a.removeListener(p),(f=Lf(a))?(Lv(f,o),f.b==0&&(f.src=null,a[Uv]=null)):xf(o)}}}function $E(o){return o in jv?jv[o]:jv[o]="on"+o}function zE(o,a,f,p){var g=!0;if((o=Lf(o))&&(a=o.a[a.toString()]))for(a=a.concat(),o=0;o<a.length;o++){var _=a[o];_&&_.capture==f&&!_.wa&&(_=QE(_,p),g=g&&_!==!1)}return g}function QE(o,a){var f=o.listener,p=o.Wa||o.src;return o.Qa&&GE(o),f.call(p,a)}function mL(o,a){if(o.wa)return!0;if(!HE){if(!a)e:{a=["window","event"];for(var f=l,p=0;p<a.length;p++)if(f=f[a[p]],f==null){a=null;break e}a=f}if(p=a,a=new Ko(p,this),f=!0,!(0>p.keyCode||p.returnValue!=null)){e:{var g=!1;if(p.keyCode==0)try{p.keyCode=-1;break e}catch{g=!0}(g||p.returnValue==null)&&(p.returnValue=!0)}for(p=[],g=a.b;g;g=g.parentNode)p.push(g);for(o=o.type,g=p.length-1;0<=g;g--){a.b=p[g];var _=zE(p[g],o,!0,a);f=f&&_}for(g=0;g<p.length;g++)a.b=p[g],_=zE(p[g],o,!1,a),f=f&&_}return f}return QE(o,new Ko(a,this))}function Lf(o){return o=o[Uv],o instanceof Mf?o:null}var Bv="__closure_events_fn_"+(1e9*Math.random()>>>0);function qv(o){return E(o)?o:(o[Bv]||(o[Bv]=function(a){return o.handleEvent(a)}),o[Bv])}function In(){Df.call(this),this.v=new Mf(this),this.bc=this,this.hb=null}te(In,Df),In.prototype[tc]=!0,In.prototype.addEventListener=function(o,a,f,p){pr(this,o,a,f,p)},In.prototype.removeEventListener=function(o,a,f,p){Zn(this,o,a,f,p)},In.prototype.dispatchEvent=function(o){var a,f=this.hb;if(f)for(a=[];f;f=f.hb)a.push(f);f=this.bc;var p=o.type||o;if(typeof o=="string")o=new jn(o,f);else if(o instanceof jn)o.target=o.target||f;else{var g=o;o=new jn(p,f),lt(o,g)}if(g=!0,a)for(var _=a.length-1;0<=_;_--){var b=o.b=a[_];g=Ff(b,p,!0,o)&&g}if(b=o.b=f,g=Ff(b,p,!0,o)&&g,g=Ff(b,p,!1,o)&&g,a)for(_=0;_<a.length;_++)b=o.b=a[_],g=Ff(b,p,!1,o)&&g;return g},In.prototype.Da=function(){if(In.bb.Da.call(this),this.v){var o=this.v,a;for(a in o.a){for(var f=o.a[a],p=0;p<f.length;p++)xf(f[p]);delete o.a[a],o.b--}}this.hb=null};function YE(o,a,f,p,g){o.v.add(String(a),f,!1,p,g)}function Kv(o,a,f,p,g){o.v.add(String(a),f,!0,p,g)}function Ff(o,a,f,p){if(a=o.v.a[String(a)],!a)return!0;a=a.concat();for(var g=!0,_=0;_<a.length;++_){var b=a[_];if(b&&!b.wa&&b.capture==f){var I=b.listener,x=b.Wa||b.src;b.Qa&&Lv(o.v,b),g=I.call(x,p)!==!1&&g}}return g&&!p.defaultPrevented}function Hv(o,a,f){if(E(o))f&&(o=F(o,f));else if(o&&typeof o.handleEvent=="function")o=F(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(a)?-1:l.setTimeout(o,a||0)}function fa(o){var a=null;return new Le(function(f,p){a=Hv(function(){f(void 0)},o),a==-1&&p(Error("Failed to schedule timer."))}).o(function(f){throw l.clearTimeout(a),f})}function XE(o){if(o.X&&typeof o.X=="function")return o.X();if(typeof o=="string")return o.split("");if(w(o)){for(var a=[],f=o.length,p=0;p<f;p++)a.push(o[p]);return a}a=[],f=0;for(p in o)a[f++]=o[p];return a}function JE(o){if(o.Y&&typeof o.Y=="function")return o.Y();if(!o.X||typeof o.X!="function"){if(w(o)||typeof o=="string"){var a=[];o=o.length;for(var f=0;f<o;f++)a.push(f);return a}a=[],f=0;for(var p in o)a[f++]=p;return a}}function yL(o,a){if(o.forEach&&typeof o.forEach=="function")o.forEach(a,void 0);else if(w(o)||typeof o=="string")J(o,a,void 0);else for(var f=JE(o),p=XE(o),g=p.length,_=0;_<g;_++)a.call(void 0,p[_],f&&f[_],o)}function ha(o,a){this.b={},this.a=[],this.c=0;var f=arguments.length;if(1<f){if(f%2)throw Error("Uneven number of arguments");for(var p=0;p<f;p+=2)this.set(arguments[p],arguments[p+1])}else if(o)if(o instanceof ha)for(f=o.Y(),p=0;p<f.length;p++)this.set(f[p],o.get(f[p]));else for(p in o)this.set(p,o[p])}e=ha.prototype,e.X=function(){Wv(this);for(var o=[],a=0;a<this.a.length;a++)o.push(this.b[this.a[a]]);return o},e.Y=function(){return Wv(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function Wv(o){if(o.c!=o.a.length){for(var a=0,f=0;a<o.a.length;){var p=o.a[a];Ho(o.b,p)&&(o.a[f++]=p),a++}o.a.length=f}if(o.c!=o.a.length){var g={};for(f=a=0;a<o.a.length;)p=o.a[a],Ho(g,p)||(o.a[f++]=p,g[p]=1),a++;o.a.length=f}}e.get=function(o,a){return Ho(this.b,o)?this.b[o]:a},e.set=function(o,a){Ho(this.b,o)||(this.c++,this.a.push(o)),this.b[o]=a},e.forEach=function(o,a){for(var f=this.Y(),p=0;p<f.length;p++){var g=f[p],_=this.get(g);o.call(a,_,g,this)}};function Ho(o,a){return Object.prototype.hasOwnProperty.call(o,a)}var ZE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _L(o,a){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),g=null;if(0<=p){var _=o[f].substring(0,p);g=o[f].substring(p+1)}else _=o[f];a(_,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function Xi(o,a){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var f;o instanceof Xi?(this.i=a!==void 0?a:o.i,nc(this,o.c),this.l=o.l,this.a=o.a,rc(this,o.g),this.f=o.f,Gv(this,rT(o.b)),this.h=o.h):o&&(f=String(o).match(ZE))?(this.i=!!a,nc(this,f[1]||"",!0),this.l=ic(f[2]||""),this.a=ic(f[3]||"",!0),rc(this,f[4]),this.f=ic(f[5]||"",!0),Gv(this,f[6]||"",!0),this.h=ic(f[7]||"")):(this.i=!!a,this.b=new Wo(null,this.i))}Xi.prototype.toString=function(){var o=[],a=this.c;a&&o.push(oc(a,eT,!0),":");var f=this.a;return(f||a=="file")&&(o.push("//"),(a=this.l)&&o.push(oc(a,eT,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.g,f!=null&&o.push(":",String(f))),(f=this.f)&&(this.a&&f.charAt(0)!="/"&&o.push("/"),o.push(oc(f,f.charAt(0)=="/"?EL:bL,!0))),(f=this.b.toString())&&o.push("?",f),(f=this.h)&&o.push("#",oc(f,IL)),o.join("")},Xi.prototype.resolve=function(o){var a=new Xi(this),f=!!o.c;f?nc(a,o.c):f=!!o.l,f?a.l=o.l:f=!!o.a,f?a.a=o.a:f=o.g!=null;var p=o.f;if(f)rc(a,o.g);else if(f=!!o.f){if(p.charAt(0)!="/")if(this.a&&!this.f)p="/"+p;else{var g=a.f.lastIndexOf("/");g!=-1&&(p=a.f.substr(0,g+1)+p)}if(g=p,g==".."||g==".")p="";else if(ce(g,"./")||ce(g,"/.")){p=g.lastIndexOf("/",0)==0,g=g.split("/");for(var _=[],b=0;b<g.length;){var I=g[b++];I=="."?p&&b==g.length&&_.push(""):I==".."?((1<_.length||_.length==1&&_[0]!="")&&_.pop(),p&&b==g.length&&_.push("")):(_.push(I),p=!0)}p=_.join("/")}else p=g}return f?a.f=p:f=o.b.toString()!=="",f?Gv(a,rT(o.b)):f=!!o.h,f&&(a.h=o.h),a};function nc(o,a,f){o.c=f?ic(a,!0):a,o.c&&(o.c=o.c.replace(/:$/,""))}function rc(o,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);o.g=a}else o.g=null}function Gv(o,a,f){a instanceof Wo?(o.b=a,SL(o.b,o.i)):(f||(a=oc(a,TL)),o.b=new Wo(a,o.i))}function Tt(o,a,f){o.b.set(a,f)}function vr(o,a){return o.b.get(a)}function Vn(o){return o instanceof Xi?new Xi(o):new Xi(o,void 0)}function Uf(o,a,f,p){var g=new Xi(null,void 0);return o&&nc(g,o),a&&(g.a=a),f&&rc(g,f),p&&(g.f=p),g}function ic(o,a){return o?a?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function oc(o,a,f){return typeof o=="string"?(o=encodeURI(o).replace(a,wL),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function wL(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var eT=/[#\/\?@]/g,bL=/[#\?:]/g,EL=/[#\?]/g,TL=/[#\?@]/g,IL=/#/g;function Wo(o,a){this.b=this.a=null,this.c=o||null,this.f=!!a}function Ji(o){o.a||(o.a=new ha,o.b=0,o.c&&_L(o.c,function(a,f){o.add(decodeURIComponent(a.replace(/\+/g," ")),f)}))}function tT(o){var a=JE(o);if(typeof a=="undefined")throw Error("Keys are undefined");var f=new Wo(null,void 0);o=XE(o);for(var p=0;p<a.length;p++){var g=a[p],_=o[p];Array.isArray(_)?nT(f,g,_):f.add(g,_)}return f}e=Wo.prototype,e.add=function(o,a){Ji(this),this.c=null,o=da(this,o);var f=this.a.get(o);return f||this.a.set(o,f=[]),f.push(a),this.b+=1,this};function Jr(o,a){Ji(o),a=da(o,a),Ho(o.a.b,a)&&(o.c=null,o.b-=o.a.get(a).length,o=o.a,Ho(o.b,a)&&(delete o.b[a],o.c--,o.a.length>2*o.c&&Wv(o)))}e.clear=function(){this.a=this.c=null,this.b=0};function $v(o,a){return Ji(o),a=da(o,a),Ho(o.a.b,a)}e.forEach=function(o,a){Ji(this),this.a.forEach(function(f,p){J(f,function(g){o.call(a,g,p,this)},this)},this)},e.Y=function(){Ji(this);for(var o=this.a.X(),a=this.a.Y(),f=[],p=0;p<a.length;p++)for(var g=o[p],_=0;_<g.length;_++)f.push(a[p]);return f},e.X=function(o){Ji(this);var a=[];if(typeof o=="string")$v(this,o)&&(a=j(a,this.a.get(da(this,o))));else{o=this.a.X();for(var f=0;f<o.length;f++)a=j(a,o[f])}return a},e.set=function(o,a){return Ji(this),this.c=null,o=da(this,o),$v(this,o)&&(this.b-=this.a.get(o).length),this.a.set(o,[a]),this.b+=1,this},e.get=function(o,a){return o?(o=this.X(o),0<o.length?String(o[0]):a):a};function nT(o,a,f){Jr(o,a),0<f.length&&(o.c=null,o.a.set(da(o,a),W(f)),o.b+=f.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var o=[],a=this.a.Y(),f=0;f<a.length;f++){var p=a[f],g=encodeURIComponent(String(p));p=this.X(p);for(var _=0;_<p.length;_++){var b=g;p[_]!==""&&(b+="="+encodeURIComponent(String(p[_]))),o.push(b)}}return this.c=o.join("&")};function rT(o){var a=new Wo;return a.c=o.c,o.a&&(a.a=new ha(o.a),a.b=o.b),a}function da(o,a){return a=String(a),o.f&&(a=a.toLowerCase()),a}function SL(o,a){a&&!o.f&&(Ji(o),o.c=null,o.a.forEach(function(f,p){var g=p.toLowerCase();p!=g&&(Jr(this,p),nT(this,g,f))},o)),o.f=a}function iT(o){var a=[];return zv(new CL,o,a),a.join("")}function CL(){}function zv(o,a,f){if(a==null)f.push("null");else{if(typeof a=="object"){if(Array.isArray(a)){var p=a;a=p.length,f.push("[");for(var g="",_=0;_<a;_++)f.push(g),zv(o,p[_],f),g=",";f.push("]");return}if(a instanceof String||a instanceof Number||a instanceof Boolean)a=a.valueOf();else{f.push("{"),g="";for(p in a)Object.prototype.hasOwnProperty.call(a,p)&&(_=a[p],typeof _!="function"&&(f.push(g),sT(p,f),f.push(":"),zv(o,_,f),g=","));f.push("}");return}}switch(typeof a){case"string":sT(a,f);break;case"number":f.push(isFinite(a)&&!isNaN(a)?String(a):"null");break;case"boolean":f.push(String(a));break;case"function":f.push("null");break;default:throw Error("Unknown type: "+typeof a)}}}var oT={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},AL=/\uffff/.test("\uFFFF")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sT(o,a){a.push('"',o.replace(AL,function(f){var p=oT[f];return p||(p="\\u"+(f.charCodeAt(0)|65536).toString(16).substr(1),oT[f]=p),p}),'"')}function Qv(){var o=Xt();return Or&&!!Yi&&Yi==11||/Edge\/\d+/.test(o)}function sc(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function aT(o,a){a=a||l.window;var f="about:blank";o&&(f=kf(vE(o)||mE)),a.location.href=f}function uT(o,a){var f=[],p;for(p in o)p in a?typeof o[p]!=typeof a[p]?f.push(p):typeof o[p]=="object"&&o[p]!=null&&a[p]!=null?0<uT(o[p],a[p]).length&&f.push(p):o[p]!==a[p]&&f.push(p):f.push(p);for(p in a)p in o||f.push(p);return f}function kL(){var o=Xt();return o=pa(o)!=hT?null:(o=o.match(/\sChrome\/(\d+)/i))&&o.length==2?parseInt(o[1],10):null,o&&30>o?!1:!Or||!Yi||9<Yi}function cT(o){return o=(o||Xt()).toLowerCase(),!!(o.match(/android/)||o.match(/webos/)||o.match(/iphone|ipad|ipod/)||o.match(/blackberry/)||o.match(/windows phone/)||o.match(/iemobile/))}function Go(o){o=o||l.window;try{o.close()}catch{}}function lT(o,a,f){var p=Math.floor(1e9*Math.random()).toString();a=a||500,f=f||600;var g=(window.screen.availHeight-f)/2,_=(window.screen.availWidth-a)/2;a={width:a,height:f,top:0<g?g:0,left:0<_?_:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},f=Xt().toLowerCase(),p&&(a.target=p,ce(f,"crios/")&&(a.target="_blank")),pa(Xt())==Jv&&(o=o||"http://localhost",a.scrollbars=!0),f=o||"",(o=a)||(o={}),p=window,a=f instanceof Un?f:vE(typeof f.href!="undefined"?f.href:String(f))||mE,f=o.target||f.target,g=[];for(b in o)switch(b){case"width":case"height":case"top":case"left":g.push(b+"="+o[b]);break;case"target":case"noopener":case"noreferrer":break;default:g.push(b+"="+(o[b]?1:0))}var b=g.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&p.navigator&&p.navigator.standalone&&f&&f!="_self"?(b=Nf(document,"A"),Xu(b,"HTMLAnchorElement"),a=a instanceof Un?a:gE(a),b.href=kf(a),b.setAttribute("target",f),o.noreferrer&&b.setAttribute("rel","noreferrer"),o=document.createEvent("MouseEvent"),o.initMouseEvent("click",!0,!0,p,1),b.dispatchEvent(o),b={}):o.noreferrer?(b=_E("",p,f,b),o=kf(a),b&&(XM&&ce(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),b.opener=null,o='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Cv(o)+'">',o=(p=fE())?p.createHTML(o):o,o=new ca(o,null,yE),p=b.document)&&(p.write($M(o)),p.close())):(b=_E(a,p,f,b))&&o.noopener&&(b.opener=null),b)try{b.focus()}catch{}return b}function RL(o){return new Le(function(a){function f(){fa(2e3).then(function(){if(!o||o.closed)a();else return f()})}return f()})}var NL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PL=/^[^@]+@[^@]+$/;function jf(){var o=null;return new Le(function(a){l.document.readyState=="complete"?a():(o=function(){a()},Vv(window,"load",o))}).o(function(a){throw Zn(window,"load",o),a})}function OL(){return Yv(void 0)?jf().then(function(){return new Le(function(o,a){var f=l.document,p=setTimeout(function(){a(Error("Cordova framework is not ready."))},1e3);f.addEventListener("deviceready",function(){clearTimeout(p),o()},!1)})}):ht(Error("Cordova must run in an Android or iOS file scheme."))}function Yv(o){return o=o||Xt(),!(ga()!=="file:"&&ga()!=="ionic:"||!o.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xv(){var o=l.window;try{return!(!o||o==o.top)}catch{return!1}}function Dr(){return typeof l.WorkerGlobalScope!="undefined"&&typeof l.importScripts=="function"}function Zr(){return fe.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":fe.INTERNAL.hasOwnProperty("node")?"Node":Dr()?"Worker":"Browser"}function fT(){var o=Zr();return o==="ReactNative"||o==="Node"}function DL(){for(var o=50,a=[];0<o;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return a.join("")}var Jv="Firefox",hT="Chrome";function pa(o){var a=o.toLowerCase();if(ce(a,"opera/")||ce(a,"opr/")||ce(a,"opios/"))return"Opera";if(ce(a,"iemobile"))return"IEMobile";if(ce(a,"msie")||ce(a,"trident/"))return"IE";if(ce(a,"edge/"))return"Edge";if(ce(a,"firefox/"))return Jv;if(ce(a,"silk/"))return"Silk";if(ce(a,"blackberry"))return"Blackberry";if(ce(a,"webos"))return"Webos";if(!ce(a,"safari/")||ce(a,"chrome/")||ce(a,"crios/")||ce(a,"android"))if(!ce(a,"chrome/")&&!ce(a,"crios/")||ce(a,"edge/")){if(ce(a,"android"))return"Android";if((o=o.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&o.length==2)return o[1]}else return hT;else return"Safari";return"Other"}var dT={md:"FirebaseCore-web",od:"FirebaseUI-web"};function va(o,a){a=a||[];var f=[],p={},g;for(g in dT)p[dT[g]]=!0;for(g=0;g<a.length;g++)typeof p[a[g]]!="undefined"&&(delete p[a[g]],f.push(a[g]));return f.sort(),a=f,a.length||(a=["FirebaseCore-web"]),f=Zr(),f==="Browser"?(p=Xt(),f=pa(p)):f==="Worker"&&(p=Xt(),f=pa(p)+"-"+f),f+"/JsCore/"+o+"/"+a.join(",")}function Xt(){return l.navigator&&l.navigator.userAgent||""}function dt(o,a){o=o.split("."),a=a||l;for(var f=0;f<o.length&&typeof a=="object"&&a!=null;f++)a=a[o[f]];return f!=o.length&&(a=void 0),a}function Zv(){try{var o=l.localStorage,a=zo();if(o)return o.setItem(a,"1"),o.removeItem(a),Qv()?!!l.indexedDB:!0}catch{return Dr()&&!!l.indexedDB}return!1}function $o(){return(Vf()||ga()==="chrome-extension:"||Yv())&&!fT()&&Zv()&&!Dr()}function Vf(){return ga()==="http:"||ga()==="https:"}function ga(){return l.location&&l.location.protocol||null}function ac(o){return o=o||Xt(),!(cT(o)||pa(o)==Jv)}function uc(o){return typeof o=="undefined"?null:iT(o)}function pT(o){var a={},f;for(f in o)o.hasOwnProperty(f)&&o[f]!==null&&o[f]!==void 0&&(a[f]=o[f]);return a}function ma(o){if(o!==null)return JSON.parse(o)}function zo(o){return o||Math.floor(1e9*Math.random()).toString()}function vT(o){return o=o||Xt(),!(pa(o)=="Safari"||o.toLowerCase().match(/iphone|ipad|ipod/))}function gT(){var o=l.___jsl;if(o&&o.H){for(var a in o.H)if(o.H[a].r=o.H[a].r||[],o.H[a].L=o.H[a].L||[],o.H[a].r=o.H[a].L.concat(),o.CP)for(var f=0;f<o.CP.length;f++)o.CP[f]=null}}function Zi(o,a){if(o>a)throw Error("Short delay should be less than long delay!");this.a=o,this.c=a,o=Xt(),a=Zr(),this.b=cT(o)||a==="ReactNative"}Zi.prototype.get=function(){var o=l.navigator;return(o&&typeof o.onLine=="boolean"&&(Vf()||ga()==="chrome-extension:"||typeof o.connection!="undefined")?o.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};function eg(){var o=l.document;return o&&typeof o.visibilityState!="undefined"?o.visibilityState=="visible":!0}function xL(){var o=l.document,a=null;return eg()||!o?ve():new Le(function(f){a=function(){eg()&&(o.removeEventListener("visibilitychange",a,!1),f())},o.addEventListener("visibilitychange",a,!1)}).o(function(f){throw o.removeEventListener("visibilitychange",a,!1),f})}function cc(o){try{var a=new Date(parseInt(o,10));if(!isNaN(a.getTime())&&!/[^0-9]/.test(o))return a.toUTCString()}catch{}return null}function mT(){return!(!dt("fireauth.oauthhelper",l)&&!dt("fireauth.iframe",l))}function ML(){var o=l.navigator;return o&&o.serviceWorker&&o.serviceWorker.controller||null}function LL(){var o=l.navigator;return o&&o.serviceWorker?ve().then(function(){return o.serviceWorker.ready}).then(function(a){return a.active||null}).o(function(){return null}):ve(null)}var yT={};function tg(o){yT[o]||(yT[o]=!0,typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(o))}var ng;try{var rg={};Object.defineProperty(rg,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(rg,"abcd",{configurable:!0,enumerable:!0,value:2}),ng=rg.abcd==2}catch{ng=!1}function ae(o,a,f){ng?Object.defineProperty(o,a,{configurable:!0,enumerable:!0,value:f}):o[a]=f}function Sn(o,a){if(a)for(var f in a)a.hasOwnProperty(f)&&ae(o,f,a[f])}function ei(o){var a={};return Sn(a,o),a}function FL(o){var a={},f;for(f in o)o.hasOwnProperty(f)&&(a[f]=o[f]);return a}function UL(o,a){if(!a||!a.length)return!0;if(!o)return!1;for(var f=0;f<a.length;f++){var p=o[a[f]];if(p==null||p==="")return!1}return!0}function ig(o){var a=o;if(typeof o=="object"&&o!=null){a="length"in o?[]:{};for(var f in o)ae(a,f,ig(o[f]))}return a}function og(o){var a=o&&(o[cg]?"phone":null);if(a&&o&&o[ug]){ae(this,"uid",o[ug]),ae(this,"displayName",o[_T]||null);var f=null;o[ag]&&(f=new Date(o[ag]).toUTCString()),ae(this,"enrollmentTime",f),ae(this,"factorId",a)}else throw new N("internal-error","Internal assert: invalid MultiFactorInfo object")}og.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function sg(o){try{var a=new lc(o)}catch{a=null}return a}var _T="displayName",ag="enrolledAt",ug="mfaEnrollmentId",cg="phoneInfo";function lc(o){og.call(this,o),ae(this,"phoneNumber",o[cg])}te(lc,og),lc.prototype.w=function(){var o=lc.bb.w.call(this);return o.phoneNumber=this.phoneNumber,o};function jL(o){var a={},f=o[VL],p=o[qL],g=o[KL];if(o=sg(o[BL]),!g||g!=Bf&&g!=fc&&!f||g==fc&&!p||g==lg&&!o)throw Error("Invalid checkActionCode response!");g==fc?(a[bT]=f||null,a[ET]=f||null,a[wT]=p):(a[bT]=p||null,a[ET]=p||null,a[wT]=f||null),a[HL]=o||null,ae(this,GL,g),ae(this,WL,ig(a))}var lg="REVERT_SECOND_FACTOR_ADDITION",Bf="EMAIL_SIGNIN",fc="VERIFY_AND_CHANGE_EMAIL",VL="email",BL="mfaInfo",qL="newEmail",KL="requestType",wT="email",bT="fromEmail",HL="multiFactorInfo",ET="previousEmail",WL="data",GL="operation";function fg(o){o=Vn(o);var a=vr(o,TT)||null,f=vr(o,IT)||null,p=vr(o,ST)||null;if(p=p&&YL[p]||null,!a||!f||!p)throw new N("argument-error",TT+", "+IT+"and "+ST+" are required in a valid action code URL.");Sn(this,{apiKey:a,operation:p,code:f,continueUrl:vr(o,$L)||null,languageCode:vr(o,zL)||null,tenantId:vr(o,QL)||null})}var TT="apiKey",IT="oobCode",$L="continueUrl",zL="languageCode",ST="mode",QL="tenantId",YL={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:lg,signIn:Bf,verifyAndChangeEmail:fc,verifyEmail:"VERIFY_EMAIL"};function CT(o){try{return new fg(o)}catch{return null}}function qf(o){var a=o[XL];if(typeof a=="undefined")throw new N("missing-continue-uri");if(typeof a!="string"||typeof a=="string"&&!a.length)throw new N("invalid-continue-uri");this.h=a,this.b=this.a=null,this.g=!1;var f=o[AT];if(f&&typeof f=="object"){a=f[OT];var p=f[NT];if(f=f[PT],typeof a=="string"&&a.length){if(this.a=a,typeof p!="undefined"&&typeof p!="boolean")throw new N("argument-error",NT+" property must be a boolean when specified.");if(this.g=!!p,typeof f!="undefined"&&(typeof f!="string"||typeof f=="string"&&!f.length))throw new N("argument-error",PT+" property must be a non empty string when specified.");this.b=f||null}else{if(typeof a!="undefined")throw new N("argument-error",OT+" property must be a non empty string when specified.");if(typeof p!="undefined"||typeof f!="undefined")throw new N("missing-android-pkg-name")}}else if(typeof f!="undefined")throw new N("argument-error",AT+" property must be a non null object when specified.");if(this.f=null,(a=o[RT])&&typeof a=="object"){if(a=a[DT],typeof a=="string"&&a.length)this.f=a;else if(typeof a!="undefined")throw new N("argument-error",DT+" property must be a non empty string when specified.")}else if(typeof a!="undefined")throw new N("argument-error",RT+" property must be a non null object when specified.");if(a=o[hg],typeof a!="undefined"&&typeof a!="boolean")throw new N("argument-error",hg+" property must be a boolean when specified.");if(this.c=!!a,o=o[kT],typeof o!="undefined"&&(typeof o!="string"||typeof o=="string"&&!o.length))throw new N("argument-error",kT+" property must be a non empty string when specified.");this.i=o||null}var AT="android",kT="dynamicLinkDomain",hg="handleCodeInApp",RT="iOS",XL="url",NT="installApp",PT="minimumVersion",OT="packageName",DT="bundleId";function Kf(o){var a={};a.continueUrl=o.h,a.canHandleCodeInApp=o.c,(a.androidPackageName=o.a)&&(a.androidMinimumVersion=o.b,a.androidInstallApp=o.g),a.iOSBundleId=o.f,a.dynamicLinkDomain=o.i;for(var f in a)a[f]===null&&delete a[f];return a}function JL(o){return Se(o,function(a){return a=a.toString(16),1<a.length?a:"0"+a}).join("")}var hc=null;function ZL(o){var a=[];return eF(o,function(f){a.push(f)}),a}function eF(o,a){function f(x){for(;p<o.length;){var V=o.charAt(p++),we=hc[V];if(we!=null)return we;if(!/^[\s\xa0]*$/.test(V))throw Error("Unknown base64 encoding at char: "+V)}return x}tF();for(var p=0;;){var g=f(-1),_=f(0),b=f(64),I=f(64);if(I===64&&g===-1)break;a(g<<2|_>>4),b!=64&&(a(_<<4&240|b>>2),I!=64&&a(b<<6&192|I))}}function tF(){if(!hc){hc={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),a=["+/=","+/","-_=","-_.","-_"],f=0;5>f;f++)for(var p=o.concat(a[f].split("")),g=0;g<p.length;g++){var _=p[g];hc[_]===void 0&&(hc[_]=g)}}}function Hf(o){var a=xT(o);if(!(a&&a.sub&&a.iss&&a.aud&&a.exp))throw Error("Invalid JWT");this.h=o,this.a=a.exp,this.i=a.sub,o=Date.now()/1e3,this.g=a.iat||(o>this.a?this.a:o),this.b=a.provider_id||a.firebase&&a.firebase.sign_in_provider||null,this.f=a.firebase&&a.firebase.tenant||null,this.c=!!a.is_anonymous||this.b=="anonymous"}Hf.prototype.T=function(){return this.f},Hf.prototype.l=function(){return this.c},Hf.prototype.toString=function(){return this.h};function Wf(o){try{return new Hf(o)}catch{return null}}function xT(o){if(!o||(o=o.split("."),o.length!=3))return null;o=o[1];for(var a=(4-o.length%4)%4,f=0;f<a;f++)o+=".";try{var p=ZL(o);for(o=[],f=a=0;a<p.length;){var g=p[a++];if(128>g)o[f++]=String.fromCharCode(g);else if(191<g&&224>g){var _=p[a++];o[f++]=String.fromCharCode((g&31)<<6|_&63)}else if(239<g&&365>g){_=p[a++];var b=p[a++],I=p[a++],x=((g&7)<<18|(_&63)<<12|(b&63)<<6|I&63)-65536;o[f++]=String.fromCharCode(55296+(x>>10)),o[f++]=String.fromCharCode(56320+(x&1023))}else _=p[a++],b=p[a++],o[f++]=String.fromCharCode((g&15)<<12|(_&63)<<6|b&63)}return JSON.parse(o.join(""))}catch{}return null}var MT="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gf=["client_id","response_type","scope","redirect_uri","state"],dg={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Gf},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Gf},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Gf},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:MT},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function pg(o){for(var a in dg)if(dg[a].fa==o)return dg[a];return null}function LT(o){var a={};a["facebook.com"]=UT,a["google.com"]=VT,a["github.com"]=jT,a["twitter.com"]=BT;var f=o&&o[FT];try{if(f)return a[f]?new a[f](o):new ti(o);if(typeof o[vg]!="undefined")return new gg(o)}catch{}return null}var vg="idToken",FT="providerId";function gg(o){var a=o[FT];if(!a&&o[vg]){var f=Wf(o[vg]);f&&f.b&&(a=f.b)}if(!a)throw Error("Invalid additional user info!");(a=="anonymous"||a=="custom")&&(a=null),f=!1,typeof o.isNewUser!="undefined"?f=!!o.isNewUser:o.kind==="identitytoolkit#SignupNewUserResponse"&&(f=!0),ae(this,"providerId",a),ae(this,"isNewUser",f)}function ti(o){gg.call(this,o),o=ma(o.rawUserInfo||"{}"),ae(this,"profile",ig(o||{}))}te(ti,gg);function UT(o){if(ti.call(this,o),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}te(UT,ti);function jT(o){if(ti.call(this,o),this.providerId!="github.com")throw Error("Invalid provider ID!");ae(this,"username",this.profile&&this.profile.login||null)}te(jT,ti);function VT(o){if(ti.call(this,o),this.providerId!="google.com")throw Error("Invalid provider ID!")}te(VT,ti);function BT(o){if(ti.call(this,o),this.providerId!="twitter.com")throw Error("Invalid provider ID!");ae(this,"username",o.screenName||null)}te(BT,ti);function qT(o){var a=Vn(o),f=vr(a,"link"),p=vr(Vn(f),"link");return a=vr(a,"deep_link_id"),vr(Vn(a),"link")||a||p||f||o}function $f(o,a){if(!o&&!a)throw new N("internal-error","Internal assert: no raw session string available");if(o&&a)throw new N("internal-error","Internal assert: unable to determine the session type");this.a=o||null,this.b=a||null,this.type=this.a?dc:zf}var dc="enroll",zf="signin";$f.prototype.Ha=function(){return this.a?ve(this.a):ve(this.b)},$f.prototype.w=function(){return this.type==dc?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function ya(){}ya.prototype.ka=function(){},ya.prototype.b=function(){},ya.prototype.c=function(){},ya.prototype.w=function(){};function _a(o,a){return o.then(function(f){if(f[Lr]){var p=Wf(f[Lr]);if(!p||a!=p.i)throw new N("user-mismatch");return f}throw new N("user-mismatch")}).o(function(f){throw f&&f.code&&f.code==Et+"user-not-found"?new N("user-mismatch"):f})}function Qo(o,a){if(a)this.a=a;else throw new N("internal-error","failed to construct a credential");ae(this,"providerId",o),ae(this,"signInMethod",o)}Qo.prototype.ka=function(o){return Vg(o,mg(this))},Qo.prototype.b=function(o,a){var f=mg(this);return f.idToken=a,Bg(o,f)},Qo.prototype.c=function(o,a){return _a(qg(o,mg(this)),a)};function mg(o){return{pendingToken:o.a,requestUri:"http://localhost"}}Qo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function nF(o){if(o&&o.providerId&&o.signInMethod&&o.providerId.indexOf("saml.")==0&&o.pendingToken)try{return new Qo(o.providerId,o.pendingToken)}catch{}return null}function Ci(o,a,f){if(this.a=null,a.idToken||a.accessToken)a.idToken&&ae(this,"idToken",a.idToken),a.accessToken&&ae(this,"accessToken",a.accessToken),a.nonce&&!a.pendingToken&&ae(this,"nonce",a.nonce),a.pendingToken&&(this.a=a.pendingToken);else if(a.oauthToken&&a.oauthTokenSecret)ae(this,"accessToken",a.oauthToken),ae(this,"secret",a.oauthTokenSecret);else throw new N("internal-error","failed to construct a credential");ae(this,"providerId",o),ae(this,"signInMethod",f)}Ci.prototype.ka=function(o){return Vg(o,yg(this))},Ci.prototype.b=function(o,a){var f=yg(this);return f.idToken=a,Bg(o,f)},Ci.prototype.c=function(o,a){var f=yg(this);return _a(qg(o,f),a)};function yg(o){var a={};return o.idToken&&(a.id_token=o.idToken),o.accessToken&&(a.access_token=o.accessToken),o.secret&&(a.oauth_token_secret=o.secret),a.providerId=o.providerId,o.nonce&&!o.a&&(a.nonce=o.nonce),a={postBody:tT(a).toString(),requestUri:"http://localhost"},o.a&&(delete a.postBody,a.pendingToken=o.a),a}Ci.prototype.w=function(){var o={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(o.oauthIdToken=this.idToken),this.accessToken&&(o.oauthAccessToken=this.accessToken),this.secret&&(o.oauthTokenSecret=this.secret),this.nonce&&(o.nonce=this.nonce),this.a&&(o.pendingToken=this.a),o};function rF(o){if(o&&o.providerId&&o.signInMethod){var a={idToken:o.oauthIdToken,accessToken:o.oauthTokenSecret?null:o.oauthAccessToken,oauthTokenSecret:o.oauthTokenSecret,oauthToken:o.oauthTokenSecret&&o.oauthAccessToken,nonce:o.nonce,pendingToken:o.pendingToken};try{return new Ci(o.providerId,a,o.signInMethod)}catch{}}return null}function Yo(o,a){this.Qc=a||[],Sn(this,{providerId:o,isOAuthProvider:!0}),this.Jb={},this.qb=(pg(o)||{}).Ja||null,this.pb=null}Yo.prototype.Ka=function(o){return this.Jb=Pr(o),this};function KT(o){if(typeof o!="string"||o.indexOf("saml.")!=0)throw new N("argument-error",'SAML provider IDs must be prefixed with "saml."');Yo.call(this,o,[])}te(KT,Yo);function er(o){Yo.call(this,o,Gf),this.a=[]}te(er,Yo),er.prototype.Ca=function(o){return R(this.a,o)||this.a.push(o),this},er.prototype.Rb=function(){return W(this.a)},er.prototype.credential=function(o,a){var f;if(T(o)?f={idToken:o.idToken||null,accessToken:o.accessToken||null,nonce:o.rawNonce||null}:f={idToken:o||null,accessToken:a||null},!f.idToken&&!f.accessToken)throw new N("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ci(this.providerId,f,this.providerId)};function Xo(){er.call(this,"facebook.com")}te(Xo,er),ae(Xo,"PROVIDER_ID","facebook.com"),ae(Xo,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function HT(o){if(!o)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var a=o;return T(o)&&(a=o.accessToken),new Xo().credential({accessToken:a})}function Jo(){er.call(this,"github.com")}te(Jo,er),ae(Jo,"PROVIDER_ID","github.com"),ae(Jo,"GITHUB_SIGN_IN_METHOD","github.com");function WT(o){if(!o)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var a=o;return T(o)&&(a=o.accessToken),new Jo().credential({accessToken:a})}function Zo(){er.call(this,"google.com"),this.Ca("profile")}te(Zo,er),ae(Zo,"PROVIDER_ID","google.com"),ae(Zo,"GOOGLE_SIGN_IN_METHOD","google.com");function GT(o,a){var f=o;return T(o)&&(f=o.idToken,a=o.accessToken),new Zo().credential({idToken:f,accessToken:a})}function wa(){Yo.call(this,"twitter.com",MT)}te(wa,Yo),ae(wa,"PROVIDER_ID","twitter.com"),ae(wa,"TWITTER_SIGN_IN_METHOD","twitter.com");function $T(o,a){var f=o;if(T(f)||(f={oauthToken:o,oauthTokenSecret:a}),!f.oauthToken||!f.oauthTokenSecret)throw new N("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ci("twitter.com",f,"twitter.com")}function eo(o,a,f){this.a=o,this.f=a,ae(this,"providerId","password"),ae(this,"signInMethod",f===gr.EMAIL_LINK_SIGN_IN_METHOD?gr.EMAIL_LINK_SIGN_IN_METHOD:gr.EMAIL_PASSWORD_SIGN_IN_METHOD)}eo.prototype.ka=function(o){return this.signInMethod==gr.EMAIL_LINK_SIGN_IN_METHOD?Fe(o,BF,{email:this.a,oobCode:this.f}):Fe(o,bI,{email:this.a,password:this.f})},eo.prototype.b=function(o,a){return this.signInMethod==gr.EMAIL_LINK_SIGN_IN_METHOD?Fe(o,qF,{idToken:a,email:this.a,oobCode:this.f}):Fe(o,wI,{idToken:a,email:this.a,password:this.f})},eo.prototype.c=function(o,a){return _a(this.ka(o),a)},eo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function iF(o){return o&&o.email&&o.password?new eo(o.email,o.password,o.signInMethod):null}function gr(){Sn(this,{providerId:"password",isOAuthProvider:!1})}function zT(o,a){if(a=_g(a),!a)throw new N("argument-error","Invalid email link!");return new eo(o,a.code,gr.EMAIL_LINK_SIGN_IN_METHOD)}function _g(o){return o=qT(o),(o=CT(o))&&o.operation===Bf?o:null}Sn(gr,{PROVIDER_ID:"password"}),Sn(gr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Sn(gr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function to(o){if(!(o.fb&&o.eb||o.La&&o.ea))throw new N("internal-error");this.a=o,ae(this,"providerId","phone"),this.fa="phone",ae(this,"signInMethod","phone")}to.prototype.ka=function(o){return o.gb(pc(this))},to.prototype.b=function(o,a){var f=pc(this);return f.idToken=a,Fe(o,u2,f)},to.prototype.c=function(o,a){var f=pc(this);return f.operation="REAUTH",o=Fe(o,c2,f),_a(o,a)},to.prototype.w=function(){var o={providerId:"phone"};return this.a.fb&&(o.verificationId=this.a.fb),this.a.eb&&(o.verificationCode=this.a.eb),this.a.La&&(o.temporaryProof=this.a.La),this.a.ea&&(o.phoneNumber=this.a.ea),o};function oF(o){if(o&&o.providerId==="phone"&&(o.verificationId&&o.verificationCode||o.temporaryProof&&o.phoneNumber)){var a={};return J(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(f){o[f]&&(a[f]=o[f])}),new to(a)}return null}function pc(o){return o.a.La&&o.a.ea?{temporaryProof:o.a.La,phoneNumber:o.a.ea}:{sessionInfo:o.a.fb,code:o.a.eb}}function Ai(o){try{this.a=o||fe.auth()}catch{throw new N("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Sn(this,{providerId:"phone",isOAuthProvider:!1})}Ai.prototype.gb=function(o,a){var f=this.a.a;return ve(a.verify()).then(function(p){if(typeof p!="string")throw new N("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(a.type){case"recaptcha":var g=T(o)?o.session:null,_=T(o)?o.phoneNumber:o,b;return g&&g.type==dc?b=g.Ha().then(function(I){return OF(f,{idToken:I,phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:p}})}):g&&g.type==zf?b=g.Ha().then(function(I){return DF(f,{mfaPendingCredential:I,mfaEnrollmentId:o.multiFactorHint&&o.multiFactorHint.uid||o.multiFactorUid,phoneSignInInfo:{recaptchaToken:p}})}):b=PF(f,{phoneNumber:_,recaptchaToken:p}),b.then(function(I){return typeof a.reset=="function"&&a.reset(),I},function(I){throw typeof a.reset=="function"&&a.reset(),I});default:throw new N("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function QT(o,a){if(!o)throw new N("missing-verification-id");if(!a)throw new N("missing-verification-code");return new to({fb:o,eb:a})}Sn(Ai,{PROVIDER_ID:"phone"}),Sn(Ai,{PHONE_SIGN_IN_METHOD:"phone"});function wg(o){if(o.temporaryProof&&o.phoneNumber)return new to({La:o.temporaryProof,ea:o.phoneNumber});var a=o&&o.providerId;if(!a||a==="password")return null;var f=o&&o.oauthAccessToken,p=o&&o.oauthTokenSecret,g=o&&o.nonce,_=o&&o.oauthIdToken,b=o&&o.pendingToken;try{switch(a){case"google.com":return GT(_,f);case"facebook.com":return HT(f);case"github.com":return WT(f);case"twitter.com":return $T(f,p);default:return f||p||_||b?b?a.indexOf("saml.")==0?new Qo(a,b):new Ci(a,{pendingToken:b,idToken:o.oauthIdToken,accessToken:o.oauthAccessToken},a):new er(a).credential({idToken:_,accessToken:f,rawNonce:g}):null}}catch{return null}}function bg(o){if(!o.isOAuthProvider)throw new N("invalid-oauth-provider")}function xr(o,a,f,p,g,_,b){if(this.c=o,this.b=a||null,this.g=f||null,this.f=p||null,this.i=_||null,this.h=b||null,this.a=g||null,this.g||this.a){if(this.g&&this.a)throw new N("invalid-auth-event");if(this.g&&!this.f)throw new N("invalid-auth-event")}else throw new N("invalid-auth-event")}xr.prototype.getUid=function(){var o=[];return o.push(this.c),this.b&&o.push(this.b),this.f&&o.push(this.f),this.h&&o.push(this.h),o.join("-")},xr.prototype.T=function(){return this.h},xr.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function YT(o){return o=o||{},o.type?new xr(o.type,o.eventId,o.urlResponse,o.sessionId,o.error&&_t(o.error),o.postBody,o.tenantId):null}function sF(){this.b=null,this.a=[]}var Eg=null;function aF(o){var a=Eg;a.a.push(o),a.b||(a.b=function(f){for(var p=0;p<a.a.length;p++)a.a[p](f)},o=dt("universalLinks.subscribe",l),typeof o=="function"&&o(null,a.b))}function Tg(o){var a="unauthorized-domain",f=void 0,p=Vn(o);o=p.a,p=p.c,p=="chrome-extension"?f=wE("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):p=="http"||p=="https"?f=wE("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):a="operation-not-supported-in-this-environment",N.call(this,a,f)}te(Tg,N);function vc(o,a,f){N.call(this,o,f),o=a||{},o.Kb&&ae(this,"email",o.Kb),o.ea&&ae(this,"phoneNumber",o.ea),o.credential&&ae(this,"credential",o.credential),o.$b&&ae(this,"tenantId",o.$b)}te(vc,N),vc.prototype.w=function(){var o={code:this.code,message:this.message};this.email&&(o.email=this.email),this.phoneNumber&&(o.phoneNumber=this.phoneNumber),this.tenantId&&(o.tenantId=this.tenantId);var a=this.credential&&this.credential.w();return a&&lt(o,a),o},vc.prototype.toJSON=function(){return this.w()};function Qf(o){if(o.code){var a=o.code||"";a.indexOf(Et)==0&&(a=a.substring(Et.length));var f={credential:wg(o),$b:o.tenantId};if(o.email)f.Kb=o.email;else if(o.phoneNumber)f.ea=o.phoneNumber;else if(!f.credential)return new N(a,o.message||void 0);return new vc(a,f,o.message)}return null}function gc(){}gc.prototype.c=null;function XT(o){return o.c||(o.c=o.b())}var Ig;function Yf(){}te(Yf,gc),Yf.prototype.a=function(){var o=JT(this);return o?new ActiveXObject(o):new XMLHttpRequest},Yf.prototype.b=function(){var o={};return JT(this)&&(o[0]=!0,o[1]=!0),o};function JT(o){if(!o.f&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],f=0;f<a.length;f++){var p=a[f];try{return new ActiveXObject(p),o.f=p}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return o.f}Ig=new Yf;function Xf(){}te(Xf,gc),Xf.prototype.a=function(){var o=new XMLHttpRequest;if("withCredentials"in o)return o;if(typeof XDomainRequest!="undefined")return new ZT;throw Error("Unsupported browser")},Xf.prototype.b=function(){return{}};function ZT(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=F(this.qc,this),this.a.onerror=F(this.Tb,this),this.a.onprogress=F(this.rc,this),this.a.ontimeout=F(this.vc,this)}e=ZT.prototype,e.open=function(o,a,f){if(f!=null&&!f)throw Error("Only async requests are supported.");this.a.open(o,a)},e.send=function(o){if(o)if(typeof o=="string")this.a.send(o);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(o){return o.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Sg(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",Sg(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,Sg(this,1)};function Sg(o,a){o.readyState=a,o.onreadystatechange&&o.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function Cg(o,a,f){this.reset(o,a,f,void 0,void 0)}Cg.prototype.a=null,Cg.prototype.reset=function(o,a,f,p,g){delete this.a};function Ag(o){this.f=o,this.b=this.c=this.a=null}function mc(o,a){this.name=o,this.value=a}mc.prototype.toString=function(){return this.name};var eI=new mc("SEVERE",1e3),kg=new mc("WARNING",900),uF=new mc("CONFIG",700),cF=new mc("FINE",500);function tI(o){return o.c?o.c:o.a?tI(o.a):(Qn("Root logger has no level set."),null)}Ag.prototype.log=function(o,a,f){if(o.value>=tI(this).value)for(E(a)&&(a=a()),o=new Cg(o,String(a),this.f),f&&(o.a=f),f=this;f;)f=f.a};var Rg={},Jf=null;function Ng(o){Jf||(Jf=new Ag(""),Rg[""]=Jf,Jf.c=uF);var a;if(!(a=Rg[o])){a=new Ag(o);var f=o.lastIndexOf("."),p=o.substr(f+1);f=Ng(o.substr(0,f)),f.b||(f.b={}),f.b[p]=a,a.a=f,Rg[o]=a}return a}function mr(o,a){o&&o.log(cF,a,void 0)}function Zf(o){this.f=o}te(Zf,gc),Zf.prototype.a=function(){return new eh(this.f)},Zf.prototype.b=function(o){return function(){return o}}({});function eh(o){In.call(this),this.u=o,this.h=void 0,this.readyState=Pg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Ng("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}te(eh,In);var Pg=0;e=eh.prototype,e.open=function(o,a){if(this.readyState!=Pg)throw this.abort(),Error("Error reopening a connection");this.s=o,this.f=a,this.readyState=1,_c(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var a={headers:this.l,method:this.s,credentials:this.h,cache:void 0};o&&(a.body=o),this.u.fetch(new Request(this.f,a)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,yc(this)),this.readyState=Pg},e.uc=function(o){this.a&&(this.g=o,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=o.headers,this.readyState=2,_c(this)),this.a&&(this.readyState=3,_c(this),this.a&&(this.responseType==="arraybuffer"?o.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof l.ReadableStream!="undefined"&&"body"in o?(this.response=this.responseText="",this.c=o.body.getReader(),this.m=new TextDecoder,nI(this)):o.text().then(this.tc.bind(this),this.Va.bind(this)))))};function nI(o){o.c.read().then(o.pc.bind(o)).catch(o.Va.bind(o))}e.pc=function(o){if(this.a){var a=this.m.decode(o.value?o.value:new Uint8Array(0),{stream:!o.done});a&&(this.response=this.responseText+=a),o.done?yc(this):_c(this),this.readyState==3&&nI(this)}},e.tc=function(o){this.a&&(this.response=this.responseText=o,yc(this))},e.sc=function(o){this.a&&(this.response=o,yc(this))},e.Va=function(o){var a=this.i;a&&a.log(kg,"Failed to fetch url "+this.f,o instanceof Error?o:Error(o)),this.a&&yc(this)};function yc(o){o.readyState=4,o.g=null,o.c=null,o.m=null,_c(o)}e.setRequestHeader=function(o,a){this.l.append(o,a)},e.getResponseHeader=function(o){return this.b?this.b.get(o.toLowerCase())||"":((o=this.i)&&o.log(kg,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var o=this.i;return o&&o.log(kg,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}o=[];for(var a=this.b.entries(),f=a.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=a.next();return o.join(`\r
`)};function _c(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(eh.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(o){this.h=o?"include":"same-origin"}});function wc(o){In.call(this),this.headers=new ha,this.D=o||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=rI,this.u=this.S=!1}te(wc,In);var rI="";wc.prototype.b=Ng("goog.net.XhrIo");var lF=/^https?$/i,fF=["POST","PUT"];function hF(o,a,f,p,g){if(o.a)throw Error("[goog.net.XhrIo] Object is active with another request="+o.l+"; newUri="+a);f=f?f.toUpperCase():"GET",o.l=a,o.h="",o.P=f,o.J=!1,o.c=!0,o.a=o.D?o.D.a():Ig.a(),o.C=o.D?XT(o.D):XT(Ig),o.a.onreadystatechange=F(o.Wb,o);try{mr(o.b,ki(o,"Opening Xhr")),o.N=!0,o.a.open(f,String(a),!0),o.N=!1}catch(b){mr(o.b,ki(o,"Error opening Xhr: "+b.message)),iI(o,b);return}a=p||"";var _=new ha(o.headers);g&&yL(g,function(b,I){_.set(I,b)}),g=S(_.Y()),p=l.FormData&&a instanceof l.FormData,!R(fF,f)||g||p||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),_.forEach(function(b,I){this.a.setRequestHeader(I,b)},o),o.m&&(o.a.responseType=o.m),"withCredentials"in o.a&&o.a.withCredentials!==o.S&&(o.a.withCredentials=o.S);try{aI(o),0<o.g&&(o.u=dF(o.a),mr(o.b,ki(o,"Will abort after "+o.g+"ms if incomplete, xhr2 "+o.u)),o.u?(o.a.timeout=o.g,o.a.ontimeout=F(o.Ma,o)):o.s=Hv(o.Ma,o.g,o)),mr(o.b,ki(o,"Sending request")),o.i=!0,o.a.send(a),o.i=!1}catch(b){mr(o.b,ki(o,"Send error: "+b.message)),iI(o,b)}}function dF(o){return Or&&IE(9)&&typeof o.timeout=="number"&&o.ontimeout!==void 0}function pF(o){return o.toLowerCase()=="content-type"}e=wc.prototype,e.Ma=function(){typeof c!="undefined"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",mr(this.b,ki(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function iI(o,a){o.c=!1,o.a&&(o.f=!0,o.a.abort(),o.f=!1),o.h=a,oI(o),th(o)}function oI(o){o.J||(o.J=!0,o.dispatchEvent("complete"),o.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(mr(this.b,ki(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),th(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),th(this,!0)),wc.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?sI(this):this.Jc())},e.Jc=function(){sI(this)};function sI(o){if(o.c&&typeof c!="undefined"){if(o.C[1]&&bc(o)==4&&nh(o)==2)mr(o.b,ki(o,"Local request error detected and ignored"));else if(o.i&&bc(o)==4)Hv(o.Wb,0,o);else if(o.dispatchEvent("readystatechange"),bc(o)==4){mr(o.b,ki(o,"Request complete")),o.c=!1;try{var a=nh(o);e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var g;if(g=a===0){var _=String(o.l).match(ZE)[1]||null;if(!_&&l.self&&l.self.location){var b=l.self.location.protocol;_=b.substr(0,b.length-1)}g=!lF.test(_?_.toLowerCase():"")}p=g}if(p)o.dispatchEvent("complete"),o.dispatchEvent("success");else{try{var I=2<bc(o)?o.a.statusText:""}catch(x){mr(o.b,"Can not get status: "+x.message),I=""}o.h=I+" ["+nh(o)+"]",oI(o)}}finally{th(o)}}}}function th(o,a){if(o.a){aI(o);var f=o.a,p=o.C[0]?m:null;o.a=null,o.C=null,a||o.dispatchEvent("ready");try{f.onreadystatechange=p}catch(g){(o=o.b)&&o.log(eI,"Problem encountered resetting onreadystatechange: "+g.message,void 0)}}}function aI(o){o.a&&o.u&&(o.a.ontimeout=null),o.s&&(l.clearTimeout(o.s),o.s=null)}function bc(o){return o.a?o.a.readyState:0}function nh(o){try{return 2<bc(o)?o.a.status:-1}catch{return-1}}function vF(o){try{return o.a?o.a.responseText:""}catch(a){return mr(o.b,"Can not get responseText: "+a.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case rI:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var o=this.b;return o&&o.log(eI,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(a){return mr(this.b,"Can not get response: "+a.message),null}};function ki(o,a){return a+" ["+o.P+" "+o.l+" "+nh(o)+"]"}function es(o){var a=yF;this.g=[],this.u=a,this.s=o||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}es.prototype.cancel=function(o){if(this.a)this.c instanceof es&&this.c.cancel();else{if(this.b){var a=this.b;delete this.b,o?a.cancel(o):(a.l--,0>=a.l&&a.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(o=new Tc(this),rh(this),Ec(this,!1,o))}},es.prototype.m=function(o,a){this.i=!1,Ec(this,o,a)};function Ec(o,a,f){o.a=!0,o.c=f,o.f=!a,cI(o)}function rh(o){if(o.a){if(!o.v)throw new ih(o);o.v=!1}}function gF(o,a){Og(o,null,a,void 0)}function Og(o,a,f,p){o.g.push([a,f,p]),o.a&&cI(o)}es.prototype.then=function(o,a,f){var p,g,_=new Le(function(b,I){p=b,g=I});return Og(this,p,function(b){b instanceof Tc?_.cancel():g(b)}),_.then(o,a,f)},es.prototype.$goog_Thenable=!0;function uI(o){return Ce(o.g,function(a){return E(a[1])})}function cI(o){if(o.h&&o.a&&uI(o)){var a=o.h,f=oh[a];f&&(l.clearTimeout(f.a),delete oh[a]),o.h=0}o.b&&(o.b.l--,delete o.b),a=o.c;for(var p=f=!1;o.g.length&&!o.i;){var g=o.g.shift(),_=g[0],b=g[1];if(g=g[2],_=o.f?b:_)try{var I=_.call(g||o.s,a);I!==void 0&&(o.f=o.f&&(I==a||I instanceof Error),o.c=a=I),(Qe(a)||typeof l.Promise=="function"&&a instanceof l.Promise)&&(p=!0,o.i=!0)}catch(x){a=x,o.f=!0,uI(o)||(f=!0)}}o.c=a,p&&(I=F(o.m,o,!0),p=F(o.m,o,!1),a instanceof es?(Og(a,I,p),a.C=!0):a.then(I,p)),f&&(a=new lI(a),oh[a.a]=a,o.h=a.a)}function ih(){Ae.call(this)}te(ih,Ae),ih.prototype.message="Deferred has already fired",ih.prototype.name="AlreadyCalledError";function Tc(){Ae.call(this)}te(Tc,Ae),Tc.prototype.message="Deferred was canceled",Tc.prototype.name="CanceledError";function lI(o){this.a=l.setTimeout(F(this.c,this),0),this.b=o}lI.prototype.c=function(){throw delete oh[this.a],this.b};var oh={};function Dg(o){var a=document,f=hE(o).toString(),p=Nf(document,"SCRIPT"),g={Xb:p,Ma:void 0},_=new es(g),b=null,I=5e3;return b=window.setTimeout(function(){sh(p,!0);var x=new xg(wF,"Timeout reached for loading script "+f);rh(_),Ec(_,!1,x)},I),g.Ma=b,p.onload=p.onreadystatechange=function(){p.readyState&&p.readyState!="loaded"&&p.readyState!="complete"||(sh(p,!1,b),rh(_),Ec(_,!0,null))},p.onerror=function(){sh(p,!0,b);var x=new xg(_F,"Error while loading script "+f);rh(_),Ec(_,!1,x)},g={},lt(g,{type:"text/javascript",charset:"UTF-8"}),CE(p,g),zM(p,o),mF(a).appendChild(p),_}function mF(o){var a;return(a=(o||document).getElementsByTagName("HEAD"))&&a.length!=0?a[0]:o.documentElement}function yF(){if(this&&this.Xb){var o=this.Xb;o&&o.tagName=="SCRIPT"&&sh(o,!0,this.Ma)}}function sh(o,a,f){f!=null&&l.clearTimeout(f),o.onload=m,o.onerror=m,o.onreadystatechange=m,a&&window.setTimeout(function(){o&&o.parentNode&&o.parentNode.removeChild(o)},0)}var _F=0,wF=1;function xg(o,a){var f="Jsloader error (code #"+o+")";a&&(f+=": "+a),Ae.call(this,f),this.code=o}te(xg,Ae);function ah(o){this.f=o}te(ah,gc),ah.prototype.a=function(){return new this.f},ah.prototype.b=function(){return{}};function Mr(o,a,f){if(this.c=o,o=a||{},this.l=o.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=o.secureTokenTimeout||bF,this.g=Pr(o.secureTokenHeaders||EF),this.h=o.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=o.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=o.firebaseTimeout||TF,this.a=Pr(o.firebaseHeaders||IF),f&&(this.a["X-Client-Version"]=f,this.g["X-Client-Version"]=f),f=Zr()=="Node",f=l.XMLHttpRequest||f&&fe.INTERNAL.node&&fe.INTERNAL.node.XMLHttpRequest,!f&&!Dr())throw new N("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Dr()?this.f=new Zf(self):fT()?this.f=new ah(f):this.f=new Xf,this.b=null}var Mg,Lr="idToken",bF=new Zi(3e4,6e4),EF={"Content-Type":"application/x-www-form-urlencoded"},TF=new Zi(3e4,6e4),IF={"Content-Type":"application/json"};function fI(o,a){a?o.a["X-Firebase-Locale"]=a:delete o.a["X-Firebase-Locale"]}function uh(o,a){a&&(o.l=Lg("https://securetoken.googleapis.com/v1/token",a),o.h=Lg("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",a),o.i=Lg("https://identitytoolkit.googleapis.com/v2/",a))}function Lg(o,a){return o=Vn(o),a=Vn(a.url),o.f=o.a+o.f,nc(o,a.c),o.a=a.a,rc(o,a.g),o.toString()}function hI(o,a){a?(o.a["X-Client-Version"]=a,o.g["X-Client-Version"]=a):(delete o.a["X-Client-Version"],delete o.g["X-Client-Version"])}Mr.prototype.T=function(){return this.b};function dI(o,a,f,p,g,_,b){kL()||Dr()?o=F(o.u,o):(Mg||(Mg=new Le(function(I,x){CF(I,x)})),o=F(o.s,o)),o(a,f,p,g,_,b)}Mr.prototype.u=function(o,a,f,p,g,_){if(Dr()&&(typeof l.fetch=="undefined"||typeof l.Headers=="undefined"||typeof l.Request=="undefined"))throw new N("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var b=new wc(this.f);if(_){b.g=Math.max(0,_);var I=setTimeout(function(){b.dispatchEvent("timeout")},_)}YE(b,"complete",function(){I&&clearTimeout(I);var x=null;try{x=JSON.parse(vF(this))||null}catch{x=null}a&&a(x)}),Kv(b,"ready",function(){I&&clearTimeout(I),KE(this)}),Kv(b,"timeout",function(){I&&clearTimeout(I),KE(this),a&&a(null)}),hF(b,o,f,p,g)};var SF=new Xr(Cf,"https://apis.google.com/js/client.js?onload=%{onload}"),pI="__fcb"+Math.floor(1e6*Math.random()).toString();function CF(o,a){if(((window.gapi||{}).client||{}).request)o();else{l[pI]=function(){((window.gapi||{}).client||{}).request?o():a(Error("CORS_UNSUPPORTED"))};var f=Sv(SF,{onload:pI});gF(Dg(f),function(){a(Error("CORS_UNSUPPORTED"))})}}Mr.prototype.s=function(o,a,f,p,g){var _=this;Mg.then(function(){window.gapi.client.setApiKey(_.c);var b=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:o,method:f,body:p,headers:g,authType:"none",callback:function(I){window.gapi.auth.setToken(b),a&&a(I)}})}).o(function(b){a&&a({error:{message:b&&b.message||"CORS_UNSUPPORTED"}})})};function AF(o,a){return new Le(function(f,p){a.grant_type=="refresh_token"&&a.refresh_token||a.grant_type=="authorization_code"&&a.code?dI(o,o.l+"?key="+encodeURIComponent(o.c),function(g){g?g.error?p(Hg(g)):g.access_token&&g.refresh_token?f(g):p(new N("internal-error")):p(new N("network-request-failed"))},"POST",tT(a).toString(),o.g,o.m.get()):p(new N("internal-error"))})}function vI(o,a,f,p,g,_,b){var I=Vn(a+f);Tt(I,"key",o.c),b&&Tt(I,"cb",Date.now().toString());var x=p=="GET";if(x)for(var V in g)g.hasOwnProperty(V)&&Tt(I,V,g[V]);return new Le(function(we,Xe){dI(o,I.toString(),function(qe){qe?qe.error?Xe(Hg(qe,_||{})):we(qe):Xe(new N("network-request-failed"))},p,x?void 0:iT(pT(g)),o.a,o.v.get())})}function ts(o){if(o=o.email,typeof o!="string"||!PL.test(o))throw new N("invalid-email")}function gI(o){"email"in o&&ts(o)}function kF(o,a){return Fe(o,UF,{identifier:a,continueUri:Vf()?sc():"http://localhost"}).then(function(f){return f.signinMethods||[]})}function RF(o){return Fe(o,YF,{}).then(function(a){return a.authorizedDomains||[]})}function Bn(o){if(!o[Lr])throw o.mfaPendingCredential?new N("multi-factor-auth-required",null,Pr(o)):new N("internal-error")}function Fg(o){if(o.phoneNumber||o.temporaryProof){if(!o.phoneNumber||!o.temporaryProof)throw new N("internal-error")}else{if(!o.sessionInfo)throw new N("missing-verification-id");if(!o.code)throw new N("missing-verification-code")}}Mr.prototype.Ab=function(){return Fe(this,e2,{})},Mr.prototype.Cb=function(o,a){return Fe(this,_I,{idToken:o,email:a})},Mr.prototype.Db=function(o,a){return Fe(this,wI,{idToken:o,password:a})};var NF={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=Mr.prototype,e.Eb=function(o,a){var f={idToken:o},p=[];return Yu(NF,function(g,_){var b=a[_];b===null?p.push(g):_ in a&&(f[_]=b)}),p.length&&(f.deleteAttribute=p),Fe(this,_I,f)},e.wb=function(o,a){return o={requestType:"PASSWORD_RESET",email:o},lt(o,a),Fe(this,QF,o)},e.xb=function(o,a){return o={requestType:"EMAIL_SIGNIN",email:o},lt(o,a),Fe(this,GF,o)},e.vb=function(o,a){return o={requestType:"VERIFY_EMAIL",idToken:o},lt(o,a),Fe(this,$F,o)},e.Fb=function(o,a,f){return o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:a},lt(o,f),Fe(this,zF,o)};function PF(o,a){return Fe(o,ZF,a)}e.gb=function(o){return Fe(this,a2,o)};function OF(o,a){return Fe(o,t2,a).then(function(f){return f.phoneSessionInfo.sessionInfo})}function mI(o){if(!o.phoneVerificationInfo)throw new N("internal-error");if(!o.phoneVerificationInfo.sessionInfo)throw new N("missing-verification-id");if(!o.phoneVerificationInfo.code)throw new N("missing-verification-code")}function DF(o,a){return Fe(o,n2,a).then(function(f){return f.phoneResponseInfo.sessionInfo})}function xF(o,a,f){return Fe(o,VF,{idToken:a,deleteProvider:f})}function Ug(o){if(!o.requestUri||!o.sessionId&&!o.postBody&&!o.pendingToken)throw new N("internal-error")}function jg(o,a){return a.oauthIdToken&&a.providerId&&a.providerId.indexOf("oidc.")==0&&!a.pendingToken&&(o.sessionId?a.nonce=o.sessionId:o.postBody&&(o=new Wo(o.postBody),$v(o,"nonce")&&(a.nonce=o.get("nonce")))),a}function yI(o){var a=null;if(o.needConfirmation?(o.code="account-exists-with-different-credential",a=Qf(o)):o.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(o.code="credential-already-in-use",a=Qf(o)):o.errorMessage=="EMAIL_EXISTS"?(o.code="email-already-in-use",a=Qf(o)):o.errorMessage&&(a=EI(o.errorMessage)),a)throw a;Bn(o)}function Vg(o,a){return a.returnIdpCredential=!0,Fe(o,r2,a)}function Bg(o,a){return a.returnIdpCredential=!0,Fe(o,o2,a)}function qg(o,a){return a.returnIdpCredential=!0,a.autoCreate=!1,Fe(o,i2,a)}function Kg(o){if(!o.oobCode)throw new N("invalid-action-code")}e.ob=function(o,a){return Fe(this,JF,{oobCode:o,newPassword:a})},e.Sa=function(o){return Fe(this,LF,{oobCode:o})},e.kb=function(o){return Fe(this,MF,{oobCode:o})};var MF={endpoint:"setAccountInfo",A:Kg,Z:"email",B:!0},LF={endpoint:"resetPassword",A:Kg,G:function(o){var a=o.requestType;if(!a||!o.email&&a!="EMAIL_SIGNIN"&&a!="VERIFY_AND_CHANGE_EMAIL")throw new N("internal-error")},B:!0},FF={endpoint:"signupNewUser",A:function(o){if(ts(o),!o.password)throw new N("weak-password")},G:Bn,V:!0,B:!0},UF={endpoint:"createAuthUri",B:!0},jF={endpoint:"deleteAccount",O:["idToken"]},VF={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(o){if(!Array.isArray(o.deleteProvider))throw new N("internal-error")}},BF={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ts,G:Bn,V:!0,B:!0},qF={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ts,G:Bn,V:!0},KF={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:mI,G:Bn,B:!0,Na:!0},HF={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:mI,G:Bn,B:!0,Na:!0},WF={endpoint:"getAccountInfo"},GF={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="EMAIL_SIGNIN")throw new N("internal-error");ts(o)},Z:"email",B:!0},$F={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(o){if(o.requestType!="VERIFY_EMAIL")throw new N("internal-error")},Z:"email",B:!0},zF={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(o){if(o.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new N("internal-error")},Z:"email",B:!0},QF={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if(o.requestType!="PASSWORD_RESET")throw new N("internal-error");ts(o)},Z:"email",B:!0},YF={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},XF={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(o){if(!o.recaptchaSiteKey)throw new N("internal-error")}},JF={endpoint:"resetPassword",A:Kg,Z:"email",B:!0},ZF={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},_I={endpoint:"setAccountInfo",O:["idToken"],A:gI,V:!0},wI={endpoint:"setAccountInfo",O:["idToken"],A:function(o){if(gI(o),!o.password)throw new N("weak-password")},G:Bn,V:!0},e2={endpoint:"signupNewUser",G:Bn,V:!0,B:!0},t2={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(o){if(!o.phoneEnrollmentInfo)throw new N("internal-error");if(!o.phoneEnrollmentInfo.phoneNumber)throw new N("missing-phone-number");if(!o.phoneEnrollmentInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(o){if(!o.phoneSessionInfo||!o.phoneSessionInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},n2={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(o){if(!o.phoneSignInInfo||!o.phoneSignInInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(o){if(!o.phoneResponseInfo||!o.phoneResponseInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},r2={endpoint:"verifyAssertion",A:Ug,Za:jg,G:yI,V:!0,B:!0},i2={endpoint:"verifyAssertion",A:Ug,Za:jg,G:function(o){if(o.errorMessage&&o.errorMessage=="USER_NOT_FOUND")throw new N("user-not-found");if(o.errorMessage)throw EI(o.errorMessage);Bn(o)},V:!0,B:!0},o2={endpoint:"verifyAssertion",A:function(o){if(Ug(o),!o.idToken)throw new N("internal-error")},Za:jg,G:yI,V:!0},s2={endpoint:"verifyCustomToken",A:function(o){if(!o.token)throw new N("invalid-custom-token")},G:Bn,V:!0,B:!0},bI={endpoint:"verifyPassword",A:function(o){if(ts(o),!o.password)throw new N("wrong-password")},G:Bn,V:!0,B:!0},a2={endpoint:"verifyPhoneNumber",A:Fg,G:Bn,B:!0},u2={endpoint:"verifyPhoneNumber",A:function(o){if(!o.idToken)throw new N("internal-error");Fg(o)},G:function(o){if(o.temporaryProof)throw o.code="credential-already-in-use",Qf(o);Bn(o)}},c2={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:Fg,G:Bn,B:!0},l2={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(o){if(!!o[Lr]^!!o.refreshToken)throw new N("internal-error")},B:!0,Na:!0};function Fe(o,a,f){if(!UL(f,a.O))return ht(new N("internal-error"));var p=!!a.Na,g=a.Vb||"POST",_;return ve(f).then(a.A).then(function(){return a.V&&(f.returnSecureToken=!0),a.B&&o.b&&typeof f.tenantId=="undefined"&&(f.tenantId=o.b),p?vI(o,o.i,a.endpoint,g,f,a.Ib,a.mb||!1):vI(o,o.h,a.endpoint,g,f,a.Ib,a.mb||!1)}).then(function(b){return _=b,a.Za?a.Za(f,_):_}).then(a.G).then(function(){if(!a.Z)return _;if(!(a.Z in _))throw new N("internal-error");return _[a.Z]})}function EI(o){return Hg({error:{errors:[{message:o}],code:400,message:o}})}function Hg(o,a){var f=(o.error&&o.error.errors&&o.error.errors[0]||{}).reason||"",p={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(f=p[f]?new N(p[f]):null)return f;f=o.error&&o.error.message||"",p={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},lt(p,a||{}),a=(a=f.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<a.length?a[1]:void 0;for(var g in p)if(f.indexOf(g)===0)return new N(p[g],a);return!a&&o&&(a=uc(o)),new N("internal-error",a)}function f2(o){this.b=o,this.a=null,this.sb=h2(this)}function h2(o){return y2().then(function(){return new Le(function(a,f){dt("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(p){function g(){clearTimeout(_),a()}o.a=p,o.a.restyle({setHideOnLeave:!1});var _=setTimeout(function(){f(Error("Network Error"))},m2.get());p.ping(g).then(g,function(){f(Error("Network Error"))})})})})}function d2(o,a){return o.sb.then(function(){return new Le(function(f){o.a.send(a.type,a,f,dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function p2(o,a){o.sb.then(function(){o.a.register("authEvent",a,dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var v2=new Xr(Cf,"https://apis.google.com/js/api.js?onload=%{onload}"),g2=new Zi(3e4,6e4),m2=new Zi(5e3,15e3),ch=null;function y2(){return ch||(ch=new Le(function(o,a){function f(){gT(),dt("gapi.load")("gapi.iframes",{callback:o,ontimeout:function(){gT(),a(Error("Network Error"))},timeout:g2.get()})}if(dt("gapi.iframes.Iframe"))o();else if(dt("gapi.load"))f();else{var p="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[p]=function(){dt("gapi.load")?f():a(Error("Network Error"))},p=Sv(v2,{onload:p}),ve(Dg(p)).o(function(){a(Error("Network Error"))})}}).o(function(o){throw ch=null,o}))}function TI(o,a,f,p){this.l=o,this.h=a,this.i=f,this.g=p,this.f=null,this.g?(o=Vn(this.g.url),o=Uf(o.c,o.a,o.g,"/emulator/auth/iframe")):o=Uf("https",this.l,null,"/__/auth/iframe"),this.a=o,Tt(this.a,"apiKey",this.h),Tt(this.a,"appName",this.i),this.b=null,this.c=[]}TI.prototype.toString=function(){return this.f?Tt(this.a,"v",this.f):Jr(this.a.b,"v"),this.b?Tt(this.a,"eid",this.b):Jr(this.a.b,"eid"),this.c.length?Tt(this.a,"fw",this.c.join(",")):Jr(this.a.b,"fw"),this.a.toString()};function Wg(o,a,f,p,g,_){this.u=o,this.s=a,this.c=f,this.m=p,this.v=_,this.i=this.g=this.l=null,this.a=g,this.h=this.f=null}Wg.prototype.zb=function(o){return this.h=o,this},Wg.prototype.toString=function(){if(this.v){var o=Vn(this.v.url);o=Uf(o.c,o.a,o.g,"/emulator/auth/handler")}else o=Uf("https",this.u,null,"/__/auth/handler");if(Tt(o,"apiKey",this.s),Tt(o,"appName",this.c),Tt(o,"authType",this.m),this.a.isOAuthProvider){var a=this.a;try{var f=fe.app(this.c).auth().la()}catch{f=null}a.pb=f,Tt(o,"providerId",this.a.providerId),f=this.a,a=pT(f.Jb);for(var p in a)a[p]=a[p].toString();p=f.Qc,a=Pr(a);for(var g=0;g<p.length;g++){var _=p[g];_ in a&&delete a[_]}f.qb&&f.pb&&!a[f.qb]&&(a[f.qb]=f.pb),Jn(a)||Tt(o,"customParameters",uc(a))}if(typeof this.a.Rb=="function"&&(f=this.a.Rb(),f.length&&Tt(o,"scopes",f.join(","))),this.l?Tt(o,"redirectUrl",this.l):Jr(o.b,"redirectUrl"),this.g?Tt(o,"eventId",this.g):Jr(o.b,"eventId"),this.i?Tt(o,"v",this.i):Jr(o.b,"v"),this.b)for(var b in this.b)this.b.hasOwnProperty(b)&&!vr(o,b)&&Tt(o,b,this.b[b]);return this.h?Tt(o,"tid",this.h):Jr(o.b,"tid"),this.f?Tt(o,"eid",this.f):Jr(o.b,"eid"),b=Gg(this.c),b.length&&Tt(o,"fw",b.join(",")),o.toString()};function Gg(o){try{return fe.app(o).auth().Ga()}catch{return[]}}function II(o,a,f,p,g,_){this.s=o,this.g=a,this.b=f,this.f=_,this.c=p||null,this.i=g||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function SI(o){var a=sc();return RF(o).then(function(f){e:{var p=Vn(a),g=p.c;p=p.a;for(var _=0;_<f.length;_++){var b=f[_],I=p,x=g;if(b.indexOf("chrome-extension://")==0?I=Vn(b).a==I&&x=="chrome-extension":x!="http"&&x!="https"?I=!1:NL.test(b)?I=I==b:(b=b.split(".").join("\\."),I=new RegExp("^(.+\\."+b+"|"+b+")$","i").test(I)),I){f=!0;break e}}f=!1}if(!f)throw new Tg(sc())})}function CI(o){return o.m||(o.m=jf().then(function(){if(!o.u){var a=o.c,f=o.i,p=Gg(o.b),g=new TI(o.s,o.g,o.b,o.f);g.f=a,g.b=f,g.c=W(p||[]),o.u=g.toString()}o.v=new f2(o.u),_2(o)})),o.m}e=II.prototype,e.Pb=function(o,a,f){var p=new N("popup-closed-by-user"),g=new N("web-storage-unsupported"),_=this,b=!1;return this.ma().then(function(){w2(_).then(function(I){I||(o&&Go(o),a(g),b=!0)})}).o(function(){}).then(function(){if(!b)return RL(o)}).then(function(){if(!b)return fa(f).then(function(){a(p)})})},e.Yb=function(){var o=Xt();return!ac(o)&&!vT(o)},e.Ub=function(){return!1},e.Nb=function(o,a,f,p,g,_,b,I){if(!o)return ht(new N("popup-blocked"));if(b&&!ac())return this.ma().o(function(V){Go(o),g(V)}),p(),ve();this.a||(this.a=SI(AI(this)));var x=this;return this.a.then(function(){var V=x.ma().o(function(we){throw Go(o),g(we),we});return p(),V}).then(function(){if(bg(f),!b){var V=Ic(x.s,x.g,x.b,a,f,null,_,x.c,void 0,x.i,I,x.f);aT(V,o)}}).o(function(V){throw V.code=="auth/network-request-failed"&&(x.a=null),V})};function AI(o){return o.l||(o.C=o.c?va(o.c,Gg(o.b)):null,o.l=new Mr(o.g,dr(o.i),o.C),o.f&&uh(o.l,o.f)),o.l}e.Ob=function(o,a,f,p){this.a||(this.a=SI(AI(this)));var g=this;return this.a.then(function(){bg(a);var _=Ic(g.s,g.g,g.b,o,a,sc(),f,g.c,void 0,g.i,p,g.f);aT(_)}).o(function(_){throw _.code=="auth/network-request-failed"&&(g.a=null),_})},e.ma=function(){var o=this;return CI(this).then(function(){return o.v.sb}).o(function(){throw o.a=null,new N("network-request-failed")})},e.ac=function(){return!0};function Ic(o,a,f,p,g,_,b,I,x,V,we,Xe){return o=new Wg(o,a,f,p,g,Xe),o.l=_,o.g=b,o.i=I,o.b=Pr(x||null),o.f=V,o.zb(we).toString()}function _2(o){if(!o.v)throw Error("IfcHandler must be initialized!");p2(o.v,function(a){var f={};if(a&&a.authEvent){var p=!1;for(a=YT(a.authEvent),f=0;f<o.h.length;f++)p=o.h[f](a)||p;return f={},f.status=p?"ACK":"ERROR",ve(f)}return f.status="ERROR",ve(f)})}function w2(o){var a={type:"webStorageSupport"};return CI(o).then(function(){return d2(o.v,a)}).then(function(f){if(f&&f.length&&typeof f[0].webStorageSupport!="undefined")return f[0].webStorageSupport;throw Error()})}e.Ea=function(o){this.h.push(o)},e.Ta=function(o){L(this.h,function(a){return a==o})};function kI(o){if(this.a=o||fe.INTERNAL.reactNative&&fe.INTERNAL.reactNative.AsyncStorage,!this.a)throw new N("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=kI.prototype,e.get=function(o){return ve(this.a.getItem(o)).then(function(a){return a&&ma(a)})},e.set=function(o,a){return ve(this.a.setItem(o,uc(a)))},e.U=function(o){return ve(this.a.removeItem(o))},e.ca=function(){},e.ia=function(){};function RI(o){this.b=o,this.a={},this.f=F(this.c,this)}var NI=[];function b2(){var o=Dr()?self:null;if(J(NI,function(f){f.b==o&&(a=f)}),!a){var a=new RI(o);NI.push(a)}return a}RI.prototype.c=function(o){var a=o.data.eventType,f=o.data.eventId,p=this.a[a];if(p&&0<p.length){o.ports[0].postMessage({status:"ack",eventId:f,eventType:a,response:null});var g=[];J(p,function(_){g.push(ve().then(function(){return _(o.origin,o.data.data)}))}),xE(g).then(function(_){var b=[];J(_,function(I){b.push({fulfilled:I.Qb,value:I.value,reason:I.reason?I.reason.message:void 0})}),J(b,function(I){for(var x in I)typeof I[x]=="undefined"&&delete I[x]}),o.ports[0].postMessage({status:"done",eventId:f,eventType:a,response:b})})}};function PI(o,a,f){Jn(o.a)&&o.b.addEventListener("message",o.f),typeof o.a[a]=="undefined"&&(o.a[a]=[]),o.a[a].push(f)}function OI(o){this.a=o}OI.prototype.postMessage=function(o,a){this.a.postMessage(o,a)};function DI(o){this.c=o,this.b=!1,this.a=[]}function xI(o,a,f,p){var g,_=f||{},b,I,x,V=null;if(o.b)return ht(Error("connection_unavailable"));var we=p?800:50,Xe=typeof MessageChannel!="undefined"?new MessageChannel:null;return new Le(function(qe,Vt){Xe?(g=Math.floor(Math.random()*Math.pow(10,20)).toString(),Xe.port1.start(),I=setTimeout(function(){Vt(Error("unsupported_event"))},we),b=function(Ri){Ri.data.eventId===g&&(Ri.data.status==="ack"?(clearTimeout(I),x=setTimeout(function(){Vt(Error("timeout"))},3e3)):Ri.data.status==="done"?(clearTimeout(x),typeof Ri.data.response!="undefined"?qe(Ri.data.response):Vt(Error("unknown_error"))):(clearTimeout(I),clearTimeout(x),Vt(Error("invalid_response"))))},V={messageChannel:Xe,onMessage:b},o.a.push(V),Xe.port1.addEventListener("message",b),o.c.postMessage({eventType:a,eventId:g,data:_},[Xe.port2])):Vt(Error("connection_unavailable"))}).then(function(qe){return $g(o,V),qe}).o(function(qe){throw $g(o,V),qe})}function $g(o,a){if(a){var f=a.messageChannel,p=a.onMessage;f&&(f.port1.removeEventListener("message",p),f.port1.close()),L(o.a,function(g){return g==a})}}DI.prototype.close=function(){for(;0<this.a.length;)$g(this,this.a[0]);this.b=!0};function MI(){if(!Yg())throw new N("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var o=this;Dr()&&self?(this.v=b2(),PI(this.v,"keyChanged",function(a,f){return UI(o).then(function(p){return 0<p.length&&J(o.a,function(g){g(p)}),{keyProcessed:R(p,f.key)}})}),PI(this.v,"ping",function(){return ve(["keyChanged"])})):LL().then(function(a){(o.h=a)&&(o.g=new DI(new OI(a)),xI(o.g,"ping",null,!0).then(function(f){f[0].fulfilled&&R(f[0].value,"keyChanged")&&(o.s=!0)}).o(function(){}))})}var zg;function E2(o){return new Le(function(a,f){var p=o.m.deleteDatabase("firebaseLocalStorageDb");p.onsuccess=function(){a()},p.onerror=function(g){f(Error(g.target.error))}})}function LI(o){return new Le(function(a,f){var p=o.m.open("firebaseLocalStorageDb",1);p.onerror=function(g){try{g.preventDefault()}catch{}f(Error(g.target.error))},p.onupgradeneeded=function(g){g=g.target.result;try{g.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(_){f(_)}},p.onsuccess=function(g){g=g.target.result,g.objectStoreNames.contains("firebaseLocalStorage")?a(g):E2(o).then(function(){return LI(o)}).then(function(_){a(_)}).o(function(_){f(_)})}})}function Qg(o){return o.i||(o.i=LI(o)),o.i}function lh(o,a){function f(g,_){Qg(o).then(a).then(g).o(function(b){if(3<++p)_(b);else return Qg(o).then(function(I){return I.close(),o.i=void 0,f(g,_)}).o(function(I){_(I)})})}var p=0;return new Le(f)}function Yg(){try{return!!l.indexedDB}catch{return!1}}function Sc(o){return o.objectStore("firebaseLocalStorage")}function Cc(o,a){return o.transaction(["firebaseLocalStorage"],a?"readwrite":"readonly")}function ba(o){return new Le(function(a,f){o.onsuccess=function(p){p&&p.target?a(p.target.result):a()},o.onerror=function(p){f(p.target.error)}})}e=MI.prototype,e.set=function(o,a){var f=this,p=!1;return lh(this,function(g){return g=Sc(Cc(g,!0)),ba(g.get(o))}).then(function(g){return lh(f,function(_){if(_=Sc(Cc(_,!0)),g)return g.value=a,ba(_.put(g));f.b++,p=!0;var b={};return b.fbase_key=o,b.value=a,ba(_.add(b))})}).then(function(){return f.c[o]=a,FI(f,o)}).oa(function(){p&&f.b--})};function FI(o,a){return o.g&&o.h&&ML()===o.h?xI(o.g,"keyChanged",{key:a},o.s).then(function(){}).o(function(){}):ve()}e.get=function(o){return lh(this,function(a){return ba(Sc(Cc(a,!1)).get(o))}).then(function(a){return a&&a.value})},e.U=function(o){var a=this,f=!1;return lh(this,function(p){return f=!0,a.b++,ba(Sc(Cc(p,!0)).delete(o))}).then(function(){return delete a.c[o],FI(a,o)}).oa(function(){f&&a.b--})};function UI(o){return Qg(o).then(function(a){var f=Sc(Cc(a,!1));return f.getAll?ba(f.getAll()):new Le(function(p,g){var _=[],b=f.openCursor();b.onsuccess=function(I){(I=I.target.result)?(_.push(I.value),I.continue()):p(_)},b.onerror=function(I){g(I.target.error)}})}).then(function(a){var f={},p=[];if(o.b==0){for(p=0;p<a.length;p++)f[a[p].fbase_key]=a[p].value;p=uT(o.c,f),o.c=f}return p})}e.ca=function(o){this.a.length==0&&T2(this),this.a.push(o)},e.ia=function(o){L(this.a,function(a){return a==o}),this.a.length==0&&jI(this)};function T2(o){function a(){o.f=setTimeout(function(){o.l=UI(o).then(function(f){0<f.length&&J(o.a,function(p){p(f)})}).then(function(){a()}).o(function(f){f.message!="STOP_EVENT"&&a()})},800)}jI(o),a()}function jI(o){o.l&&o.l.cancel("STOP_EVENT"),o.f&&(clearTimeout(o.f),o.f=null)}function VI(o){var a=this,f=null;this.a=[],this.type="indexedDB",this.c=o,this.b=ve().then(function(){if(Yg()){var p=zo(),g="__sak"+p;return zg||(zg=new MI),f=zg,f.set(g,p).then(function(){return f.get(g)}).then(function(_){if(_!==p)throw Error("indexedDB not supported!");return f.U(g)}).then(function(){return f}).o(function(){return a.c})}return a.c}).then(function(p){return a.type=p.type,p.ca(function(g){J(a.a,function(_){_(g)})}),p})}e=VI.prototype,e.get=function(o){return this.b.then(function(a){return a.get(o)})},e.set=function(o,a){return this.b.then(function(f){return f.set(o,a)})},e.U=function(o){return this.b.then(function(a){return a.U(o)})},e.ca=function(o){this.a.push(o)},e.ia=function(o){L(this.a,function(a){return a==o})};function Ac(){this.a={},this.type="inMemory"}e=Ac.prototype,e.get=function(o){return ve(this.a[o])},e.set=function(o,a){return this.a[o]=a,ve()},e.U=function(o){return delete this.a[o],ve()},e.ca=function(){},e.ia=function(){};function fh(){if(!I2())throw Zr()=="Node"?new N("internal-error","The LocalStorage compatibility library was not found."):new N("web-storage-unsupported");this.a=BI()||fe.INTERNAL.node.localStorage,this.type="localStorage"}function BI(){try{var o=l.localStorage,a=zo();return o&&(o.setItem(a,"1"),o.removeItem(a)),o}catch{return null}}function I2(){var o=Zr()=="Node";if(o=BI()||o&&fe.INTERNAL.node&&fe.INTERNAL.node.localStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=fh.prototype,e.get=function(o){var a=this;return ve().then(function(){var f=a.a.getItem(o);return ma(f)})},e.set=function(o,a){var f=this;return ve().then(function(){var p=uc(a);p===null?f.U(o):f.a.setItem(o,p)})},e.U=function(o){var a=this;return ve().then(function(){a.a.removeItem(o)})},e.ca=function(o){l.window&&pr(l.window,"storage",o)},e.ia=function(o){l.window&&Zn(l.window,"storage",o)};function Xg(){this.type="nullStorage"}e=Xg.prototype,e.get=function(){return ve(null)},e.set=function(){return ve()},e.U=function(){return ve()},e.ca=function(){},e.ia=function(){};function Jg(){if(!S2())throw Zr()=="Node"?new N("internal-error","The SessionStorage compatibility library was not found."):new N("web-storage-unsupported");this.a=qI()||fe.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qI(){try{var o=l.sessionStorage,a=zo();return o&&(o.setItem(a,"1"),o.removeItem(a)),o}catch{return null}}function S2(){var o=Zr()=="Node";if(o=qI()||o&&fe.INTERNAL.node&&fe.INTERNAL.node.sessionStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=Jg.prototype,e.get=function(o){var a=this;return ve().then(function(){var f=a.a.getItem(o);return ma(f)})},e.set=function(o,a){var f=this;return ve().then(function(){var p=uc(a);p===null?f.U(o):f.a.setItem(o,p)})},e.U=function(o){var a=this;return ve().then(function(){a.a.removeItem(o)})},e.ca=function(){},e.ia=function(){};function C2(){var o={};o.Browser=A2,o.Node=k2,o.ReactNative=R2,o.Worker=N2,this.a=o[Zr()]}var Zg,A2={F:fh,cb:Jg},k2={F:fh,cb:Jg},R2={F:kI,cb:Xg},N2={F:fh,cb:Xg},Ea={rd:"local",NONE:"none",td:"session"};function P2(o){var a=new N("invalid-persistence-type"),f=new N("unsupported-persistence-type");e:{for(p in Ea)if(Ea[p]==o){var p=!0;break e}p=!1}if(!p||typeof o!="string")throw a;switch(Zr()){case"ReactNative":if(o==="session")throw f;break;case"Node":if(o!=="none")throw f;break;case"Worker":if(o==="session"||!Yg()&&o!=="none")throw f;break;default:if(!Zv()&&o!=="none")throw f}}function KI(){var o=!!(!vT(Xt())&&Xv()),a=ac(),f=Zv();this.m=o,this.h=a,this.l=f,this.a={},Zg||(Zg=new C2),o=Zg;try{this.g=!Qv()&&mT()||!l.indexedDB?new o.a.F:new VI(Dr()?new Ac:new o.a.F)}catch{this.g=new Ac,this.h=!0}try{this.i=new o.a.cb}catch{this.i=new Ac}this.v=new Ac,this.f=F(this.Zb,this),this.b={}}var em;function kc(){return em||(em=new KI),em}function ns(o,a){switch(a){case"session":return o.i;case"none":return o.v;default:return o.g}}function Ta(o,a){return"firebase:"+o.name+(a?":"+a:"")}function O2(o,a,f){var p=Ta(a,f),g=ns(o,a.F);return o.get(a,f).then(function(_){var b=null;try{b=ma(l.localStorage.getItem(p))}catch{}if(b&&!_)return l.localStorage.removeItem(p),o.set(a,b,f);b&&_&&g.type!="localStorage"&&l.localStorage.removeItem(p)})}e=KI.prototype,e.get=function(o,a){return ns(this,o.F).get(Ta(o,a))};function Ia(o,a,f){return f=Ta(a,f),a.F=="local"&&(o.b[f]=null),ns(o,a.F).U(f)}e.set=function(o,a,f){var p=Ta(o,f),g=this,_=ns(this,o.F);return _.set(p,a).then(function(){return _.get(p)}).then(function(b){o.F=="local"&&(g.b[p]=b)})},e.addListener=function(o,a,f){o=Ta(o,a),this.l&&(this.b[o]=l.localStorage.getItem(o)),Jn(this.a)&&(ns(this,"local").ca(this.f),this.h||(Qv()||!mT())&&l.indexedDB||!this.l||D2(this)),this.a[o]||(this.a[o]=[]),this.a[o].push(f)},e.removeListener=function(o,a,f){o=Ta(o,a),this.a[o]&&(L(this.a[o],function(p){return p==f}),this.a[o].length==0&&delete this.a[o]),Jn(this.a)&&(ns(this,"local").ia(this.f),tm(this))};function D2(o){tm(o),o.c=setInterval(function(){for(var a in o.a){var f=l.localStorage.getItem(a),p=o.b[a];f!=p&&(o.b[a]=f,f=new Ko({type:"storage",key:a,target:window,oldValue:p,newValue:f,a:!0}),o.Zb(f))}},1e3)}function tm(o){o.c&&(clearInterval(o.c),o.c=null)}e.Zb=function(o){if(o&&o.g){var a=o.a.key;if(a==null)for(var f in this.a){var p=this.b[f];typeof p=="undefined"&&(p=null);var g=l.localStorage.getItem(f);g!==p&&(this.b[f]=g,this.nb(f))}else if(a.indexOf("firebase:")==0&&this.a[a]){if(typeof o.a.a!="undefined"?ns(this,"local").ia(this.f):tm(this),this.m){if(f=l.localStorage.getItem(a),p=o.a.newValue,p!==f)p!==null?l.localStorage.setItem(a,p):l.localStorage.removeItem(a);else if(this.b[a]===p&&typeof o.a.a=="undefined")return}var _=this;f=function(){(typeof o.a.a!="undefined"||_.b[a]!==l.localStorage.getItem(a))&&(_.b[a]=l.localStorage.getItem(a),_.nb(a))},Or&&Yi&&Yi==10&&l.localStorage.getItem(a)!==o.a.newValue&&o.a.newValue!==o.a.oldValue?setTimeout(f,10):f()}}else J(o,F(this.nb,this))},e.nb=function(o){this.a[o]&&J(this.a[o],function(a){a()})};function x2(o){this.a=o,this.b=kc()}var nm={name:"authEvent",F:"local"};function M2(o){return o.b.get(nm,o.a).then(function(a){return YT(a)})}function L2(){this.a=kc()}function F2(){this.b=-1}function hh(o,a){this.b=HI,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=o,this.h=a,this.l=l.Int32Array?new Int32Array(64):Array(64),dh===void 0&&(l.Int32Array?dh=new Int32Array($I):dh=$I),this.reset()}var dh;te(hh,F2);for(var HI=64,U2=HI-1,WI=[],rm=0;rm<U2;rm++)WI[rm]=0;var GI=j(128,WI);hh.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):W(this.h)};function im(o){for(var a=o.f,f=o.l,p=0,g=0;g<a.length;)f[p++]=a[g]<<24|a[g+1]<<16|a[g+2]<<8|a[g+3],g=4*p;for(a=16;64>a;a++){g=f[a-15]|0,p=f[a-2]|0;var _=(f[a-16]|0)+((g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3)|0,b=(f[a-7]|0)+((p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10)|0;f[a]=_+b|0}p=o.a[0]|0,g=o.a[1]|0;var I=o.a[2]|0,x=o.a[3]|0,V=o.a[4]|0,we=o.a[5]|0,Xe=o.a[6]|0;for(_=o.a[7]|0,a=0;64>a;a++){var qe=((p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10))+(p&g^p&I^g&I)|0;b=V&we^~V&Xe,_=_+((V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7))|0,b=b+(dh[a]|0)|0,b=_+(b+(f[a]|0)|0)|0,_=Xe,Xe=we,we=V,V=x+b|0,x=I,I=g,g=p,p=b+qe|0}o.a[0]=o.a[0]+p|0,o.a[1]=o.a[1]+g|0,o.a[2]=o.a[2]+I|0,o.a[3]=o.a[3]+x|0,o.a[4]=o.a[4]+V|0,o.a[5]=o.a[5]+we|0,o.a[6]=o.a[6]+Xe|0,o.a[7]=o.a[7]+_|0}function om(o,a,f){f===void 0&&(f=a.length);var p=0,g=o.c;if(typeof a=="string")for(;p<f;)o.f[g++]=a.charCodeAt(p++),g==o.b&&(im(o),g=0);else if(w(a))for(;p<f;){var _=a[p++];if(!(typeof _=="number"&&0<=_&&255>=_&&_==(_|0)))throw Error("message must be a byte array");o.f[g++]=_,g==o.b&&(im(o),g=0)}else throw Error("message must be string or array");o.c=g,o.g+=f}var $I=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function zI(){hh.call(this,8,j2)}te(zI,hh);var j2=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function QI(o,a,f,p,g,_){this.v=o,this.i=a,this.l=f,this.m=p||null,this.u=g||null,this.s=_,this.h=a+":"+f,this.C=new L2,this.g=new x2(this.h),this.f=null,this.b=[],this.a=this.c=null}function ph(o){return new N("invalid-cordova-configuration",o)}e=QI.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=OL().then(function(){if(typeof dt("universalLinks.subscribe",l)!="function")throw ph("cordova-universal-links-plugin-fix is not installed");if(typeof dt("BuildInfo.packageName",l)=="undefined")throw ph("cordova-plugin-buildinfo is not installed");if(typeof dt("cordova.plugins.browsertab.openUrl",l)!="function")throw ph("cordova-plugin-browsertab is not installed");if(typeof dt("cordova.InAppBrowser.open",l)!="function")throw ph("cordova-plugin-inappbrowser is not installed")},function(){throw new N("cordova-not-ready")})};function V2(){for(var o=20,a=[];0<o;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return a.join("")}function B2(o){var a=new zI;om(a,o),o=[];var f=8*a.g;56>a.c?om(a,GI,56-a.c):om(a,GI,a.b-(a.c-56));for(var p=63;56<=p;p--)a.f[p]=f&255,f/=256;for(im(a),p=f=0;p<a.i;p++)for(var g=24;0<=g;g-=8)o[f++]=a.a[p]>>g&255;return JL(o)}e.Pb=function(o,a){return a(new N("operation-not-supported-in-this-environment")),ve()},e.Nb=function(){return ht(new N("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(o,a,f,p){if(this.c)return ht(new N("redirect-operation-pending"));var g=this,_=l.document,b=null,I=null,x=null,V=null;return this.c=ve().then(function(){return bg(a),XI(g)}).then(function(){return q2(g,o,a,f,p)}).then(function(){return new Le(function(we,Xe){I=function(){var qe=dt("cordova.plugins.browsertab.close",l);return we(),typeof qe=="function"&&qe(),g.a&&typeof g.a.close=="function"&&(g.a.close(),g.a=null),!1},g.Ea(I),x=function(){b||(b=fa(2e3).then(function(){Xe(new N("redirect-cancelled-by-user"))}))},V=function(){eg()&&x()},_.addEventListener("resume",x,!1),Xt().toLowerCase().match(/android/)||_.addEventListener("visibilitychange",V,!1)}).o(function(we){return sm(g).then(function(){throw we})})}).oa(function(){x&&_.removeEventListener("resume",x,!1),V&&_.removeEventListener("visibilitychange",V,!1),b&&b.cancel(),I&&g.Ta(I),g.c=null})};function q2(o,a,f,p,g){var _=V2(),b=new xr(a,p,null,_,new N("no-auth-event"),null,g),I=dt("BuildInfo.packageName",l);if(typeof I!="string")throw new N("invalid-cordova-configuration");var x=dt("BuildInfo.displayName",l),V={};if(Xt().toLowerCase().match(/iphone|ipad|ipod/))V.ibi=I;else if(Xt().toLowerCase().match(/android/))V.apn=I;else return ht(new N("operation-not-supported-in-this-environment"));x&&(V.appDisplayName=x),_=B2(_),V.sessionId=_;var we=Ic(o.v,o.i,o.l,a,f,null,p,o.m,V,o.u,g,o.s);return o.ma().then(function(){var Xe=o.h;return o.C.a.set(nm,b.w(),Xe)}).then(function(){var Xe=dt("cordova.plugins.browsertab.isAvailable",l);if(typeof Xe!="function")throw new N("invalid-cordova-configuration");var qe=null;Xe(function(Vt){if(Vt){if(qe=dt("cordova.plugins.browsertab.openUrl",l),typeof qe!="function")throw new N("invalid-cordova-configuration");qe(we)}else{if(qe=dt("cordova.InAppBrowser.open",l),typeof qe!="function")throw new N("invalid-cordova-configuration");Vt=Xt(),o.a=qe(we,Vt.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Vt.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function YI(o,a){for(var f=0;f<o.b.length;f++)try{o.b[f](a)}catch{}}function XI(o){return o.f||(o.f=o.ma().then(function(){return new Le(function(a){function f(p){return a(p),o.Ta(f),!1}o.Ea(f),K2(o)})})),o.f}function sm(o){var a=null;return M2(o.g).then(function(f){return a=f,f=o.g,Ia(f.b,nm,f.a)}).then(function(){return a})}function K2(o){function a(b){p=!0,g&&g.cancel(),sm(o).then(function(I){var x=f;if(I&&b&&b.url){var V=null;x=qT(b.url),x.indexOf("/__/auth/callback")!=-1&&(V=Vn(x),V=ma(vr(V,"firebaseError")||null),V=(V=typeof V=="object"?_t(V):null)?new xr(I.c,I.b,null,null,V,null,I.T()):new xr(I.c,I.b,x,I.f,null,null,I.T())),x=V||f}YI(o,x)})}var f=new xr("unknown",null,null,null,new N("no-auth-event")),p=!1,g=fa(500).then(function(){return sm(o).then(function(){p||YI(o,f)})}),_=l.handleOpenURL;l.handleOpenURL=function(b){if(b.toLowerCase().indexOf(dt("BuildInfo.packageName",l).toLowerCase()+"://")==0&&a({url:b}),typeof _=="function")try{_(b)}catch(I){console.error(I)}},Eg||(Eg=new sF),aF(a)}e.Ea=function(o){this.b.push(o),XI(this).o(function(a){a.code==="auth/invalid-cordova-configuration"&&(a=new xr("unknown",null,null,null,new N("no-auth-event")),o(a))})},e.Ta=function(o){L(this.b,function(a){return a==o})};function H2(o){this.a=o,this.b=kc()}var am={name:"pendingRedirect",F:"session"};function W2(o){return o.b.set(am,"pending",o.a)}function um(o){return Ia(o.b,am,o.a)}function G2(o){return o.b.get(am,o.a).then(function(a){return a=="pending"})}function vh(o,a,f,p){this.i={},this.u=0,this.D=o,this.v=a,this.m=f,this.J=p,this.h=[],this.f=!1,this.l=F(this.s,this),this.b=new mh,this.C=new aS,this.g=new H2(iS(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=JI(this.D,this.v,this.m,ct,this.J)}function JI(o,a,f,p,g){var _=fe.SDK_VERSION||null;return Yv()?new QI(o,a,f,_,p,g):new II(o,a,f,_,p,g)}vh.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=JI(this.D,this.v,this.m,null,this.J),this.i={}};function ZI(o){o.f||(o.f=!0,o.a.Ea(o.l));var a=o.a;return o.a.ma().o(function(f){throw o.a==a&&o.reset(),f})}function eS(o){o.a.Yb()&&ZI(o).o(function(a){var f=new xr("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));lm(a)&&o.s(f)}),o.a.Ub()||oS(o.b)}function gh(o,a){R(o.h,a)||o.h.push(a),o.f||G2(o.g).then(function(f){f?um(o.g).then(function(){ZI(o).o(function(p){var g=new xr("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));lm(p)&&o.s(g)})}):eS(o)}).o(function(){eS(o)})}function cm(o,a){L(o.h,function(f){return f==a})}vh.prototype.s=function(o){if(!o)throw new N("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),o&&o.getUid()&&this.i.hasOwnProperty(o.getUid()))return!1;for(var a=!1,f=0;f<this.h.length;f++){var p=this.h[f];if(p.Gb(o.c,o.b)){(a=this.c[o.c])&&(a.h(o,p),o&&(o.f||o.b)&&(this.i[o.getUid()]=!0,this.u=Date.now())),a=!0;break}}return oS(this.b),a};var $2=new Zi(2e3,1e4),z2=new Zi(3e4,6e4);vh.prototype.ra=function(){return this.b.ra()};function tS(o,a,f,p,g,_,b){return o.a.Nb(a,f,p,function(){o.f||(o.f=!0,o.a.Ea(o.l))},function(){o.reset()},g,_,b)}function lm(o){return!!(o&&o.code=="auth/cordova-not-ready")}function nS(o,a,f,p,g){var _;return W2(o.g).then(function(){return o.a.Ob(a,f,p,g).o(function(b){if(lm(b))throw new N("operation-not-supported-in-this-environment");return _=b,um(o.g).then(function(){throw _})}).then(function(){return o.a.ac()?new Le(function(){}):um(o.g).then(function(){return o.ra()}).then(function(){}).o(function(){})})})}function rS(o,a,f,p,g){return o.a.Pb(p,function(_){a.na(f,null,_,g)},$2.get())}var fm={};function iS(o,a,f){return o=o+":"+a,f&&(o=o+":"+f.url),o}function hm(o,a,f,p){var g=iS(a,f,p);return fm[g]||(fm[g]=new vh(o,a,f,p)),fm[g]}function mh(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}mh.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},mh.prototype.h=function(o,a){if(o){this.reset(),this.g=!0;var f=o.c,p=o.b,g=o.a&&o.a.code=="auth/web-storage-unsupported",_=o.a&&o.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!g&&!_),f!="unknown"||g||_?o.a?(rs(this,!0,null,o.a),ve()):a.Fa(f,p)?Q2(this,o,a):ht(new N("invalid-auth-event")):(rs(this,!1,null,null),ve())}else ht(new N("invalid-auth-event"))};function oS(o){o.g||(o.g=!0,rs(o,!1,null,null))}function yh(o){o.g&&!o.i&&rs(o,!1,null,null)}function Q2(o,a,f){f=f.Fa(a.c,a.b);var p=a.g,g=a.f,_=a.i,b=a.T(),I=!!a.c.match(/Redirect$/);f(p,g,b,_).then(function(x){rs(o,I,x,null)}).o(function(x){rs(o,I,null,x)})}function Y2(o,a){if(o.b=function(){return ht(a)},o.c.length)for(var f=0;f<o.c.length;f++)o.c[f](a)}function sS(o,a){if(o.b=function(){return ve(a)},o.f.length)for(var f=0;f<o.f.length;f++)o.f[f](a)}function rs(o,a,f,p){a?p?Y2(o,p):sS(o,f):sS(o,{user:null}),o.f=[],o.c=[]}mh.prototype.ra=function(){var o=this;return new Le(function(a,f){o.b?o.b().then(a,f):(o.f.push(a),o.c.push(f),X2(o))})};function X2(o){var a=new N("timeout");o.a&&o.a.cancel(),o.a=fa(z2.get()).then(function(){o.b||(o.g=!0,rs(o,!0,null,a))})}function aS(){}aS.prototype.h=function(o,a){if(o){var f=o.c,p=o.b;o.a?(a.na(o.c,null,o.a,o.b),ve()):a.Fa(f,p)?J2(o,a):ht(new N("invalid-auth-event"))}else ht(new N("invalid-auth-event"))};function J2(o,a){var f=o.b,p=o.c;a.Fa(p,f)(o.g,o.f,o.T(),o.i).then(function(g){a.na(p,g,null,f)}).o(function(g){a.na(p,null,g,f)})}function uS(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(o){this.jb=o},enumerable:!1})}function dm(o,a){this.a=a,ae(this,"verificationId",o)}dm.prototype.confirm=function(o){return o=QT(this.verificationId,o),this.a(o)};function pm(o,a,f,p){return new Ai(o).gb(a,f).then(function(g){return new dm(g,p)})}function Z2(o){var a=xT(o);if(!(a&&a.exp&&a.auth_time&&a.iat))throw new N("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Sn(this,{token:o,expirationTime:cc(1e3*a.exp),authTime:cc(1e3*a.auth_time),issuedAtTime:cc(1e3*a.iat),signInProvider:a.firebase&&a.firebase.sign_in_provider?a.firebase.sign_in_provider:null,signInSecondFactor:a.firebase&&a.firebase.sign_in_second_factor?a.firebase.sign_in_second_factor:null,claims:a})}function vm(o,a,f){var p=a&&a[lS];if(!p)throw new N("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=o,this.f=Pr(a),this.g=f,this.c=new $f(null,p),this.b=[];var g=this;J(a[cS]||[],function(_){(_=sg(_))&&g.b.push(_)}),ae(this,"auth",this.a),ae(this,"session",this.c),ae(this,"hints",this.b)}var cS="mfaInfo",lS="mfaPendingCredential";vm.prototype.Rc=function(o){var a=this;return o.tb(this.a.a,this.c).then(function(f){var p=Pr(a.f);return delete p[cS],delete p[lS],lt(p,f),a.g(p)})};function gm(o,a,f,p){N.call(this,"multi-factor-auth-required",p,a),this.b=new vm(o,a,f),ae(this,"resolver",this.b)}te(gm,N);function fS(o,a,f){if(o&&T(o.serverResponse)&&o.code==="auth/multi-factor-auth-required")try{return new gm(a,o.serverResponse,f,o.message)}catch{}return null}function hS(){}hS.prototype.tb=function(o,a,f){return a.type==dc?eU(this,o,a,f):tU(this,o,a)};function eU(o,a,f,p){return f.Ha().then(function(g){return g={idToken:g},typeof p!="undefined"&&(g.displayName=p),lt(g,{phoneVerificationInfo:pc(o.a)}),Fe(a,KF,g)})}function tU(o,a,f){return f.Ha().then(function(p){return p={mfaPendingCredential:p},lt(p,{phoneVerificationInfo:pc(o.a)}),Fe(a,HF,p)})}function mm(o){ae(this,"factorId",o.fa),this.a=o}te(mm,hS);function dS(o){if(mm.call(this,o),this.a.fa!=Ai.PROVIDER_ID)throw new N("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}te(dS,mm);function Sa(o,a){jn.call(this,o);for(var f in a)this[f]=a[f]}te(Sa,jn);function ym(o,a){this.a=o,this.b=[],this.c=F(this.yc,this),pr(this.a,"userReloaded",this.c);var f=[];a&&a.multiFactor&&a.multiFactor.enrolledFactors&&J(a.multiFactor.enrolledFactors,function(p){var g=null,_={};if(p){p.uid&&(_[ug]=p.uid),p.displayName&&(_[_T]=p.displayName),p.enrollmentTime&&(_[ag]=new Date(p.enrollmentTime).toISOString()),p.phoneNumber&&(_[cg]=p.phoneNumber);try{g=new lc(_)}catch{}p=g}else p=null;p&&f.push(p)}),_h(this,f)}function nU(o){var a=[];return J(o.mfaInfo||[],function(f){(f=sg(f))&&a.push(f)}),a}e=ym.prototype,e.yc=function(o){_h(this,nU(o.hd))};function _h(o,a){o.b=a,ae(o,"enrolledFactors",a)}e.Sb=function(){return this.a.I().then(function(o){return new $f(o,null)})},e.fc=function(o,a){var f=this,p=this.a.a;return this.Sb().then(function(g){return o.tb(p,g,a)}).then(function(g){return ni(f.a,g),f.a.reload()})},e.bd=function(o){var a=this,f=typeof o=="string"?o:o.uid,p=this.a.a;return this.a.I().then(function(g){return Fe(p,l2,{idToken:g,mfaEnrollmentId:f})}).then(function(g){var _=et(a.b,function(b){return b.uid!=f});return _h(a,_),ni(a.a,g),a.a.reload().o(function(b){if(b.code!="auth/user-token-expired")throw b})})},e.w=function(){return{multiFactor:{enrolledFactors:Se(this.b,function(o){return o.w()})}}};function _m(o,a,f){if(this.h=o,this.i=a,this.g=f,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}_m.prototype.start=function(){this.a=this.c,wm(this,!0)};function rU(o,a){return a?(o.a=o.c,o.g()):(a=o.a,o.a*=2,o.a>o.f&&(o.a=o.f),a)}function wm(o,a){o.stop(),o.b=fa(rU(o,a)).then(function(){return xL()}).then(function(){return o.h()}).then(function(){wm(o,!0)}).o(function(f){o.i(f)&&wm(o,!1)})}_m.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function bm(o){this.f=o,this.b=this.a=null,this.c=Date.now()}bm.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function pS(o,a){typeof a=="undefined"&&(o.b?(a=o.b,a=a.a-a.g):a=0),o.c=Date.now()+1e3*a}function vS(o,a){o.b=Wf(a[Lr]||""),o.a=a.refreshToken,a=a.expiresIn,pS(o,typeof a!="undefined"?Number(a):void 0)}function iU(o,a){o.b=a.b,o.a=a.a,o.c=a.c}function oU(o,a){return AF(o.f,a).then(function(f){return o.b=Wf(f.access_token),o.a=f.refresh_token,pS(o,f.expires_in),{accessToken:o.b.toString(),refreshToken:o.a}}).o(function(f){throw f.code=="auth/user-token-expired"&&(o.a=null),f})}bm.prototype.getToken=function(o){return o=!!o,this.b&&!this.a?ht(new N("user-token-expired")):o||!this.b||Date.now()>this.c-3e4?this.a?oU(this,{grant_type:"refresh_token",refresh_token:this.a}):ve(null):ve({accessToken:this.b.toString(),refreshToken:this.a})};function wh(o,a){this.a=o||null,this.b=a||null,Sn(this,{lastSignInTime:cc(a||null),creationTime:cc(o||null)})}function sU(o){return new wh(o.a,o.b)}wh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function aU(o,a,f,p,g,_){Sn(this,{uid:o,displayName:p||null,photoURL:g||null,email:f||null,phoneNumber:_||null,providerId:a})}function tr(o,a,f){this.N=[],this.l=o.apiKey,this.m=o.appName,this.s=o.authDomain||null;var p=fe.SDK_VERSION?va(fe.SDK_VERSION):null;this.a=new Mr(this.l,dr(ct),p),(this.u=o.emulatorConfig||null)&&uh(this.a,this.u),this.h=new bm(this.a),km(this,a[Lr]),vS(this.h,a),ae(this,"refreshToken",this.h.a),mS(this,f||{}),In.call(this),this.P=!1,this.s&&$o()&&(this.b=hm(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=uU(this),this.ba=F(this.ib,this);var g=this;this.za=null,this.Pa=function(_){g.xa(_.h)},this.qa=null,this.Ba=function(_){Em(g,_.c)},this.$=null,this.aa=[],this.Oa=function(_){Rc(g,_.f)},this.ja=null,this.S=new ym(this,f),ae(this,"multiFactor",this.S)}te(tr,In),tr.prototype.xa=function(o){this.za=o,fI(this.a,o)};function Em(o,a){o.u=a,uh(o.a,a),o.b&&(a=o.b,o.b=hm(o.s,o.l,o.m,o.u),o.P&&(cm(a,o),gh(o.b,o)))}tr.prototype.la=function(){return this.za};function Tm(o,a){o.qa&&Zn(o.qa,"languageCodeChanged",o.Pa),(o.qa=a)&&pr(a,"languageCodeChanged",o.Pa)}function Im(o,a){o.$&&Zn(o.$,"emulatorConfigChanged",o.Ba),(o.$=a)&&pr(a,"emulatorConfigChanged",o.Ba)}function Rc(o,a){o.aa=a,hI(o.a,fe.SDK_VERSION?va(fe.SDK_VERSION,o.aa):null)}tr.prototype.Ga=function(){return W(this.aa)};function Sm(o,a){o.ja&&Zn(o.ja,"frameworkChanged",o.Oa),(o.ja=a)&&pr(a,"frameworkChanged",o.Oa)}tr.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function Cm(o){try{return fe.app(o.m).auth()}catch{throw new N("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+o.m+"'!")}}function uU(o){return new _m(function(){return o.I(!0)},function(a){return!!(a&&a.code=="auth/network-request-failed")},function(){var a=o.h.c-Date.now()-3e5;return 0<a?a:0})}function gS(o){o.J||o.D.b||(o.D.start(),Zn(o,"tokenChanged",o.ba),pr(o,"tokenChanged",o.ba))}function Am(o){Zn(o,"tokenChanged",o.ba),o.D.stop()}function km(o,a){o.Aa=a,ae(o,"_lat",a)}function cU(o,a){L(o.W,function(f){return f==a})}function is(o){for(var a=[],f=0;f<o.W.length;f++)a.push(o.W[f](o));return xE(a).then(function(){return o})}function Nc(o){o.b&&!o.P&&(o.P=!0,gh(o.b,o))}function mS(o,a){Sn(o,{uid:a.uid,displayName:a.displayName||null,photoURL:a.photoURL||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,isAnonymous:a.isAnonymous||!1,tenantId:a.tenantId||null,metadata:new wh(a.createdAt,a.lastLoginAt),providerData:[]}),o.a.b=o.tenantId}ae(tr.prototype,"providerId","firebase");function yS(){}function Rm(o){return ve().then(function(){if(o.J)throw new N("app-deleted")})}function Nm(o){return Se(o.providerData,function(a){return a.providerId})}function Pm(o,a){a&&(_S(o,a.providerId),o.providerData.push(a))}function _S(o,a){L(o.providerData,function(f){return f.providerId==a})}function no(o,a,f){(a!="uid"||f)&&o.hasOwnProperty(a)&&ae(o,a,f)}function bh(o,a){o!=a&&(Sn(o,{uid:a.uid,displayName:a.displayName,photoURL:a.photoURL,email:a.email,emailVerified:a.emailVerified,phoneNumber:a.phoneNumber,isAnonymous:a.isAnonymous,tenantId:a.tenantId,providerData:[]}),a.metadata?ae(o,"metadata",sU(a.metadata)):ae(o,"metadata",new wh),J(a.providerData,function(f){Pm(o,f)}),iU(o.h,a.h),ae(o,"refreshToken",o.h.a),_h(o.S,a.S.b))}e=tr.prototype,e.reload=function(){var o=this;return Dt(this,Rm(this).then(function(){return Om(o).then(function(){return is(o)}).then(yS)}))};function Om(o){return o.I().then(function(a){var f=o.isAnonymous;return lU(o,a).then(function(){return f||no(o,"isAnonymous",!1),a})})}e.oc=function(o){return this.I(o).then(function(a){return new Z2(a)})},e.I=function(o){var a=this;return Dt(this,Rm(this).then(function(){return a.h.getToken(o)}).then(function(f){if(!f)throw new N("internal-error");return f.accessToken!=a.Aa&&(km(a,f.accessToken),a.dispatchEvent(new Sa("tokenChanged"))),no(a,"refreshToken",f.refreshToken),f.accessToken}))};function ni(o,a){a[Lr]&&o.Aa!=a[Lr]&&(vS(o.h,a),o.dispatchEvent(new Sa("tokenChanged")),km(o,a[Lr]),no(o,"refreshToken",o.h.a))}function lU(o,a){return Fe(o.a,WF,{idToken:a}).then(F(o.Kc,o))}e.Kc=function(o){if(o=o.users,!o||!o.length)throw new N("internal-error");o=o[0],mS(this,{uid:o.localId,displayName:o.displayName,photoURL:o.photoUrl,email:o.email,emailVerified:!!o.emailVerified,phoneNumber:o.phoneNumber,lastLoginAt:o.lastLoginAt,createdAt:o.createdAt,tenantId:o.tenantId});for(var a=fU(o),f=0;f<a.length;f++)Pm(this,a[f]);no(this,"isAnonymous",!(this.email&&o.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Sa("userReloaded",{hd:o}))};function fU(o){return(o=o.providerUserInfo)&&o.length?Se(o,function(a){return new aU(a.rawId,a.providerId,a.email,a.displayName,a.photoUrl,a.phoneNumber)}):[]}e.Lc=function(o){return tg("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(o)},e.ub=function(o){var a=this,f=null;return Dt(this,o.c(this.a,this.uid).then(function(p){return ni(a,p),f=Pc(a,p,"reauthenticate"),a.i=null,a.reload()}).then(function(){return f}),!0)};function Eh(o,a){return Om(o).then(function(){if(R(Nm(o),a))return is(o).then(function(){throw new N("provider-already-linked")})})}e.Cc=function(o){return tg("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(o)},e.rb=function(o){var a=this,f=null;return Dt(this,Eh(this,o.providerId).then(function(){return a.I()}).then(function(p){return o.b(a.a,p)}).then(function(p){return f=Pc(a,p,"link"),wS(a,p)}).then(function(){return f}))},e.Dc=function(o,a){var f=this;return Dt(this,Eh(this,"phone").then(function(){return pm(Cm(f),o,a,F(f.rb,f))}))},e.Mc=function(o,a){var f=this;return Dt(this,ve().then(function(){return pm(Cm(f),o,a,F(f.ub,f))}),!0)};function Pc(o,a,f){var p=wg(a);return a=LT(a),ei({user:o,credential:p,additionalUserInfo:a,operationType:f})}function wS(o,a){return ni(o,a),o.reload().then(function(){return o})}e.Cb=function(o){var a=this;return Dt(this,this.I().then(function(f){return a.a.Cb(f,o)}).then(function(f){return ni(a,f),a.reload()}))},e.ed=function(o){var a=this;return Dt(this,this.I().then(function(f){return o.b(a.a,f)}).then(function(f){return ni(a,f),a.reload()}))},e.Db=function(o){var a=this;return Dt(this,this.I().then(function(f){return a.a.Db(f,o)}).then(function(f){return ni(a,f),a.reload()}))},e.Eb=function(o){if(o.displayName===void 0&&o.photoURL===void 0)return Rm(this);var a=this;return Dt(this,this.I().then(function(f){return a.a.Eb(f,{displayName:o.displayName,photoUrl:o.photoURL})}).then(function(f){return ni(a,f),no(a,"displayName",f.displayName||null),no(a,"photoURL",f.photoUrl||null),J(a.providerData,function(p){p.providerId==="password"&&(ae(p,"displayName",a.displayName),ae(p,"photoURL",a.photoURL))}),is(a)}).then(yS))},e.cd=function(o){var a=this;return Dt(this,Om(this).then(function(f){return R(Nm(a),o)?xF(a.a,f,[o]).then(function(p){var g={};return J(p.providerUserInfo||[],function(_){g[_.providerId]=!0}),J(Nm(a),function(_){g[_]||_S(a,_)}),g[Ai.PROVIDER_ID]||ae(a,"phoneNumber",null),is(a)}):is(a).then(function(){throw new N("no-such-provider")})}))},e.delete=function(){var o=this;return Dt(this,this.I().then(function(a){return Fe(o.a,jF,{idToken:a})}).then(function(){o.dispatchEvent(new Sa("userDeleted"))})).then(function(){for(var a=0;a<o.N.length;a++)o.N[a].cancel("app-deleted");Tm(o,null),Im(o,null),Sm(o,null),o.N=[],o.J=!0,Am(o),ae(o,"refreshToken",null),o.b&&cm(o.b,o)})},e.Gb=function(o,a){return!!(o=="linkViaPopup"&&(this.g||null)==a&&this.f||o=="reauthViaPopup"&&(this.g||null)==a&&this.f||o=="linkViaRedirect"&&(this.ga||null)==a||o=="reauthViaRedirect"&&(this.ga||null)==a)},e.na=function(o,a,f,p){o!="linkViaPopup"&&o!="reauthViaPopup"||p!=(this.g||null)||(f&&this.C?this.C(f):a&&!f&&this.f&&this.f(a),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,a){return o=="linkViaPopup"&&a==(this.g||null)?F(this.Lb,this):o=="reauthViaPopup"&&a==(this.g||null)?F(this.Mb,this):o=="linkViaRedirect"&&(this.ga||null)==a?F(this.Lb,this):o=="reauthViaRedirect"&&(this.ga||null)==a?F(this.Mb,this):null},e.Ec=function(o){var a=this;return bS(this,"linkViaPopup",o,function(){return Eh(a,o.providerId).then(function(){return is(a)})},!1)},e.Nc=function(o){return bS(this,"reauthViaPopup",o,function(){return ve()},!0)};function bS(o,a,f,p,g){if(!$o())return ht(new N("operation-not-supported-in-this-environment"));if(o.i&&!g)return ht(o.i);var _=pg(f.providerId),b=zo(o.uid+":::"),I=null;(!ac()||Xv())&&o.s&&f.isOAuthProvider&&(I=Ic(o.s,o.l,o.m,a,f,null,b,fe.SDK_VERSION||null,null,null,o.tenantId,o.u));var x=lT(I,_&&_.va,_&&_.ua);return p=p().then(function(){if(TS(o),!g)return o.I().then(function(){})}).then(function(){return tS(o.b,x,a,f,b,!!I,o.tenantId)}).then(function(){return new Le(function(V,we){o.na(a,null,new N("cancelled-popup-request"),o.g||null),o.f=V,o.C=we,o.g=b,o.c=rS(o.b,o,a,x,b)})}).then(function(V){return x&&Go(x),V?ei(V):null}).o(function(V){throw x&&Go(x),V}),Dt(o,p,g)}e.Fc=function(o){var a=this;return ES(this,"linkViaRedirect",o,function(){return Eh(a,o.providerId)},!1)},e.Oc=function(o){return ES(this,"reauthViaRedirect",o,function(){return ve()},!0)};function ES(o,a,f,p,g){if(!$o())return ht(new N("operation-not-supported-in-this-environment"));if(o.i&&!g)return ht(o.i);var _=null,b=zo(o.uid+":::");return p=p().then(function(){if(TS(o),!g)return o.I().then(function(){})}).then(function(){return o.ga=b,is(o)}).then(function(I){return o.ha&&(I=o.ha,I=I.b.set(Dm,o.w(),I.a)),I}).then(function(){return nS(o.b,a,f,b,o.tenantId)}).o(function(I){if(_=I,o.ha)return SS(o.ha);throw _}).then(function(){if(_)throw _}),Dt(o,p,g)}function TS(o){if(!o.b||!o.P)throw o.b&&!o.P?new N("internal-error"):new N("auth-domain-config-required")}e.Lb=function(o,a,f,p){var g=this;this.c&&(this.c.cancel(),this.c=null);var _=null;return f=this.I().then(function(b){return Bg(g.a,{requestUri:o,postBody:p,sessionId:a,idToken:b})}).then(function(b){return _=Pc(g,b,"link"),wS(g,b)}).then(function(){return _}),Dt(this,f)},e.Mb=function(o,a,f,p){var g=this;this.c&&(this.c.cancel(),this.c=null);var _=null,b=ve().then(function(){return _a(qg(g.a,{requestUri:o,sessionId:a,postBody:p,tenantId:f}),g.uid)}).then(function(I){return _=Pc(g,I,"reauthenticate"),ni(g,I),g.i=null,g.reload()}).then(function(){return _});return Dt(this,b,!0)},e.vb=function(o){var a=this,f=null;return Dt(this,this.I().then(function(p){return f=p,typeof o=="undefined"||Jn(o)?{}:Kf(new qf(o))}).then(function(p){return a.a.vb(f,p)}).then(function(p){if(a.email!=p)return a.reload()}).then(function(){}))},e.Fb=function(o,a){var f=this,p=null;return Dt(this,this.I().then(function(g){return p=g,typeof a=="undefined"||Jn(a)?{}:Kf(new qf(a))}).then(function(g){return f.a.Fb(p,o,g)}).then(function(g){if(f.email!=g)return f.reload()}).then(function(){}))};function Dt(o,a,f){var p=hU(o,a,f);return o.N.push(p),p.oa(function(){D(o.N,p)}),p.o(function(g){var _=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(_=fS(g.w(),Cm(o),F(o.jc,o))),_||g})}e.jc=function(o){var a=null,f=this;return o=_a(ve(o),f.uid).then(function(p){return a=Pc(f,p,"reauthenticate"),ni(f,p),f.i=null,f.reload()}).then(function(){return a}),Dt(this,o,!0)};function hU(o,a,f){return o.i&&!f?(a.cancel(),ht(o.i)):a.o(function(p){throw!p||p.code!="auth/user-disabled"&&p.code!="auth/user-token-expired"||(o.i||o.dispatchEvent(new Sa("userInvalidated")),o.i=p),p})}e.toJSON=function(){return this.w()},e.w=function(){var o={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&lt(o,this.metadata.w()),J(this.providerData,function(a){o.providerData.push(FL(a))}),lt(o,this.S.w()),o};function IS(o){if(!o.apiKey)return null;var a={apiKey:o.apiKey,authDomain:o.authDomain,appName:o.appName,emulatorConfig:o.emulatorConfig},f={};if(o.stsTokenManager&&o.stsTokenManager.accessToken){f[Lr]=o.stsTokenManager.accessToken,f.refreshToken=o.stsTokenManager.refreshToken||null;var p=o.stsTokenManager.expirationTime;p&&(f.expiresIn=(p-Date.now())/1e3)}else return null;var g=new tr(a,f,o);return o.providerData&&J(o.providerData,function(_){_&&Pm(g,ei(_))}),o.redirectEventId&&(g.ga=o.redirectEventId),g}function dU(o,a,f,p){var g=new tr(o,a);return f&&(g.ha=f),p&&Rc(g,p),g.reload().then(function(){return g})}function pU(o,a,f,p){var g=o.h,_={};return _[Lr]=g.b&&g.b.toString(),_.refreshToken=g.a,a=new tr(a||{apiKey:o.l,authDomain:o.s,appName:o.m},_),f&&(a.ha=f),p&&Rc(a,p),bh(a,o),a}function vU(o){this.a=o,this.b=kc()}var Dm={name:"redirectUser",F:"session"};function SS(o){return Ia(o.b,Dm,o.a)}function gU(o,a){return o.b.get(Dm,o.a).then(function(f){return f&&a&&(f.authDomain=a),IS(f||{})})}function xm(o){this.a=o,this.b=kc(),this.c=null,this.f=mU(this),this.b.addListener(ri("local"),this.a,F(this.g,this))}xm.prototype.g=function(){var o=this,a=ri("local");Ca(this,function(){return ve().then(function(){return o.c&&o.c.F!="local"?o.b.get(a,o.a):null}).then(function(f){if(f)return Mm(o,"local").then(function(){o.c=a})})})};function Mm(o,a){var f=[],p;for(p in Ea)Ea[p]!==a&&f.push(Ia(o.b,ri(Ea[p]),o.a));return f.push(Ia(o.b,Lm,o.a)),oL(f)}function mU(o){var a=ri("local"),f=ri("session"),p=ri("none");return O2(o.b,a,o.a).then(function(){return o.b.get(f,o.a)}).then(function(g){return g?f:o.b.get(p,o.a).then(function(_){return _?p:o.b.get(a,o.a).then(function(b){return b?a:o.b.get(Lm,o.a).then(function(I){return I?ri(I):a})})})}).then(function(g){return o.c=g,Mm(o,g.F)}).o(function(){o.c||(o.c=a)})}var Lm={name:"persistence",F:"session"};function ri(o){return{name:"authUser",F:o}}xm.prototype.yb=function(o){var a=null,f=this;return P2(o),Ca(this,function(){return o!=f.c.F?f.b.get(f.c,f.a).then(function(p){return a=p,Mm(f,o)}).then(function(){if(f.c=ri(o),a)return f.b.set(f.c,a,f.a)}):ve()})};function yU(o){return Ca(o,function(){return o.b.set(Lm,o.c.F,o.a)})}function CS(o,a){return Ca(o,function(){return o.b.set(o.c,a.w(),o.a)})}function AS(o){return Ca(o,function(){return Ia(o.b,o.c,o.a)})}function kS(o,a,f){return Ca(o,function(){return o.b.get(o.c,o.a).then(function(p){return p&&a&&(p.authDomain=a),p&&f&&(p.emulatorConfig=f),IS(p||{})})})}function Ca(o,a){return o.f=o.f.then(a,a),o.f}function Fr(o){if(this.l=!1,ae(this,"settings",new uS),ae(this,"app",o),rt(this).options&&rt(this).options.apiKey)o=fe.SDK_VERSION?va(fe.SDK_VERSION):null,this.a=new Mr(rt(this).options&&rt(this).options.apiKey,dr(ct),o);else throw new N("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=fe.INTERNAL.createSubscribe(F(this.zc,this)),this.W=void 0,this.ib=fe.INTERNAL.createSubscribe(F(this.Ac,this)),Aa(this,null),this.i=new xm(rt(this).options.apiKey+":"+rt(this).name),this.D=new vU(rt(this).options.apiKey+":"+rt(this).name),this.$=wt(this,IU(this)),this.h=wt(this,SU(this)),this.ba=!1,this.ja=F(this.Zc,this),this.Ba=F(this.da,this),this.qa=F(this.mc,this),this.za=F(this.wc,this),this.Aa=F(this.xc,this),this.b=null,bU(this),this.INTERNAL={},this.INTERNAL.delete=F(this.delete,this),this.INTERNAL.logFramework=F(this.Gc,this),this.u=0,In.call(this),wU(this),this.J=[],this.R=null}te(Fr,In);function RS(o){jn.call(this,"languageCodeChanged"),this.h=o}te(RS,jn);function NS(o){jn.call(this,"emulatorConfigChanged"),this.c=o}te(NS,jn);function PS(o){jn.call(this,"frameworkChanged"),this.f=o}te(PS,jn),e=Fr.prototype,e.yb=function(o){return o=this.i.yb(o),wt(this,o)},e.xa=function(o){this.aa===o||this.l||(this.aa=o,fI(this.a,this.aa),this.dispatchEvent(new RS(this.la())))},e.la=function(){return this.aa},e.fd=function(){var o=l.navigator;this.xa(o&&(o.languages&&o.languages[0]||o.language||o.userLanguage)||null)},e.gd=function(o,a){if(!this.R){if(!/^https?:\/\//.test(o))throw new N("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");a=a?!!a.disableWarnings:!1,_U(a),this.R={url:o,ec:a},this.settings.jb=!0,uh(this.a,this.R),this.dispatchEvent(new NS(this.R))}};function _U(o){typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!o&&jf().then(function(){var a=l.document.createElement("div");a.innerText="Running in emulator mode. Do not use with production credentials.",a.style.position="fixed",a.style.width="100%",a.style.backgroundColor="#ffffff",a.style.border=".1em solid #000000",a.style.color="#b50000",a.style.bottom="0px",a.style.left="0px",a.style.margin="0px",a.style.zIndex=1e4,a.style.textAlign="center",a.classList.add("firebase-emulator-warning"),l.document.body.appendChild(a)})}e.Gc=function(o){this.J.push(o),hI(this.a,fe.SDK_VERSION?va(fe.SDK_VERSION,this.J):null),this.dispatchEvent(new PS(this.J))},e.Ga=function(){return W(this.J)},e.zb=function(o){this.S===o||this.l||(this.S=o,this.a.b=this.S)},e.T=function(){return this.S};function wU(o){Object.defineProperty(o,"lc",{get:function(){return this.la()},set:function(a){this.xa(a)},enumerable:!1}),o.aa=null,Object.defineProperty(o,"ti",{get:function(){return this.T()},set:function(a){this.zb(a)},enumerable:!1}),o.S=null,Object.defineProperty(o,"emulatorConfig",{get:function(){if(this.R){var a=Vn(this.R.url);a=ei({protocol:a.c,host:a.a,port:a.g,options:ei({disableWarnings:this.R.ec})})}else a=null;return a},enumerable:!1})}e.toJSON=function(){return{apiKey:rt(this).options.apiKey,authDomain:rt(this).options.authDomain,appName:rt(this).name,currentUser:ke(this)&&ke(this).w()}};function Fm(o){return o.Oa||ht(new N("auth-domain-config-required"))}function bU(o){var a=rt(o).options.authDomain,f=rt(o).options.apiKey;a&&$o()&&(o.Oa=o.$.then(function(){if(!o.l){if(o.b=hm(a,f,rt(o).name,o.R),gh(o.b,o),ke(o)&&Nc(ke(o)),o.m){Nc(o.m);var p=o.m;p.xa(o.la()),Tm(p,o),p=o.m,Rc(p,o.J),Sm(p,o),p=o.m,Em(p,o.R),Im(p,o),o.m=null}return o.b}}))}e.Gb=function(o,a){switch(o){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==a&&!!this.f;default:return!1}},e.na=function(o,a,f,p){o=="signInViaPopup"&&this.g==p&&(f&&this.C?this.C(f):a&&!f&&this.f&&this.f(a),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,a){return o=="signInViaRedirect"||o=="signInViaPopup"&&this.g==a&&this.f?F(this.ic,this):null},e.ic=function(o,a,f,p){var g=this,_={requestUri:o,postBody:p,sessionId:a,tenantId:f};return this.c&&(this.c.cancel(),this.c=null),g.$.then(function(){return os(g,Vg(g.a,_))})},e.Xc=function(o){if(!$o())return ht(new N("operation-not-supported-in-this-environment"));var a=this,f=pg(o.providerId),p=zo(),g=null;(!ac()||Xv())&&rt(this).options.authDomain&&o.isOAuthProvider&&(g=Ic(rt(this).options.authDomain,rt(this).options.apiKey,rt(this).name,"signInViaPopup",o,null,p,fe.SDK_VERSION||null,null,null,this.T(),this.R));var _=lT(g,f&&f.va,f&&f.ua);return f=Fm(this).then(function(b){return tS(b,_,"signInViaPopup",o,p,!!g,a.T())}).then(function(){return new Le(function(b,I){a.na("signInViaPopup",null,new N("cancelled-popup-request"),a.g),a.f=b,a.C=I,a.g=p,a.c=rS(a.b,a,"signInViaPopup",_,p)})}).then(function(b){return _&&Go(_),b?ei(b):null}).o(function(b){throw _&&Go(_),b}),wt(this,f)},e.Yc=function(o){if(!$o())return ht(new N("operation-not-supported-in-this-environment"));var a=this,f=Fm(this).then(function(){return yU(a.i)}).then(function(){return nS(a.b,"signInViaRedirect",o,void 0,a.T())});return wt(this,f)};function OS(o){if(!$o())return ht(new N("operation-not-supported-in-this-environment"));var a=Fm(o).then(function(){return o.b.ra()}).then(function(f){return f?ei(f):null});return wt(o,a)}e.ra=function(){var o=this;return OS(this).then(function(a){return o.b&&yh(o.b.b),a}).o(function(a){throw o.b&&yh(o.b.b),a})},e.dd=function(o){if(!o)return ht(new N("null-user"));if(this.S!=o.tenantId)return ht(new N("tenant-id-mismatch"));var a=this,f={};f.apiKey=rt(this).options.apiKey,f.authDomain=rt(this).options.authDomain,f.appName=rt(this).name;var p=pU(o,f,a.D,a.Ga());return wt(this,this.h.then(function(){if(rt(a).options.apiKey!=o.l)return p.reload()}).then(function(){return ke(a)&&o.uid==ke(a).uid?(bh(ke(a),o),a.da(o)):(Aa(a,p),Nc(p),a.da(p))}).then(function(){Oc(a)}))};function EU(o,a){var f={};return f.apiKey=rt(o).options.apiKey,f.authDomain=rt(o).options.authDomain,f.appName=rt(o).name,o.R&&(f.emulatorConfig=o.R),o.$.then(function(){return dU(f,a,o.D,o.Ga())}).then(function(p){return ke(o)&&p.uid==ke(o).uid?(bh(ke(o),p),o.da(p)):(Aa(o,p),Nc(p),o.da(p))}).then(function(){Oc(o)})}function Aa(o,a){ke(o)&&(cU(ke(o),o.Ba),Zn(ke(o),"tokenChanged",o.qa),Zn(ke(o),"userDeleted",o.za),Zn(ke(o),"userInvalidated",o.Aa),Am(ke(o))),a&&(a.W.push(o.Ba),pr(a,"tokenChanged",o.qa),pr(a,"userDeleted",o.za),pr(a,"userInvalidated",o.Aa),0<o.u&&gS(a)),ae(o,"currentUser",a),a&&(a.xa(o.la()),Tm(a,o),Rc(a,o.J),Sm(a,o),Em(a,o.R),Im(a,o))}e.Bb=function(){var o=this,a=this.h.then(function(){return o.b&&yh(o.b.b),ke(o)?(Aa(o,null),AS(o.i).then(function(){Oc(o)})):ve()});return wt(this,a)};function TU(o){var a=gU(o.D,rt(o).options.authDomain).then(function(f){return(o.m=f)&&(f.ha=o.D),SS(o.D)});return wt(o,a)}function IU(o){var a=rt(o).options.authDomain,f=TU(o).then(function(){return kS(o.i,a,o.R)}).then(function(p){return p?(p.ha=o.D,o.m&&(o.m.ga||null)==(p.ga||null)?p:p.reload().then(function(){return CS(o.i,p).then(function(){return p})}).o(function(g){return g.code=="auth/network-request-failed"?p:AS(o.i)})):null}).then(function(p){Aa(o,p||null)});return wt(o,f)}function SU(o){return o.$.then(function(){return OS(o)}).o(function(){}).then(function(){if(!o.l)return o.ja()}).o(function(){}).then(function(){if(!o.l){o.ba=!0;var a=o.i;a.b.addListener(ri("local"),a.a,o.ja)}})}e.Zc=function(){var o=this;return kS(this.i,rt(this).options.authDomain).then(function(a){if(!o.l){var f;if(f=ke(o)&&a){f=ke(o).uid;var p=a.uid;f=f==null||f===""||p===void 0||p===null||p===""?!1:f==p}if(f)return bh(ke(o),a),ke(o).I();(ke(o)||a)&&(Aa(o,a),a&&(Nc(a),a.ha=o.D),o.b&&gh(o.b,o),Oc(o))}})},e.da=function(o){return CS(this.i,o)},e.mc=function(){Oc(this),this.da(ke(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()};function os(o,a){var f=null,p=null;return wt(o,a.then(function(g){return f=wg(g),p=LT(g),EU(o,g)},function(g){var _=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(_=fS(g.w(),o,F(o.kc,o))),_||g}).then(function(){return ei({user:ke(o),credential:f,additionalUserInfo:p,operationType:"signIn"})}))}e.kc=function(o){var a=this;return this.h.then(function(){return os(a,ve(o))})},e.zc=function(o){var a=this;this.addAuthTokenListener(function(){o.next(ke(a))})},e.Ac=function(o){var a=this;CU(this,function(){o.next(ke(a))})},e.Ic=function(o,a,f){var p=this;return this.ba&&Promise.resolve().then(function(){typeof o=="function"?o(ke(p)):typeof o.next=="function"&&o.next(ke(p))}),this.Pa(o,a,f)},e.Hc=function(o,a,f){var p=this;return this.ba&&Promise.resolve().then(function(){p.W=p.getUid(),typeof o=="function"?o(ke(p)):typeof o.next=="function"&&o.next(ke(p))}),this.ib(o,a,f)},e.nc=function(o){var a=this,f=this.h.then(function(){return ke(a)?ke(a).I(o).then(function(p){return{accessToken:p}}):null});return wt(this,f)},e.Tc=function(o){var a=this;return this.h.then(function(){return os(a,Fe(a.a,s2,{token:o}))}).then(function(f){var p=f.user;return no(p,"isAnonymous",!1),a.da(p),f})},e.Uc=function(o,a){var f=this;return this.h.then(function(){return os(f,Fe(f.a,bI,{email:o,password:a}))})},e.dc=function(o,a){var f=this;return this.h.then(function(){return os(f,Fe(f.a,FF,{email:o,password:a}))})},e.ab=function(o){var a=this;return this.h.then(function(){return os(a,o.ka(a.a))})},e.Sc=function(o){return tg("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(o)},e.Ab=function(){var o=this;return this.h.then(function(){var a=ke(o);if(a&&a.isAnonymous){var f=ei({providerId:null,isNewUser:!1});return ei({user:a,credential:null,additionalUserInfo:f,operationType:"signIn"})}return os(o,o.a.Ab()).then(function(p){var g=p.user;return no(g,"isAnonymous",!0),o.da(g),p})})};function rt(o){return o.app}function ke(o){return o.currentUser}e.getUid=function(){return ke(this)&&ke(this).uid||null};function Th(o){return ke(o)&&ke(o)._lat||null}function Oc(o){if(o.ba){for(var a=0;a<o.s.length;a++)o.s[a]&&o.s[a](Th(o));if(o.W!==o.getUid()&&o.N.length)for(o.W=o.getUid(),a=0;a<o.N.length;a++)o.N[a]&&o.N[a](Th(o))}}e.cc=function(o){this.addAuthTokenListener(o),this.u++,0<this.u&&ke(this)&&gS(ke(this))},e.Pc=function(o){var a=this;J(this.s,function(f){f==o&&a.u--}),0>this.u&&(this.u=0),this.u==0&&ke(this)&&Am(ke(this)),this.removeAuthTokenListener(o)},e.addAuthTokenListener=function(o){var a=this;this.s.push(o),wt(this,this.h.then(function(){a.l||R(a.s,o)&&o(Th(a))}))},e.removeAuthTokenListener=function(o){L(this.s,function(a){return a==o})};function CU(o,a){o.N.push(a),wt(o,o.h.then(function(){!o.l&&R(o.N,a)&&o.W!==o.getUid()&&(o.W=o.getUid(),a(Th(o)))}))}e.delete=function(){this.l=!0;for(var o=0;o<this.P.length;o++)this.P[o].cancel("app-deleted");return this.P=[],this.i&&(o=this.i,o.b.removeListener(ri("local"),o.a,this.ja)),this.b&&(cm(this.b,this),yh(this.b.b)),Promise.resolve()};function wt(o,a){return o.P.push(a),a.oa(function(){D(o.P,a)}),a}e.hc=function(o){return wt(this,kF(this.a,o))},e.Bc=function(o){return!!_g(o)},e.xb=function(o,a){var f=this;return wt(this,ve().then(function(){var p=new qf(a);if(!p.c)throw new N("argument-error",hg+" must be true when sending sign in link to email");return Kf(p)}).then(function(p){return f.a.xb(o,p)}).then(function(){}))},e.jd=function(o){return this.Sa(o).then(function(a){return a.data.email})},e.ob=function(o,a){return wt(this,this.a.ob(o,a).then(function(){}))},e.Sa=function(o){return wt(this,this.a.Sa(o).then(function(a){return new jL(a)}))},e.kb=function(o){return wt(this,this.a.kb(o).then(function(){}))},e.wb=function(o,a){var f=this;return wt(this,ve().then(function(){return typeof a=="undefined"||Jn(a)?{}:Kf(new qf(a))}).then(function(p){return f.a.wb(o,p)}).then(function(){}))},e.Wc=function(o,a){return wt(this,pm(this,o,a,F(this.ab,this)))},e.Vc=function(o,a){var f=this;return wt(this,ve().then(function(){var p=a||sc(),g=zT(o,p);if(p=_g(p),!p)throw new N("argument-error","Invalid email link!");if(p.tenantId!==f.T())throw new N("tenant-id-mismatch");return f.ab(g)}))};function Dc(){}Dc.prototype.render=function(){},Dc.prototype.reset=function(){},Dc.prototype.getResponse=function(){},Dc.prototype.execute=function(){};function ka(){this.a={},this.b=1e12}var Um=null;ka.prototype.render=function(o,a){return this.a[this.b.toString()]=new Ih(o,a),this.b++},ka.prototype.reset=function(o){var a=jm(this,o);o=DS(o),a&&o&&(a.delete(),delete this.a[o])},ka.prototype.getResponse=function(o){return(o=jm(this,o))?o.getResponse():null},ka.prototype.execute=function(o){(o=jm(this,o))&&o.execute()};function jm(o,a){return(a=DS(a))&&o.a[a]||null}function DS(o){return(o=typeof o=="undefined"?1e12:o)?o.toString():null}function Ih(o,a){this.g=!1,this.c=a,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Zu(o);var f=this;this.i=function(){f.execute()},this.h?this.execute():pr(this.f,"click",this.i)}Ih.prototype.getResponse=function(){return Vm(this),this.b},Ih.prototype.execute=function(){Vm(this);var o=this;this.a||(this.a=setTimeout(function(){o.b=DL();var a=o.c.callback,f=o.c["expired-callback"];if(a)try{a(o.b)}catch{}o.a=setTimeout(function(){if(o.a=null,o.b=null,f)try{f()}catch{}o.h&&o.execute()},6e4)},500))},Ih.prototype.delete=function(){Vm(this),this.g=!0,clearTimeout(this.a),this.a=null,Zn(this.f,"click",this.i)};function Vm(o){if(o.g)throw Error("reCAPTCHA mock was already deleted!")}function Bm(){}ae(Bm,"FACTOR_ID","phone");function qm(){}qm.prototype.g=function(){return Um||(Um=new ka),ve(Um)},qm.prototype.c=function(){};var Km=null;function Hm(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var AU=new Xr(Cf,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),kU=new Zi(3e4,6e4);Hm.prototype.g=function(o){var a=this;return new Le(function(f,p){var g=setTimeout(function(){p(new N("network-request-failed"))},kU.get());if(!l.grecaptcha||o!==a.f&&!a.b){l[a.a]=function(){if(l.grecaptcha){a.f=o;var b=l.grecaptcha.render;l.grecaptcha.render=function(I,x){return I=b(I,x),a.b++,I},clearTimeout(g),f(l.grecaptcha)}else clearTimeout(g),p(new N("internal-error"));delete l[a.a]};var _=Sv(AU,{onload:a.a,hl:o||""});ve(Dg(_)).o(function(){clearTimeout(g),p(new N("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(g),f(l.grecaptcha)})},Hm.prototype.c=function(){this.b--};var Wm=null;function Gm(o,a,f,p,g,_,b){if(ae(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=a,this.g=null,b?(Km||(Km=new qm),b=Km):(Wm||(Wm=new Hm),b=Wm),this.m=b,this.a=f||{theme:"light",type:"image"},this.h=[],this.a[LS])throw new N("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[RU]==="invisible",!l.document)throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Zu(a)||!this.i&&Zu(a).hasChildNodes())throw new N("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Mr(o,_||null,g||null),this.u=p||function(){return null};var I=this;this.l=[];var x=this.a[xS];this.a[xS]=function(we){if(FS(I,we),typeof x=="function")x(we);else if(typeof x=="string"){var Xe=dt(x,l);typeof Xe=="function"&&Xe(we)}};var V=this.a[MS];this.a[MS]=function(){if(FS(I,null),typeof V=="function")V();else if(typeof V=="string"){var we=dt(V,l);typeof we=="function"&&we()}}}var xS="callback",MS="expired-callback",LS="sitekey",RU="size";function FS(o,a){for(var f=0;f<o.l.length;f++)try{o.l[f](a)}catch{}}function NU(o,a){L(o.l,function(f){return f==a})}function $m(o,a){return o.h.push(a),a.oa(function(){D(o.h,a)}),a}e=Gm.prototype,e.Ia=function(){var o=this;return this.f?this.f:this.f=$m(this,ve().then(function(){if(Vf()&&!Dr())return jf();throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return o.m.g(o.u())}).then(function(a){return o.g=a,Fe(o.s,XF,{})}).then(function(a){o.a[LS]=a.recaptchaSiteKey}).o(function(a){throw o.f=null,a}))},e.render=function(){Sh(this);var o=this;return $m(this,this.Ia().then(function(){if(o.c===null){var a=o.v;if(!o.i){var f=Zu(a);a=tL("DIV"),f.appendChild(a)}o.c=o.g.render(a,o.a)}return o.c}))},e.verify=function(){Sh(this);var o=this;return $m(this,this.render().then(function(a){return new Le(function(f){var p=o.g.getResponse(a);if(p)f(p);else{var g=function(_){_&&(NU(o,g),f(_))};o.l.push(g),o.i&&o.g.execute(o.c)}})}))},e.reset=function(){Sh(this),this.c!==null&&this.g.reset(this.c)};function Sh(o){if(o.J)throw new N("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){Sh(this),this.J=!0,this.m.c();for(var o=0;o<this.h.length;o++)this.h[o].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){o=Zu(this.v);for(var a;a=o.firstChild;)o.removeChild(a)}};function zm(o,a,f){var p=!1;try{this.b=f||fe.app()}catch{throw new N("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)f=this.b.options.apiKey;else throw new N("invalid-api-key");var g=this,_=null;try{_=this.b.auth().Ga()}catch{}try{p=this.b.auth().settings.appVerificationDisabledForTesting}catch{}_=fe.SDK_VERSION?va(fe.SDK_VERSION,_):null,Gm.call(this,f,o,a,function(){try{var b=g.b.auth().la()}catch{b=null}return b},_,dr(ct),p)}te(zm,Gm);function US(o,a,f,p){e:{f=Array.prototype.slice.call(f);for(var g=0,_=!1,b=0;b<a.length;b++)if(a[b].optional)_=!0;else{if(_)throw new N("internal-error","Argument validator encountered a required argument after an optional argument.");g++}if(_=a.length,f.length<g||_<f.length)p="Expected "+(g==_?g==1?"1 argument":g+" arguments":g+"-"+_+" arguments")+" but got "+f.length+".";else{for(g=0;g<f.length;g++)if(_=a[g].optional&&f[g]===void 0,!a[g].M(f[g])&&!_){if(a=a[g],0>g||g>=jS.length)throw new N("internal-error","Argument validator received an unsupported number of arguments.");f=jS[g],p=(p?"":f+" argument ")+(a.name?'"'+a.name+'" ':"")+"must be "+a.K+".";break e}p=null}}if(p)throw new N("argument-error",o+" failed: "+p)}var jS="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function oe(o,a){return{name:o||"",K:"a valid string",optional:!!a,M:function(f){return typeof f=="string"}}}function Qm(o,a){return{name:o||"",K:"a boolean",optional:!!a,M:function(f){return typeof f=="boolean"}}}function At(o,a){return{name:o||"",K:"a valid object",optional:!!a,M:T}}function Ra(o,a){return{name:o||"",K:"a function",optional:!!a,M:function(f){return typeof f=="function"}}}function ii(o,a){return{name:o||"",K:"null",optional:!!a,M:function(f){return f===null}}}function PU(){return{name:"",K:"an HTML element",optional:!1,M:function(o){return!!(o&&o instanceof Element)}}}function OU(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(o){return!!(o&&o instanceof Fr)}}}function DU(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(o){return!!(o&&o instanceof fe.app.App)}}}function ro(o){return{name:o?o+"Credential":"credential",K:o?"a valid "+o+" credential":"a valid credential",optional:!1,M:function(a){if(!a)return!1;var f=!o||a.providerId===o;return!(!a.ka||!f)}}}function VS(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(o){return o?!!o.tb:!1}}}function Na(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}}function Ym(o,a){return T(o)&&typeof o.type=="string"&&o.type===a&&typeof o.Ha=="function"}function BS(o){return T(o)&&typeof o.uid=="string"}function Ch(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||typeof o.type!="string"||typeof o.verify!="function")}}}function It(o,a,f,p){return{name:f||"",K:o.K+" or "+a.K,optional:!!p,M:function(g){return o.M(g)||a.M(g)}}}function gt(o,a){for(var f in a){var p=a[f].name;o[p]=KS(p,o[f],a[f].j)}}function qS(o,a){for(var f in a){var p=a[f].name;p!==f&&Object.defineProperty(o,p,{get:re(function(g){return this[g]},f),set:re(function(g,_,b,I){US(g,[b],[I],!0),this[_]=I},p,f,a[f].lb),enumerable:!0})}}function St(o,a,f,p){o[a]=KS(a,f,p)}function KS(o,a,f){function p(){var b=Array.prototype.slice.call(arguments);return US(g,f,b),a.apply(this,b)}if(!f)return a;var g=xU(o),_;for(_ in a)p[_]=a[_];for(_ in a.prototype)p.prototype[_]=a.prototype[_];return p}function xU(o){return o=o.split("."),o[o.length-1]}gt(Fr.prototype,{kb:{name:"applyActionCode",j:[oe("code")]},Sa:{name:"checkActionCode",j:[oe("code")]},ob:{name:"confirmPasswordReset",j:[oe("code"),oe("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[oe("email"),oe("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[oe("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[oe("emailLink")]},Hc:{name:"onAuthStateChanged",j:[It(At(),Ra(),"nextOrObserver"),Ra("opt_error",!0),Ra("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[It(At(),Ra(),"nextOrObserver"),Ra("opt_error",!0),Ra("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[oe("email"),It(At("opt_actionCodeSettings",!0),ii(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[oe("email"),At("actionCodeSettings")]},yb:{name:"setPersistence",j:[oe("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ro()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[ro()]},Tc:{name:"signInWithCustomToken",j:[oe("token")]},Uc:{name:"signInWithEmailAndPassword",j:[oe("email"),oe("password")]},Vc:{name:"signInWithEmailLink",j:[oe("email"),oe("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[oe("phoneNumber"),Ch()]},Xc:{name:"signInWithPopup",j:[Na()]},Yc:{name:"signInWithRedirect",j:[Na()]},dd:{name:"updateCurrentUser",j:[It(function(o){return{name:"user",K:"an instance of Firebase User",optional:!!o,M:function(a){return!!(a&&a instanceof tr)}}}(),ii(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[oe(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[oe("url"),At("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[oe("code")]}}),qS(Fr.prototype,{lc:{name:"languageCode",lb:It(oe(),ii(),"languageCode")},ti:{name:"tenantId",lb:It(oe(),ii(),"tenantId")}}),Fr.Persistence=Ea,Fr.Persistence.LOCAL="local",Fr.Persistence.SESSION="session",Fr.Persistence.NONE="none",gt(tr.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Qm("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Qm("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ro()]},rb:{name:"linkWithCredential",j:[ro()]},Dc:{name:"linkWithPhoneNumber",j:[oe("phoneNumber"),Ch()]},Ec:{name:"linkWithPopup",j:[Na()]},Fc:{name:"linkWithRedirect",j:[Na()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ro()]},ub:{name:"reauthenticateWithCredential",j:[ro()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[oe("phoneNumber"),Ch()]},Nc:{name:"reauthenticateWithPopup",j:[Na()]},Oc:{name:"reauthenticateWithRedirect",j:[Na()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[It(At("opt_actionCodeSettings",!0),ii(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[oe(null,!0)]},cd:{name:"unlink",j:[oe("provider")]},Cb:{name:"updateEmail",j:[oe("email")]},Db:{name:"updatePassword",j:[oe("password")]},ed:{name:"updatePhoneNumber",j:[ro("phone")]},Eb:{name:"updateProfile",j:[At("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[oe("email"),It(At("opt_actionCodeSettings",!0),ii(null,!0),"opt_actionCodeSettings",!0)]}}),gt(ka.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),gt(Dc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),gt(Le.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),qS(uS.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Qm("appVerificationDisabledForTesting")}}),gt(dm.prototype,{confirm:{name:"confirm",j:[oe("verificationCode")]}}),St(ya,"fromJSON",function(o){o=typeof o=="string"?JSON.parse(o):o;for(var a,f=[rF,iF,oF,nF],p=0;p<f.length;p++)if(a=f[p](o))return a;return null},[It(oe(),At(),"json")]),St(gr,"credential",function(o,a){return new eo(o,a)},[oe("email"),oe("password")]),gt(eo.prototype,{w:{name:"toJSON",j:[oe(null,!0)]}}),gt(Xo.prototype,{Ca:{name:"addScope",j:[oe("scope")]},Ka:{name:"setCustomParameters",j:[At("customOAuthParameters")]}}),St(Xo,"credential",HT,[It(oe(),At(),"token")]),St(gr,"credentialWithLink",zT,[oe("email"),oe("emailLink")]),gt(Jo.prototype,{Ca:{name:"addScope",j:[oe("scope")]},Ka:{name:"setCustomParameters",j:[At("customOAuthParameters")]}}),St(Jo,"credential",WT,[It(oe(),At(),"token")]),gt(Zo.prototype,{Ca:{name:"addScope",j:[oe("scope")]},Ka:{name:"setCustomParameters",j:[At("customOAuthParameters")]}}),St(Zo,"credential",GT,[It(oe(),It(At(),ii()),"idToken"),It(oe(),ii(),"accessToken",!0)]),gt(wa.prototype,{Ka:{name:"setCustomParameters",j:[At("customOAuthParameters")]}}),St(wa,"credential",$T,[It(oe(),At(),"token"),oe("secret",!0)]),gt(er.prototype,{Ca:{name:"addScope",j:[oe("scope")]},credential:{name:"credential",j:[It(oe(),It(At(),ii()),"optionsOrIdToken"),It(oe(),ii(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[At("customOAuthParameters")]}}),gt(Ci.prototype,{w:{name:"toJSON",j:[oe(null,!0)]}}),gt(Qo.prototype,{w:{name:"toJSON",j:[oe(null,!0)]}}),St(Ai,"credential",QT,[oe("verificationId"),oe("verificationCode")]),gt(Ai.prototype,{gb:{name:"verifyPhoneNumber",j:[It(oe(),function(o,a){return{name:o||"phoneInfoOptions",K:"valid phone info options",optional:!!a,M:function(f){return f?f.session&&f.phoneNumber?Ym(f.session,dc)&&typeof f.phoneNumber=="string":f.session&&f.multiFactorHint?Ym(f.session,zf)&&BS(f.multiFactorHint):f.session&&f.multiFactorUid?Ym(f.session,zf)&&typeof f.multiFactorUid=="string":f.phoneNumber?typeof f.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Ch()]}}),gt(to.prototype,{w:{name:"toJSON",j:[oe(null,!0)]}}),gt(N.prototype,{toJSON:{name:"toJSON",j:[oe(null,!0)]}}),gt(vc.prototype,{toJSON:{name:"toJSON",j:[oe(null,!0)]}}),gt(Tg.prototype,{toJSON:{name:"toJSON",j:[oe(null,!0)]}}),gt(gm.prototype,{toJSON:{name:"toJSON",j:[oe(null,!0)]}}),gt(vm.prototype,{Rc:{name:"resolveSignIn",j:[VS()]}}),gt(ym.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[VS(),oe("displayName",!0)]},bd:{name:"unenroll",j:[It({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:BS},oe(),"multiFactorInfoIdentifier")]}}),gt(zm.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),St(fg,"parseLink",CT,[oe("link")]),St(Bm,"assertion",function(o){return new dS(o)},[ro("phone")]),function(){if(typeof fe!="undefined"&&fe.INTERNAL&&fe.INTERNAL.registerComponent){var o={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Bf,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:lg,VERIFY_AND_CHANGE_EMAIL:fc,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Fr,AuthCredential:ya,Error:N};St(o,"EmailAuthProvider",gr,[]),St(o,"FacebookAuthProvider",Xo,[]),St(o,"GithubAuthProvider",Jo,[]),St(o,"GoogleAuthProvider",Zo,[]),St(o,"TwitterAuthProvider",wa,[]),St(o,"OAuthProvider",er,[oe("providerId")]),St(o,"SAMLAuthProvider",KT,[oe("providerId")]),St(o,"PhoneAuthProvider",Ai,[OU()]),St(o,"RecaptchaVerifier",zm,[It(oe(),PU(),"recaptchaContainer"),At("recaptchaParameters",!0),DU()]),St(o,"ActionCodeURL",fg,[]),St(o,"PhoneMultiFactorGenerator",Bm,[]),fe.INTERNAL.registerComponent({name:"auth",instanceFactory:function(a){return a=a.getProvider("app").getImmediate(),new Fr(a)},multipleInstances:!1,serviceProps:o,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(a){a.getProvider("auth-internal").initialize()}}),fe.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(a){return a=a.getProvider("auth").getImmediate(),{getUid:F(a.getUid,a),getToken:F(a.nc,a),addAuthTokenListener:F(a.cc,a),removeAuthTokenListener:F(a.Pc,a)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),fe.registerVersion("@firebase/auth","0.16.8"),fe.INTERNAL.extendNamespace({User:tr})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var iB="@firebase/database",oB="0.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $N="";function zN(e){$N=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sB=function(){function e(t){this.domStorage_=t,this.prefix_="firebase:"}return e.prototype.set=function(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Mt(n))},e.prototype.get=function(t){var n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:yl(n)},e.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},e.prototype.prefixedName_=function(t){return this.prefix_+t},e.prototype.toString=function(){return this.domStorage_.toString()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aB=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n},e.prototype.get=function(t){return lr(this.cache_,t)?this.cache_[t]:null},e.prototype.remove=function(t){delete this.cache_[t]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QN=function(e){try{if(typeof window!="undefined"&&typeof window[e]!="undefined"){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new sB(t)}}catch{}return new aB},_s=QN("localStorage"),u_=QN("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var za=new zs("@firebase/database"),YN=function(){var e=1;return function(){return e++}}(),XN=function(e){var t=S4(e),n=new b4;n.update(t);var r=n.digest();return mp.encodeByteArray(r)},zl=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=zl.apply(null,i):typeof i=="object"?n+=Mt(i):n+=i,n+=" "}return n},Rs=null,TC=!0,JN=function(e,t){G(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(za.logLevel=Me.VERBOSE,Rs=za.log.bind(za),t&&u_.set("logging_enabled",!0)):typeof e=="function"?Rs=e:(Rs=null,u_.remove("logging_enabled"))},Kt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(TC===!0&&(TC=!1,Rs===null&&u_.get("logging_enabled")===!0&&JN(!0)),Rs){var n=zl.apply(null,e);Rs(n)}},Ql=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Kt.apply(void 0,Ne([e],nn(t)))}},c_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+zl.apply(void 0,Ne([],nn(e)));za.error(n)},_i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+zl.apply(void 0,Ne([],nn(e)));throw za.error(n),new Error(n)},on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+zl.apply(void 0,Ne([],nn(e)));za.warn(n)},uB=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&on("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},_p=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},cB=function(e){if(document.readyState==="complete")e();else{var t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Bi="[MIN_NAME]",wi="[MAX_NAME]",Qs=function(e,t){if(e===t)return 0;if(e===Bi||t===wi)return-1;if(t===Bi||e===wi)return 1;var n=yd(e),r=yd(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1},lB=function(e,t){return e===t?0:e<t?-1:1},xc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Mt(t))},qw=function(e){if(typeof e!="object"||e===null)return Mt(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)i!==0&&(r+=","),r+=Mt(t[i]),r+=":",r+=qw(e[t[i]]);return r+="}",r},ZN=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function jt(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var e1=function(e){G(!_p(e),"Invalid JSON number");var t=11,n=52,r=(1<<t-1)-1,i,s,u,c,l;e===0?(s=0,u=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=c+r,u=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,u=Math.round(e/Math.pow(2,1-r-n))));var h=[];for(l=n;l;l-=1)h.push(u%2?1:0),u=Math.floor(u/2);for(l=t;l;l-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();var d=h.join(""),v="";for(l=0;l<64;l+=8){var m=parseInt(d.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),v=v+m}return v.toLowerCase()},fB=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},hB=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function dB(e,t){var n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var pB=new RegExp("^-?(0*)\\d{1,10}$"),t1=-2147483648,Kw=2147483647,yd=function(e){if(pB.test(e)){var t=Number(e);if(t>=t1&&t<=Kw)return t}return null},Du=function(e){try{e()}catch(t){setTimeout(function(){var n=t.stack||"";throw on("Exception was thrown by user callback.",n),t},Math.floor(0))}},vB=function(){var e=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yc=function(e,t){var n=setTimeout(e,t);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gB=function(){function e(t,n){var r=this;this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(function(i){return r.appCheck=i})}return e.prototype.getToken=function(t){var n=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(r,i){setTimeout(function(){n.appCheck?n.getToken(t).then(r,i):r(null)},0)})},e.prototype.addTokenChangeListener=function(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(function(r){return r.addTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){on('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mB=function(){function e(t,n,r){var i=this;this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(s){return i.auth_=s})}return e.prototype.getToken=function(t){var n=this;return this.auth_?this.auth_.getToken(t).catch(function(r){return r&&r.code==="auth/token-not-initialized"?(Kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)}):new Promise(function(r,i){setTimeout(function(){n.auth_?n.getToken(t).then(r,i):r(null)},0)})},e.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(n){return n.addAuthTokenListener(t)})},e.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(n){return n.removeAuthTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',on(t)},e}(),Xc=function(){function e(t){this.accessToken=t}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(t){t(this.accessToken)},e.prototype.removeTokenChangeListener=function(t){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hw="5",n1="v",r1="s",i1="r",o1="f",s1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,a1="ls",yB="p",l_="ac",u1="websocket",c1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ww=function(){function e(t,n,r,i,s,u,c){s===void 0&&(s=!1),u===void 0&&(u=""),c===void 0&&(c=!1),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_s.get("host:"+t)||this._host}return e.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},e.prototype.isCustomHost=function(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&_s.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},e.prototype.toURLString=function(){var t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+n},e}();function _B(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function l1(e,t,n){G(typeof t=="string","typeof type must == string"),G(typeof n=="object","typeof params must == object");var r;if(t===u1)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===c1)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);_B(e)&&(n.ns=e.namespace);var i=[];return jt(n,function(s,u){i.push(s+"="+u)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wB=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(t,n){n===void 0&&(n=1),lr(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n},e.prototype.get=function(){return FN(this.counters_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ry={},iy={};function Gw(e){var t=e.toString();return ry[t]||(ry[t]=new wB),ry[t]}function bB(e,t){var n=e.toString();return iy[n]||(iy[n]=t()),iy[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EB=function(){function e(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(t,n){var r=this;this.pendingResponses[t]=n;for(var i=function(){var c=s.pendingResponses[s.currentResponseNum];delete s.pendingResponses[s.currentResponseNum];for(var l=function(d){c[d]&&Du(function(){r.onMessage_(c[d])})},h=0;h<c.length;++h)l(h);if(s.currentResponseNum===s.closeAfterResponse)return s.onClose&&(s.onClose(),s.onClose=null),"break";s.currentResponseNum++},s=this;this.pendingResponses[this.currentResponseNum];){var u=i();if(u==="break")break}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IC="start",TB="close",IB="pLPCommand",SB="pRTLPCB",f1="id",h1="pw",d1="ser",CB="cb",AB="seg",kB="ts",RB="d",NB="dframe",p1=1870,v1=30,PB=p1-v1,OB=25e3,DB=3e4,$w=function(){function e(t,n,r,i,s,u,c){var l=this;this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ql(t),this.stats_=Gw(n),this.urlFn=function(h){return l.appCheckToken&&(h[l_]=l.appCheckToken),l1(n,c1,h)}}return e.prototype.open=function(t,n){var r=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new EB(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(DB)),cB(function(){if(!r.isClosed_){r.scriptTagHolder=new xB(function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var l=nn(u,5),h=l[0],d=l[1],v=l[2];if(l[3],l[4],r.incrementIncomingBytes_(u),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,h===IC)r.id=d,r.password=v;else if(h===TB)d?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(d,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+h)},function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var l=nn(u,2),h=l[0],d=l[1];r.incrementIncomingBytes_(u),r.myPacketOrderer.handleResponse(h,d)},function(){r.onClosed_()},r.urlFn);var i={};i[IC]="t",i[d1]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(i[CB]=r.scriptTagHolder.uniqueCallbackIdentifier),i[n1]=Hw,r.transportSessionId&&(i[r1]=r.transportSessionId),r.lastSessionId&&(i[a1]=r.lastSessionId),r.applicationId&&(i[yB]=r.applicationId),r.appCheckToken&&(i[l_]=r.appCheckToken),typeof location!="undefined"&&location.hostname&&s1.test(location.hostname)&&(i[i1]=o1);var s=r.urlFn(i);r.log_("Connecting via long-poll to "+s),r.scriptTagHolder.addTag(s,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_?!0:!e.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!fB()&&!hB()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(t){var n=Mt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);for(var r=LN(n),i=ZN(r,PB),s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(t,n){this.myDisconnFrame=document.createElement("iframe");var r={};r[NB]="t",r[f1]=t,r[h1]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(t){var n=Mt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)},e}(),xB=function(){function e(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=YN(),window[IB+this.uniqueCallbackIdentifier]=t,window[SB+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var u=document.domain;s='<script>document.domain="'+u+'";<\/script>'}var c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(l){Kt("frame writing exception"),l.stack&&Kt(l.stack),Kt(l)}}}return e.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{var n=t.contentWindow.document;n||Kt("No IE domain setting required")}catch{var r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},e.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){t.myIFrame!==null&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var n=this.onDisconnect;n&&(this.onDisconnect=null,n())},e.prototype.startLongPoll=function(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[f1]=this.myID,t[h1]=this.myPW,t[d1]=this.currentSerial;for(var n=this.urlFn(t),r="",i=0;this.pendingSegs.length>0;){var s=this.pendingSegs[0];if(s.d.length+v1+r.length<=p1){var u=this.pendingSegs.shift();r=r+"&"+AB+i+"="+u.seg+"&"+kB+i+"="+u.ts+"&"+RB+i+"="+u.d,i++}else break}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1},e.prototype.enqueueSegment=function(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(t,n){var r=this;this.outstandingRequests.add(n);var i=function(){r.outstandingRequests.delete(n),r.newRequest_()},s=setTimeout(i,Math.floor(OB)),u=function(){clearTimeout(s),i()};this.addTag(t,u)},e.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){Kt("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MB=16384,LB=45e3,_d=null;typeof MozWebSocket!="undefined"?_d=MozWebSocket:typeof WebSocket!="undefined"&&(_d=WebSocket);var gs=function(){function e(t,n,r,i,s,u,c){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ql(this.connId),this.stats_=Gw(n),this.connURL=e.connectionURL_(n,u,c,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,n,r,i){var s={};return s[n1]=Hw,typeof location!="undefined"&&location.hostname&&s1.test(location.hostname)&&(s[i1]=o1),n&&(s[r1]=n),r&&(s[a1]=r),i&&(s[l_]=i),l1(t,u1,s)},e.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_s.set("previous_websocket_failure",!0);try{var i,s,u,c;if(!VN()){var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new _d(this.connURL,[],s)}}catch(h){this.log_("Error instantiating WebSocket.");var l=h.message||h.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(h){r.handleIncomingFrame(h)},this.mySock.onerror=function(h){r.log_("WebSocket error.  Closing connection.");var d=h.message||h.data;d&&r.log_(d),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if(typeof navigator!="undefined"&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&_d!==null&&!e.forceDisallow_},e.previouslyFailed=function(){return _s.isInMemoryStorage||_s.get("previous_websocket_failure")===!0},e.prototype.markConnectionHealthy=function(){_s.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var n=this.frames.join("");this.frames=null;var r=yl(n);this.onMessage(r)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(G(this.frames===null,"We already have a frame buffer"),t.length<=6){var n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(this.mySock!==null){var n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{var r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}},e.prototype.send=function(t){this.resetKeepAlive();var n=Mt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);var r=ZN(n,MB);r.length>1&&this.sendString_(String(r.length));for(var i=0;i<r.length;i++)this.sendString_(r[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(LB))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FB=function(){function e(t){this.initTransports_(t)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[$w,gs]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=gs&&gs.isAvailable(),s=i&&!gs.previouslyFailed();if(t.webSocketOnly&&(i||on("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[gs];else{var u=this.transports_=[];try{for(var c=zt(e.ALL_TRANSPORTS),l=c.next();!l.done;l=c.next()){var h=l.value;h&&h.isAvailable()&&u.push(h)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UB=6e4,jB=5e3,VB=10*1024,BB=100*1024,oy="t",SC="d",qB="s",CC="r",KB="e",AC="o",kC="a",RC="n",NC="p",HB="h",g1=function(){function e(t,n,r,i,s,u,c,l,h,d){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=c,this.onDisconnect_=l,this.onKill_=h,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ql("c:"+this.id+":"),this.transportManager_=new FB(n),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var t=this,n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(r,i)},Math.floor(0));var s=n.healthyTimeout||0;s>0&&(this.healthyTimeout_=Yc(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>BB?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>VB?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(s)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(t){var n=this;return function(r){t===n.conn_?n.onConnectionLost_(r):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},e.prototype.connReceiver_=function(t){var n=this;return function(r){n.state_!==2&&(t===n.rx_?n.onPrimaryMessageReceived_(r):t===n.secondaryConn_?n.onSecondaryMessageReceived_(r):n.log_("message on old connection"))}},e.prototype.sendRequest=function(t){var n={t:"d",d:t};this.sendData_(n)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(t){if(oy in t){var n=t[oy];n===kC?this.upgradeIfSecondaryHealthy_():n===CC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===AC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(t){var n=xc("t",t),r=xc("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:NC,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:kC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:RC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(t){var n=xc("t",t),r=xc("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)},e.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(t){var n=xc(oy,t);if(SC in t){var r=t[SC];if(n===HB)this.onHandshake_(r);else if(n===RC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===qB?this.onConnectionShutdown_(r):n===CC?this.onReset_(r):n===KB?c_("Server Error: "+r):n===AC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):c_("Unknown control packet command: "+n)}},e.prototype.onHandshake_=function(t){var n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Hw!==r&&on("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},e.prototype.startUpgrade_=function(t){var n=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,i),Yc(function(){n.secondaryConn_&&(n.log_("Timed out trying to upgrade."),n.secondaryConn_.close())},Math.floor(UB))},e.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(t,n){var r=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yc(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(jB))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:NC,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()},e.prototype.onConnectionLost_=function(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_s.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},e.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)},e.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m1=function(){function e(){}return e.prototype.put=function(t,n,r,i){},e.prototype.merge=function(t,n,r,i){},e.prototype.refreshAuthToken=function(t){},e.prototype.refreshAppCheckToken=function(t){},e.prototype.onDisconnectPut=function(t,n,r){},e.prototype.onDisconnectMerge=function(t,n,r){},e.prototype.onDisconnectCancel=function(t,n){},e.prototype.reportStats=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var y1=function(){function e(t){this.allowedEvents_=t,this.listeners_={},G(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Array.isArray(this.listeners_[t]))for(var i=Ne([],nn(this.listeners_[t])),s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)},e.prototype.on=function(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});var i=this.getInitialEvent(t);i&&n.apply(r,i)},e.prototype.off=function(t,n,r){this.validateEventType_(t);for(var i=this.listeners_[t]||[],s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}},e.prototype.validateEventType_=function(t){G(this.allowedEvents_.find(function(n){return n===t}),"Unknown event: "+t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PC=function(e){ee(t,e);function t(){var n=e.call(this,["online"])||this;return n.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!Lw()&&(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return G(n==="online","Unknown event type: "+n),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(y1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OC=32,DC=768,ze=function(){function e(t,n){if(n===void 0){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return e.prototype.toString=function(){for(var t="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"},e}();function We(){return new ze("")}function Oe(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ro(e){return e.pieces_.length-e.pieceNum_}function st(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new ze(e.pieces_,t)}function zw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function WB(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function _l(e,t){return t===void 0&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function _1(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ze(t,0)}function vt(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ze)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new ze(n,0)}function De(e){return e.pieceNum_>=e.pieces_.length}function Dn(e,t){var n=Oe(e),r=Oe(t);if(n===null)return t;if(n===r)return Dn(st(e),st(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function GB(e,t){for(var n=_l(e,0),r=_l(t,0),i=0;i<n.length&&i<r.length;i++){var s=Qs(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Qw(e,t){if(Ro(e)!==Ro(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function wr(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Ro(e)>Ro(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var $B=function(){function e(t,n){this.errorPrefix_=n,this.parts_=_l(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=yp(this.parts_[r]);w1(this)}return e}();function zB(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=yp(t),w1(e)}function QB(e){var t=e.parts_.pop();e.byteLength_-=yp(t),e.parts_.length>0&&(e.byteLength_-=1)}function w1(e){if(e.byteLength_>DC)throw new Error(e.errorPrefix_+"has a key path longer than "+DC+" bytes ("+e.byteLength_+").");if(e.parts_.length>OC)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+OC+") or object contains a cycle "+hs(e))}function hs(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YB=function(e){ee(t,e);function t(){var n=e.call(this,["visible"])||this,r,i;return typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(i="visibilitychange",r="hidden"):typeof document.mozHidden!="undefined"?(i="mozvisibilitychange",r="mozHidden"):typeof document.msHidden!="undefined"?(i="msvisibilitychange",r="msHidden"):typeof document.webkitHidden!="undefined"&&(i="webkitvisibilitychange",r="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var s=!document[r];s!==n.visible_&&(n.visible_=s,n.trigger("visible",s))},!1),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return G(n==="visible","Unknown event type: "+n),[this.visible_]},t}(y1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mc=1e3,XB=60*5*1e3,JB=3*1e3,xC=30*1e3,ZB=1.3,e3=3e4,t3="server_kill",MC=3,Ns=function(e){ee(t,e);function t(n,r,i,s,u,c,l,h){var d=e.call(this)||this;if(d.repoInfo_=n,d.applicationId_=r,d.onDataUpdate_=i,d.onConnectStatus_=s,d.onServerInfoUpdate_=u,d.authTokenProvider_=c,d.appCheckTokenProvider_=l,d.authOverride_=h,d.id=t.nextPersistentConnectionId_++,d.log_=Ql("p:"+d.id+":"),d.interruptReasons_={},d.listens=new Map,d.outstandingPuts_=[],d.outstandingGets_=[],d.outstandingPutCount_=0,d.outstandingGetCount_=0,d.onDisconnectRequestQueue_=[],d.connected_=!1,d.reconnectDelay_=Mc,d.maxReconnectDelay_=XB,d.securityDebugCallback_=null,d.lastSessionId=null,d.establishConnectionTimer_=null,d.visible_=!1,d.requestCBHash_={},d.requestNumber_=0,d.realtime_=null,d.authToken_=null,d.appCheckToken_=null,d.forceTokenRefresh_=!1,d.invalidAuthTokenCount_=0,d.invalidAppCheckTokenCount_=0,d.firstConnection_=!0,d.lastConnectionAttemptTime_=null,d.lastConnectionEstablishedTime_=null,h&&!VN())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return YB.getInstance().on("visible",d.onVisible_,d),n.host.indexOf("fblocal")===-1&&PC.getInstance().on("online",d.onOnline_,d),d}return t.prototype.sendRequest=function(n,r,i){var s=++this.requestNumber_,u={r:s,a:n,b:r};this.log_(Mt(u)),G(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)},t.prototype.get=function(n){var r=this;this.initConnection_();var i=new Gt,s={p:n._path.toString(),q:n._queryObject},u={action:"g",request:s,onComplete:function(l){var h=l.d;l.s==="ok"?(r.onDataUpdate_(s.p,h,!1,null),i.resolve(h)):i.reject(h)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;var c=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var l=r.outstandingGets_[c];l===void 0||u!==l||(delete r.outstandingGets_[c],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),r.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},JB),this.connected_&&this.sendGet_(c),i.promise},t.prototype.listen=function(n,r,i,s){this.initConnection_();var u=n._queryIdentifier,c=n._path.toString();this.log_("Listen called for "+c+" "+u),this.listens.has(c)||this.listens.set(c,new Map),G(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),G(!this.listens.get(c).has(u),"listen() called twice for same path/queryId.");var l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(c).set(u,l),this.connected_&&this.sendListen_(l)},t.prototype.sendGet_=function(n){var r=this,i=this.outstandingGets_[n];this.sendRequest("g",i.request,function(s){delete r.outstandingGets_[n],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})},t.prototype.sendListen_=function(n){var r=this,i=n.query,s=i._path.toString(),u=i._queryIdentifier;this.log_("Listen on "+s+" for "+u);var c={p:s},l="q";n.tag&&(c.q=i._queryObject,c.t=n.tag),c.h=n.hashFn(),this.sendRequest(l,c,function(h){var d=h.d,v=h.s;t.warnOnListenWarnings_(d,i);var m=r.listens.get(s)&&r.listens.get(s).get(u);m===n&&(r.log_("listen response",h),v!=="ok"&&r.removeListen_(s,u),n.onComplete&&n.onComplete(v,d))})},t.warnOnListenWarnings_=function(n,r){if(n&&typeof n=="object"&&lr(n,"w")){var i=Ls(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();on("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+s+" at ")+(u+" to your security rules for better performance."))}}},t.prototype.refreshAuthToken=function(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(n)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(n){var r=n&&n.length===40;(r||_4(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=xC)},t.prototype.refreshAppCheckToken=function(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},t.prototype.tryAuth=function(){var n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=y4(r)?"auth":"gauth",s={cred:r};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,function(u){var c=u.s,l=u.d||"error";n.authToken_===r&&(c==="ok"?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(c,l))})}},t.prototype.tryAppCheck=function(){var n=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(r){var i=r.s,s=r.d||"error";i==="ok"?n.invalidAppCheckTokenCount_=0:n.onAppCheckRevoked_(i,s)})},t.prototype.unlisten=function(n,r){var i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),G(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var u=this.removeListen_(i,s);u&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)},t.prototype.sendUnlisten_=function(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);var u={p:n},c="n";s&&(u.q=i,u.t=s),this.sendRequest(c,u)},t.prototype.onDisconnectPut=function(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})},t.prototype.onDisconnectMerge=function(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})},t.prototype.onDisconnectCancel=function(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})},t.prototype.sendOnDisconnect_=function(n,r,i,s){var u={p:r,d:i};this.log_("onDisconnect "+n,u),this.sendRequest(n,u,function(c){s&&setTimeout(function(){s(c.s,c.d)},Math.floor(0))})},t.prototype.put=function(n,r,i,s){this.putInternal("p",n,r,i,s)},t.prototype.merge=function(n,r,i,s){this.putInternal("m",n,r,i,s)},t.prototype.putInternal=function(n,r,i,s,u){this.initConnection_();var c={p:r,d:i};u!==void 0&&(c.h=u),this.outstandingPuts_.push({action:n,request:c,onComplete:s}),this.outstandingPutCount_++;var l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)},t.prototype.sendPut_=function(n){var r=this,i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,u=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,function(c){r.log_(i+" response",c),delete r.outstandingPuts_[n],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),u&&u(c.s,c.d)})},t.prototype.reportStats=function(n){var r=this;if(this.connected_){var i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,function(s){var u=s.s;if(u!=="ok"){var c=s.d;r.log_("reportStats","Error sending stats: "+c)}})}},t.prototype.onDataMessage_=function(n){if("r"in n){this.log_("from server: "+Mt(n));var r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}},t.prototype.onDataPush_=function(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):c_("Unrecognized action received from server: "+Mt(n)+`
Are you using the latest client?`)},t.prototype.onReady_=function(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(n){var r=this;G(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(n))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n},t.prototype.onOnline_=function(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Mc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var n=new Date().getTime()-this.lastConnectionEstablishedTime_;n>e3&&(this.reconnectDelay_=Mc),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-r);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ZB)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return A(this,void 0,void 0,function(){var n,r,i,s,u,c,l,h,d,v,m,y,w,E,T=this;return C(this,function(k){switch(k.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null,n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())},d=function(P){G(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(P)},this.realtime_={close:h,sendRequest:d},v=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,k.label=1;case 1:return k.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)])];case 2:return m=nn.apply(void 0,[k.sent(),2]),y=m[0],w=m[1],c?Kt("getToken() completed but was canceled"):(Kt("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=w&&w.token,l=new g1(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,function(P){on(P+" ("+T.repoInfo_.toString()+")"),T.interrupt(t3)},u)),[3,4];case 3:return E=k.sent(),this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&on(E),h()),[3,4];case 4:return[2]}})})},t.prototype.interrupt=function(n){Kt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(n){Kt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],s_(this.interruptReasons_)&&(this.reconnectDelay_=Mc,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(n){var r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},t.prototype.cancelSentTransactions_=function(){for(var n=0;n<this.outstandingPuts_.length;n++){var r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(n,r){var i;r?i=r.map(function(u){return qw(u)}).join("$"):i="default";var s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")},t.prototype.removeListen_=function(n,r){var i=new ze(n).toString(),s;if(this.listens.has(i)){var u=this.listens.get(i);s=u.get(r),u.delete(r),u.size===0&&this.listens.delete(i)}else s=void 0;return s},t.prototype.onAuthRevoked_=function(n,r){Kt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=MC&&(this.reconnectDelay_=xC,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(n,r){Kt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=MC&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))},t.prototype.restoreState_=function(){var n,r,i,s;this.tryAuth(),this.tryAppCheck();try{for(var u=zt(this.listens.values()),c=u.next();!c.done;c=u.next()){var l=c.value;try{for(var h=(i=void 0,zt(l.values())),d=h.next();!d.done;d=h.next()){var v=d.value;this.sendListen_(v)}}catch(w){i={error:w}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}}catch(w){n={error:w}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}for(var m=0;m<this.outstandingPuts_.length;m++)this.outstandingPuts_[m]&&this.sendPut_(m);for(;this.onDisconnectRequestQueue_.length;){var y=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(y.action,y.pathString,y.data,y.onComplete)}for(var m=0;m<this.outstandingGets_.length;m++)this.outstandingGets_[m]&&this.sendGet_(m)},t.prototype.sendConnectStats_=function(){var n={},r="js";n["sdk."+r+"."+$N.replace(/\./g,"-")]=1,Lw()?n["framework.cordova"]=1:jN()&&(n["framework.reactnative"]=1),this.reportStats(n)},t.prototype.shouldReconnect_=function(){var n=PC.getInstance().currentlyOnline();return s_(this.interruptReasons_)&&n},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(m1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je=function(){function e(t,n){this.name=t,this.node=n}return e.Wrap=function(t,n){return new e(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wp=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(t,n){var r=new je(Bi,t),i=new je(Bi,n);return this.compare(r,i)!==0},e.prototype.minPost=function(){return je.MIN},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oh,b1=function(e){ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Oh},set:function(n){Oh=n},enumerable:!1,configurable:!0}),t.prototype.compare=function(n,r){return Qs(n.name,r.name)},t.prototype.isDefinedOn=function(n){throw Pu("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(n,r){return!1},t.prototype.minPost=function(){return je.MIN},t.prototype.maxPost=function(){return new je(wi,Oh)},t.prototype.makePost=function(n,r){return G(typeof n=="string","KeyIndex indexValue must always be a string."),new je(n,Oh)},t.prototype.toString=function(){return".key"},t}(wp),hi=new b1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dh=function(){function e(t,n,r,i,s){s===void 0&&(s=null),this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];for(var u=1;!t.isEmpty();)if(t=t,u=n?r(t.key,n):1,i&&(u*=-1),u<0)this.isReverse_?t=t.left:t=t.right;else if(u===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}return e.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},e}(),qr=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r!=null?r:e.RED,this.left=i!=null?i:xi.EMPTY_NODE,this.right=s!=null?s:xi.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,s){return new e(t!=null?t:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return xi.EMPTY_NODE;var t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},e.prototype.remove=function(t,n){var r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return xi.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},e.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},e.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),n3=function(){function e(){}return e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new qr(t,n,null)},e.prototype.remove=function(t,n){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),xi=function(){function e(t,n){n===void 0&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,qr.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,qr.BLACK,null,null))},e.prototype.get=function(t){for(var n,r=this.root_;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null},e.prototype.getPredecessorKey=function(t){for(var n,r=this.root_,i=null;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},e.prototype.getIterator=function(t){return new Dh(this.root_,null,this.comparator_,!1,t)},e.prototype.getIteratorFrom=function(t,n){return new Dh(this.root_,t,this.comparator_,!1,n)},e.prototype.getReverseIteratorFrom=function(t,n){return new Dh(this.root_,t,this.comparator_,!0,n)},e.prototype.getReverseIterator=function(t){return new Dh(this.root_,null,this.comparator_,!0,t)},e.EMPTY_NODE=new n3,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(e,t){return Qs(e.name,t.name)}function Yw(e,t){return Qs(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f_;function i3(e){f_=e}var E1=function(e){return typeof e=="number"?"number:"+e1(e):"string:"+e},T1=function(e){if(e.isLeafNode()){var t=e.val();G(typeof t=="string"||typeof t=="number"||typeof t=="object"&&lr(t,".sv"),"Priority must be a string or number.")}else G(e===f_||e.isEmpty(),"priority of unexpected type.");G(e===f_||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LC,nu=function(){function e(t,n){n===void 0&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,G(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),T1(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return LC},set:function(t){LC=t},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return De(t)?this:Oe(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(t,n){return null},e.prototype.updateImmediateChild=function(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=Oe(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(G(r!==".priority"||Ro(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(st(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(t,n){return!1},e.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+E1(this.priorityNode_.val())+":");var n=typeof this.value_;t+=n+":",n==="number"?t+=e1(this.value_):t+=this.value_,this.lazyHash_=XN(t)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(G(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return G(i>=0,"Unknown leaf type: "+n),G(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I1,S1;function o3(e){I1=e}function s3(e){S1=e}var a3=function(e){ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.getPriority(),s=r.node.getPriority(),u=i.compareTo(s);return u===0?Qs(n.name,r.name):u},t.prototype.isDefinedOn=function(n){return!n.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(n,r){return!n.getPriority().equals(r.getPriority())},t.prototype.minPost=function(){return je.MIN},t.prototype.maxPost=function(){return new je(wi,new nu("[PRIORITY-POST]",S1))},t.prototype.makePost=function(n,r){var i=I1(n);return new je(r,new nu("[PRIORITY-POST]",i))},t.prototype.toString=function(){return".priority"},t}(wp),ut=new a3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u3=Math.log(2),c3=function(){function e(t){var n=function(s){return parseInt(Math.log(s)/u3,10)},r=function(s){return parseInt(Array(s+1).join("1"),2)};this.count=n(t+1),this.current_=this.count-1;var i=r(this.count);this.bits_=t+1&i}return e.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},e}(),wd=function(e,t,n,r){e.sort(t);var i=function(l,h){var d=h-l,v,m;if(d===0)return null;if(d===1)return v=e[l],m=n?n(v):v,new qr(m,v.node,qr.BLACK,null,null);var y=parseInt(d/2,10)+l,w=i(l,y),E=i(y+1,h);return v=e[y],m=n?n(v):v,new qr(m,v.node,qr.BLACK,w,E)},s=function(l){for(var h=null,d=null,v=e.length,m=function(k,P){var M=v-k,K=v;v-=k;var Q=i(M+1,K),F=e[M],re=n?n(F):F;y(new qr(re,F.node,P,null,Q))},y=function(k){h?(h.left=k,h=k):(d=k,h=k)},w=0;w<l.count;++w){var E=l.nextBitIsOne(),T=Math.pow(2,l.count-(w+1));E?m(T,qr.BLACK):(m(T,qr.BLACK),m(T,qr.RED))}return d},u=new c3(e.length),c=s(u);return new xi(r||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sy,Pa={},bd=function(){function e(t,n){this.indexes_=t,this.indexSet_=n}return Object.defineProperty(e,"Default",{get:function(){return G(Pa&&ut,"ChildrenNode.ts has not been loaded"),sy=sy||new e({".priority":Pa},{".priority":ut}),sy},enumerable:!1,configurable:!0}),e.prototype.get=function(t){var n=Ls(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof xi?n:null},e.prototype.hasIndex=function(t){return lr(this.indexSet_,t.toString())},e.prototype.addIndex=function(t,n){G(t!==hi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,s=n.getIterator(je.Wrap),u=s.getNext();u;)i=i||t.isDefinedOn(u.node),r.push(u),u=s.getNext();var c;i?c=wd(r,t.getCompare()):c=Pa;var l=t.toString(),h=ge({},this.indexSet_);h[l]=t;var d=ge({},this.indexes_);return d[l]=c,new e(d,h)},e.prototype.addToIndexes=function(t,n){var r=this,i=gd(this.indexes_,function(s,u){var c=Ls(r.indexSet_,u);if(G(c,"Missing index implementation for "+u),s===Pa)if(c.isDefinedOn(t.node)){for(var l=[],h=n.getIterator(je.Wrap),d=h.getNext();d;)d.name!==t.name&&l.push(d),d=h.getNext();return l.push(t),wd(l,c.getCompare())}else return Pa;else{var v=n.get(t.name),m=s;return v&&(m=m.remove(new je(t.name,v))),m.insert(t,t.node)}});return new e(i,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=gd(this.indexes_,function(i){if(i===Pa)return i;var s=n.get(t.name);return s?i.remove(new je(t.name,s)):i});return new e(r,this.indexSet_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lc,Te=function(){function e(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&T1(this.priorityNode_),this.children_.isEmpty()&&G(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Lc||(Lc=new e(new xi(Yw),null,bd.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Lc},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(t){if(t===".priority")return this.getPriority();var n=this.children_.get(t);return n===null?Lc:n},e.prototype.getChild=function(t){var n=Oe(t);return n===null?this:this.getImmediateChild(n).getChild(st(t))},e.prototype.hasChild=function(t){return this.children_.get(t)!==null},e.prototype.updateImmediateChild=function(t,n){if(G(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);var r=new je(t,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));var u=i.isEmpty()?Lc:this.priorityNode_;return new e(i,u,s)},e.prototype.updateChild=function(t,n){var r=Oe(t);if(r===null)return n;G(Oe(t)!==".priority"||Ro(t)===1,".priority must be the last token in a path");var i=this.getImmediateChild(r).updateChild(st(t),n);return this.updateImmediateChild(r,i)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,s=!0;if(this.forEachChild(ut,function(l,h){n[l]=h.val(t),r++,s&&e.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):s=!1}),!t&&s&&i<2*r){var u=[];for(var c in n)u[c]=n[c];return u}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.getPriority().isEmpty()||(t+="priority:"+E1(this.getPriority().val())+":"),this.forEachChild(ut,function(n,r){var i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":XN(t)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(t,n,r){var i=this.resolveIndex_(r);if(i){var s=i.getPredecessorKey(new je(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)},e.prototype.getFirstChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.minKey();return r&&r.name}else return this.children_.minKey()},e.prototype.getFirstChild=function(t){var n=this.getFirstChildName(t);return n?new je(n,this.children_.get(n)):null},e.prototype.getLastChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.maxKey();return r&&r.name}else return this.children_.maxKey()},e.prototype.getLastChild=function(t){var n=this.getLastChildName(t);return n?new je(n,this.children_.get(n)):null},e.prototype.forEachChild=function(t,n){var r=this.resolveIndex_(t);return r?r.inorderTraversal(function(i){return n(i.name,i.node)}):this.children_.inorderTraversal(n)},e.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},e.prototype.getIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,function(u){return u});for(var i=this.children_.getIteratorFrom(t.name,je.Wrap),s=i.peek();s!=null&&n.compare(s,t)<0;)i.getNext(),s=i.peek();return i},e.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},e.prototype.getReverseIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,function(u){return u});for(var i=this.children_.getReverseIteratorFrom(t.name,je.Wrap),s=i.peek();s!=null&&n.compare(s,t)>0;)i.getNext(),s=i.peek();return i},e.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Yl?-1:0},e.prototype.withIndex=function(t){if(t===hi||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(t){return t===hi||this.indexMap_.hasIndex(t)},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){for(var r=this.getIterator(ut),i=n.getIterator(ut),s=r.getNext(),u=i.getNext();s&&u;){if(s.name!==u.name||!s.node.equals(u.node))return!1;s=r.getNext(),u=i.getNext()}return s===null&&u===null}else return!1;else return!1},e.prototype.resolveIndex_=function(t){return t===hi?null:this.indexMap_.get(t.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),l3=function(e){ee(t,e);function t(){return e.call(this,new xi(Yw),Te.EMPTY_NODE,bd.Default)||this}return t.prototype.compareTo=function(n){return n===this?0:1},t.prototype.equals=function(n){return n===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(n){return Te.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Te),Yl=new l3;Object.defineProperties(je,{MIN:{value:new je(Bi,Te.EMPTY_NODE)},MAX:{value:new je(wi,Yl)}});b1.__EMPTY_NODE=Te.EMPTY_NODE;nu.__childrenNodeConstructor=Te;i3(Yl);s3(Yl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f3=!0;function mt(e,t){if(t===void 0&&(t=null),e===null)return Te.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),G(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){var n=e;return new nu(n,mt(t))}if(!(e instanceof Array)&&f3){var r=[],i=!1,s=e;if(jt(s,function(h,d){if(h.substring(0,1)!=="."){var v=mt(d);v.isEmpty()||(i=i||!v.getPriority().isEmpty(),r.push(new je(h,v)))}}),r.length===0)return Te.EMPTY_NODE;var u=wd(r,r3,function(h){return h.name},Yw);if(i){var c=wd(r,ut.getCompare());return new Te(u,mt(t),new bd({".priority":c},{".priority":ut}))}else return new Te(u,mt(t),bd.Default)}else{var l=Te.EMPTY_NODE;return jt(e,function(h,d){if(lr(e,h)&&h.substring(0,1)!=="."){var v=mt(d);(v.isLeafNode()||!v.isEmpty())&&(l=l.updateImmediateChild(h,v))}}),l.updatePriority(mt(t))}}o3(mt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xw=function(e){ee(t,e);function t(n){var r=e.call(this)||this;return r.indexPath_=n,G(!De(n)&&Oe(n)!==".priority","Can't create PathIndex with empty path or .priority key"),r}return t.prototype.extractChild=function(n){return n.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(n){return!n.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(n,r){var i=this.extractChild(n.node),s=this.extractChild(r.node),u=i.compareTo(s);return u===0?Qs(n.name,r.name):u},t.prototype.makePost=function(n,r){var i=mt(n),s=Te.EMPTY_NODE.updateChild(this.indexPath_,i);return new je(r,s)},t.prototype.maxPost=function(){var n=Te.EMPTY_NODE.updateChild(this.indexPath_,Yl);return new je(wi,n)},t.prototype.toString=function(){return _l(this.indexPath_,0).join("/")},t}(wp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h3=function(e){ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.compareTo(r.node);return i===0?Qs(n.name,r.name):i},t.prototype.isDefinedOn=function(n){return!0},t.prototype.indexedValueChanged=function(n,r){return!n.equals(r)},t.prototype.minPost=function(){return je.MIN},t.prototype.maxPost=function(){return je.MAX},t.prototype.makePost=function(n,r){var i=mt(n);return new je(r,i)},t.prototype.toString=function(){return".value"},t}(wp),Jw=new h3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ru="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",h_="-",C1="z",A1=786,d3=function(){var e=0,t=[];return function(n){var r=n===e;e=n;var i,s=new Array(8);for(i=7;i>=0;i--)s[i]=ru.charAt(n%64),n=Math.floor(n/64);G(n===0,"Cannot push at time == 0");var u=s.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)u+=ru.charAt(t[i]);return G(u.length===20,"nextPushId: Length should be 20."),u}}(),FC=function(e){if(e===""+Kw)return h_;var t=yd(e);if(t!=null)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<A1)return n.push(h_),n.join("");for(var i=n.length-1;i>=0&&n[i]===C1;)i--;if(i===-1)return wi;var s=n[i],u=ru.charAt(ru.indexOf(s)+1);return n[i]=u,n.slice(0,i+1).join("")},UC=function(e){if(e===""+t1)return Bi;var t=yd(e);if(t!=null)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return n[n.length-1]===h_?n.length===1?""+Kw:(delete n[n.length-1],n.join("")):(n[n.length-1]=ru.charAt(ru.indexOf(n[n.length-1])-1),n.join("")+C1.repeat(A1-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(e){return{type:"value",snapshotNode:e}}function iu(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function wl(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function bl(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function p3(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zw=function(){function e(t){this.index_=t}return e.prototype.updateChild=function(t,n,r,i,s,u){G(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var c=t.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(u!=null&&(r.isEmpty()?t.hasChild(n)?u.trackChildChange(wl(n,c)):G(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?u.trackChildChange(iu(n,r)):u.trackChildChange(bl(n,r,c))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)},e.prototype.updateFullNode=function(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(ut,function(i,s){n.hasChild(i)||r.trackChildChange(wl(i,s))}),n.isLeafNode()||n.forEachChild(ut,function(i,s){if(t.hasChild(i)){var u=t.getImmediateChild(i);u.equals(s)||r.trackChildChange(bl(i,s,u))}else r.trackChildChange(iu(i,s))})),n.withIndex(this.index_)},e.prototype.updatePriority=function(t,n){return t.isEmpty()?Te.EMPTY_NODE:t.updatePriority(n)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R1=function(){function e(t){this.indexedFilter_=new Zw(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,n,r,i,s,u){return this.matches(new je(n,r))||(r=Te.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,u)},e.prototype.updateFullNode=function(t,n,r){n.isLeafNode()&&(n=Te.EMPTY_NODE);var i=n.withIndex(this.index_);i=i.updatePriority(Te.EMPTY_NODE);var s=this;return n.forEachChild(ut,function(u,c){s.matches(new je(u,c))||(i=i.updateImmediateChild(u,Te.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v3=function(){function e(t){this.rangedFilter_=new R1(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return e.prototype.updateChild=function(t,n,r,i,s,u){return this.rangedFilter_.matches(new je(n,r))||(r=Te.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,u):this.fullLimitUpdateChild_(t,n,r,s,u)},e.prototype.updateFullNode=function(t,n,r){var i;if(n.isLeafNode()||n.isEmpty())i=Te.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Te.EMPTY_NODE.withIndex(this.index_);var s=void 0;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var u=0;s.hasNext()&&u<this.limit_;){var c=s.getNext(),l=void 0;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:l=this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(c.name,c.node),u++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(Te.EMPTY_NODE);var h=void 0,d=void 0,v=void 0,s=void 0;if(this.reverse_){s=i.getReverseIterator(this.index_),h=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();var m=this.index_.getCompare();v=function(T,k){return m(k,T)}}else s=i.getIterator(this.index_),h=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),v=this.index_.getCompare();for(var u=0,y=!1;s.hasNext();){var c=s.getNext();!y&&v(h,c)<=0&&(y=!0);var l=y&&u<this.limit_&&v(c,d)<=0;l?u++:i=i.updateImmediateChild(c.name,Te.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(t,n,r,i,s){var u;if(this.reverse_){var c=this.index_.getCompare();u=function(P,M){return c(M,P)}}else u=this.index_.getCompare();var l=t;G(l.numChildren()===this.limit_,"");var h=new je(n,r),d=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),v=this.rangedFilter_.matches(h);if(l.hasChild(n)){for(var m=l.getImmediateChild(n),y=i.getChildAfterChild(this.index_,d,this.reverse_);y!=null&&(y.name===n||l.hasChild(y.name));)y=i.getChildAfterChild(this.index_,y,this.reverse_);var w=y==null?1:u(y,h),E=v&&!r.isEmpty()&&w>=0;if(E)return s!=null&&s.trackChildChange(bl(n,r,m)),l.updateImmediateChild(n,r);s!=null&&s.trackChildChange(wl(n,m));var T=l.updateImmediateChild(n,Te.EMPTY_NODE),k=y!=null&&this.rangedFilter_.matches(y);return k?(s!=null&&s.trackChildChange(iu(y.name,y.node)),T.updateImmediateChild(y.name,y.node)):T}else return r.isEmpty()?t:v&&u(d,h)>=0?(s!=null&&(s.trackChildChange(wl(d.name,d.node)),s.trackChildChange(iu(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(d.name,Te.EMPTY_NODE)):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N1=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ut}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"},e.prototype.getIndexStartValue=function(){return G(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return G(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bi},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return G(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return G(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wi},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},e.prototype.getLimit=function(){return G(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ut},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function g3(e){return e.loadsAllData()?new Zw(e.getIndex()):e.hasLimit()?new v3(e):new R1(e)}function m3(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function y3(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function d_(e,t,n){var r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function _3(e,t,n){var r;if(e.index_===hi)typeof t=="string"&&(t=FC(t)),r=d_(e,t,n);else{var i=void 0;n==null?i=wi:i=FC(n),r=d_(e,t,i)}return r.startAfterSet_=!0,r}function p_(e,t,n){var r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function w3(e,t,n){var r,i;return e.index_===hi?(typeof t=="string"&&(t=UC(t)),i=p_(e,t,n)):(n==null?r=Bi:r=UC(n),i=p_(e,t,r)),i.endBeforeSet_=!0,i}function bp(e,t){var n=e.copy();return n.index_=t,n}function jC(e){var t={};if(e.isDefault())return t;var n;return e.index_===ut?n="$priority":e.index_===Jw?n="$value":e.index_===hi?n="$key":(G(e.index_ instanceof Xw,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Mt(n),e.startSet_&&(t.startAt=Mt(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+Mt(e.indexStartName_))),e.endSet_&&(t.endAt=Mt(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+Mt(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function VC(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==ut&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b3=function(e){ee(t,e);function t(n,r,i,s){var u=e.call(this)||this;return u.repoInfo_=n,u.onDataUpdate_=r,u.authTokenProvider_=i,u.appCheckTokenProvider_=s,u.log_=Ql("p:rest:"),u.listens_={},u}return t.prototype.reportStats=function(n){throw new Error("Method not implemented.")},t.getListenId_=function(n,r){return r!==void 0?"tag$"+r:(G(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())},t.prototype.listen=function(n,r,i,s){var u=this,c=n._path.toString();this.log_("Listen called for "+c+" "+n._queryIdentifier);var l=t.getListenId_(n,i),h={};this.listens_[l]=h;var d=jC(n._queryParams);this.restRequest_(c+".json",d,function(v,m){var y=m;if(v===404&&(y=null,v=null),v===null&&u.onDataUpdate_(c,y,!1,i),Ls(u.listens_,l)===h){var w;v?v===401?w="permission_denied":w="rest_error:"+v:w="ok",s(w,null)}})},t.prototype.unlisten=function(n,r){var i=t.getListenId_(n,r);delete this.listens_[i]},t.prototype.get=function(n){var r=this,i=jC(n._queryParams),s=n._path.toString(),u=new Gt;return this.restRequest_(s+".json",i,function(c,l){var h=l;c===404&&(h=null,c=null),c===null?(r.onDataUpdate_(s,h,!1,null),u.resolve(h)):u.reject(new Error(h))}),u.promise},t.prototype.refreshAuthToken=function(n){},t.prototype.restRequest_=function(n,r,i){var s=this;return r===void 0&&(r={}),r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(u){var c=nn(u,2),l=c[0],h=c[1];l&&l.accessToken&&(r.auth=l.accessToken),h&&h.token&&(r.ac=h.token);var d=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+n+"?ns="+s.repoInfo_.namespace+w4(r);s.log_("Sending REST request for "+d);var v=new XMLHttpRequest;v.onreadystatechange=function(){if(i&&v.readyState===4){s.log_("REST Response for "+d+" received. status:",v.status,"response:",v.responseText);var m=null;if(v.status>=200&&v.status<300){try{m=yl(v.responseText)}catch{on("Failed to parse JSON response for "+d+": "+v.responseText)}i(null,m)}else v.status!==401&&v.status!==404&&on("Got unsuccessful REST response for "+d+" Status: "+v.status),i(v.status);i=null}},v.open("GET",d,!0),v.send()})},t}(m1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E3=function(){function e(){this.rootNode_=Te.EMPTY_NODE}return e.prototype.getNode=function(t){return this.rootNode_.getChild(t)},e.prototype.updateSnapshot=function(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(){return{value:null,children:new Map}}function xu(e,t,n){if(De(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{var r=Oe(t);e.children.has(r)||e.children.set(r,Ed());var i=e.children.get(r);t=st(t),xu(i,t,n)}}function v_(e,t){if(De(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(ut,function(s,u){xu(e,new ze(s),u)}),v_(e,t)}else if(e.children.size>0){var r=Oe(t);if(t=st(t),e.children.has(r)){var i=v_(e.children.get(r),t);i&&e.children.delete(r)}return e.children.size===0}else return!0}function g_(e,t,n){e.value!==null?n(t,e.value):T3(e,function(r,i){var s=new ze(t.toString()+"/"+r);g_(i,s,n)})}function T3(e,t){e.children.forEach(function(n,r){t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P1=function(){function e(t){this.collection_=t,this.last_=null}return e.prototype.get=function(){var t=this.collection_.get(),n=ge({},t);return this.last_&&jt(this.last_,function(r,i){n[r]=n[r]-i}),this.last_=t,n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BC=10*1e3,I3=30*1e3,S3=5*60*1e3,C3=function(){function e(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new P1(t);var r=BC+(I3-BC)*Math.random();Yc(this.reportStats_.bind(this),Math.floor(r))}return e.prototype.reportStats_=function(){var t=this,n=this.statsListener_.get(),r={},i=!1;jt(n,function(s,u){u>0&&lr(t.statsToReport_,s)&&(r[s]=u,i=!0)}),i&&this.server_.reportStats(r),Yc(this.reportStats_.bind(this),Math.floor(Math.random()*2*S3))},e}();function A3(e,t){e.statsToReport_[t]=!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kr;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Kr||(Kr={}));function e0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function t0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function n0(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k3=function(){function e(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Kr.ACK_USER_WRITE,this.source=e0()}return e.prototype.operationForChild=function(t){if(De(this.path)){if(this.affectedTree.value!=null)return G(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ze(t));return new e(We(),n,this.revert)}else return G(Oe(this.path)===t,"operationForChild called for unrelated child."),new e(st(this.path),this.affectedTree,this.revert)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O1=function(){function e(t,n){this.source=t,this.path=n,this.type=Kr.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return De(this.path)?new e(this.source,We()):new e(this.source,st(this.path))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ep=function(){function e(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Kr.OVERWRITE}return e.prototype.operationForChild=function(t){return De(this.path)?new e(this.source,We(),this.snap.getImmediateChild(t)):new e(this.source,st(this.path),this.snap)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r0=function(){function e(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Kr.MERGE}return e.prototype.operationForChild=function(t){if(De(this.path)){var n=this.children.subtree(new ze(t));return n.isEmpty()?null:n.value?new Ep(this.source,We(),n.value):new e(this.source,We(),n)}else return G(Oe(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,st(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var No=function(){function e(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(t){if(De(t))return this.isFullyInitialized()&&!this.filtered_;var n=Oe(t);return this.isCompleteForChild(n)},e.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},e.prototype.getNode=function(){return this.node_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R3=function(){function e(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}return e}();function N3(e,t,n,r){var i=[],s=[];return t.forEach(function(u){u.type==="child_changed"&&e.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(p3(u.childName,u.snapshotNode))}),Fc(e,i,"child_removed",t,r,n),Fc(e,i,"child_added",t,r,n),Fc(e,i,"child_moved",s,r,n),Fc(e,i,"child_changed",t,r,n),Fc(e,i,"value",t,r,n),i}function Fc(e,t,n,r,i,s){var u=r.filter(function(c){return c.type===n});u.sort(function(c,l){return O3(e,c,l)}),u.forEach(function(c){var l=P3(e,c,s);i.forEach(function(h){h.respondsTo(c.type)&&t.push(h.createEvent(l,e.query_))})})}function P3(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function O3(e,t,n){if(t.childName==null||n.childName==null)throw Pu("Should only compare child_ events.");var r=new je(t.childName,t.snapshotNode),i=new je(n.childName,n.snapshotNode);return e.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(e,t){return{eventCache:e,serverCache:t}}function Jc(e,t,n,r){return Tp(new No(t,n,r),e.serverCache)}function D1(e,t,n,r){return Tp(e.eventCache,new No(t,n,r))}function Td(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Fs(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ay,D3=function(){return ay||(ay=new xi(lB)),ay},fr=function(){function e(t,n){n===void 0&&(n=D3()),this.value=t,this.children=n}return e.fromObject=function(t){var n=new e(null);return jt(t,function(r,i){n=n.set(new ze(r),i)}),n},e.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(t,n){if(this.value!=null&&n(this.value))return{path:We(),value:this.value};if(De(t))return null;var r=Oe(t),i=this.children.get(r);if(i!==null){var s=i.findRootMostMatchingPathAndValue(st(t),n);if(s!=null){var u=vt(new ze(r),s.path);return{path:u,value:s.value}}else return null}else return null},e.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},e.prototype.subtree=function(t){if(De(t))return this;var n=Oe(t),r=this.children.get(n);return r!==null?r.subtree(st(t)):new e(null)},e.prototype.set=function(t,n){if(De(t))return new e(n,this.children);var r=Oe(t),i=this.children.get(r)||new e(null),s=i.set(st(t),n),u=this.children.insert(r,s);return new e(this.value,u)},e.prototype.remove=function(t){if(De(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Oe(t),r=this.children.get(n);if(r){var i=r.remove(st(t)),s=void 0;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this},e.prototype.get=function(t){if(De(t))return this.value;var n=Oe(t),r=this.children.get(n);return r?r.get(st(t)):null},e.prototype.setTree=function(t,n){if(De(t))return n;var r=Oe(t),i=this.children.get(r)||new e(null),s=i.setTree(st(t),n),u=void 0;return s.isEmpty()?u=this.children.remove(r):u=this.children.insert(r,s),new e(this.value,u)},e.prototype.fold=function(t){return this.fold_(We(),t)},e.prototype.fold_=function(t,n){var r={};return this.children.inorderTraversal(function(i,s){r[i]=s.fold_(vt(t,i),n)}),n(t,this.value,r)},e.prototype.findOnPath=function(t,n){return this.findOnPath_(t,We(),n)},e.prototype.findOnPath_=function(t,n,r){var i=this.value?r(n,this.value):!1;if(i)return i;if(De(t))return null;var s=Oe(t),u=this.children.get(s);return u?u.findOnPath_(st(t),vt(n,s),r):null},e.prototype.foreachOnPath=function(t,n){return this.foreachOnPath_(t,We(),n)},e.prototype.foreachOnPath_=function(t,n,r){if(De(t))return this;this.value&&r(n,this.value);var i=Oe(t),s=this.children.get(i);return s?s.foreachOnPath_(st(t),vt(n,i),r):new e(null)},e.prototype.foreach=function(t){this.foreach_(We(),t)},e.prototype.foreach_=function(t,n){this.children.inorderTraversal(function(r,i){i.foreach_(vt(t,r),n)}),this.value&&n(t,this.value)},e.prototype.foreachChild=function(t){this.children.inorderTraversal(function(n,r){r.value&&t(n,r.value)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fi=function(){function e(t){this.writeTree_=t}return e.empty=function(){return new e(new fr(null))},e}();function Zc(e,t,n){if(De(t))return new Fi(new fr(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){var i=r.path,s=r.value,u=Dn(i,t);return s=s.updateChild(u,n),new Fi(e.writeTree_.set(i,s))}else{var c=new fr(n),l=e.writeTree_.setTree(t,c);return new Fi(l)}}function m_(e,t,n){var r=e;return jt(n,function(i,s){r=Zc(r,vt(t,i),s)}),r}function qC(e,t){if(De(t))return Fi.empty();var n=e.writeTree_.setTree(t,new fr(null));return new Fi(n)}function y_(e,t){return Ys(e,t)!=null}function Ys(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Dn(n.path,t)):null}function KC(e){var t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ut,function(r,i){t.push(new je(r,i))}):e.writeTree_.children.inorderTraversal(function(r,i){i.value!=null&&t.push(new je(r,i.value))}),t}function To(e,t){if(De(t))return e;var n=Ys(e,t);return n!=null?new Fi(new fr(n)):new Fi(e.writeTree_.subtree(t))}function __(e){return e.writeTree_.isEmpty()}function ou(e,t){return x1(We(),e.writeTree_,t)}function x1(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(i,s){i===".priority"?(G(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=x1(vt(e,i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(vt(e,".priority"),r)),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(e,t){return U1(t,e)}function x3(e,t,n,r,i){G(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Zc(e.visibleWrites,t,n)),e.lastWriteId=r}function M3(e,t,n,r){G(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=m_(e.visibleWrites,t,n),e.lastWriteId=r}function L3(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function F3(e,t){var n=e.allWrites.findIndex(function(h){return h.writeId===t});G(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,s=!1,u=e.allWrites.length-1;i&&u>=0;){var c=e.allWrites[u];c.visible&&(u>=n&&U3(c,r.path)?i=!1:wr(r.path,c.path)&&(s=!0)),u--}if(i){if(s)return j3(e),!0;if(r.snap)e.visibleWrites=qC(e.visibleWrites,r.path);else{var l=r.children;jt(l,function(h){e.visibleWrites=qC(e.visibleWrites,vt(r.path,h))})}return!0}else return!1}function U3(e,t){if(e.snap)return wr(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&wr(vt(e.path,n),t))return!0;return!1}function j3(e){e.visibleWrites=M1(e.allWrites,V3,We()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function V3(e){return e.visible}function M1(e,t,n){for(var r=Fi.empty(),i=0;i<e.length;++i){var s=e[i];if(t(s)){var u=s.path,c=void 0;if(s.snap)wr(n,u)?(c=Dn(n,u),r=Zc(r,c,s.snap)):wr(u,n)&&(c=Dn(u,n),r=Zc(r,We(),s.snap.getChild(c)));else if(s.children){if(wr(n,u))c=Dn(n,u),r=m_(r,c,s.children);else if(wr(u,n))if(c=Dn(u,n),De(c))r=m_(r,We(),s.children);else{var l=Ls(s.children,Oe(c));if(l){var h=l.getChild(st(c));r=Zc(r,We(),h)}}}else throw Pu("WriteRecord should have .snap or .children")}}return r}function L1(e,t,n,r,i){if(!r&&!i){var s=Ys(e.visibleWrites,t);if(s!=null)return s;var u=To(e.visibleWrites,t);if(__(u))return n;if(n==null&&!y_(u,We()))return null;var c=n||Te.EMPTY_NODE;return ou(u,c)}else{var l=To(e.visibleWrites,t);if(!i&&__(l))return n;if(!i&&n==null&&!y_(l,We()))return null;var h=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(wr(m.path,t)||wr(t,m.path))},d=M1(e.allWrites,h,t),c=n||Te.EMPTY_NODE;return ou(d,c)}}function B3(e,t,n){var r=Te.EMPTY_NODE,i=Ys(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ut,function(c,l){r=r.updateImmediateChild(c,l)}),r;if(n){var s=To(e.visibleWrites,t);return n.forEachChild(ut,function(c,l){var h=ou(To(s,new ze(c)),l);r=r.updateImmediateChild(c,h)}),KC(s).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}else{var u=To(e.visibleWrites,t);return KC(u).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}}function q3(e,t,n,r,i){G(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=vt(t,n);if(y_(e.visibleWrites,s))return null;var u=To(e.visibleWrites,s);return __(u)?i.getChild(n):ou(u,i.getChild(n))}function K3(e,t,n,r){var i=vt(t,n),s=Ys(e.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){var u=To(e.visibleWrites,i);return ou(u,r.getNode().getImmediateChild(n))}else return null}function H3(e,t){return Ys(e.visibleWrites,t)}function W3(e,t,n,r,i,s,u){var c,l=To(e.visibleWrites,t),h=Ys(l,We());if(h!=null)c=h;else if(n!=null)c=ou(l,n);else return[];if(c=c.withIndex(u),!c.isEmpty()&&!c.isLeafNode()){for(var d=[],v=u.getCompare(),m=s?c.getReverseIteratorFrom(r,u):c.getIteratorFrom(r,u),y=m.getNext();y&&d.length<i;)v(y,r)!==0&&d.push(y),y=m.getNext();return d}else return[]}function G3(){return{visibleWrites:Fi.empty(),allWrites:[],lastWriteId:-1}}function Id(e,t,n,r){return L1(e.writeTree,e.treePath,t,n,r)}function i0(e,t){return B3(e.writeTree,e.treePath,t)}function HC(e,t,n,r){return q3(e.writeTree,e.treePath,t,n,r)}function Sd(e,t){return H3(e.writeTree,vt(e.treePath,t))}function $3(e,t,n,r,i,s){return W3(e.writeTree,e.treePath,t,n,r,i,s)}function o0(e,t,n){return K3(e.writeTree,e.treePath,t,n)}function F1(e,t){return U1(vt(e.treePath,t),e.writeTree)}function U1(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z3=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(t){var n=t.type,r=t.childName;G(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),G(r!==".priority","Only non-priority child changes can be tracked.");var i=this.changeMap.get(r);if(i){var s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,bl(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,wl(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,iu(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,bl(r,t.snapshotNode,i.oldSnap));else throw Pu("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q3=function(){function e(){}return e.prototype.getCompleteChild=function(t){return null},e.prototype.getChildAfterChild=function(t,n,r){return null},e}(),j1=new Q3,s0=function(){function e(t,n,r){r===void 0&&(r=null),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return e.prototype.getCompleteChild=function(t){var n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);var r=this.optCompleteServerCache_!=null?new No(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return o0(this.writes_,t,r)},e.prototype.getChildAfterChild=function(t,n,r){var i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fs(this.viewCache_),s=$3(this.writes_,i,n,1,r,t);return s.length===0?null:s[0]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(e){return{filter:e}}function X3(e,t){G(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),G(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function J3(e,t,n,r,i){var s=new z3,u,c;if(n.type===Kr.OVERWRITE){var l=n;l.source.fromUser?u=w_(e,t,l.path,l.snap,r,i,s):(G(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered()&&!De(l.path),u=Cd(e,t,l.path,l.snap,r,i,c,s))}else if(n.type===Kr.MERGE){var h=n;h.source.fromUser?u=eq(e,t,h.path,h.children,r,i,s):(G(h.source.fromServer,"Unknown source."),c=h.source.tagged||t.serverCache.isFiltered(),u=b_(e,t,h.path,h.children,r,i,c,s))}else if(n.type===Kr.ACK_USER_WRITE){var d=n;d.revert?u=rq(e,t,d.path,r,i,s):u=tq(e,t,d.path,d.affectedTree,r,i,s)}else if(n.type===Kr.LISTEN_COMPLETE)u=nq(e,t,n.path,r,s);else throw Pu("Unknown operation type: "+n.type);var v=s.getChanges();return Z3(t,u,v),{viewCache:u,changes:v}}function Z3(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Td(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(k1(Td(t)))}}function V1(e,t,n,r,i,s){var u=t.eventCache;if(Sd(r,n)!=null)return t;var c=void 0,l=void 0;if(De(n))if(G(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var h=Fs(t),d=h instanceof Te?h:Te.EMPTY_NODE,v=i0(r,d);c=e.filter.updateFullNode(t.eventCache.getNode(),v,s)}else{var m=Id(r,Fs(t));c=e.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{var y=Oe(n);if(y===".priority"){G(Ro(n)===1,"Can't have a priority with additional path components");var w=u.getNode();l=t.serverCache.getNode();var E=HC(r,n,w,l);E!=null?c=e.filter.updatePriority(w,E):c=u.getNode()}else{var T=st(n),k=void 0;if(u.isCompleteForChild(y)){l=t.serverCache.getNode();var P=HC(r,n,u.getNode(),l);P!=null?k=u.getNode().getImmediateChild(y).updateChild(T,P):k=u.getNode().getImmediateChild(y)}else k=o0(r,y,t.serverCache);k!=null?c=e.filter.updateChild(u.getNode(),y,k,T,i,s):c=u.getNode()}}return Jc(t,c,u.isFullyInitialized()||De(n),e.filter.filtersNodes())}function Cd(e,t,n,r,i,s,u,c){var l=t.serverCache,h,d=u?e.filter:e.filter.getIndexedFilter();if(De(n))h=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){var v=l.getNode().updateChild(n,r);h=d.updateFullNode(l.getNode(),v,null)}else{var m=Oe(n);if(!l.isCompleteForPath(n)&&Ro(n)>1)return t;var y=st(n),w=l.getNode().getImmediateChild(m),E=w.updateChild(y,r);m===".priority"?h=d.updatePriority(l.getNode(),E):h=d.updateChild(l.getNode(),m,E,y,j1,null)}var T=D1(t,h,l.isFullyInitialized()||De(n),d.filtersNodes()),k=new s0(i,T,s);return V1(e,T,n,i,k,c)}function w_(e,t,n,r,i,s,u){var c=t.eventCache,l,h,d=new s0(i,t,s);if(De(n))h=e.filter.updateFullNode(t.eventCache.getNode(),r,u),l=Jc(t,h,!0,e.filter.filtersNodes());else{var v=Oe(n);if(v===".priority")h=e.filter.updatePriority(t.eventCache.getNode(),r),l=Jc(t,h,c.isFullyInitialized(),c.isFiltered());else{var m=st(n),y=c.getNode().getImmediateChild(v),w=void 0;if(De(m))w=r;else{var E=d.getCompleteChild(v);E!=null?zw(m)===".priority"&&E.getChild(_1(m)).isEmpty()?w=E:w=E.updateChild(m,r):w=Te.EMPTY_NODE}if(y.equals(w))l=t;else{var T=e.filter.updateChild(c.getNode(),v,w,m,d,u);l=Jc(t,T,c.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function WC(e,t){return e.eventCache.isCompleteForChild(t)}function eq(e,t,n,r,i,s,u){var c=t;return r.foreach(function(l,h){var d=vt(n,l);WC(t,Oe(d))&&(c=w_(e,c,d,h,i,s,u))}),r.foreach(function(l,h){var d=vt(n,l);WC(t,Oe(d))||(c=w_(e,c,d,h,i,s,u))}),c}function GC(e,t,n){return n.foreach(function(r,i){t=t.updateChild(r,i)}),t}function b_(e,t,n,r,i,s,u,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var l=t,h;De(n)?h=r:h=new fr(null).setTree(n,r);var d=t.serverCache.getNode();return h.children.inorderTraversal(function(v,m){if(d.hasChild(v)){var y=t.serverCache.getNode().getImmediateChild(v),w=GC(e,y,m);l=Cd(e,l,new ze(v),w,i,s,u,c)}}),h.children.inorderTraversal(function(v,m){var y=!t.serverCache.isCompleteForChild(v)&&m.value===void 0;if(!d.hasChild(v)&&!y){var w=t.serverCache.getNode().getImmediateChild(v),E=GC(e,w,m);l=Cd(e,l,new ze(v),E,i,s,u,c)}}),l}function tq(e,t,n,r,i,s,u){if(Sd(i,n)!=null)return t;var c=t.serverCache.isFiltered(),l=t.serverCache;if(r.value!=null){if(De(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Cd(e,t,n,l.getNode().getChild(n),i,s,c,u);if(De(n)){var h=new fr(null);return l.getNode().forEachChild(hi,function(v,m){h=h.set(new ze(v),m)}),b_(e,t,n,h,i,s,c,u)}else return t}else{var d=new fr(null);return r.foreach(function(v,m){var y=vt(n,v);l.isCompleteForPath(y)&&(d=d.set(v,l.getNode().getChild(y)))}),b_(e,t,n,d,i,s,c,u)}}function nq(e,t,n,r,i){var s=t.serverCache,u=D1(t,s.getNode(),s.isFullyInitialized()||De(n),s.isFiltered());return V1(e,u,n,r,j1,i)}function rq(e,t,n,r,i,s){var u;if(Sd(r,n)!=null)return t;var c=new s0(r,t,i),l=t.eventCache.getNode(),h=void 0;if(De(n)||Oe(n)===".priority"){var d=void 0;if(t.serverCache.isFullyInitialized())d=Id(r,Fs(t));else{var v=t.serverCache.getNode();G(v instanceof Te,"serverChildren would be complete if leaf node"),d=i0(r,v)}d=d,h=e.filter.updateFullNode(l,d,s)}else{var m=Oe(n),y=o0(r,m,t.serverCache);y==null&&t.serverCache.isCompleteForChild(m)&&(y=l.getImmediateChild(m)),y!=null?h=e.filter.updateChild(l,m,y,st(n),c,s):t.eventCache.getNode().hasChild(m)?h=e.filter.updateChild(l,m,Te.EMPTY_NODE,st(n),c,s):h=l,h.isEmpty()&&t.serverCache.isFullyInitialized()&&(u=Id(r,Fs(t)),u.isLeafNode()&&(h=e.filter.updateFullNode(h,u,s)))}return u=t.serverCache.isFullyInitialized()||Sd(r,We())!=null,Jc(t,h,u,e.filter.filtersNodes())}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iq=function(){function e(t,n){this.query_=t,this.eventRegistrations_=[];var r=this.query_._queryParams,i=new Zw(r.getIndex()),s=g3(r);this.processor_=Y3(s);var u=n.serverCache,c=n.eventCache,l=i.updateFullNode(Te.EMPTY_NODE,u.getNode(),null),h=s.updateFullNode(Te.EMPTY_NODE,c.getNode(),null),d=new No(l,u.isFullyInitialized(),i.filtersNodes()),v=new No(h,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=Tp(v,d),this.eventGenerator_=new R3(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function oq(e){return e.viewCache_.serverCache.getNode()}function sq(e){return Td(e.viewCache_)}function aq(e,t){var n=Fs(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!De(t)&&!n.getImmediateChild(Oe(t)).isEmpty())?n.getChild(t):null}function $C(e){return e.eventRegistrations_.length===0}function uq(e,t){e.eventRegistrations_.push(t)}function zC(e,t,n){var r=[];if(n){G(t==null,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach(function(l){var h=l.createCancelEvent(n,i);h&&r.push(h)})}if(t){for(var s=[],u=0;u<e.eventRegistrations_.length;++u){var c=e.eventRegistrations_[u];if(!c.matches(t))s.push(c);else if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(u+1));break}}e.eventRegistrations_=s}else e.eventRegistrations_=[];return r}function QC(e,t,n,r){t.type===Kr.MERGE&&t.source.queryId!==null&&(G(Fs(e.viewCache_),"We should always have a full cache before handling merges"),G(Td(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_,s=J3(e.processor_,i,t,n,r);return X3(e.processor_,s.viewCache),G(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,B1(e,s.changes,s.viewCache.eventCache.getNode(),null)}function cq(e,t){var n=e.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(ut,function(s,u){r.push(iu(s,u))})}return n.isFullyInitialized()&&r.push(k1(n.getNode())),B1(e,r,n.getNode(),t)}function B1(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return N3(e.eventGenerator_,t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ad,q1=function(){function e(){this.views=new Map}return e}();function lq(e){G(!Ad,"__referenceConstructor has already been defined"),Ad=e}function fq(){return G(Ad,"Reference.ts has not been loaded"),Ad}function hq(e){return e.views.size===0}function a0(e,t,n,r){var i,s,u=t.source.queryId;if(u!==null){var c=e.views.get(u);return G(c!=null,"SyncTree gave us an op for an invalid query."),QC(c,t,n,r)}else{var l=[];try{for(var h=zt(e.views.values()),d=h.next();!d.done;d=h.next()){var c=d.value;l=l.concat(QC(c,t,n,r))}}catch(v){i={error:v}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}}function K1(e,t,n,r,i){var s=t._queryIdentifier,u=e.views.get(s);if(!u){var c=Id(n,i?r:null),l=!1;c?l=!0:r instanceof Te?(c=i0(n,r),l=!1):(c=Te.EMPTY_NODE,l=!1);var h=Tp(new No(c,l,!1),new No(r,i,!1));return new iq(t,h)}return u}function dq(e,t,n,r,i,s){var u=K1(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,u),uq(u,n),cq(u,n)}function pq(e,t,n,r){var i,s,u=t._queryIdentifier,c=[],l=[],h=Po(e);if(u==="default")try{for(var d=zt(e.views.entries()),v=d.next();!v.done;v=d.next()){var m=nn(v.value,2),y=m[0],w=m[1];l=l.concat(zC(w,n,r)),$C(w)&&(e.views.delete(y),w.query._queryParams.loadsAllData()||c.push(w.query))}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}else{var w=e.views.get(u);w&&(l=l.concat(zC(w,n,r)),$C(w)&&(e.views.delete(u),w.query._queryParams.loadsAllData()||c.push(w.query)))}return h&&!Po(e)&&c.push(new(fq())(t._repo,t._path)),{removed:c,events:l}}function H1(e){var t,n,r=[];try{for(var i=zt(e.views.values()),s=i.next();!s.done;s=i.next()){var u=s.value;u.query._queryParams.loadsAllData()||r.push(u)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Io(e,t){var n,r,i=null;try{for(var s=zt(e.views.values()),u=s.next();!u.done;u=s.next()){var c=u.value;i=i||aq(c,t)}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function W1(e,t){var n=t._queryParams;if(n.loadsAllData())return Sp(e);var r=t._queryIdentifier;return e.views.get(r)}function G1(e,t){return W1(e,t)!=null}function Po(e){return Sp(e)!=null}function Sp(e){var t,n;try{for(var r=zt(e.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kd;function vq(e){G(!kd,"__referenceConstructor has already been defined"),kd=e}function gq(){return G(kd,"Reference.ts has not been loaded"),kd}var mq=1,YC=function(){function e(t){this.listenProvider_=t,this.syncPointTree_=new fr(null),this.pendingWriteTree_=G3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e}();function u0(e,t,n,r,i){return x3(e.pendingWriteTree_,t,n,r,i),i?Mu(e,new Ep(e0(),t,n)):[]}function yq(e,t,n,r){M3(e.pendingWriteTree_,t,n,r);var i=fr.fromObject(n);return Mu(e,new r0(e0(),t,i))}function _o(e,t,n){n===void 0&&(n=!1);var r=L3(e.pendingWriteTree_,t),i=F3(e.pendingWriteTree_,t);if(i){var s=new fr(null);return r.snap!=null?s=s.set(We(),!0):jt(r.children,function(u){s=s.set(new ze(u),!0)}),Mu(e,new k3(r.path,s,n))}else return[]}function Xl(e,t,n){return Mu(e,new Ep(t0(),t,n))}function _q(e,t,n){var r=fr.fromObject(n);return Mu(e,new r0(t0(),t,r))}function wq(e,t){return Mu(e,new O1(t0(),t))}function bq(e,t,n){var r=c0(e,n);if(r){var i=l0(r),s=i.path,u=i.queryId,c=Dn(s,t),l=new O1(n0(u),c);return f0(e,s,l)}else return[]}function E_(e,t,n,r){var i=t._path,s=e.syncPointTree_.get(i),u=[];if(s&&(t._queryIdentifier==="default"||G1(s,t))){var c=pq(s,t,n,r);hq(s)&&(e.syncPointTree_=e.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=l.findIndex(function(P){return P._queryParams.loadsAllData()})!==-1,d=e.syncPointTree_.findOnPath(i,function(P,M){return Po(M)});if(h&&!d){var v=e.syncPointTree_.subtree(i);if(!v.isEmpty())for(var m=Sq(v),y=0;y<m.length;++y){var w=m[y],E=w.query,T=Q1(e,w);e.listenProvider_.startListening(el(E),Rd(e,E),T.hashFn,T.onComplete)}}if(!d&&l.length>0&&!r)if(h){var k=null;e.listenProvider_.stopListening(el(t),k)}else l.forEach(function(P){var M=e.queryToTagMap.get(Ap(P));e.listenProvider_.stopListening(el(P),M)});Cq(e,l)}return u}function Eq(e,t,n,r){var i=c0(e,r);if(i!=null){var s=l0(i),u=s.path,c=s.queryId,l=Dn(u,t),h=new Ep(n0(c),l,n);return f0(e,u,h)}else return[]}function Tq(e,t,n,r){var i=c0(e,r);if(i){var s=l0(i),u=s.path,c=s.queryId,l=Dn(u,t),h=fr.fromObject(n),d=new r0(n0(c),l,h);return f0(e,u,d)}else return[]}function XC(e,t,n){var r=t._path,i=null,s=!1;e.syncPointTree_.foreachOnPath(r,function(E,T){var k=Dn(E,r);i=i||Io(T,k),s=s||Po(T)});var u=e.syncPointTree_.get(r);u?(s=s||Po(u),i=i||Io(u,We())):(u=new q1,e.syncPointTree_=e.syncPointTree_.set(r,u));var c;if(i!=null)c=!0;else{c=!1,i=Te.EMPTY_NODE;var l=e.syncPointTree_.subtree(r);l.foreachChild(function(E,T){var k=Io(T,We());k&&(i=i.updateImmediateChild(E,k))})}var h=G1(u,t);if(!h&&!t._queryParams.loadsAllData()){var d=Ap(t);G(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");var v=Aq();e.queryToTagMap.set(d,v),e.tagToQueryMap.set(v,d)}var m=Ip(e.pendingWriteTree_,r),y=dq(u,t,n,m,i,c);if(!h&&!s){var w=W1(u,t);y=y.concat(kq(e,t,w))}return y}function Cp(e,t,n){var r=!0,i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,function(u,c){var l=Dn(u,t),h=Io(c,l);if(h)return h});return L1(i,t,s,n,r)}function Iq(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,function(h,d){var v=Dn(h,n);r=r||Io(d,v)});var i=e.syncPointTree_.get(n);i?r=r||Io(i,We()):(i=new q1,e.syncPointTree_=e.syncPointTree_.set(n,i));var s=r!=null,u=s?new No(r,!0,!1):null,c=Ip(e.pendingWriteTree_,t._path),l=K1(i,t,c,s?u.getNode():Te.EMPTY_NODE,s);return sq(l)}function Mu(e,t){return $1(t,e.syncPointTree_,null,Ip(e.pendingWriteTree_,We()))}function $1(e,t,n,r){if(De(e.path))return z1(e,t,n,r);var i=t.get(We());n==null&&i!=null&&(n=Io(i,We()));var s=[],u=Oe(e.path),c=e.operationForChild(u),l=t.children.get(u);if(l&&c){var h=n?n.getImmediateChild(u):null,d=F1(r,u);s=s.concat($1(c,l,h,d))}return i&&(s=s.concat(a0(i,e,r,n))),s}function z1(e,t,n,r){var i=t.get(We());n==null&&i!=null&&(n=Io(i,We()));var s=[];return t.children.inorderTraversal(function(u,c){var l=n?n.getImmediateChild(u):null,h=F1(r,u),d=e.operationForChild(u);d&&(s=s.concat(z1(d,c,l,h)))}),i&&(s=s.concat(a0(i,e,r,n))),s}function Q1(e,t){var n=t.query,r=Rd(e,n);return{hashFn:function(){var i=oq(t)||Te.EMPTY_NODE;return i.hash()},onComplete:function(i){if(i==="ok")return r?bq(e,n._path,r):wq(e,n._path);var s=dB(i,n);return E_(e,n,null,s)}}}function Rd(e,t){var n=Ap(t);return e.queryToTagMap.get(n)}function Ap(e){return e._path.toString()+"$"+e._queryIdentifier}function c0(e,t){return e.tagToQueryMap.get(t)}function l0(e){var t=e.indexOf("$");return G(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ze(e.substr(0,t))}}function f0(e,t,n){var r=e.syncPointTree_.get(t);G(r,"Missing sync point for query tag that we're tracking");var i=Ip(e.pendingWriteTree_,t);return a0(r,n,i,null)}function Sq(e){return e.fold(function(t,n,r){if(n&&Po(n)){var i=Sp(n);return[i]}else{var s=[];return n&&(s=H1(n)),jt(r,function(u,c){s=s.concat(c)}),s}})}function el(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(gq())(e._repo,e._path):e}function Cq(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Ap(r),s=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(s)}}}function Aq(){return mq++}function kq(e,t,n){var r=t._path,i=Rd(e,t),s=Q1(e,n),u=e.listenProvider_.startListening(el(t),i,s.hashFn,s.onComplete),c=e.syncPointTree_.subtree(r);if(i)G(!Po(c.value),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold(function(v,m,y){if(!De(v)&&m&&Po(m))return[Sp(m).query];var w=[];return m&&(w=w.concat(H1(m).map(function(E){return E.query}))),jt(y,function(E,T){w=w.concat(T)}),w}),h=0;h<l.length;++h){var d=l[h];e.listenProvider_.stopListening(el(d),Rd(e,d))}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rq=function(){function e(t){this.node_=t}return e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)},e.prototype.node=function(){return this.node_},e}(),Nq=function(){function e(t,n){this.syncTree_=t,this.path_=n}return e.prototype.getImmediateChild=function(t){var n=vt(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return Cp(this.syncTree_,this.path_)},e}(),Pq=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},JC=function(e,t,n){if(!e||typeof e!="object")return e;if(G(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Oq(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Dq(e[".sv"],t);G(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Oq=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:G(!1,"Unexpected server value: "+e)}},Dq=function(e,t,n){e.hasOwnProperty("increment")||G(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;typeof r!="number"&&G(!1,"Unexpected increment value: "+r);var i=t.node();if(G(i!==null&&typeof i!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i,u=s.getValue();return typeof u!="number"?r:u+r},Y1=function(e,t,n,r){return d0(t,new Nq(n,e),r)},h0=function(e,t,n){return d0(e,new Rq(t),n)};function d0(e,t,n){var r=e.getPriority().val(),i=JC(r,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){var u=e,c=JC(u.getValue(),t,n);return c!==u.getValue()||i!==u.getPriority().val()?new nu(c,mt(i)):e}else{var l=e;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new nu(i))),l.forEachChild(ut,function(h,d){var v=d0(d,t.getImmediateChild(h),n);v!==d&&(s=s.updateImmediateChild(h,v))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p0=function(){function e(t,n,r){t===void 0&&(t=""),n===void 0&&(n=null),r===void 0&&(r={children:{},childCount:0}),this.name=t,this.parent=n,this.node=r}return e}();function kp(e,t){for(var n=t instanceof ze?t:new ze(t),r=e,i=Oe(n);i!==null;){var s=Ls(r.node.children,i)||{children:{},childCount:0};r=new p0(i,r,s),n=st(n),i=Oe(n)}return r}function Xs(e){return e.node.value}function v0(e,t){e.node.value=t,T_(e)}function X1(e){return e.node.childCount>0}function xq(e){return Xs(e)===void 0&&!X1(e)}function Rp(e,t){jt(e.node.children,function(n,r){t(new p0(n,e,r))})}function J1(e,t,n,r){n&&!r&&t(e),Rp(e,function(i){J1(i,t,!0,r)}),n&&r&&t(e)}function Mq(e,t,n){for(var r=n?e:e.parent;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Jl(e){return new ze(e.parent===null?e.name:Jl(e.parent)+"/"+e.name)}function T_(e){e.parent!==null&&Lq(e.parent,e.name,e)}function Lq(e,t,n){var r=xq(n),i=lr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,T_(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,T_(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fq=/[\[\].#$\/\u0000-\u001F\u007F]/,Uq=/[\[\].#$\u0000-\u001F\u007F]/,uy=10*1024*1024,Np=function(e){return typeof e=="string"&&e.length!==0&&!Fq.test(e)},Z1=function(e){return typeof e=="string"&&e.length!==0&&!Uq.test(e)},jq=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Z1(e)},El=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!_p(e)||e&&typeof e=="object"&&lr(e,".sv")},bi=function(e,t,n,r){r&&t===void 0||Zl(Wn(e,"value"),t,n)},Zl=function(e,t,n){var r=n instanceof ze?new $B(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+hs(r));if(typeof t=="function")throw new Error(e+"contains a function "+hs(r)+" with contents = "+t.toString());if(_p(t))throw new Error(e+"contains "+t.toString()+" "+hs(r));if(typeof t=="string"&&t.length>uy/3&&yp(t)>uy)throw new Error(e+"contains a string greater than "+uy+" utf8 bytes "+hs(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){var i=!1,s=!1;if(jt(t,function(u,c){if(u===".value")i=!0;else if(u!==".priority"&&u!==".sv"&&(s=!0,!Np(u)))throw new Error(e+" contains an invalid key ("+u+") "+hs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);zB(r,u),Zl(e,c,r),QB(r)}),i&&s)throw new Error(e+' contains ".value" child '+hs(r)+" in addition to actual children.")}},Vq=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=_l(r),s=0;s<i.length;s++)if(!(i[s]===".priority"&&s===i.length-1)){if(!Np(i[s]))throw new Error(e+"contains an invalid key ("+i[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(GB);var u=null;for(n=0;n<t.length;n++){if(r=t[n],u!==null&&wr(u,r))throw new Error(e+"contains a path "+u.toString()+" that is ancestor of another path "+r.toString());u=r}},eP=function(e,t,n,r){if(!(r&&t===void 0)){var i=Wn(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var s=[];jt(t,function(u,c){var l=new ze(u);if(Zl(i,c,vt(n,l)),zw(l)===".priority"&&!El(c))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),Vq(i,s)}},g0=function(e,t,n){if(!(n&&t===void 0)){if(_p(t))throw new Error(Wn(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!El(t))throw new Error(Wn(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Bq=function(e,t,n){if(!(n&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Wn(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ef=function(e,t,n,r){if(!(r&&n===void 0)&&!Np(n))throw new Error(Wn(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Tl=function(e,t,n,r){if(!(r&&n===void 0)&&!Z1(n))throw new Error(Wn(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},qq=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Tl(e,t,n,r)},br=function(e,t){if(Oe(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},tP=function(e,t){var n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Np(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!jq(n))throw new Error(Wn(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},Kq=function(e,t,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Wn(e,t)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hq=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e}();function Pp(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],s=i.getPath();n!==null&&!Qw(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function m0(e,t,n){Pp(e,n),nP(e,function(r){return Qw(r,t)})}function kr(e,t,n){Pp(e,n),nP(e,function(r){return wr(r,t)||wr(t,r)})}function nP(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i){var s=i.path;t(s)?(Wq(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Wq(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(n!==null){e.events[t]=null;var r=n.getEventRunner();Rs&&Kt("event: "+n.toString()),Du(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rP="repo_interrupt",Gq=25,$q=function(){function e(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ed(),this.transactionQueueTree_=new p0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function zq(e,t,n){if(e.stats_=Gw(e.repoInfo_),e.forceRestClient_||vB())e.server_=new b3(e.repoInfo_,function(r,i,s,u){ZC(e,r,i,s,u)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(function(){return eA(e,!0)},0);else{if(typeof n!="undefined"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Mt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ns(e.repoInfo_,t,function(r,i,s,u){ZC(e,r,i,s,u)},function(r){eA(e,r)},function(r){Yq(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(function(r){e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(function(r){e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=bB(e.repoInfo_,function(){return new C3(e.stats_,e.server_)}),e.infoData_=new E3,e.infoSyncTree_=new YC({startListening:function(r,i,s,u){var c=[],l=e.infoData_.getNode(r._path);return l.isEmpty()||(c=Xl(e.infoSyncTree_,r._path,l),setTimeout(function(){u("ok")},0)),c},stopListening:function(){}}),y0(e,"connected",!1),e.serverSyncTree_=new YC({startListening:function(r,i,s,u){return e.server_.listen(r,s,i,function(c,l){var h=u(c,l);kr(e.eventQueue_,r._path,h)}),[]},stopListening:function(r,i){e.server_.unlisten(r,i)}})}function iP(e){var t=e.infoData_.getNode(new ze(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n}function tf(e){return Pq({timestamp:iP(e)})}function ZC(e,t,n,r,i){e.dataUpdateCount++;var s=new ze(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var u=[];if(i)if(r){var c=gd(n,function(m){return mt(m)});u=Tq(e.serverSyncTree_,s,c,i)}else{var l=mt(n);u=Eq(e.serverSyncTree_,s,l,i)}else if(r){var h=gd(n,function(m){return mt(m)});u=_q(e.serverSyncTree_,s,h)}else{var d=mt(n);u=Xl(e.serverSyncTree_,s,d)}var v=s;u.length>0&&(v=su(e,s)),kr(e.eventQueue_,v,u)}function Qq(e,t){e.interceptServerDataCallback_=t}function eA(e,t){y0(e,"connected",t),t===!1&&Zq(e)}function Yq(e,t){jt(t,function(n,r){y0(e,n,r)})}function y0(e,t,n){var r=new ze("/.info/"+t),i=mt(n);e.infoData_.updateSnapshot(r,i);var s=Xl(e.infoSyncTree_,r,i);kr(e.eventQueue_,r,s)}function Op(e){return e.nextWriteId_++}function Xq(e,t){var n=Iq(e.serverSyncTree_,t);return n!=null?Promise.resolve(n):e.server_.get(t).then(function(r){var i=mt(r).withIndex(t._queryParams.getIndex()),s=Xl(e.serverSyncTree_,t._path,i);return m0(e.eventQueue_,t._path,s),Promise.resolve(i)},function(r){return Lu(e,"get for query "+Mt(t)+" failed: "+r),Promise.reject(new Error(r))})}function _0(e,t,n,r,i){Lu(e,"set",{path:t.toString(),value:n,priority:r});var s=tf(e),u=mt(n,r),c=Cp(e.serverSyncTree_,t),l=h0(u,c,s),h=Op(e),d=u0(e.serverSyncTree_,t,l,h,!0);Pp(e.eventQueue_,d),e.server_.put(t.toString(),u.val(!0),function(m,y){var w=m==="ok";w||on("set at "+t+" failed: "+m);var E=_o(e.serverSyncTree_,h,!w);kr(e.eventQueue_,t,E),Oo(e,i,m,y)});var v=b0(e,t);su(e,v),kr(e.eventQueue_,v,[])}function Jq(e,t,n,r){Lu(e,"update",{path:t.toString(),value:n});var i=!0,s=tf(e),u={};if(jt(n,function(h,d){i=!1,u[h]=Y1(vt(t,h),mt(d),e.serverSyncTree_,s)}),i)Kt("update() called with empty data.  Don't do anything."),Oo(e,r,"ok",void 0);else{var c=Op(e),l=yq(e.serverSyncTree_,t,u,c);Pp(e.eventQueue_,l),e.server_.merge(t.toString(),n,function(h,d){var v=h==="ok";v||on("update at "+t+" failed: "+h);var m=_o(e.serverSyncTree_,c,!v),y=m.length>0?su(e,t):t;kr(e.eventQueue_,y,m),Oo(e,r,h,d)}),jt(n,function(h){var d=b0(e,vt(t,h));su(e,d)}),kr(e.eventQueue_,t,[])}}function Zq(e){Lu(e,"onDisconnectEvents");var t=tf(e),n=Ed();g_(e.onDisconnect_,We(),function(i,s){var u=Y1(i,s,e.serverSyncTree_,t);xu(n,i,u)});var r=[];g_(n,We(),function(i,s){r=r.concat(Xl(e.serverSyncTree_,i,s));var u=b0(e,i);su(e,u)}),e.onDisconnect_=Ed(),kr(e.eventQueue_,We(),r)}function eK(e,t,n){e.server_.onDisconnectCancel(t.toString(),function(r,i){r==="ok"&&v_(e.onDisconnect_,t),Oo(e,n,r,i)})}function tA(e,t,n,r){var i=mt(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),function(s,u){s==="ok"&&xu(e.onDisconnect_,t,i),Oo(e,r,s,u)})}function tK(e,t,n,r,i){var s=mt(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),function(u,c){u==="ok"&&xu(e.onDisconnect_,t,s),Oo(e,i,u,c)})}function nK(e,t,n,r){if(s_(n)){Kt("onDisconnect().update() called with empty data.  Don't do anything."),Oo(e,r,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,function(i,s){i==="ok"&&jt(n,function(u,c){var l=mt(c);xu(e.onDisconnect_,vt(t,u),l)}),Oo(e,r,i,s)})}function rK(e,t,n){var r;Oe(t._path)===".info"?r=XC(e.infoSyncTree_,t,n):r=XC(e.serverSyncTree_,t,n),m0(e.eventQueue_,t._path,r)}function I_(e,t,n){var r;Oe(t._path)===".info"?r=E_(e.infoSyncTree_,t,n):r=E_(e.serverSyncTree_,t,n),m0(e.eventQueue_,t._path,r)}function oP(e){e.persistentConnection_&&e.persistentConnection_.interrupt(rP)}function iK(e){e.persistentConnection_&&e.persistentConnection_.resume(rP)}function oK(e,t){if(t===void 0&&(t=!1),typeof console!="undefined"){var n;t?(e.statsListener_||(e.statsListener_=new P1(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce(function(i,s){return Math.max(s.length,i)},0);jt(n,function(i,s){for(var u=i,c=i.length;c<r+2;c++)u+=" ";console.log(u+s)})}}function sK(e,t){e.stats_.incrementCounter(t),A3(e.statsReporter_,t)}function Lu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),Kt.apply(void 0,Ne([r],nn(t)))}function Oo(e,t,n,r){t&&Du(function(){if(n==="ok")t(null);else{var i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);var u=new Error(s);u.code=i,t(u)}})}function aK(e,t,n,r,i,s){Lu(e,"transaction on "+t);var u={path:t,update:n,onComplete:r,status:null,order:YN(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=w0(e,t,void 0);u.currentInputSnapshot=c;var l=u.update(c.val());if(l===void 0)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Zl("transaction failed: Data returned ",l,u.path),u.status=0;var h=kp(e.transactionQueueTree_,t),d=Xs(h)||[];d.push(u),v0(h,d);var v=void 0;if(typeof l=="object"&&l!==null&&lr(l,".priority"))v=Ls(l,".priority"),G(El(v),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var m=Cp(e.serverSyncTree_,t)||Te.EMPTY_NODE;v=m.getPriority().val()}var y=tf(e),w=mt(l,v),E=h0(w,c,y);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=E,u.currentWriteId=Op(e);var T=u0(e.serverSyncTree_,t,E,u.currentWriteId,u.applyLocally);kr(e.eventQueue_,t,T),Dp(e,e.transactionQueueTree_)}}function w0(e,t,n){return Cp(e.serverSyncTree_,t,n)||Te.EMPTY_NODE}function Dp(e,t){if(t===void 0&&(t=e.transactionQueueTree_),t||xp(e,t),Xs(t)){var n=aP(e,t);G(n.length>0,"Sending zero length transaction queue");var r=n.every(function(i){return i.status===0});r&&uK(e,Jl(t),n)}else X1(t)&&Rp(t,function(i){Dp(e,i)})}function uK(e,t,n){for(var r=n.map(function(m){return m.currentWriteId}),i=w0(e,t,r),s=i,u=i.hash(),c=0;c<n.length;c++){var l=n[c];G(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;var h=Dn(t,l.path);s=s.updateChild(h,l.currentOutputSnapshotRaw)}var d=s.val(!0),v=t;e.server_.put(v.toString(),d,function(m){Lu(e,"transaction put response",{path:v.toString(),status:m});var y=[];if(m==="ok"){for(var w=[],E=function(k){n[k].status=2,y=y.concat(_o(e.serverSyncTree_,n[k].currentWriteId)),n[k].onComplete&&w.push(function(){return n[k].onComplete(null,!0,n[k].currentOutputSnapshotResolved)}),n[k].unwatcher()},T=0;T<n.length;T++)E(T);xp(e,kp(e.transactionQueueTree_,t)),Dp(e,e.transactionQueueTree_),kr(e.eventQueue_,t,y);for(var T=0;T<w.length;T++)Du(w[T])}else{if(m==="datastale")for(var T=0;T<n.length;T++)n[T].status===3?n[T].status=4:n[T].status=0;else{on("transaction at "+v.toString()+" failed: "+m);for(var T=0;T<n.length;T++)n[T].status=4,n[T].abortReason=m}su(e,t)}},u)}function su(e,t){var n=sP(e,t),r=Jl(n),i=aP(e,n);return cK(e,i,r),r}function cK(e,t,n){if(t.length!==0){for(var r=[],i=[],s=t.filter(function(h){return h.status===0}),u=s.map(function(h){return h.currentWriteId}),c=function(h){var d=t[h],v=Dn(n,d.path),m=!1,y;if(G(v!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,y=d.abortReason,i=i.concat(_o(e.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=Gq)m=!0,y="maxretry",i=i.concat(_o(e.serverSyncTree_,d.currentWriteId,!0));else{var w=w0(e,d.path,u);d.currentInputSnapshot=w;var E=t[h].update(w.val());if(E!==void 0){Zl("transaction failed: Data returned ",E,d.path);var T=mt(E),k=typeof E=="object"&&E!=null&&lr(E,".priority");k||(T=T.updatePriority(w.getPriority()));var P=d.currentWriteId,M=tf(e),K=h0(T,w,M);d.currentOutputSnapshotRaw=T,d.currentOutputSnapshotResolved=K,d.currentWriteId=Op(e),u.splice(u.indexOf(P),1),i=i.concat(u0(e.serverSyncTree_,d.path,K,d.currentWriteId,d.applyLocally)),i=i.concat(_o(e.serverSyncTree_,P,!0))}else m=!0,y="nodata",i=i.concat(_o(e.serverSyncTree_,d.currentWriteId,!0))}kr(e.eventQueue_,n,i),i=[],m&&(t[h].status=2,function(Q){setTimeout(Q,Math.floor(0))}(t[h].unwatcher),t[h].onComplete&&(y==="nodata"?r.push(function(){return t[h].onComplete(null,!1,t[h].currentInputSnapshot)}):r.push(function(){return t[h].onComplete(new Error(y),!1,null)})))},l=0;l<t.length;l++)c(l);xp(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)Du(r[l]);Dp(e,e.transactionQueueTree_)}}function sP(e,t){var n,r=e.transactionQueueTree_;for(n=Oe(t);n!==null&&Xs(r)===void 0;)r=kp(r,n),t=st(t),n=Oe(t);return r}function aP(e,t){var n=[];return uP(e,t,n),n.sort(function(r,i){return r.order-i.order}),n}function uP(e,t,n){var r=Xs(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Rp(t,function(s){uP(e,s,n)})}function xp(e,t){var n=Xs(t);if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,v0(t,n.length>0?n:void 0)}Rp(t,function(s){xp(e,s)})}function b0(e,t){var n=Jl(sP(e,t)),r=kp(e.transactionQueueTree_,t);return Mq(r,function(i){cy(e,i)}),cy(e,r),J1(r,function(i){cy(e,i)}),n}function cy(e,t){var n=Xs(t);if(n){for(var r=[],i=[],s=-1,u=0;u<n.length;u++)n[u].status===3||(n[u].status===1?(G(s===u-1,"All SENT items should be at beginning of queue."),s=u,n[u].status=3,n[u].abortReason="set"):(G(n[u].status===0,"Unexpected transaction status in abort"),n[u].unwatcher(),i=i.concat(_o(e.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&r.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));s===-1?v0(t,void 0):n.length=s+1,kr(e.eventQueue_,Jl(t),i);for(var u=0;u<r.length;u++)Du(r[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function fK(e){var t,n,r={};e.charAt(0)==="?"&&(e=e.substring(1));try{for(var i=zt(e.split("&")),s=i.next();!s.done;s=i.next()){var u=s.value;if(u.length!==0){var c=u.split("=");c.length===2?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):on("Invalid query segment '"+u+"' in query '"+e+"'")}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}var S_=function(e,t){var n=hK(e),r=n.namespace;n.domain==="firebase.com"&&_i(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&_i("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||uB();var i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ww(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new ze(n.pathString)}},hK=function(e){var t="",n="",r="",i="",s="",u=!0,c="https",l=443;if(typeof e=="string"){var h=e.indexOf("//");h>=0&&(c=e.substring(0,h-1),e=e.substring(h+2));var d=e.indexOf("/");d===-1&&(d=e.length);var v=e.indexOf("?");v===-1&&(v=e.length),t=e.substring(0,Math.min(d,v)),d<v&&(i=lK(e.substring(d,v)));var m=fK(e.substring(Math.min(e.length,v)));h=t.indexOf(":"),h>=0?(u=c==="https"||c==="wss",l=parseInt(t.substring(h+1),10)):h=t.length;var y=t.slice(0,h);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{var w=t.indexOf(".");r=t.substring(0,w).toLowerCase(),n=t.substring(w+1),s=r}"ns"in m&&(s=m.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:u,scheme:c,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cP=function(){function e(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return e.prototype.getPath=function(){var t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Mt(this.snapshot.exportVal())},e}(),lP=function(){function e(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fP=function(){function e(t,n){this.snapshotCallback=t,this.cancelCallback=n}return e.prototype.onValue=function(t,n){this.snapshotCallback.call(null,t,n)},e.prototype.onCancel=function(t){return G(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dK=function(){function e(t,n){this._repo=t,this._path=n}return e.prototype.cancel=function(){var t=new Gt;return eK(this._repo,this._path,t.wrapCallback(function(){})),t.promise},e.prototype.remove=function(){br("OnDisconnect.remove",this._path);var t=new Gt;return tA(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},e.prototype.set=function(t){br("OnDisconnect.set",this._path),bi("OnDisconnect.set",t,this._path,!1);var n=new Gt;return tA(this._repo,this._path,t,n.wrapCallback(function(){})),n.promise},e.prototype.setWithPriority=function(t,n){br("OnDisconnect.setWithPriority",this._path),bi("OnDisconnect.setWithPriority",t,this._path,!1),g0("OnDisconnect.setWithPriority",n,!1);var r=new Gt;return tK(this._repo,this._path,t,n,r.wrapCallback(function(){})),r.promise},e.prototype.update=function(t){br("OnDisconnect.update",this._path),eP("OnDisconnect.update",t,this._path,!1);var n=new Gt;return nK(this._repo,this._path,t,n.wrapCallback(function(){})),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr=function(){function e(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Object.defineProperty(e.prototype,"key",{get:function(){return De(this._path)?null:zw(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ti(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var t=VC(this._queryParams),n=qw(t);return n==="{}"?"default":n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return VC(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(t=Re(t),!(t instanceof e))return!1;var n=this._repo===t._repo,r=Qw(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+WB(this._path)},e}();function Mp(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function Mo(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===hi){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){var s=e.getIndexStartName();if(s!==Bi)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){var u=e.getIndexEndName();if(u!==wi)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===ut){if(t!=null&&!El(t)||n!=null&&!El(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(G(e.getIndex()instanceof Xw||e.getIndex()===Jw,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Lp(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ti=function(e){ee(t,e);function t(n,r){return e.call(this,n,r,new N1,!1)||this}return Object.defineProperty(t.prototype,"parent",{get:function(){var n=_1(this._path);return n===null?null:new t(this._repo,n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var n=this;n.parent!==null;)n=n.parent;return n},enumerable:!1,configurable:!0}),t}(Nr),Fp=function(){function e(t,n,r){this._node=t,this.ref=n,this._index=r}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new ze(t),r=Us(this.ref,t);return new e(this._node.getChild(n),r,ut)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,function(i,s){return t(new e(s,Us(n.ref,i),ut))})},e.prototype.hasChild=function(t){var n=new ze(t);return!this._node.getChild(n).isEmpty()},e.prototype.hasChildren=function(){return this._node.isLeafNode()?!1:!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function hP(e,t){return e=Re(e),e._checkNotDeleted("ref"),t!==void 0?Us(e._root,t):e._root}function nA(e,t){e=Re(e),e._checkNotDeleted("refFromURL");var n=S_(t,e._repo.repoInfo_.nodeAdmin);tP("refFromURL",n);var r=n.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&r.host!==e._repo.repoInfo_.host&&_i("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),hP(e,n.path.toString())}function Us(e,t){return e=Re(e),Oe(e._path)===null?qq("child","path",t,!1):Tl("child","path",t,!1),new Ti(e._repo,vt(e._path,t))}function pK(e,t){e=Re(e),br("push",e._path),bi("push",t,e._path,!0);var n=iP(e._repo),r=d3(n),i=Us(e,r),s=Us(e,r),u;return t!=null?u=E0(s,t).then(function(){return s}):u=Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}function vK(e){return br("remove",e._path),E0(e,null)}function E0(e,t){e=Re(e),br("set",e._path),bi("set",t,e._path,!1);var n=new Gt;return _0(e._repo,e._path,t,null,n.wrapCallback(function(){})),n.promise}function gK(e,t){e=Re(e),br("setPriority",e._path),g0("setPriority",t,!1);var n=new Gt;return _0(e._repo,vt(e._path,".priority"),t,null,n.wrapCallback(function(){})),n.promise}function mK(e,t,n){if(br("setWithPriority",e._path),bi("setWithPriority",t,e._path,!1),g0("setWithPriority",n,!1),e.key===".length"||e.key===".keys")throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Gt;return _0(e._repo,e._path,t,n,r.wrapCallback(function(){})),r.promise}function yK(e,t){eP("update",t,e._path,!1);var n=new Gt;return Jq(e._repo,e._path,t,n.wrapCallback(function(){})),n.promise}function _K(e){return e=Re(e),Xq(e._repo,e).then(function(t){return new Fp(t,new Ti(e._repo,e._path),e._queryParams.getIndex())})}var dP=function(){function e(t){this.callbackContext=t}return e.prototype.respondsTo=function(t){return t==="value"},e.prototype.createEvent=function(t,n){var r=n._queryParams.getIndex();return new cP("value",this,new Fp(t.snapshotNode,new Ti(n._repo,n._path),r))},e.prototype.getEventRunner=function(t){var n=this;return t.getEventType()==="cancel"?function(){return n.callbackContext.onCancel(t.error)}:function(){return n.callbackContext.onValue(t.snapshot,null)}},e.prototype.createCancelEvent=function(t,n){return this.callbackContext.hasCancelCallback?new lP(this,t,n):null},e.prototype.matches=function(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1},e.prototype.hasAnyCallback=function(){return this.callbackContext!==null},e}(),pP=function(){function e(t,n){this.eventType=t,this.callbackContext=n}return e.prototype.respondsTo=function(t){var n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n},e.prototype.createCancelEvent=function(t,n){return this.callbackContext.hasCancelCallback?new lP(this,t,n):null},e.prototype.createEvent=function(t,n){G(t.childName!=null,"Child events should have a childName.");var r=Us(new Ti(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new cP(t.type,this,new Fp(t.snapshotNode,r,i),t.prevName)},e.prototype.getEventRunner=function(t){var n=this;return t.getEventType()==="cancel"?function(){return n.callbackContext.onCancel(t.error)}:function(){return n.callbackContext.onValue(t.snapshot,t.prevName)}},e.prototype.matches=function(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function nf(e,t,n,r,i){var s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){var u=n,c=function(d,v){I_(e._repo,e,h),u(d,v)};c.userCallback=n.userCallback,c.context=n.context,n=c}var l=new fP(n,s||void 0),h=t==="value"?new dP(l):new pP(t,l);return rK(e._repo,e,h),function(){return I_(e._repo,e,h)}}function C_(e,t,n,r){return nf(e,"value",t,n,r)}function rA(e,t,n,r){return nf(e,"child_added",t,n,r)}function iA(e,t,n,r){return nf(e,"child_changed",t,n,r)}function oA(e,t,n,r){return nf(e,"child_moved",t,n,r)}function sA(e,t,n,r){return nf(e,"child_removed",t,n,r)}function aA(e,t,n){var r=null,i=n?new fP(n):null;t==="value"?r=new dP(i):t&&(r=new pP(t,i)),I_(e._repo,e,r)}var zr=function(){function e(){}return e}(),vP=function(e){ee(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){bi("endAt",this._value,n._path,!0);var r=p_(n._queryParams,this._value,this._key);if(Lp(r),Mo(r),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Nr(n._repo,n._path,r,n._orderByCalled)},t}(zr);function wK(e,t){return ef("endAt","key",t,!0),new vP(e,t)}var bK=function(e){ee(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){bi("endBefore",this._value,n._path,!1);var r=w3(n._queryParams,this._value,this._key);if(Lp(r),Mo(r),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Nr(n._repo,n._path,r,n._orderByCalled)},t}(zr);function EK(e,t){return ef("endBefore","key",t,!0),new bK(e,t)}var gP=function(e){ee(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){bi("startAt",this._value,n._path,!0);var r=d_(n._queryParams,this._value,this._key);if(Lp(r),Mo(r),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Nr(n._repo,n._path,r,n._orderByCalled)},t}(zr);function TK(e,t){return e===void 0&&(e=null),ef("startAt","key",t,!0),new gP(e,t)}var IK=function(e){ee(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){bi("startAfter",this._value,n._path,!1);var r=_3(n._queryParams,this._value,this._key);if(Lp(r),Mo(r),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Nr(n._repo,n._path,r,n._orderByCalled)},t}(zr);function SK(e,t){return ef("startAfter","key",t,!0),new IK(e,t)}var CK=function(e){ee(t,e);function t(n){var r=e.call(this)||this;return r._limit=n,r}return t.prototype._apply=function(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Nr(n._repo,n._path,m3(n._queryParams,this._limit),n._orderByCalled)},t}(zr);function AK(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new CK(e)}var kK=function(e){ee(t,e);function t(n){var r=e.call(this)||this;return r._limit=n,r}return t.prototype._apply=function(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Nr(n._repo,n._path,y3(n._queryParams,this._limit),n._orderByCalled)},t}(zr);function RK(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kK(e)}var NK=function(e){ee(t,e);function t(n){var r=e.call(this)||this;return r._path=n,r}return t.prototype._apply=function(n){Mp(n,"orderByChild");var r=new ze(this._path);if(De(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var i=new Xw(r),s=bp(n._queryParams,i);return Mo(s),new Nr(n._repo,n._path,s,!0)},t}(zr);function PK(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Tl("orderByChild","path",e,!1),new NK(e)}var OK=function(e){ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Mp(n,"orderByKey");var r=bp(n._queryParams,hi);return Mo(r),new Nr(n._repo,n._path,r,!0)},t}(zr);function DK(){return new OK}var xK=function(e){ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Mp(n,"orderByPriority");var r=bp(n._queryParams,ut);return Mo(r),new Nr(n._repo,n._path,r,!0)},t}(zr);function MK(){return new xK}var LK=function(e){ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._apply=function(n){Mp(n,"orderByValue");var r=bp(n._queryParams,Jw);return Mo(r),new Nr(n._repo,n._path,r,!0)},t}(zr);function FK(){return new LK}var UK=function(e){ee(t,e);function t(n,r){var i=e.call(this)||this;return i._value=n,i._key=r,i}return t.prototype._apply=function(n){if(bi("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new vP(this._value,this._key)._apply(new gP(this._value,this._key)._apply(n))},t}(zr);function jK(e,t){return ef("equalTo","key",t,!0),new UK(e,t)}function Ur(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=Re(e);try{for(var u=zt(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s}lq(Ti);vq(Ti);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VK="FIREBASE_DATABASE_EMULATOR_HOST",A_={},mP=!1;function BK(e,t,n,r){e.repoInfo_=new Ww(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function yP(e,t,n,r,i){var s=r||e.options.databaseURL;s===void 0&&(e.options.projectId||_i("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kt("Using default host for project ",e.options.projectId),s=e.options.projectId+"-default-rtdb.firebaseio.com");var u=S_(s,i),c=u.repoInfo,l,h=void 0;typeof process!="undefined"&&(h=process.env[VK]),h?(l=!0,s="http://"+h+"?ns="+c.namespace,u=S_(s,i),c=u.repoInfo):l=!u.repoInfo.secure;var d=i&&l?new Xc(Xc.OWNER):new mB(e.name,e.options,t);tP("Invalid Firebase Database URL",u),De(u.path)||_i("Database URL must point to the root of a Firebase Database (not including a child path).");var v=KK(c,e,d,new gB(e.name,n));return new WK(v,e)}function qK(e,t){var n=A_[t];(!n||n[e.key]!==e)&&_i("Database "+t+"("+e.repoInfo_+") has already been deleted."),oP(e),delete n[e.key]}function KK(e,t,n,r){var i=A_[t.name];i||(i={},A_[t.name]=i);var s=i[e.toURLString()];return s&&_i("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new $q(e,mP,n,r),i[e.toURLString()]=s,s}function HK(e){mP=e}var WK=function(){function e(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(zq(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ti(this._repo,We())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){return this._rootInternal!==null&&(qK(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},e.prototype._checkNotDeleted=function(t){this._rootInternal===null&&_i("Cannot call "+t+" on a deleted database.")},e}();function GK(e,t,n,r){r===void 0&&(r={}),e=Re(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&_i("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&_i('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Xc(Xc.OWNER);else if(r.mockUserToken){var u=typeof r.mockUserToken=="string"?r.mockUserToken:Mw(r.mockUserToken,e.app.options.projectId);s=new Xc(u)}BK(i,t,n,s)}function $K(e){e=Re(e),e._checkNotDeleted("goOffline"),oP(e._repo)}function zK(e){e=Re(e),e._checkNotDeleted("goOnline"),iK(e._repo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QK={".sv":"timestamp"};function YK(){return QK}function XK(e){return{".sv":{increment:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JK=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function ZK(e,t,n){var r;if(e=Re(e),br("Reference.transaction",e._path),e.key===".length"||e.key===".keys")throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new Gt,u=function(l,h,d){var v=null;l?s.reject(l):(v=new Fp(d,new Ti(e._repo,e._path),ut),s.resolve(new JK(h,v)))},c=C_(e,function(){});return aK(e._repo,e._path,t,u,c,i),s.promise}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eH=function(){function e(t){this._delegate=t}return e.prototype.cancel=function(t){me("OnDisconnect.cancel",0,1,arguments.length),qt("OnDisconnect.cancel","onComplete",t,!0);var n=this._delegate.cancel();return t&&n.then(function(){return t(null)},function(r){return t(r)}),n},e.prototype.remove=function(t){me("OnDisconnect.remove",0,1,arguments.length),qt("OnDisconnect.remove","onComplete",t,!0);var n=this._delegate.remove();return t&&n.then(function(){return t(null)},function(r){return t(r)}),n},e.prototype.set=function(t,n){me("OnDisconnect.set",1,2,arguments.length),qt("OnDisconnect.set","onComplete",n,!0);var r=this._delegate.set(t);return n&&r.then(function(){return n(null)},function(i){return n(i)}),r},e.prototype.setWithPriority=function(t,n,r){me("OnDisconnect.setWithPriority",2,3,arguments.length),qt("OnDisconnect.setWithPriority","onComplete",r,!0);var i=this._delegate.setWithPriority(t,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},e.prototype.update=function(t,n){if(me("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var r={},i=0;i<t.length;++i)r[""+i]=t[i];t=r,on("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qt("OnDisconnect.update","onComplete",n,!0);var s=this._delegate.update(t);return n&&s.then(function(){return n(null)},function(u){return n(u)}),s},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tH=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return me("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tl=function(){function e(t,n){this._database=t,this._delegate=n}return e.prototype.val=function(){return me("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return me("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return me("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return me("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return me("DataSnapshot.child",0,1,arguments.length),t=String(t),Tl("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(t){return me("DataSnapshot.hasChild",1,1,arguments.length),Tl("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},e.prototype.getPriority=function(){return me("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return me("DataSnapshot.forEach",1,1,arguments.length),qt("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(function(r){return t(new e(n._database,r))})},e.prototype.hasChildren=function(){return me("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return me("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return me("DataSnapshot.ref",0,0,arguments.length),new ws(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),_P=function(){function e(t,n){this.database=t,this._delegate=n}return e.prototype.on=function(t,n,r,i){var s=this,u;me("Query.on",2,4,arguments.length),qt("Query.on","callback",n,!1);var c=e.getCancelAndContextArgs_("Query.on",r,i),l=function(d,v){n.call(c.context,new tl(s.database,d),v)};l.userCallback=n,l.context=c.context;var h=(u=c.cancel)===null||u===void 0?void 0:u.bind(c.context);switch(t){case"value":return C_(this._delegate,l,h),n;case"child_added":return rA(this._delegate,l,h),n;case"child_removed":return sA(this._delegate,l,h),n;case"child_changed":return iA(this._delegate,l,h),n;case"child_moved":return oA(this._delegate,l,h),n;default:throw new Error(Wn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(t,n,r){if(me("Query.off",0,3,arguments.length),Bq("Query.off",t,!0),qt("Query.off","callback",n,!0),bC("Query.off","context",r,!0),n){var i=function(){};i.userCallback=n,i.context=r,aA(this._delegate,t,i)}else aA(this._delegate,t)},e.prototype.get=function(){var t=this;return _K(this._delegate).then(function(n){return new tl(t.database,n)})},e.prototype.once=function(t,n,r,i){var s=this;me("Query.once",1,4,arguments.length),qt("Query.once","callback",n,!0);var u=e.getCancelAndContextArgs_("Query.once",r,i),c=new Gt,l=function(d,v){var m=new tl(s.database,d);n&&n.call(u.context,m,v),c.resolve(m)};l.userCallback=n,l.context=u.context;var h=function(d){u.cancel&&u.cancel.call(u.context,d),c.reject(d)};switch(t){case"value":C_(this._delegate,l,h,{onlyOnce:!0});break;case"child_added":rA(this._delegate,l,h,{onlyOnce:!0});break;case"child_removed":sA(this._delegate,l,h,{onlyOnce:!0});break;case"child_changed":iA(this._delegate,l,h,{onlyOnce:!0});break;case"child_moved":oA(this._delegate,l,h,{onlyOnce:!0});break;default:throw new Error(Wn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise},e.prototype.limitToFirst=function(t){return me("Query.limitToFirst",1,1,arguments.length),new e(this.database,Ur(this._delegate,AK(t)))},e.prototype.limitToLast=function(t){return me("Query.limitToLast",1,1,arguments.length),new e(this.database,Ur(this._delegate,RK(t)))},e.prototype.orderByChild=function(t){return me("Query.orderByChild",1,1,arguments.length),new e(this.database,Ur(this._delegate,PK(t)))},e.prototype.orderByKey=function(){return me("Query.orderByKey",0,0,arguments.length),new e(this.database,Ur(this._delegate,DK()))},e.prototype.orderByPriority=function(){return me("Query.orderByPriority",0,0,arguments.length),new e(this.database,Ur(this._delegate,MK()))},e.prototype.orderByValue=function(){return me("Query.orderByValue",0,0,arguments.length),new e(this.database,Ur(this._delegate,FK()))},e.prototype.startAt=function(t,n){return t===void 0&&(t=null),me("Query.startAt",0,2,arguments.length),new e(this.database,Ur(this._delegate,TK(t,n)))},e.prototype.startAfter=function(t,n){return t===void 0&&(t=null),me("Query.startAfter",0,2,arguments.length),new e(this.database,Ur(this._delegate,SK(t,n)))},e.prototype.endAt=function(t,n){return t===void 0&&(t=null),me("Query.endAt",0,2,arguments.length),new e(this.database,Ur(this._delegate,wK(t,n)))},e.prototype.endBefore=function(t,n){return t===void 0&&(t=null),me("Query.endBefore",0,2,arguments.length),new e(this.database,Ur(this._delegate,EK(t,n)))},e.prototype.equalTo=function(t,n){return me("Query.equalTo",1,2,arguments.length),new e(this.database,Ur(this._delegate,jK(t,n)))},e.prototype.toString=function(){return me("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return me("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if(me("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(t,n,r){var i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,qt(t,"cancel",i.cancel,!0),i.context=r,bC(t,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Wn(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return i},Object.defineProperty(e.prototype,"ref",{get:function(){return new ws(this.database,new Ti(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),ws=function(e){ee(t,e);function t(n,r){var i=e.call(this,n,new Nr(r._repo,r._path,new N1,!1))||this;return i.database=n,i._delegate=r,i}return t.prototype.getKey=function(){return me("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(n){return me("Reference.child",1,1,arguments.length),typeof n=="number"&&(n=String(n)),new t(this.database,Us(this._delegate,n))},t.prototype.getParent=function(){me("Reference.parent",0,0,arguments.length);var n=this._delegate.parent;return n?new t(this.database,n):null},t.prototype.getRoot=function(){return me("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(n,r){me("Reference.set",1,2,arguments.length),qt("Reference.set","onComplete",r,!0);var i=E0(this._delegate,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},t.prototype.update=function(n,r){if(me("Reference.update",1,2,arguments.length),Array.isArray(n)){for(var i={},s=0;s<n.length;++s)i[""+s]=n[s];n=i,on("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}br("Reference.update",this._delegate._path),qt("Reference.update","onComplete",r,!0);var u=yK(this._delegate,n);return r&&u.then(function(){return r(null)},function(c){return r(c)}),u},t.prototype.setWithPriority=function(n,r,i){me("Reference.setWithPriority",2,3,arguments.length),qt("Reference.setWithPriority","onComplete",i,!0);var s=mK(this._delegate,n,r);return i&&s.then(function(){return i(null)},function(u){return i(u)}),s},t.prototype.remove=function(n){me("Reference.remove",0,1,arguments.length),qt("Reference.remove","onComplete",n,!0);var r=vK(this._delegate);return n&&r.then(function(){return n(null)},function(i){return n(i)}),r},t.prototype.transaction=function(n,r,i){var s=this;me("Reference.transaction",1,3,arguments.length),qt("Reference.transaction","transactionUpdate",n,!1),qt("Reference.transaction","onComplete",r,!0),Kq("Reference.transaction","applyLocally",i,!0);var u=ZK(this._delegate,n,{applyLocally:i}).then(function(c){return new tH(c.committed,new tl(s.database,c.snapshot))});return r&&u.then(function(c){return r(null,c.committed,c.snapshot)},function(c){return r(c,!1,null)}),u},t.prototype.setPriority=function(n,r){me("Reference.setPriority",1,2,arguments.length),qt("Reference.setPriority","onComplete",r,!0);var i=gK(this._delegate,n);return r&&i.then(function(){return r(null)},function(s){return r(s)}),i},t.prototype.push=function(n,r){var i=this;me("Reference.push",0,2,arguments.length),qt("Reference.push","onComplete",r,!0);var s=pK(this._delegate,n),u=s.then(function(l){return new t(i.database,l)});r&&u.then(function(){return r(null)},function(l){return r(l)});var c=new t(this.database,s);return c.then=u.then.bind(u),c.catch=u.catch.bind(u,void 0),c},t.prototype.onDisconnect=function(){return br("Reference.onDisconnect",this._delegate._path),new eH(new dK(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(_P);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nd=function(){function e(t,n){var r=this;this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),GK(this._delegate,t,n,r)},e.prototype.ref=function(t){if(me("database.ref",0,1,arguments.length),t instanceof ws){var n=nA(this._delegate,t.toString());return new ws(this,n)}else{var n=hP(this._delegate,t);return new ws(this,n)}},e.prototype.refFromURL=function(t){var n="database.refFromURL";me(n,1,1,arguments.length);var r=nA(this._delegate,t);return new ws(this,r)},e.prototype.goOffline=function(){return me("database.goOffline",0,0,arguments.length),$K(this._delegate)},e.prototype.goOnline=function(){return me("database.goOnline",0,0,arguments.length),zK(this._delegate)},e.ServerValue={TIMESTAMP:YK(),increment:function(t){return XK(t)}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nH=function(){gs.forceDisallow(),$w.forceAllow()},rH=function(){$w.forceDisallow()},iH=function(){return gs.isAvailable()},oH=function(e,t){var n=e._delegate._repo.persistentConnection_;n.securityDebugCallback_=t},sH=function(e,t){oK(e._delegate._repo,t)},aH=function(e,t){sK(e._delegate._repo,t)},uH=function(e){return e._delegate._repo.dataUpdateCount},cH=function(e,t){return Qq(e._delegate._repo,t)};function lH(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,s=e.namespace,u=e.nodeAdmin,c=u===void 0?!1:u;zN(r);var l=new qN("auth-internal",new KN("database-standalone"));return l.setComponent(new wn("auth-internal",function(){return i},"PRIVATE")),{instance:new Nd(yP(t,l,void 0,n,c),t),namespace:s}}var fH=Object.freeze({__proto__:null,forceLongPolling:nH,forceWebSockets:rH,isWebSocketsAvailable:iH,setSecurityDebugCallback:oH,stats:sH,statsIncrementCounter:aH,dataUpdateCount:uH,interceptServerData:cH,initStandalone:lH});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hH=Ns;Ns.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Ns.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var dH=g1,pH=function(e){var t=Ns.prototype.put;return Ns.prototype.put=function(n,r,i,s){s!==void 0&&(s=e()),t.call(this,n,r,i,s)},function(){Ns.prototype.put=t}},vH=Ww,gH=function(e){return e._delegate._queryIdentifier},mH=function(e){HK(e)},yH=Object.freeze({__proto__:null,DataConnection:hH,RealTimeConnection:dH,hijackHash:pH,ConnectionTarget:vH,queryIdentifier:gH,forceRestClient:mH});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _H=Nd.ServerValue;function wH(e){zN(e.SDK_VERSION),e.INTERNAL.registerComponent(new wn("database",function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return new Nd(yP(i,s,u,r),i)},"PUBLIC").setServiceProps({Reference:ws,Query:_P,Database:Nd,DataSnapshot:tl,enableLogging:JN,INTERNAL:fH,ServerValue:_H,TEST_ACCESS:yH}).setMultipleInstances(!0)),e.registerVersion(iB,oB)}wH(fe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var k_=function(e,t){return k_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},k_(e,t)};function bH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");k_(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function wP(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var EH=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ie,T0=T0||{},be=EH||self;function Pd(){}function R_(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function rf(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function TH(e){return Object.prototype.hasOwnProperty.call(e,ly)&&e[ly]||(e[ly]=++IH)}var ly="closure_uid_"+(1e9*Math.random()>>>0),IH=0;function SH(e,t,n){return e.call.apply(e.bind,arguments)}function CH(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function sn(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?sn=SH:sn=CH,sn.apply(null,arguments)}function xh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function cn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(r,i,s){for(var u=Array(arguments.length-2),c=2;c<arguments.length;c++)u[c-2]=arguments[c];return t.prototype[i].apply(r,u)}}function Lo(){this.s=this.s,this.o=this.o}var AH=0,kH={};Lo.prototype.s=!1;Lo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),AH!=0)){var e=TH(this);delete kH[e]}};Lo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var bP=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},EP=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=typeof e=="string"?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function RH(e){e:{for(var t=wW,n=e.length,r=typeof e=="string"?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function uA(e){return Array.prototype.concat.apply([],arguments)}function I0(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Od(e){return/^[\s\xa0]*$/.test(e)}var cA=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Pn(e,t){return e.indexOf(t)!=-1}function fy(e,t){return e<t?-1:e>t?1:0}var On;e:{var lA=be.navigator;if(lA){var fA=lA.userAgent;if(fA){On=fA;break e}}On=""}function S0(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function TP(e){var t={};for(var n in e)t[n]=e[n];return t}var hA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function IP(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var s=0;s<hA.length;s++)n=hA[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function C0(e){return C0[" "](e),e}C0[" "]=Pd;function NH(e){var t=DH;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var PH=Pn(On,"Opera"),au=Pn(On,"Trident")||Pn(On,"MSIE"),SP=Pn(On,"Edge"),N_=SP||au,CP=Pn(On,"Gecko")&&!(Pn(On.toLowerCase(),"webkit")&&!Pn(On,"Edge"))&&!(Pn(On,"Trident")||Pn(On,"MSIE"))&&!Pn(On,"Edge"),OH=Pn(On.toLowerCase(),"webkit")&&!Pn(On,"Edge");function AP(){var e=be.document;return e?e.documentMode:void 0}var Dd;e:{var hy="",dy=function(){var e=On;if(CP)return/rv:([^\);]+)(\)|;)/.exec(e);if(SP)return/Edge\/([\d\.]+)/.exec(e);if(au)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(OH)return/WebKit\/(\S+)/.exec(e);if(PH)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(dy&&(hy=dy?dy[1]:""),au){var py=AP();if(py!=null&&py>parseFloat(hy)){Dd=String(py);break e}}Dd=hy}var DH={};function xH(){return NH(function(){for(var e=0,t=cA(String(Dd)).split("."),n=cA("9").split("."),r=Math.max(t.length,n.length),i=0;e==0&&i<r;i++){var s=t[i]||"",u=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],s[0].length==0&&u[0].length==0)break;e=fy(s[1].length==0?0:parseInt(s[1],10),u[1].length==0?0:parseInt(u[1],10))||fy(s[2].length==0,u[2].length==0)||fy(s[2],u[2]),s=s[3],u=u[3]}while(e==0)}return 0<=e})}var P_;if(be.document&&au){var dA=AP();P_=dA||parseInt(Dd,10)||void 0}else P_=void 0;var MH=P_,LH=function(){if(!be.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{be.addEventListener("test",Pd,t),be.removeEventListener("test",Pd,t)}catch{}return e}();function gn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}gn.prototype.h=function(){this.defaultPrevented=!0};function Il(e,t){if(gn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(CP){e:{try{C0(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:FH[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Il.Z.h.call(this)}}cn(Il,gn);var FH={2:"touch",3:"pen",4:"mouse"};Il.prototype.h=function(){Il.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var of="closure_listenable_"+(1e6*Math.random()|0),UH=0;function jH(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++UH,this.ca=this.fa=!1}function Up(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function jp(e){this.src=e,this.g={},this.h=0}jp.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var u=D_(e,t,r,i);return-1<u?(t=e[u],n||(t.fa=!1)):(t=new jH(t,this.src,s,!!r,i),t.fa=n,e.push(t)),t};function O_(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=bP(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Up(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function D_(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}var A0="closure_lm_"+(1e6*Math.random()|0),vy={};function kP(e,t,n,r,i){if(r&&r.once)return NP(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)kP(e,t[s],n,r,i);return null}return n=N0(n),e&&e[of]?e.N(t,n,rf(r)?!!r.capture:!!r,i):RP(e,t,n,!1,r,i)}function RP(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var u=rf(i)?!!i.capture:!!i,c=R0(e);if(c||(e[A0]=c=new jp(e)),n=c.add(t,n,r,u,s),n.proxy)return n;if(r=VH(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)LH||(i=u),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(OP(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function VH(){function e(n){return t.call(e.src,e.listener,n)}var t=BH;return e}function NP(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)NP(e,t[s],n,r,i);return null}return n=N0(n),e&&e[of]?e.O(t,n,rf(r)?!!r.capture:!!r,i):RP(e,t,n,!0,r,i)}function PP(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)PP(e,t[s],n,r,i);else r=rf(r)?!!r.capture:!!r,n=N0(n),e&&e[of]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=D_(s,n,r,i),-1<n&&(Up(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=R0(e))&&(t=e.g[t.toString()],e=-1,t&&(e=D_(t,n,r,i)),(n=-1<e?t[e]:null)&&k0(n))}function k0(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[of])O_(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(OP(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=R0(t))?(O_(n,e),n.h==0&&(n.src=null,t[A0]=null)):Up(e)}}}function OP(e){return e in vy?vy[e]:vy[e]="on"+e}function BH(e,t){if(e.ca)e=!0;else{t=new Il(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&k0(e),e=n.call(r,t)}return e}function R0(e){return e=e[A0],e instanceof jp?e:null}var gy="__closure_events_fn_"+(1e9*Math.random()>>>0);function N0(e){return typeof e=="function"?e:(e[gy]||(e[gy]=function(t){return e.handleEvent(t)}),e[gy])}function Yt(){Lo.call(this),this.i=new jp(this),this.P=this,this.I=null}cn(Yt,Lo);Yt.prototype[of]=!0;Yt.prototype.removeEventListener=function(e,t,n,r){PP(this,e,t,n,r)};function an(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,typeof t=="string")t=new gn(t,e);else if(t instanceof gn)t.target=t.target||e;else{var i=t;t=new gn(r,e),IP(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var u=t.g=n[s];i=Mh(u,r,!0,t)&&i}if(u=t.g=e,i=Mh(u,r,!0,t)&&i,i=Mh(u,r,!1,t)&&i,n)for(s=0;s<n.length;s++)u=t.g=n[s],i=Mh(u,r,!1,t)&&i}Yt.prototype.M=function(){if(Yt.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Up(n[r]);delete e.g[t],e.h--}}this.I=null};Yt.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Yt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Mh(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var u=t[s];if(u&&!u.ca&&u.capture==n){var c=u.listener,l=u.ia||u.src;u.fa&&O_(e.i,u),i=c.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var P0=be.JSON.stringify;function qH(){var e=xP,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var KH=function(){function e(){this.h=this.g=null}return e.prototype.add=function(t,n){var r=DP.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r},e}(),DP=new(function(){function e(t,n){this.i=t,this.j=n,this.h=0,this.g=null}return e.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},e}())(function(){return new HH},function(e){return e.reset()}),HH=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(t,n){this.h=t,this.g=n,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function WH(e){be.setTimeout(function(){throw e},0)}function O0(e,t){x_||GH(),M_||(x_(),M_=!0),xP.add(e,t)}var x_;function GH(){var e=be.Promise.resolve(void 0);x_=function(){e.then($H)}}var M_=!1,xP=new KH;function $H(){for(var e;e=qH();){try{e.h.call(e.g)}catch(n){WH(n)}var t=DP;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}M_=!1}function Vp(e,t){Yt.call(this),this.h=e||1,this.g=t||be,this.j=sn(this.kb,this),this.l=Date.now()}cn(Vp,Yt);ie=Vp.prototype;ie.da=!1;ie.S=null;ie.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),an(this,"tick"),this.da&&(D0(this),this.start()))}};ie.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function D0(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}ie.M=function(){Vp.Z.M.call(this),D0(this),delete this.g};function x0(e,t,n){if(typeof e=="function")n&&(e=sn(e,n));else if(e&&typeof e.handleEvent=="function")e=sn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:be.setTimeout(e,t||0)}function MP(e){e.g=x0(function(){e.g=null,e.i&&(e.i=!1,MP(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}var zH=function(e){bH(t,e);function t(n,r){var i=e.call(this)||this;return i.m=n,i.j=r,i.h=null,i.i=!1,i.g=null,i}return t.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:MP(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Lo);function Sl(e){Lo.call(this),this.h=e,this.g={}}cn(Sl,Lo);var pA=[];function LP(e,t,n,r){Array.isArray(n)||(n&&(pA[0]=n.toString()),n=pA);for(var i=0;i<n.length;i++){var s=kP(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function FP(e){S0(e.g,function(t,n){this.g.hasOwnProperty(n)&&k0(t)},e),e.g={}}Sl.prototype.M=function(){Sl.Z.M.call(this),FP(this)};Sl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Bp(){this.g=!0}Bp.prototype.Aa=function(){this.g=!1};function QH(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var u="",c=s.split("&"),l=0;l<c.length;l++){var h=c[l].split("=");if(1<h.length){var d=h[0];h=h[1];var v=d.split("_");u=2<=v.length&&v[1]=="type"?u+(d+"="+h+"&"):u+(d+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+u})}function YH(e,t,n,r,i,s,u){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+u})}function Ka(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+JH(e,n)+(r?" "+r:"")})}function XH(e,t){e.info(function(){return"TIMEOUT: "+t})}Bp.prototype.info=function(){};function JH(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var u=1;u<i.length;u++)i[u]=""}}}}return P0(n)}catch{return t}}var Js={},vA=null;function qp(){return vA=vA||new Yt}Js.Ma="serverreachability";function UP(e){gn.call(this,Js.Ma,e)}cn(UP,gn);function Cl(e){var t=qp();an(t,new UP(t,e))}Js.STAT_EVENT="statevent";function jP(e,t){gn.call(this,Js.STAT_EVENT,e),this.stat=t}cn(jP,gn);function xn(e){var t=qp();an(t,new jP(t,e))}Js.Na="timingevent";function VP(e,t){gn.call(this,Js.Na,e),this.size=t}cn(VP,gn);function sf(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return be.setTimeout(function(){e()},t)}var Kp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},BP={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function M0(){}M0.prototype.h=null;function gA(e){return e.h||(e.h=e.i())}function qP(){}var af={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function L0(){gn.call(this,"d")}cn(L0,gn);function F0(){gn.call(this,"c")}cn(F0,gn);var L_;function Hp(){}cn(Hp,M0);Hp.prototype.g=function(){return new XMLHttpRequest};Hp.prototype.i=function(){return{}};L_=new Hp;function uf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Sl(this),this.P=ZH,e=N_?125:void 0,this.W=new Vp(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new KP}function KP(){this.i=null,this.g="",this.h=!1}var ZH=45e3,F_={},xd={};ie=uf.prototype;ie.setTimeout=function(e){this.P=e};function U_(e,t,n){e.K=1,e.v=Gp(qi(t)),e.s=n,e.U=!0,HP(e,null)}function HP(e,t){e.F=Date.now(),cf(e),e.A=qi(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),XP(n.h,"t",r),e.C=0,n=e.l.H,e.h=new KP,e.g=mO(e.l,n?t:null,!e.s),0<e.O&&(e.L=new zH(sn(e.Ia,e,e.g),e.O)),LP(e.V,e.g,"readystatechange",e.gb),t=e.H?TP(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Cl(1),QH(e.j,e.u,e.A,e.m,e.X,e.s)}ie.gb=function(e){e=e.target;var t=this.L;t&&Mi(e)==3?t.l():this.Ia(e)};ie.Ia=function(e){try{if(e==this.g)e:{var t=Mi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(t!=3||N_||this.g&&(this.h.h||this.g.ga()||wA(this.g)))){this.I||t!=4||n==7||(n==8||0>=r?Cl(3):Cl(2)),Wp(this);var i=this.g.ba();this.N=i;t:if(WP(this)){var s=wA(this.g);e="";var u=s.length,c=Mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){bs(this),nl(this);var l="";break t}this.h.i=new be.TextDecoder}for(n=0;n<u;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:c&&n==u-1});s.splice(0,u),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=i==200,YH(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var h,d=this.g;if((h=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Od(h)){var v=h;break t}}v=null}if(i=v)Ka(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,j_(this,i);else{this.i=!1,this.o=3,xn(12),bs(this),nl(this);break e}}this.U?(GP(this,t,l),N_&&this.i&&t==3&&(LP(this.V,this.W,"tick",this.fb),this.W.start())):(Ka(this.j,this.m,l,null),j_(this,l)),t==4&&bs(this),this.i&&!this.I&&(t==4?dO(this.l,this):(this.i=!1,cf(this)))}else i==400&&0<l.indexOf("Unknown SID")?(this.o=3,xn(12)):(this.o=0,xn(13)),bs(this),nl(this)}}}catch{}finally{}};function WP(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function GP(e,t,n){for(var r=!0,i;!e.I&&e.C<n.length;)if(i=eW(e,n),i==xd){t==4&&(e.o=4,xn(14),r=!1),Ka(e.j,e.m,null,"[Incomplete Response]");break}else if(i==F_){e.o=4,xn(15),Ka(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Ka(e.j,e.m,i,null),j_(e,i);WP(e)&&i!=xd&&i!=F_&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,xn(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),G0(t),t.L=!0,xn(11))):(Ka(e.j,e.m,n,"[Invalid Chunked Response]"),bs(e),nl(e))}ie.fb=function(){if(this.g){var e=Mi(this.g),t=this.g.ga();this.C<t.length&&(Wp(this),GP(this,e,t),this.i&&e!=4&&cf(this))}};function eW(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?xd:(n=Number(t.substring(n,r)),isNaN(n)?F_:(r+=1,r+n>t.length?xd:(t=t.substr(r,n),e.C=r+n,t)))}ie.cancel=function(){this.I=!0,bs(this)};function cf(e){e.Y=Date.now()+e.P,$P(e,e.P)}function $P(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=sf(sn(e.eb,e),t)}function Wp(e){e.B&&(be.clearTimeout(e.B),e.B=null)}ie.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(XH(this.j,this.A),this.K!=2&&(Cl(3),xn(17)),bs(this),this.o=2,nl(this)):$P(this,this.Y-e)};function nl(e){e.l.G==0||e.I||dO(e.l,e)}function bs(e){Wp(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,D0(e.W),FP(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function j_(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||V_(n.i,e))){if(n.I=e.N,!e.J&&V_(n.i,e)&&n.G==3){try{var r=n.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0)e:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)Ud(n),Qp(n);else break e;W0(n),xn(18)}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=sf(sn(n.ab,n),6e3));if(1>=eO(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Es(n,11)}else if((e.J||n.g==e)&&Ud(n),!Od(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],n.G==2)if(s[0]=="c"){n.J=s[1],n.la=s[2];var u=s[3];u!=null&&(n.ma=u,n.h.info("VER="+n.ma));var c=s[4];c!=null&&(n.za=c,n.h.info("SVER="+n.za));var l=s[5];l!=null&&typeof l=="number"&&0<l&&(r=1.5*l,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var h=e.g;if(h){var d=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(d){var v=r.i;!v.g&&(Pn(d,"spdy")||Pn(d,"quic")||Pn(d,"h2"))&&(v.j=v.l,v.g=new Set,v.h&&(V0(v,v.h),v.h=null))}if(r.D){var m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.sa=m,pt(r.F,r.D,m))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var y=e;if(r.oa=gO(r,r.H?r.la:null,r.W),y.J){tO(r.i,y);var w=y,E=r.K;E&&w.setTimeout(E),w.B&&(Wp(w),cf(w)),r.g=y}else fO(r);0<n.l.length&&Yp(n)}else s[0]!="stop"&&s[0]!="close"||Es(n,7);else n.G==3&&(s[0]=="stop"||s[0]=="close"?s[0]=="stop"?Es(n,7):H0(n):s[0]!="noop"&&n.j&&n.j.wa(s),n.A=0)}}Cl(4)}catch{}}function tW(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(R_(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function U0(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(R_(e)||typeof e=="string")EP(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if(R_(e)||typeof e=="string"){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=tW(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Fu(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Fu)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}ie=Fu.prototype;ie.R=function(){j0(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};ie.T=function(){return j0(this),this.g.concat()};function j0(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];js(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)r=e.g[t],js(i,r)||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}ie.get=function(e,t){return js(this.h,e)?this.h[e]:t};ie.set=function(e,t){js(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};ie.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};function js(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var zP=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function nW(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Vs(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Vs){this.g=t!==void 0?t:e.g,Md(this,e.j),this.s=e.s,Ld(this,e.i),Fd(this,e.m),this.l=e.l,t=e.h;var n=new Al;n.i=t.i,t.g&&(n.g=new Fu(t.g),n.h=t.h),mA(this,n),this.o=e.o}else e&&(n=String(e).match(zP))?(this.g=!!t,Md(this,n[1]||"",!0),this.s=rl(n[2]||""),Ld(this,n[3]||"",!0),Fd(this,n[4]),this.l=rl(n[5]||"",!0),mA(this,n[6]||"",!0),this.o=rl(n[7]||"")):(this.g=!!t,this.h=new Al(null,this.g))}Vs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Hc(t,yA,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Hc(t,yA,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(Hc(n,n.charAt(0)=="/"?aW:sW,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Hc(n,cW)),e.join("")};function qi(e){return new Vs(e)}function Md(e,t,n){e.j=n?rl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ld(e,t,n){e.i=n?rl(t,!0):t}function Fd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function mA(e,t,n){t instanceof Al?(e.h=t,lW(e.h,e.g)):(n||(t=Hc(t,uW)),e.h=new Al(t,e.g))}function pt(e,t,n){e.h.set(t,n)}function Gp(e){return pt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function rW(e){return e instanceof Vs?qi(e):new Vs(e,void 0)}function iW(e,t,n,r){var i=new Vs(null,void 0);return e&&Md(i,e),t&&Ld(i,t),n&&Fd(i,n),r&&(i.l=r),i}function rl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Hc(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,oW),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function oW(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var yA=/[#\/\?@]/g,sW=/[#\?:]/g,aW=/[#\?]/g,uW=/[#\?@]/g,cW=/#/g;function Al(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Fo(e){e.g||(e.g=new Fu,e.h=0,e.i&&nW(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}ie=Al.prototype;ie.add=function(e,t){Fo(this),this.i=null,e=Uu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function QP(e,t){Fo(e),t=Uu(e,t),js(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,js(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&j0(e)))}function YP(e,t){return Fo(e),t=Uu(e,t),js(e.g.h,t)}ie.forEach=function(e,t){Fo(this),this.g.forEach(function(n,r){EP(n,function(i){e.call(t,i,r,this)},this)},this)};ie.T=function(){Fo(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n};ie.R=function(e){Fo(this);var t=[];if(typeof e=="string")YP(this,e)&&(t=uA(t,this.g.get(Uu(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=uA(t,e[n])}return t};ie.set=function(e,t){return Fo(this),this.i=null,e=Uu(this,e),YP(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};ie.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function XP(e,t,n){QP(e,t),0<n.length&&(e.i=null,e.g.set(Uu(e,t),I0(n)),e.h+=n.length)}ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var u=i;r[s]!==""&&(u+="="+encodeURIComponent(String(r[s]))),e.push(u)}}return this.i=e.join("&")};function Uu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function lW(e,t){t&&!e.j&&(Fo(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(QP(this,r),XP(this,i,n))},e)),e.j=t}var fW=function(){function e(t,n){this.h=t,this.g=n}return e}();function JP(e){this.l=e||hW,be.PerformanceNavigationTiming?(e=be.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(be.g&&be.g.Ea&&be.g.Ea()&&be.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var hW=10;function ZP(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function eO(e){return e.h?1:e.g?e.g.size:0}function V_(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function V0(e,t){e.g?e.g.add(t):e.h=t}function tO(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}JP.prototype.cancel=function(){var e,t;if(this.i=nO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=wP(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}};function nO(e){var t,n;if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){var r=e.i;try{for(var i=wP(e.g.values()),s=i.next();!s.done;s=i.next()){var u=s.value;r=r.concat(u.D)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return I0(e.i)}function B0(){}B0.prototype.stringify=function(e){return be.JSON.stringify(e,void 0)};B0.prototype.parse=function(e){return be.JSON.parse(e,void 0)};function dW(){this.g=new B0}function pW(e,t,n){var r=n||"";try{U0(e,function(i,s){var u=i;rf(i)&&(u=P0(i)),t.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function vW(e,t){var n=new Bp;if(be.Image){var r=new Image;r.onload=xh(Lh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=xh(Lh,n,r,"TestLoadImage: error",!1,t),r.onabort=xh(Lh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=xh(Lh,n,r,"TestLoadImage: timeout",!1,t),be.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Lh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function lf(e){this.l=e.$b||null,this.j=e.ib||!1}cn(lf,M0);lf.prototype.g=function(){return new $p(this.l,this.j)};lf.prototype.i=function(e){return function(){return e}}({});function $p(e,t){Yt.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=q0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cn($p,Yt);var q0=0;ie=$p.prototype;ie.open=function(e,t){if(this.readyState!=q0)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,kl(this)};ie.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||be).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ff(this)),this.readyState=q0};ie.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,kl(this)),this.g&&(this.readyState=3,kl(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof be.ReadableStream!="undefined"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rO(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function rO(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}ie.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ff(this):kl(this),this.readyState==3&&rO(this)}};ie.Ua=function(e){this.g&&(this.response=this.responseText=e,ff(this))};ie.Ta=function(e){this.g&&(this.response=e,ff(this))};ie.ha=function(){this.g&&ff(this)};function ff(e){e.readyState=4,e.l=null,e.j=null,e.A=null,kl(e)}ie.setRequestHeader=function(e,t){this.v.append(e,t)};ie.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};ie.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function kl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty($p.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var gW=be.JSON.parse;function Pt(e){Yt.call(this),this.headers=new Fu,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=iO,this.K=this.L=!1}cn(Pt,Yt);var iO="",mW=/^https?$/i,yW=["POST","PUT"];ie=Pt.prototype;ie.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():L_.g(),this.C=this.u?gA(this.u):gA(L_),this.g.onreadystatechange=sn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){_A(this,s);return}e=n||"";var i=new Fu(this.headers);r&&U0(r,function(s,u){i.set(u,s)}),r=RH(i.T()),n=be.FormData&&e instanceof be.FormData,!(0<=bP(yW,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{aO(this),0<this.B&&((this.K=_W(this.g))?(this.g.timeout=this.B,this.g.ontimeout=sn(this.pa,this)):this.A=x0(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){_A(this,s)}};function _W(e){return au&&xH()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function wW(e){return e.toLowerCase()=="content-type"}ie.pa=function(){typeof T0!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,an(this,"timeout"),this.abort(8))};function _A(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,oO(e),zp(e)}function oO(e){e.D||(e.D=!0,an(e,"complete"),an(e,"error"))}ie.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,an(this,"complete"),an(this,"abort"),zp(this))};ie.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zp(this,!0)),Pt.Z.M.call(this)};ie.Fa=function(){this.s||(this.F||this.v||this.l?sO(this):this.cb())};ie.cb=function(){sO(this)};function sO(e){if(e.h&&typeof T0!="undefined"&&(!e.C[1]||Mi(e)!=4||e.ba()!=2)){if(e.v&&Mi(e)==4)x0(e.Fa,0,e);else if(an(e,"readystatechange"),Mi(e)==4){e.h=!1;try{var t=e.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=t===0){var s=String(e.H).match(zP)[1]||null;if(!s&&be.self&&be.self.location){var u=be.self.location.protocol;s=u.substr(0,u.length-1)}i=!mW.test(s?s.toLowerCase():"")}r=i}if(r)an(e,"complete"),an(e,"success");else{e.m=6;try{var c=2<Mi(e)?e.g.statusText:""}catch{c=""}e.j=c+" ["+e.ba()+"]",oO(e)}}finally{zp(e)}}}}function zp(e,t){if(e.g){aO(e);var n=e.g,r=e.C[0]?Pd:null;e.g=null,e.C=null,t||an(e,"ready");try{n.onreadystatechange=r}catch{}}}function aO(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(be.clearTimeout(e.A),e.A=null)}function Mi(e){return e.g?e.g.readyState:0}ie.ba=function(){try{return 2<Mi(this)?this.g.status:-1}catch{return-1}};ie.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};ie.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),gW(t)}};function wA(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case iO:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}ie.Da=function(){return this.m};ie.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function bW(e){var t="";return S0(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function K0(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=bW(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):pt(e,t,n))}function Uc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function uO(e){this.za=0,this.l=[],this.h=new Bp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Uc("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Uc("baseRetryDelayMs",5e3,e),this.$a=Uc("retryDelaySeedMs",1e4,e),this.Ya=Uc("forwardChannelMaxRetries",2,e),this.ra=Uc("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new JP(e&&e.concurrentRequestLimit),this.Ca=new dW,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}ie=uO.prototype;ie.ma=8;ie.G=1;function H0(e){if(cO(e),e.G==3){var t=e.V++,n=qi(e.F);pt(n,"SID",e.J),pt(n,"RID",t),pt(n,"TYPE","terminate"),hf(e,n),t=new uf(e,e.h,t,void 0),t.K=2,t.v=Gp(qi(n)),n=!1,be.navigator&&be.navigator.sendBeacon&&(n=be.navigator.sendBeacon(t.v.toString(),"")),!n&&be.Image&&(new Image().src=t.v,n=!0),n||(t.g=mO(t.l,null),t.g.ea(t.v)),t.F=Date.now(),cf(t)}vO(e)}ie.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function Qp(e){e.g&&(G0(e),e.g.cancel(),e.g=null)}function cO(e){Qp(e),e.u&&(be.clearTimeout(e.u),e.u=null),Ud(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&be.clearTimeout(e.m),e.m=null)}function my(e,t){e.l.push(new fW(e.Za++,t)),e.G==3&&Yp(e)}function Yp(e){ZP(e.i)||e.m||(e.m=!0,O0(e.Ha,e),e.C=0)}function EW(e,t){return eO(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=sf(sn(e.Ha,e,t),pO(e,e.C)),e.C++,!0)}ie.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new uf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=TP(n),IP(n,this.P)):n=this.P),this.o===null&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){t:{var s=this.l[i];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break e}if(r===4096||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=lO(this,t,r),i=qi(this.F),pt(i,"RID",e),pt(i,"CVER",22),this.D&&pt(i,"X-HTTP-Session-Id",this.D),hf(this,i),this.o&&n&&K0(i,this.o,n),V0(this.i,t),this.Ra&&pt(i,"TYPE","init"),this.ja?(pt(i,"$req",r),pt(i,"SID","null"),t.$=!0,U_(t,i,null)):U_(t,i,r),this.G=2}}else this.G==3&&(e?bA(this,e):this.l.length==0||ZP(this.i)||bA(this))};function bA(e,t){var n;t?n=t.m:n=e.V++;var r=qi(e.F);pt(r,"SID",e.J),pt(r,"RID",n),pt(r,"AID",e.U),hf(e,r),e.o&&e.s&&K0(r,e.o,e.s),n=new uf(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=lO(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),V0(e.i,n),U_(n,r,t)}function hf(e,t){e.j&&U0({},function(n,r){pt(t,r,n)})}function lO(e,t,n){n=Math.min(e.l.length,n);var r=e.j?sn(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var u=["count="+n];s==-1?0<n?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);for(var c=!0,l=0;l<n;l++){var h=i[l].h,d=i[l].g;if(h-=s,0>h)s=Math.max(0,i[l].h-100),c=!1;else try{pW(d,u,"req"+h+"_")}catch{r&&r(d)}}if(c){r=u.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function fO(e){e.g||e.u||(e.Y=1,O0(e.Ga,e),e.A=0)}function W0(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=sf(sn(e.Ga,e),pO(e,e.A)),e.A++,!0)}ie.Ga=function(){if(this.u=null,hO(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=sf(sn(this.bb,this),e)}};ie.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,xn(10),Qp(this),hO(this))};function G0(e){e.B!=null&&(be.clearTimeout(e.B),e.B=null)}function hO(e){e.g=new uf(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=qi(e.oa);pt(t,"RID","rpc"),pt(t,"SID",e.J),pt(t,"CI",e.N?"0":"1"),pt(t,"AID",e.U),hf(e,t),pt(t,"TYPE","xmlhttp"),e.o&&e.s&&K0(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Gp(qi(t)),n.s=null,n.U=!0,HP(n,e)}ie.ab=function(){this.v!=null&&(this.v=null,Qp(this),W0(this),xn(19))};function Ud(e){e.v!=null&&(be.clearTimeout(e.v),e.v=null)}function dO(e,t){var n=null;if(e.g==t){Ud(e),G0(e),e.g=null;var r=2}else if(V_(e.i,t))n=t.D,tO(e.i,t),r=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r=qp(),an(r,new VP(r,n,t,i)),Yp(e)}else fO(e);else if(i=t.o,i==3||i==0&&0<e.I||!(r==1&&EW(e,t)||r==2&&W0(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Es(e,5);break;case 4:Es(e,10);break;case 3:Es(e,6);break;default:Es(e,2)}}}function pO(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Es(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var r=sn(e.jb,e);n||(n=new Vs("//www.google.com/images/cleardot.gif"),be.location&&be.location.protocol=="http"||Md(n,"https"),Gp(n)),vW(n.toString(),r)}else xn(2);e.G=0,e.j&&e.j.va(t),vO(e),cO(e)}ie.jb=function(e){e?(this.h.info("Successfully pinged google.com"),xn(2)):(this.h.info("Failed to ping google.com"),xn(1))};function vO(e){e.G=0,e.I=-1,e.j&&((nO(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,I0(e.l),e.l.length=0),e.j.ua())}function gO(e,t,n){var r=rW(n);if(r.i!="")t&&Ld(r,t+"."+r.i),Fd(r,r.m);else{var i=be.location;r=iW(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&S0(e.aa,function(s,u){pt(r,u,s)}),t=e.D,n=e.sa,t&&n&&pt(r,t,n),pt(r,"VER",e.ma),hf(e,r),r}function mO(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new Pt(new lf({ib:!0})):new Pt(e.qa),t.L=e.H,t}function yO(){}ie=yO.prototype;ie.xa=function(){};ie.wa=function(){};ie.va=function(){};ie.ua=function(){};ie.Oa=function(){};function jd(){if(au&&!(10<=Number(MH)))throw Error("Environmental error: no available transport.")}jd.prototype.g=function(e,t){return new hr(e,t)};function hr(e,t){Yt.call(this),this.g=new uO(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Od(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Od(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new ju(this)}cn(hr,Yt);hr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),O0(sn(e.hb,e,t))),xn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=gO(e,null,e.W),Yp(e)};hr.prototype.close=function(){H0(this.g)};hr.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,my(this.g,t)}else this.v?(t={},t.__data__=P0(e),my(this.g,t)):my(this.g,e)};hr.prototype.M=function(){this.g.j=null,delete this.j,H0(this.g),delete this.g,hr.Z.M.call(this)};function _O(e){L0.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}cn(_O,L0);function wO(){F0.call(this),this.status=1}cn(wO,F0);function ju(e){this.g=e}cn(ju,yO);ju.prototype.xa=function(){an(this.g,"a")};ju.prototype.wa=function(e){an(this.g,new _O(e))};ju.prototype.va=function(e){an(this.g,new wO(e))};ju.prototype.ua=function(){an(this.g,"b")};jd.prototype.createWebChannel=jd.prototype.g;hr.prototype.send=hr.prototype.u;hr.prototype.open=hr.prototype.m;hr.prototype.close=hr.prototype.close;Kp.NO_ERROR=0;Kp.TIMEOUT=8;Kp.HTTP_ERROR=6;BP.COMPLETE="complete";qP.EventType=af;af.OPEN="a";af.CLOSE="b";af.ERROR="c";af.MESSAGE="d";Yt.prototype.listen=Yt.prototype.N;Pt.prototype.listenOnce=Pt.prototype.O;Pt.prototype.getLastError=Pt.prototype.La;Pt.prototype.getLastErrorCode=Pt.prototype.Da;Pt.prototype.getStatus=Pt.prototype.ba;Pt.prototype.getResponseJson=Pt.prototype.Qa;Pt.prototype.getResponseText=Pt.prototype.ga;Pt.prototype.send=Pt.prototype.ea;var TW=function(){return new jd},IW=function(){return qp()},yy=Kp,SW=BP,CW=Js,EA={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},AW=lf,Fh=qP,kW=Pt;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();sr.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return ee(t,e),t}(Error),Wr=new zs("@firebase/firestore");function B_(){return Wr.logLevel}function z(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Wr.logLevel<=Me.DEBUG){var r=t.map($0);Wr.debug.apply(Wr,Ne(["Firestore (8.10.1): "+e],r))}}function Nt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Wr.logLevel<=Me.ERROR){var r=t.map($0);Wr.error.apply(Wr,Ne(["Firestore (8.10.1): "+e],r))}}function Rl(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Wr.logLevel<=Me.WARN){var r=t.map($0);Wr.warn.apply(Wr,Ne(["Firestore (8.10.1): "+e],r))}}function $0(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw Nt(t),new Error(t)}function ye(e,t){e||le()}function Z(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RW(e){var t=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bO=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=RW(40),s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length));return r},e}();function Ue(e,t){return e<t?-1:e>t?1:0}function uu(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function EO(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?Ue(this.nanoseconds,t.nanoseconds):Ue(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),xe=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new Gn(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Zs(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function TO(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IO=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&le(),r===void 0?r=t.length-n:r>t.length-n&&le(),this.segments=t,this.offset=n,this.len=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.comparator(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return this.length===0},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var s=t.get(i),u=n.get(i);if(s<u)return-1;if(s>u)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),Ge=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ee(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],s=0,u=n;s<u.length;s++){var c=u[s];if(c.indexOf("//")>=0)throw new B(O.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");i.push.apply(i,c.split("/").filter(function(l){return l.length>0}))}return new t(i)},t.emptyPath=function(){return new t([])},t}(IO),NW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$r=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ee(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.isValidIdentifier=function(n){return NW.test(n)},t.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(n){for(var r=[],i="",s=0,u=function(){if(i.length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},c=!1;s<n.length;){var l=n[s];if(l==="\\"){if(s+1===n.length)throw new B(O.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var h=n[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new B(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=h,s+=2}else l==="`"?(c=!c,s++):l!=="."||c?(i+=l,s++):(u(),s++)}if(u(),c)throw new B(O.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.emptyPath=function(){return new t([])},t}(IO),cu=function(){function e(t){this.fields=t,t.sort($r.comparator)}return e.prototype.covers=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return uu(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),Mn=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return Ue(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();Mn.EMPTY_BYTE_STRING=new Mn("");var PW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Do(e){if(ye(!!e),typeof e=="string"){var t=0,n=PW.exec(e);if(ye(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Rt(e.seconds),nanos:Rt(e.nanos)}}function Rt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function lu(e){return typeof e=="string"?Mn.fromBase64String(e):Mn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function SO(e){var t=e.mapValue.fields.__previous_value__;return z0(t)?SO(t):t}function Nl(e){var t=Do(e.mapValue.fields.__local_write_time__.timestampValue);return new Gn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(e){return e==null}function Vd(e){return e===0&&1/e==-1/0}function CO(e){return typeof e=="number"&&Number.isInteger(e)&&!Vd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e(Ge.fromString(t))},e.fromName=function(t){return new e(Ge.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&Ge.comparator(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,n){return Ge.comparator(t.path,n.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new Ge(t.slice()))},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?z0(e)?4:10:le()}function Ei(e,t){var n=Bs(e);if(n!==Bs(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Nl(e).isEqual(Nl(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var s=Do(r.timestampValue),u=Do(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return lu(r.bytesValue).isEqual(lu(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return Rt(r.geoPointValue.latitude)===Rt(i.geoPointValue.latitude)&&Rt(r.geoPointValue.longitude)===Rt(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Rt(r.integerValue)===Rt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var s=Rt(r.doubleValue),u=Rt(i.doubleValue);return s===u?Vd(s)===Vd(u):isNaN(s)&&isNaN(u)}return!1}(e,t);case 9:return uu(e.arrayValue.values||[],t.arrayValue.values||[],Ei);case 10:return function(r,i){var s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(TA(s)!==TA(u))return!1;for(var c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!Ei(s[c],u[c])))return!1;return!0}(e,t);default:return le()}}function Pl(e,t){return(e.values||[]).find(function(n){return Ei(n,t)})!==void 0}function fu(e,t){var n=Bs(e),r=Bs(t);if(n!==r)return Ue(n,r);switch(n){case 0:return 0;case 1:return Ue(e.booleanValue,t.booleanValue);case 2:return function(i,s){var u=Rt(i.integerValue||i.doubleValue),c=Rt(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(e,t);case 3:return IA(e.timestampValue,t.timestampValue);case 4:return IA(Nl(e),Nl(t));case 5:return Ue(e.stringValue,t.stringValue);case 6:return function(i,s){var u=lu(i),c=lu(s);return u.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,s){for(var u=i.split("/"),c=s.split("/"),l=0;l<u.length&&l<c.length;l++){var h=Ue(u[l],c[l]);if(h!==0)return h}return Ue(u.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,s){var u=Ue(Rt(i.latitude),Rt(s.latitude));return u!==0?u:Ue(Rt(i.longitude),Rt(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,s){for(var u=i.values||[],c=s.values||[],l=0;l<u.length&&l<c.length;++l){var h=fu(u[l],c[l]);if(h)return h}return Ue(u.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,s){var u=i.fields||{},c=Object.keys(u),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(var d=0;d<c.length&&d<h.length;++d){var v=Ue(c[d],h[d]);if(v!==0)return v;var m=fu(u[c[d]],l[h[d]]);if(m!==0)return m}return Ue(c.length,h.length)}(e.mapValue,t.mapValue);default:throw le()}}function IA(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ue(e,t);var n=Do(e),r=Do(t),i=Ue(n.seconds,r.seconds);return i!==0?i:Ue(n.nanos,r.nanos)}function Q0(e){return q_(e)}function q_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var i=Do(r);return"time("+i.seconds+","+i.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?lu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,he.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",s=!0,u=0,c=r.values||[];u<c.length;u++)s?s=!1:i+=",",i+=q_(c[u]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",s=!0,u=0,c=Object.keys(r.fields||{}).sort();u<c.length;u++){var l=c[u];s?s=!1:i+=",",i+=l+":"+q_(r.fields[l])}return i+"}"}(e.mapValue):le();var t,n}function Bd(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function K_(e){return!!e&&"integerValue"in e}function Y0(e){return!!e&&"arrayValue"in e}function SA(e){return!!e&&"nullValue"in e}function CA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function td(e){return!!e&&"mapValue"in e}function il(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Zs(e.mapValue.fields,function(i,s){return t.mapValue.fields[i]=il(s)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=il(e.arrayValue.values[r]);return n}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var or=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var n=this.value,r=0;r<t.length-1;++r)if(!td(n=(n.mapValue.fields||{})[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=il(n)},e.prototype.setAll=function(t){var n=this,r=$r.emptyPath(),i={},s=[];t.forEach(function(c,l){if(!r.isImmediateParentOf(l)){var h=n.getFieldsMap(r);n.applyChanges(h,i,s),i={},s=[],r=l.popLast()}c?i[l.lastSegment()]=il(c):s.push(l.lastSegment())});var u=this.getFieldsMap(r);this.applyChanges(u,i,s)},e.prototype.delete=function(t){var n=this.field(t.popLast());td(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return Ei(this.value,t.value)},e.prototype.getFieldsMap=function(t){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<t.length;++r){var i=n.mapValue.fields[t.get(r)];td(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields},e.prototype.applyChanges=function(t,n,r){Zs(n,function(c,l){return t[c]=l});for(var i=0,s=r;i<s.length;i++){var u=s[i];delete t[u]}},e.prototype.clone=function(){return new e(il(this.value))},e}();function AO(e){var t=[];return Zs(e.fields,function(n,r){var i=new $r([n]);if(td(r)){var s=AO(r.mapValue).fields;if(s.length===0)t.push(i);else for(var u=0,c=s;u<c.length;u++){var l=c[u];t.push(i.child(l))}}else t.push(i)}),new cu(t)}var un=function(){function e(t,n,r,i,s){this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=s}return e.newInvalidDocument=function(t){return new e(t,0,xe.min(),or.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,or.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,or.empty(),2)},e.prototype.convertToFoundDocument=function(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=or.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=or.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return this.documentType!==0},e.prototype.isFoundDocument=function(){return this.documentType===1},e.prototype.isNoDocument=function(){return this.documentType===2},e.prototype.isUnknownDocument=function(){return this.documentType===3},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),OW=function(e,t,n,r,i,s,u){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),u===void 0&&(u=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=u,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(e,t,n,r,i,s,u){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),u===void 0&&(u=null),new OW(e,t,n,r,i,s,u)}function df(e){var t=Z(e);if(t.h===null){var n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+Q0(i.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),ea(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Kd(t.startAt)),t.endAt&&(n+="|ub:",n+=Kd(t.endAt)),t.h=n}return t.h}function Xp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!VW(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],s=t.filters[r],i.op!==s.op||!i.field.isEqual(s.field)||!Ei(i.value,s.value))return!1;var i,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!RA(e.startAt,t.startAt)&&RA(e.endAt,t.endAt)}function qd(e){return he.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var ar=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).field=n,s.op=r,s.value=i,s}return ee(t,e),t.create=function(n,r,i){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,i):new DW(n,r,i):r==="array-contains"?new LW(n,i):r==="in"?new FW(n,i):r==="not-in"?new UW(n,i):r==="array-contains-any"?new jW(n,i):new t(n,r,i)},t.l=function(n,r,i){return r==="in"?new xW(n,i):new MW(n,i)},t.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(fu(r,this.value)):r!==null&&Bs(this.value)===Bs(r)&&this.m(fu(r,this.value))},t.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return le()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),DW=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,i)||this).key=he.fromName(i.referenceValue),s}return ee(t,e),t.prototype.matches=function(n){var r=he.comparator(n.key,this.key);return this.m(r)},t}(ar),xW=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=kO("in",r),i}return ee(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(ar),MW=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=kO("not-in",r),i}return ee(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(ar);function kO(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return he.fromName(r.referenceValue)})}var LW=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return ee(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return Y0(r)&&Pl(r.arrayValue,this.value)},t}(ar),FW=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return ee(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&Pl(this.value.arrayValue,r)},t}(ar),UW=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return ee(t,e),t.prototype.matches=function(n){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!Pl(this.value.arrayValue,r)},t}(ar),jW=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return ee(t,e),t.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!Y0(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(s){return Pl(r.value.arrayValue,s)})},t}(ar),Ol=function(e,t){this.position=e,this.before=t};function Kd(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return Q0(t)}).join(",")}var Qa=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function VW(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function kA(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var s=t[i],u=e.position[i];if(r=s.field.isKeyField()?he.comparator(he.fromName(u.referenceValue),n.key):fu(u,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function RA(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ei(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $i=function(e,t,n,r,i,s,u,c){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s="F"),u===void 0&&(u=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=u,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt};function RO(e,t,n,r,i,s,u,c){return new $i(e,t,n,r,i,s,u,c)}function Vu(e){return new $i(e)}function nd(e){return!ea(e.limit)&&e.limitType==="F"}function Hd(e){return!ea(e.limit)&&e.limitType==="L"}function X0(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function J0(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Z0(e){return e.collectionGroup!==null}function hu(e){var t=Z(e);if(t.p===null){t.p=[];var n=J0(t),r=X0(t);if(n!==null&&r===null)n.isKeyField()||t.p.push(new Qa(n)),t.p.push(new Qa($r.keyField(),"asc"));else{for(var i=!1,s=0,u=t.explicitOrderBy;s<u.length;s++){var c=u[s];t.p.push(c),c.field.isKeyField()&&(i=!0)}if(!i){var l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Qa($r.keyField(),l))}}}return t.p}function Rr(e){var t=Z(e);if(!t.T)if(t.limitType==="F")t.T=AA(t.path,t.collectionGroup,hu(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=hu(t);r<i.length;r++){var s=i[r],u=s.dir==="desc"?"asc":"desc";n.push(new Qa(s.field,u))}var c=t.endAt?new Ol(t.endAt.position,!t.endAt.before):null,l=t.startAt?new Ol(t.startAt.position,!t.startAt.before):null;t.T=AA(t.path,t.collectionGroup,n,t.filters,t.limit,c,l)}return t.T}function NO(e,t,n){return new $i(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function pf(e,t){return Xp(Rr(e),Rr(t))&&e.limitType===t.limitType}function PO(e){return df(Rr(e))+"|lt:"+e.limitType}function H_(e){return"Query(target="+function(t){var n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+Q0(i.value);var i}).join(", ")+"]"),ea(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Kd(t.startAt)),t.endAt&&(n+=", endAt: "+Kd(t.endAt)),"Target("+n+")"}(Rr(e))+"; limitType="+e.limitType+")"}function vf(e,t){return t.isFoundDocument()&&function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):he.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(e,t)&&function(n,r){for(var i=0,s=n.explicitOrderBy;i<s.length;i++){var u=s[i];if(!u.field.isKeyField()&&r.data.field(u.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var i=0,s=n.filters;i<s.length;i++)if(!s[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!kA(n.startAt,hu(n),r))&&(!n.endAt||!kA(n.endAt,hu(n),r))}(e,t)}function OO(e){return function(t,n){for(var r=!1,i=0,s=hu(e);i<s.length;i++){var u=s[i],c=BW(u,t,n);if(c!==0)return c;r=r||u.field.isKeyField()}return 0}}function BW(e,t,n){var r=e.field.isKeyField()?he.comparator(t.key,n.key):function(i,s,u){var c=s.data.field(i),l=u.data.field(i);return c!==null&&l!==null?fu(c,l):le()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vd(t)?"-0":t}}function xO(e){return{integerValue:""+e}}function MO(e,t){return CO(t)?xO(t):DO(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jp=function(){this._=void 0};function qW(e,t,n){return e instanceof du?function(r,i){var s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,t):e instanceof qs?FO(e,t):e instanceof Ks?UO(e,t):function(r,i){var s=LO(r,i),u=NA(s)+NA(r.A);return K_(s)&&K_(r.A)?xO(u):DO(r.R,u)}(e,t)}function KW(e,t,n){return e instanceof qs?FO(e,t):e instanceof Ks?UO(e,t):n}function LO(e,t){return e instanceof pu?K_(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}var du=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ee(t,e),t}(Jp),qs=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return ee(t,e),t}(Jp);function FO(e,t){for(var n=jO(t),r=function(u){n.some(function(c){return Ei(c,u)})||n.push(u)},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Ks=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return ee(t,e),t}(Jp);function UO(e,t){for(var n=jO(t),r=function(u){n=n.filter(function(c){return!Ei(c,u)})},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var pu=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).R=n,i.A=r,i}return ee(t,e),t}(Jp);function NA(e){return Rt(e.integerValue||e.doubleValue)}function jO(e){return Y0(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gf=function(e,t){this.field=e,this.transform=t},HW=function(e,t){this.version=e,this.transformResults=t},vn=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function rd(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var Zp=function(){};function WW(e,t,n){e instanceof mf?function(r,i,s){var u=r.value.clone(),c=DA(r.fieldTransforms,i,s.transformResults);u.setAll(c),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(e,t,n):e instanceof Uo?function(r,i,s){if(rd(r.precondition,i)){var u=DA(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(VO(r)),c.setAll(u),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}else i.convertToUnknownDocument(s.version)}(e,t,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function W_(e,t,n){e instanceof mf?function(r,i,s){if(rd(r.precondition,i)){var u=r.value.clone(),c=xA(r.fieldTransforms,s,i);u.setAll(c),i.convertToFoundDocument(OA(i),u).setHasLocalMutations()}}(e,t,n):e instanceof Uo?function(r,i,s){if(rd(r.precondition,i)){var u=xA(r.fieldTransforms,s,i),c=i.data;c.setAll(VO(r)),c.setAll(u),i.convertToFoundDocument(OA(i),c).setHasLocalMutations()}}(e,t,n):function(r,i){rd(r.precondition,i)&&i.convertToNoDocument(xe.min())}(e,t)}function GW(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var s=i[r],u=t.data.field(s.field),c=LO(s.transform,u||null);c!=null&&(n==null&&(n=or.empty()),n.set(s.field,c))}return n||null}function PA(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&uu(n,r,function(i,s){return function(u,c){return u.field.isEqual(c.field)&&function(l,h){return l instanceof qs&&h instanceof qs||l instanceof Ks&&h instanceof Ks?uu(l.elements,h.elements,Ei):l instanceof pu&&h instanceof pu?Ei(l.A,h.A):l instanceof du&&h instanceof du}(u.transform,c.transform)}(i,s)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function OA(e){return e.isFoundDocument()?e.version:xe.min()}var mf=function(e){function t(n,r,i,s){s===void 0&&(s=[]);var u=this;return(u=e.call(this)||this).key=n,u.value=r,u.precondition=i,u.fieldTransforms=s,u.type=0,u}return ee(t,e),t}(Zp),Uo=function(e){function t(n,r,i,s,u){u===void 0&&(u=[]);var c=this;return(c=e.call(this)||this).key=n,c.data=r,c.fieldMask=i,c.precondition=s,c.fieldTransforms=u,c.type=1,c}return ee(t,e),t}(Zp);function VO(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function DA(e,t,n){var r=new Map;ye(e.length===n.length);for(var i=0;i<n.length;i++){var s=e[i],u=s.transform,c=t.data.field(s.field);r.set(s.field,KW(u,c,n[i]))}return r}function xA(e,t,n){for(var r=new Map,i=0,s=e;i<s.length;i++){var u=s[i],c=u.transform,l=n.data.field(u.field);r.set(u.field,qW(c,l,t))}return r}var kt,Be,yf=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ee(t,e),t}(Zp),eb=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ee(t,e),t}(Zp),$W=function(e){this.count=e};function BO(e){switch(e){case O.OK:return le();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return le()}}function qO(e){if(e===void 0)return Nt("GRPC error has no .code"),O.UNKNOWN;switch(e){case kt.OK:return O.OK;case kt.CANCELLED:return O.CANCELLED;case kt.UNKNOWN:return O.UNKNOWN;case kt.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case kt.INTERNAL:return O.INTERNAL;case kt.UNAVAILABLE:return O.UNAVAILABLE;case kt.UNAUTHENTICATED:return O.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case kt.NOT_FOUND:return O.NOT_FOUND;case kt.ALREADY_EXISTS:return O.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return O.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case kt.ABORTED:return O.ABORTED;case kt.OUT_OF_RANGE:return O.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return O.UNIMPLEMENTED;case kt.DATA_LOSS:return O.DATA_LOSS;default:return le()}}(Be=kt||(kt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En=function(){function e(t,n){this.comparator=t,this.root=n||vo.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,vo.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vo.BLACK,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new Uh(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new Uh(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Uh(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new Uh(this.root,t,this.comparator,!0)},e}(),Uh=function(){function e(t,n,r,i){this.isReverse=i,this.nodeStack=[];for(var s=1;!t.isEmpty();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(this.nodeStack.length===0)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),vo=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r!=null?r:e.RED,this.left=i!=null?i:e.EMPTY,this.right=s!=null?s:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,s){return new e(t!=null?t:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return(i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();var t=this.left.check();if(t!==this.right.check())throw le();return t+(this.isRed()?0:1)},e}();vo.EMPTY=null,vo.RED=!0,vo.BLACK=!1,vo.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw le()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw le()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new vo(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft=function(){function e(t){this.comparator=t,this.data=new En(this.comparator)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.forEachInRange=function(t,n){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}},e.prototype.forEachWhile=function(t,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null},e.prototype.getIterator=function(){return new MA(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new MA(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),MA=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),zW=new En(he.comparator);function Cr(){return zW}var QW=new En(he.comparator);function G_(){return QW}var YW=new En(he.comparator);function KO(){return YW}var XW=new Ft(he.comparator);function Ze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=XW,r=0,i=e;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var JW=new Ft(Ue);function ev(){return JW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tb=function(){function e(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,nb.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(xe.min(),r,ev(),Cr(),Ze())},e}(),nb=function(){function e(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(Mn.EMPTY_BYTE_STRING,n,Ze(),Ze(),Ze())},e}(),id=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},HO=function(e,t){this.targetId=e,this.V=t},WO=function(e,t,n,r){n===void 0&&(n=Mn.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},LA=function(){function e(){this.S=0,this.D=UA(),this.C=Mn.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},e.prototype.M=function(){var t=Ze(),n=Ze(),r=Ze();return this.D.forEach(function(i,s){switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new nb(this.C,this.N,t,n,r)},e.prototype.L=function(){this.k=!1,this.D=UA()},e.prototype.B=function(t,n){this.k=!0,this.D=this.D.insert(t,n)},e.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),ZW=function(){function e(t){this.W=t,this.G=new Map,this.H=Cr(),this.J=FA(),this.Y=new Ft(Ue)}return e.prototype.X=function(t){for(var n=0,r=t.v;n<r.length;n++){var i=r[n];t.P&&t.P.isFoundDocument()?this.Z(i,t.P):this.tt(i,t.key,t.P)}for(var s=0,u=t.removedTargetIds;s<u.length;s++)i=u[s],this.tt(i,t.key,t.P)},e.prototype.et=function(t){var n=this;this.forEachTarget(t,function(r){var i=n.nt(r);switch(t.state){case 0:n.st(r)&&i.O(t.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(t.resumeToken);break;case 2:i.K(),i.F||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(t.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(t.resumeToken));break;default:le()}})},e.prototype.forEachTarget=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.G.forEach(function(i,s){r.st(s)&&n(s)})},e.prototype.rt=function(t){var n=t.targetId,r=t.V.count,i=this.ot(n);if(i){var s=i.target;if(qd(s))if(r===0){var u=new he(s.path);this.tt(n,u,un.newNoDocument(u,xe.min()))}else ye(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},e.prototype.ut=function(t){var n=this,r=new Map;this.G.forEach(function(u,c){var l=n.ot(c);if(l){if(u.current&&qd(l.target)){var h=new he(l.target.path);n.H.get(h)!==null||n.at(c,h)||n.tt(c,h,un.newNoDocument(h,t))}u.$&&(r.set(c,u.M()),u.L())}});var i=Ze();this.J.forEach(function(u,c){var l=!0;c.forEachWhile(function(h){var d=n.ot(h);return!d||d.purpose===2||(l=!1,!1)}),l&&(i=i.add(u))});var s=new tb(t,r,this.Y,this.H,i);return this.H=Cr(),this.J=FA(),this.Y=new Ft(Ue),s},e.prototype.Z=function(t,n){if(this.st(t)){var r=this.at(t,n.key)?2:0;this.nt(t).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(t))}},e.prototype.tt=function(t,n,r){if(this.st(t)){var i=this.nt(t);this.at(t,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(t)),r&&(this.H=this.H.insert(n,r))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var n=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var n=this.G.get(t);return n||(n=new LA,this.G.set(t,n)),n},e.prototype.ht=function(t){var n=this.J.get(t);return n||(n=new Ft(Ue),this.J=this.J.insert(t,n)),n},e.prototype.st=function(t){var n=this.ot(t)!==null;return n||z("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.ot=function(t){var n=this.G.get(t);return n&&n.F?null:this.W.lt(t)},e.prototype.it=function(t){var n=this;this.G.set(t,new LA),this.W.getRemoteKeysForTarget(t).forEach(function(r){n.tt(t,r,null)})},e.prototype.at=function(t,n){return this.W.getRemoteKeysForTarget(t).has(n)},e}();function FA(){return new En(he.comparator)}function UA(){return new En(he.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eG={asc:"ASCENDING",desc:"DESCENDING"},tG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nG=function(e,t){this.databaseId=e,this.I=t};function Dl(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function GO(e,t){return e.I?t.toBase64():t.toUint8Array()}function rG(e,t){return Dl(e,t.toTimestamp())}function $t(e){return ye(!!e),xe.fromTimestamp(function(t){var n=Do(t);return new Gn(n.seconds,n.nanos)}(e))}function rb(e,t){return function(n){return new Ge(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function $O(e){var t=Ge.fromString(e);return ye(tD(t)),t}function xl(e,t){return rb(e.databaseId,t.path)}function di(e,t){var n=$O(t);if(n.get(1)!==e.databaseId.projectId)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new he(QO(n))}function $_(e,t){return rb(e.databaseId,t)}function zO(e){var t=$O(e);return t.length===4?Ge.emptyPath():QO(t)}function Ml(e){return new Ge(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function QO(e){return ye(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function jA(e,t,n){return{name:xl(e,t),fields:n.value.mapValue.fields}}function YO(e,t,n){var r=di(e,t.name),i=$t(t.updateTime),s=new or({mapValue:{fields:t.fields}}),u=un.newFoundDocument(r,i,s);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Wd(e,t){var n;if(t instanceof mf)n={update:jA(e,t.key,t.value)};else if(t instanceof yf)n={delete:xl(e,t.key)};else if(t instanceof Uo)n={update:jA(e,t.key,t.data),updateMask:uG(t.fieldMask)};else{if(!(t instanceof eb))return le();n={verify:xl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,s){var u=s.transform;if(u instanceof du)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof qs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ks)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof pu)return{fieldPath:s.field.canonicalString(),increment:u.A};throw le()}(0,r)})),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:rG(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le()}(e,t.precondition)),n}function VA(e,t){var n=t.currentDocument?function(h){return h.updateTime!==void 0?vn.updateTime($t(h.updateTime)):h.exists!==void 0?vn.exists(h.exists):vn.none()}(t.currentDocument):vn.none(),r=t.updateTransforms?t.updateTransforms.map(function(h){return function(d,v){var m=null;if("setToServerValue"in v)ye(v.setToServerValue==="REQUEST_TIME"),m=new du;else if("appendMissingElements"in v){var y=v.appendMissingElements.values||[];m=new qs(y)}else if("removeAllFromArray"in v){var w=v.removeAllFromArray.values||[];m=new Ks(w)}else"increment"in v?m=new pu(d,v.increment):le();var E=$r.fromServerFormat(v.fieldPath);return new gf(E,m)}(e,h)}):[];if(t.update){t.update.name;var i=di(e,t.update.name),s=new or({mapValue:{fields:t.update.fields}});if(t.updateMask){var u=function(h){var d=h.fieldPaths||[];return new cu(d.map(function(v){return $r.fromServerFormat(v)}))}(t.updateMask);return new Uo(i,s,u,n,r)}return new mf(i,s,n,r)}if(t.delete){var c=di(e,t.delete);return new yf(c,n)}if(t.verify){var l=di(e,t.verify);return new eb(l,n)}return le()}function XO(e,t){return{documents:[$_(e,t.path)]}}function JO(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=$_(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=$_(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(c){if(c.length!==0){var l=c.map(function(h){return function(d){if(d.op==="=="){if(CA(d.value))return{unaryFilter:{field:Oa(d.field),op:"IS_NAN"}};if(SA(d.value))return{unaryFilter:{field:Oa(d.field),op:"IS_NULL"}}}else if(d.op==="!="){if(CA(d.value))return{unaryFilter:{field:Oa(d.field),op:"IS_NOT_NAN"}};if(SA(d.value))return{unaryFilter:{field:Oa(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(d.field),op:oG(d.op),value:d.value}}}(h)});return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}}(t.filters);i&&(n.structuredQuery.where=i);var s=function(c){if(c.length!==0)return c.map(function(l){return function(h){return{field:Oa(h.field),direction:iG(h.dir)}}(l)})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);var u=function(c,l){return c.I||ea(l)?l:{value:l}}(e,t.limit);return u!==null&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=BA(t.startAt)),t.endAt&&(n.structuredQuery.endAt=BA(t.endAt)),n}function ZO(e){var t=zO(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ye(r===1);var s=n.from[0];s.allDescendants?i=s.collectionId:t=t.child(s.collectionId)}var u=[];n.where&&(u=eD(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(v){return function(m){return new Qa(Ha(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(v)}));var l=null;n.limit&&(l=function(v){var m;return ea(m=typeof v=="object"?v.value:v)?null:m}(n.limit));var h=null;n.startAt&&(h=qA(n.startAt));var d=null;return n.endAt&&(d=qA(n.endAt)),RO(t,i,c,u,l,"F",h,d)}function eD(e){return e?e.unaryFilter!==void 0?[aG(e)]:e.fieldFilter!==void 0?[sG(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return eD(t)}).reduce(function(t,n){return t.concat(n)}):le():[]}function BA(e){return{before:e.before,values:e.position}}function qA(e){var t=!!e.before,n=e.values||[];return new Ol(n,t)}function iG(e){return eG[e]}function oG(e){return tG[e]}function Oa(e){return{fieldPath:e.canonicalString()}}function Ha(e){return $r.fromServerFormat(e.fieldPath)}function sG(e){return ar.create(Ha(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return le()}}(e.fieldFilter.op),e.fieldFilter.value)}function aG(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ha(e.unaryFilter.field);return ar.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ha(e.unaryFilter.field);return ar.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ha(e.unaryFilter.field);return ar.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ha(e.unaryFilter.field);return ar.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return le()}}function uG(e){var t=[];return e.fields.forEach(function(n){return t.push(n.canonicalString())}),{fieldPaths:t}}function tD(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=KA(t)),t=cG(e.get(n),t);return KA(t)}function cG(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function KA(e){return e+""}function Li(e){var t=e.length;if(ye(t>=2),t===2)return ye(e.charAt(0)===""&&e.charAt(1)===""),Ge.emptyPath();for(var n=t-2,r=[],i="",s=0;s<t;){var u=e.indexOf("",s);switch((u<0||u>n)&&le(),e.charAt(u+1)){case"":var c=e.substring(s,u),l=void 0;i.length===0?l=c:(l=i+=c,i=""),r.push(l);break;case"":i+=e.substring(s,u),i+="\0";break;case"":i+=e.substring(s,u+1);break;default:le()}s=u+2}return new Ge(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lG=function(e,t){this.seconds=e,this.nanoseconds=t},nr=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};nr.store="owner",nr.key="owner";var So=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};So.store="mutationQueues",So.keyPath="userId";var ft=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ft.store="mutations",ft.keyPath="batchId",ft.userMutationsIndex="userMutationsIndex",ft.userMutationsKeyPath=["userId","batchId"];var pn=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,Gr(n)]},e.key=function(t,n,r){return[t,Gr(n),r]},e}();pn.store="documentMutations",pn.PLACEHOLDER=new pn;var fG=function(e,t){this.path=e,this.readTime=t},hG=function(e,t){this.path=e,this.version=t},bt=function(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};bt.store="remoteDocuments",bt.readTimeIndex="readTimeIndex",bt.readTimeIndexPath="readTime",bt.collectionReadTimeIndex="collectionReadTimeIndex",bt.collectionReadTimeIndexPath=["parentPath","readTime"];var fi=function(e){this.byteSize=e};fi.store="remoteDocumentGlobal",fi.key="remoteDocumentGlobalKey";var Hn=function(e,t,n,r,i,s,u){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=u};Hn.store="targets",Hn.keyPath="targetId",Hn.queryTargetsIndexName="queryTargetsIndex",Hn.queryTargetsKeyPath=["canonicalId","targetId"];var rn=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};rn.store="targetDocuments",rn.keyPath=["targetId","path"],rn.documentTargetsIndex="documentTargetsIndex",rn.documentTargetsKeyPath=["path","targetId"];var rr=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};rr.key="targetGlobalKey",rr.store="targetGlobal";var Ps=function(e,t){this.collectionId=e,this.parent=t};Ps.store="collectionParents",Ps.keyPath=["collectionId","parent"];var Ui=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Ui.store="clientMetadata",Ui.keyPath="clientId";var vu=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};vu.store="bundles",vu.keyPath="bundleId";var gu=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};gu.store="namedQueries",gu.keyPath="name";var dG=Ne(Ne([],Ne(Ne([],Ne(Ne([],Ne(Ne([],[So.store,ft.store,pn.store,bt.store,Hn.store,nr.store,rr.store,rn.store]),[Ui.store])),[fi.store])),[Ps.store])),[vu.store,gu.store]),nD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rD=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),bn=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},H=function(){function e(t){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(i,s){r.nextCallback=function(u){r.wrapSuccess(t,u).next(i,s)},r.catchCallback=function(u){r.wrapFailure(n,u).next(i,s)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.waitFor=function(t){return new e(function(n,r){var i=0,s=0,u=!1;t.forEach(function(c){++i,c.next(function(){++s,u&&s===i&&n()},function(l){return r(l)})}),u=!0,s===i&&n()})},e.or=function(t){for(var n=e.resolve(!1),r=function(u){n=n.next(function(c){return c?e.resolve(c):u()})},i=0,s=t;i<s.length;i++)r(s[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(s,u){i.push(n.call(r,s,u))}),this.waitFor(i)},e}(),iD=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.ft=new bn,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new ol(t,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var s=ib(i.target.error);r.ft.reject(new ol(t,s))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new ol(n,s)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(z("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new vG(n)},e}(),mu=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,e._t(Ms())===12.2&&Nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return z("SimpleDb","Removing database:",t),ms(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB=="undefined")return!1;if(e.gt())return!0;var t=Ms(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var t;return typeof process!="undefined"&&((t=process.env)===null||t===void 0?void 0:t.Tt)==="YES"},e.It=function(t,n){return t.store(n)},e._t=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.Et=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.At=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(z("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(s,u){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(l){var h=l.target.result;s(h)},c.onblocked=function(){u(new ol(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(l){var h=l.target.error;h.name==="VersionError"?u(new B(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u(new ol(t,h))},c.onupgradeneeded=function(l){z("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',l.oldVersion);var h=l.target.result;r.wt.Rt(h,c.transaction,l.oldVersion,r.version).next(function(){z("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(s){return r.bt(s)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return A(this,void 0,void 0,function(){var s,u,c,l,h;return C(this,function(d){switch(d.label){case 0:s=n==="readonly",u=0,c=function(){var v,m,y,w,E;return C(this,function(T){switch(T.label){case 0:++u,T.label=1;case 1:return T.trys.push([1,4,,5]),[4,l.At(t)];case 2:return l.db=T.sent(),v=iD.open(l.db,t,s?"readonly":"readwrite",r),m=i(v).catch(function(k){return v.abort(k),H.reject(k)}).toPromise(),y={},m.catch(function(){}),[4,v.dt];case 3:return[2,(y.value=(T.sent(),m),y)];case 4:return w=T.sent(),E=w.name!=="FirebaseError"&&u<3,z("SimpleDb","Transaction failed with error:",w.message,"Retrying:",E),l.close(),E?[3,5]:[2,{value:Promise.reject(w)}];case 5:return[2]}})},l=this,d.label=1;case 1:return[5,c()];case 2:if(typeof(h=d.sent())=="object")return[2,h.value];d.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),pG=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return ms(this.Pt.delete())},e}(),ol=function(e){function t(n,r){var i=this;return(i=e.call(this,O.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return ee(t,e),t}(B);function ta(e){return e.name==="IndexedDbTransactionError"}var vG=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(z("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(z("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ms(r)},e.prototype.add=function(t){return z("SimpleDb","ADD",this.store.name,t,t),ms(this.store.add(t))},e.prototype.get=function(t){var n=this;return ms(this.store.get(t)).next(function(r){return r===void 0&&(r=null),z("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return z("SimpleDb","DELETE",this.store.name,t),ms(this.store.delete(t))},e.prototype.count=function(){return z("SimpleDb","COUNT",this.store.name),ms(this.store.count())},e.prototype.Nt=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.xt(r,function(s,u){i.push(u)}).next(function(){return i})},e.prototype.kt=function(t,n){z("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(s,u,c){return c.delete()})},e.prototype.$t=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.xt(i,n)},e.prototype.Ot=function(t){var n=this.cursor({});return new H(function(r,i){n.onerror=function(s){var u=ib(s.target.error);i(u)},n.onsuccess=function(s){var u=s.target.result;u?t(u.primaryKey,u.value).next(function(c){c?u.continue():r()}):r()}})},e.prototype.xt=function(t,n){var r=[];return new H(function(i,s){t.onerror=function(u){s(u.target.error)},t.onsuccess=function(u){var c=u.target.result;if(c){var l=new pG(c),h=n(c.primaryKey,c.value,l);if(h instanceof H){var d=h.catch(function(v){return l.done(),H.reject(v)});r.push(d)}l.isDone?i():l.Dt===null?c.continue():c.continue(l.Dt)}else i()}}).next(function(){return H.waitFor(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.Ft?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function ms(e){return new H(function(t,n){e.onsuccess=function(r){var i=r.target.result;t(i)},e.onerror=function(r){var i=ib(r.target.error);n(i)}})}var HA=!1;function ib(e){var t=mu._t(Ms());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new B("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return HA||(HA=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WA=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return ee(t,e),t}(rD);function zn(e,t){var n=Z(e);return mu.It(n.Mt,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ob=function(){function e(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return e.prototype.applyToRemoteDocument=function(t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var s=this.mutations[i];s.key.isEqual(t.key)&&WW(s,t,r[i])}},e.prototype.applyToLocalView=function(t){for(var n=0,r=this.baseMutations;n<r.length;n++)(u=r[n]).key.isEqual(t.key)&&W_(u,t,this.localWriteTime);for(var i=0,s=this.mutations;i<s.length;i++){var u;(u=s[i]).key.isEqual(t.key)&&W_(u,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var n=this;this.mutations.forEach(function(r){var i=t.get(r.key),s=i;n.applyToLocalView(s),i.isValidDocument()||s.convertToNoDocument(xe.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},Ze())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&uu(this.mutations,t.mutations,function(n,r){return PA(n,r)})&&uu(this.baseMutations,t.baseMutations,function(n,r){return PA(n,r)})},e}(),gG=function(){function e(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return e.from=function(t,n,r){ye(t.mutations.length===r.length);for(var i=KO(),s=t.mutations,u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new e(t,n,r,i)},e}(),tv=function(){function e(t,n,r,i,s,u,c){s===void 0&&(s=xe.min()),u===void 0&&(u=xe.min()),c===void 0&&(c=Mn.EMPTY_BYTE_STRING),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),oD=function(e){this.Lt=e};function z_(e,t){if(t.document)return YO(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=he.fromSegments(t.noDocument.path),r=_u(t.noDocument.readTime),i=un.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var s=he.fromSegments(t.unknownDocument.path);return r=_u(t.unknownDocument.version),un.newUnknownDocument(s,r)}return le()}function GA(e,t,n){var r=sb(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s=function(v,m){return{name:xl(v,m.key),fields:m.data.value.mapValue.fields,updateTime:Dl(v,m.version.toTimestamp())}}(e.Lt,t),u=t.hasCommittedMutations;return new bt(null,null,s,u,r,i)}if(t.isNoDocument()){var c=t.key.path.toArray(),l=yu(t.version);return u=t.hasCommittedMutations,new bt(null,new fG(c,l),null,u,r,i)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),d=yu(t.version);return new bt(new hG(h,d),null,null,!0,r,i)}return le()}function sb(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function sD(e){var t=new Gn(e[0],e[1]);return xe.fromTimestamp(t)}function yu(e){var t=e.toTimestamp();return new lG(t.seconds,t.nanoseconds)}function _u(e){var t=new Gn(e.seconds,e.nanoseconds);return xe.fromTimestamp(t)}function Va(e,t){for(var n=(t.baseMutations||[]).map(function(l){return VA(e.Lt,l)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var s=t.mutations[r+1];i.updateTransforms=s.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var u=t.mutations.map(function(l){return VA(e.Lt,l)}),c=Gn.fromMillis(t.localWriteTimeMs);return new ob(t.batchId,c,n,u)}function Wc(e){var t,n,r=_u(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?_u(e.lastLimboFreeSnapshotVersion):xe.min();return e.query.documents!==void 0?(ye((n=e.query).documents.length===1),t=Rr(Vu(zO(n.documents[0])))):t=function(s){return Rr(ZO(s))}(e.query),new tv(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Mn.fromBase64String(e.resumeToken))}function aD(e,t){var n,r=yu(t.snapshotVersion),i=yu(t.lastLimboFreeSnapshotVersion);n=qd(t.target)?XO(e.Lt,t.target):JO(e.Lt,t.target);var s=t.resumeToken.toBase64();return new Hn(t.targetId,df(t.target),r,s,t.sequenceNumber,i,n)}function ab(e){var t=ZO({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?NO(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mG=function(){function e(){}return e.prototype.getBundleMetadata=function(t,n){return $A(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:_u(i.createTime),version:i.version};var i})},e.prototype.saveBundleMetadata=function(t,n){return $A(t).put({bundleId:(r=n).id,createTime:yu($t(r.createTime)),version:r.version});var r},e.prototype.getNamedQuery=function(t,n){return zA(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:ab(i.bundledQuery),readTime:_u(i.readTime)};var i})},e.prototype.saveNamedQuery=function(t,n){return zA(t).put(function(r){return{name:r.name,readTime:yu($t(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();function $A(e){return zn(e,vu.store)}function zA(e){return zn(e,gu.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yG=function(){function e(){this.Bt=new ub}return e.prototype.addToCollectionParentIndex=function(t,n){return this.Bt.add(n),H.resolve()},e.prototype.getCollectionParents=function(t,n){return H.resolve(this.Bt.getEntries(n))},e}(),ub=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Ft(Ge.comparator),s=!i.has(r);return this.index[n]=i.add(r),s},e.prototype.has=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new Ft(Ge.comparator)).toArray()},e}(),_G=function(){function e(){this.qt=new ub}return e.prototype.addToCollectionParentIndex=function(t,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),s=n.popLast();t.addOnCommittedListener(function(){r.qt.add(n)});var u={collectionId:i,parent:Gr(s)};return QA(t).put(u)}return H.resolve()},e.prototype.getCollectionParents=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[EO(n),""],!1,!0);return QA(t).Nt(i).next(function(s){for(var u=0,c=s;u<c.length;u++){var l=c[u];if(l.collectionId!==n)break;r.push(Li(l.parent))}return r})},e}();function QA(e){return zn(e,Ps.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},si=function(){function e(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(e,t,n){var r=e.store(ft.store),i=e.store(pn.store),s=[],u=IDBKeyRange.only(n.batchId),c=0,l=r.$t({range:u},function(w,E,T){return c++,T.delete()});s.push(l.next(function(){ye(c===1)}));for(var h=[],d=0,v=n.mutations;d<v.length;d++){var m=v[d],y=pn.key(t,m.key.path,n.batchId);s.push(i.delete(y)),h.push(m.key)}return H.waitFor(s).next(function(){return h})}function Gd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw le();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si.DEFAULT_COLLECTION_PERCENTILE=10,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,si.DEFAULT=new si(41943040,si.DEFAULT_COLLECTION_PERCENTILE,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),si.DISABLED=new si(-1,0,0);var wG=function(){function e(t,n,r,i){this.userId=t,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return e.Qt=function(t,n,r,i){return ye(t.uid!==""),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return so(t).$t({index:ft.userMutationsIndex,range:r},function(i,s,u){n=!1,u.done()}).next(function(){return n})},e.prototype.addMutationBatch=function(t,n,r,i){var s=this,u=Ba(t),c=so(t);return c.add({}).next(function(l){ye(typeof l=="number");for(var h=new ob(l,n,r,i),d=function(k,P,M){var K=M.baseMutations.map(function(F){return Wd(k.Lt,F)}),Q=M.mutations.map(function(F){return Wd(k.Lt,F)});return new ft(P,M.batchId,M.localWriteTime.toMillis(),K,Q)}(s.R,s.userId,h),v=[],m=new Ft(function(k,P){return Ue(k.canonicalString(),P.canonicalString())}),y=0,w=i;y<w.length;y++){var E=w[y],T=pn.key(s.userId,E.key.path,l);m=m.add(E.key.path.popLast()),v.push(c.put(d)),v.push(u.put(T,pn.PLACEHOLDER))}return m.forEach(function(k){v.push(s.Ut.addToCollectionParentIndex(t,k))}),t.addOnCommittedListener(function(){s.Kt[l]=h.keys()}),H.waitFor(v).next(function(){return h})})},e.prototype.lookupMutationBatch=function(t,n){var r=this;return so(t).get(n).next(function(i){return i?(ye(i.userId===r.userId),Va(r.R,i)):null})},e.prototype.jt=function(t,n){var r=this;return this.Kt[n]?H.resolve(this.Kt[n]):this.lookupMutationBatch(t,n).next(function(i){if(i){var s=i.keys();return r.Kt[n]=s,s}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]),u=null;return so(t).$t({index:ft.userMutationsIndex,range:s},function(c,l,h){l.userId===r.userId&&(ye(l.batchId>=i),u=Va(r.R,l)),h.done()}).next(function(){return u})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return so(t).$t({index:ft.userMutationsIndex,range:n,reverse:!0},function(i,s,u){r=s.batchId,u.done()}).next(function(){return r})},e.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return so(t).Nt(ft.userMutationsIndex,r).next(function(i){return i.map(function(s){return Va(n.R,s)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=pn.prefixForPath(this.userId,n.path),s=IDBKeyRange.lowerBound(i),u=[];return Ba(t).$t({range:s},function(c,l,h){var d=c[0],v=c[1],m=c[2],y=Li(v);if(d===r.userId&&n.path.isEqual(y))return so(t).get(m).next(function(w){if(!w)throw le();ye(w.userId===r.userId),u.push(Va(r.R,w))});h.done()}).next(function(){return u})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new Ft(Ue),s=[];return n.forEach(function(u){var c=pn.prefixForPath(r.userId,u.path),l=IDBKeyRange.lowerBound(c),h=Ba(t).$t({range:l},function(d,v,m){var y=d[0],w=d[1],E=d[2],T=Li(w);y===r.userId&&u.path.isEqual(T)?i=i.add(E):m.done()});s.push(h)}),H.waitFor(s).next(function(){return r.Wt(t,i)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=this,i=n.path,s=i.length+1,u=pn.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(u),l=new Ft(Ue);return Ba(t).$t({range:c},function(h,d,v){var m=h[0],y=h[1],w=h[2],E=Li(y);m===r.userId&&i.isPrefixOf(E)?E.length===s&&(l=l.add(w)):v.done()}).next(function(){return r.Wt(t,l)})},e.prototype.Wt=function(t,n){var r=this,i=[],s=[];return n.forEach(function(u){s.push(so(t).get(u).next(function(c){if(c===null)throw le();ye(c.userId===r.userId),i.push(Va(r.R,c))}))}),H.waitFor(s).next(function(){return i})},e.prototype.removeMutationBatch=function(t,n){var r=this;return uD(t.Mt,this.userId,n).next(function(i){return t.addOnCommittedListener(function(){r.Gt(n.batchId)}),H.forEach(i,function(s){return r.referenceDelegate.markPotentiallyOrphaned(t,s)})})},e.prototype.Gt=function(t){delete this.Kt[t]},e.prototype.performConsistencyCheck=function(t){var n=this;return this.checkEmpty(t).next(function(r){if(!r)return H.resolve();var i=IDBKeyRange.lowerBound(pn.prefixForUser(n.userId)),s=[];return Ba(t).$t({range:i},function(u,c,l){if(u[0]===n.userId){var h=Li(u[1]);s.push(h)}else l.done()}).next(function(){ye(s.length===0)})})},e.prototype.containsKey=function(t,n){return cD(t,this.userId,n)},e.prototype.zt=function(t){var n=this;return lD(t).get(this.userId).next(function(r){return r||new So(n.userId,-1,"")})},e}();function cD(e,t,n){var r=pn.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),u=!1;return Ba(e).$t({range:s,Ft:!0},function(c,l,h){var d=c[0],v=c[1];c[2],d===t&&v===i&&(u=!0),h.done()}).next(function(){return u})}function so(e){return zn(e,ft.store)}function Ba(e){return zn(e,pn.store)}function lD(e){return zn(e,So.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $d=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),bG=function(){function e(t,n){this.referenceDelegate=t,this.R=n}return e.prototype.allocateTargetId=function(t){var n=this;return this.Xt(t).next(function(r){var i=new $d(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(t,r).next(function(){return r.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(n){return xe.fromTimestamp(new Gn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.Xt(t).next(function(s){return s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),i.Zt(t,s)})},e.prototype.addTargetData=function(t,n){var r=this;return this.te(t,n).next(function(){return r.Xt(t).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(t,i)})})},e.prototype.updateTargetData=function(t,n){return this.te(t,n)},e.prototype.removeTargetData=function(t,n){var r=this;return this.removeMatchingKeysForTargetId(t,n.targetId).next(function(){return Da(t).delete(n.targetId)}).next(function(){return r.Xt(t)}).next(function(i){return ye(i.targetCount>0),i.targetCount-=1,r.Zt(t,i)})},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,u=[];return Da(t).$t(function(c,l){var h=Wc(l);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(s++,u.push(i.removeTargetData(t,h)))}).next(function(){return H.waitFor(u)}).next(function(){return s})},e.prototype.forEachTarget=function(t,n){return Da(t).$t(function(r,i){var s=Wc(i);n(s)})},e.prototype.Xt=function(t){return XA(t).get(rr.key).next(function(n){return ye(n!==null),n})},e.prototype.Zt=function(t,n){return XA(t).put(rr.key,n)},e.prototype.te=function(t,n){return Da(t).put(aD(this.R,n))},e.prototype.ee=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(n){return n.targetCount})},e.prototype.getTargetData=function(t,n){var r=df(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Da(t).$t({range:i,index:Hn.queryTargetsIndexName},function(u,c,l){var h=Wc(c);Xp(n,h.target)&&(s=h,l.done())}).next(function(){return s})},e.prototype.addMatchingKeys=function(t,n,r){var i=this,s=[],u=go(t);return n.forEach(function(c){var l=Gr(c.path);s.push(u.put(new rn(r,l))),s.push(i.referenceDelegate.addReference(t,r,c))}),H.waitFor(s)},e.prototype.removeMatchingKeys=function(t,n,r){var i=this,s=go(t);return H.forEach(n,function(u){var c=Gr(u.path);return H.waitFor([s.delete([r,c]),i.referenceDelegate.removeReference(t,r,u)])})},e.prototype.removeMatchingKeysForTargetId=function(t,n){var r=go(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=go(t),s=Ze();return i.$t({range:r,Ft:!0},function(u,c,l){var h=Li(u[1]),d=new he(h);s=s.add(d)}).next(function(){return s})},e.prototype.containsKey=function(t,n){var r=Gr(n.path),i=IDBKeyRange.bound([r],[EO(r)],!1,!0),s=0;return go(t).$t({index:rn.documentTargetsIndex,Ft:!0,range:i},function(u,c,l){var h=u[0];u[1],h!==0&&(s++,l.done())}).next(function(){return s>0})},e.prototype.lt=function(t,n){return Da(t).get(n).next(function(r){return r?Wc(r):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(e){return zn(e,Hn.store)}function XA(e){return zn(e,rr.store)}function go(e){return zn(e,rn.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(e){return A(this,void 0,void 0,function(){return C(this,function(t){if(e.code!==O.FAILED_PRECONDITION||e.message!==nD)throw e;return z("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(e,t){var n=e[0],r=e[1],i=t[0],s=t[1],u=Ue(n,i);return u===0?Ue(r,s):u}var EG=function(){function e(t){this.ne=t,this.buffer=new Ft(JA),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var n=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();JA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),TG=function(){function e(t,n){this.garbageCollector=t,this.asyncQueue=n,this.oe=!1,this.ce=null}return e.prototype.start=function(t){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var n=this,r=this.oe?3e5:6e4;z("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return A(n,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:this.ce=null,this.oe=!0,s.label=1;case 1:return s.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return s.sent(),[3,7];case 3:return ta(i=s.sent())?(z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,na(i)];case 5:s.sent(),s.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return s.sent(),[2]}})})})},e}(),IG=function(){function e(t,n){this.ae=t,this.params=n}return e.prototype.calculateTargetCount=function(t,n){return this.ae.he(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.nthSequenceNumber=function(t,n){var r=this;if(n===0)return H.resolve(sr.o);var i=new EG(n);return this.ae.forEachTarget(t,function(s){return i.re(s.sequenceNumber)}).next(function(){return r.ae.le(t,function(s){return i.re(s)})}).next(function(){return i.maxValue})},e.prototype.removeTargets=function(t,n,r){return this.ae.removeTargets(t,n,r)},e.prototype.removeOrphanedDocuments=function(t,n){return this.ae.removeOrphanedDocuments(t,n)},e.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(YA)):this.getCacheSize(t).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),YA):r.fe(t,n)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,n){var r,i,s,u,c,l,h,d=this,v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(m){return m>d.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+d.params.maximumSequenceNumbersToCollect+" from "+m),i=d.params.maximumSequenceNumbersToCollect):i=m,u=Date.now(),d.nthSequenceNumber(t,i)}).next(function(m){return r=m,c=Date.now(),d.removeTargets(t,r,n)}).next(function(m){return s=m,l=Date.now(),d.removeOrphanedDocuments(t,r)}).next(function(m){return h=Date.now(),B_()<=Me.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(u-v)+`ms
	Determined least recently used `+i+" in "+(c-u)+`ms
	Removed `+s+" targets in "+(l-c)+`ms
	Removed `+m+" documents in "+(h-l)+`ms
Total Duration: `+(h-v)+"ms"),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})})},e}(),SG=function(){function e(t,n){this.db=t,this.garbageCollector=function(r,i){return new IG(r,i)}(this,n)}return e.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.de=function(t){var n=0;return this.le(t,function(r){n++}).next(function(){return n})},e.prototype.forEachTarget=function(t,n){return this.db.getTargetCache().forEachTarget(t,n)},e.prototype.le=function(t,n){return this.we(t,function(r,i){return n(i)})},e.prototype.addReference=function(t,n,r){return jh(t,r)},e.prototype.removeReference=function(t,n,r){return jh(t,r)},e.prototype.removeTargets=function(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)},e.prototype.markPotentiallyOrphaned=function(t,n){return jh(t,n)},e.prototype._e=function(t,n){return function(r,i){var s=!1;return lD(r).Ot(function(u){return cD(r,u,i).next(function(c){return c&&(s=!0),H.resolve(!c)})}).next(function(){return s})}(t,n)},e.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],u=0;return this.we(t,function(c,l){if(l<=n){var h=r._e(t,c).next(function(d){if(!d)return u++,i.getEntry(t,c).next(function(){return i.removeEntry(c),go(t).delete([0,Gr(c.path)])})});s.push(h)}}).next(function(){return H.waitFor(s)}).next(function(){return i.apply(t)}).next(function(){return u})},e.prototype.removeTarget=function(t,n){var r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},e.prototype.updateLimboDocument=function(t,n){return jh(t,n)},e.prototype.we=function(t,n){var r,i=go(t),s=sr.o;return i.$t({index:rn.documentTargetsIndex},function(u,c){var l=u[0];u[1];var h=c.path,d=c.sequenceNumber;l===0?(s!==sr.o&&n(new he(Li(r)),s),s=d,r=h):s=sr.o}).next(function(){s!==sr.o&&n(new he(Li(r)),s)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();function jh(e,t){return go(e).put(function(n,r){return new rn(0,Gr(n.path),r)}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bu=function(){function e(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return e.prototype.get=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0)for(var i=0,s=r;i<s.length;i++){var u=s[i],c=u[0],l=u[1];if(this.equalsFn(c,t))return l}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.mapKeyFn(t),i=this.inner[r];if(i!==void 0){for(var s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n])}else this.inner[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){Zs(this.inner,function(n,r){for(var i=0,s=r;i<s.length;i++){var u=s[i],c=u[0],l=u[1];t(c,l)}})},e.prototype.isEmpty=function(){return TO(this.inner)},e}(),fD=function(){function e(){this.changes=new Bu(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var n=this.changes.get(t);return n?n.readTime:xe.min()},e.prototype.addEntry=function(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})},e.prototype.removeEntry=function(t,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(t,{document:un.newInvalidDocument(t),readTime:n})},e.prototype.getEntry=function(t,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?H.resolve(r.document):this.getFromCache(t,n)},e.prototype.getEntries=function(t,n){return this.getAllFromCache(t,n)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),CG=function(){function e(t,n){this.R=t,this.Ut=n}return e.prototype.addEntry=function(t,n,r){return ho(t).put(Vh(n),r)},e.prototype.removeEntry=function(t,n){var r=ho(t),i=Vh(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.me(t,i)})},e.prototype.getEntry=function(t,n){var r=this;return ho(t).get(Vh(n)).next(function(i){return r.ye(n,i)})},e.prototype.ge=function(t,n){var r=this;return ho(t).get(Vh(n)).next(function(i){return{document:r.ye(n,i),size:Gd(i)}})},e.prototype.getEntries=function(t,n){var r=this,i=Cr();return this.pe(t,n,function(s,u){var c=r.ye(s,u);i=i.insert(s,c)}).next(function(){return i})},e.prototype.Ee=function(t,n){var r=this,i=Cr(),s=new En(he.comparator);return this.pe(t,n,function(u,c){var l=r.ye(u,c);i=i.insert(u,l),s=s.insert(u,Gd(c))}).next(function(){return{documents:i,Te:s}})},e.prototype.pe=function(t,n,r){if(n.isEmpty())return H.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),s=n.getIterator(),u=s.getNext();return ho(t).$t({range:i},function(c,l,h){for(var d=he.fromSegments(c);u&&he.comparator(u,d)<0;)r(u,null),u=s.getNext();u&&u.isEqual(d)&&(r(u,l),u=s.hasNext()?s.getNext():null),u?h.Ct(u.path.toArray()):h.done()}).next(function(){for(;u;)r(u,null),u=s.hasNext()?s.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){var i=this,s=Cr(),u=n.path.length+1,c={};if(r.isEqual(xe.min())){var l=n.path.toArray();c.range=IDBKeyRange.lowerBound(l)}else{var h=n.path.toArray(),d=sb(r);c.range=IDBKeyRange.lowerBound([h,d],!0),c.index=bt.collectionReadTimeIndex}return ho(t).$t(c,function(v,m,y){if(v.length===u){var w=z_(i.R,m);n.path.isPrefixOf(w.key.path)?vf(n,w)&&(s=s.insert(w.key,w)):y.done()}}).next(function(){return s})},e.prototype.newChangeBuffer=function(t){return new AG(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return ZA(t).get(fi.key).next(function(n){return ye(!!n),n})},e.prototype.me=function(t,n){return ZA(t).put(fi.key,n)},e.prototype.ye=function(t,n){if(n){var r=z_(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(xe.min()))return r}return un.newInvalidDocument(t)},e}(),AG=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new Bu(function(s){return s.toString()},function(s,u){return s.isEqual(u)}),i}return ee(t,e),t.prototype.applyChanges=function(n){var r=this,i=[],s=0,u=new Ft(function(c,l){return Ue(c.canonicalString(),l.canonicalString())});return this.changes.forEach(function(c,l){var h=r.Ae.get(c);if(l.document.isValidDocument()){var d=GA(r.Ie.R,l.document,r.getReadTime(c));u=u.add(c.path.popLast());var v=Gd(d);s+=v-h,i.push(r.Ie.addEntry(n,c,d))}else if(s-=h,r.trackRemovals){var m=GA(r.Ie.R,un.newNoDocument(c,xe.min()),r.getReadTime(c));i.push(r.Ie.addEntry(n,c,m))}else i.push(r.Ie.removeEntry(n,c))}),u.forEach(function(c){i.push(r.Ie.Ut.addToCollectionParentIndex(n,c))}),i.push(this.Ie.updateMetadata(n,s)),H.waitFor(i)},t.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(s){return i.Ae.set(r,s.size),s.document})},t.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(s){var u=s.documents;return s.Te.forEach(function(c,l){i.Ae.set(c,l)}),u})},t}(fD);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(e){return zn(e,fi.store)}function ho(e){return zn(e,bt.store)}function Vh(e){return e.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kG=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,n,r,i){var s=this;ye(r<i&&r>=0&&i<=11);var u=new iD("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(nr.store)}(t),function(l){l.createObjectStore(So.store,{keyPath:So.keyPath}),l.createObjectStore(ft.store,{keyPath:ft.keyPath,autoIncrement:!0}).createIndex(ft.userMutationsIndex,ft.userMutationsKeyPath,{unique:!0}),l.createObjectStore(pn.store)}(t),ek(t),function(l){l.createObjectStore(bt.store)}(t));var c=H.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(rn.store),l.deleteObjectStore(Hn.store),l.deleteObjectStore(rr.store)}(t),ek(t)),c=c.next(function(){return function(l){var h=l.store(rr.store),d=new rr(0,0,xe.min().toTimestamp(),0);return h.put(rr.key,d)}(u)})),r<4&&i>=4&&(r!==0&&(c=c.next(function(){return function(l,h){return h.store(ft.store).Nt().next(function(d){l.deleteObjectStore(ft.store),l.createObjectStore(ft.store,{keyPath:ft.keyPath,autoIncrement:!0}).createIndex(ft.userMutationsIndex,ft.userMutationsKeyPath,{unique:!0});var v=h.store(ft.store),m=d.map(function(y){return v.put(y)});return H.waitFor(m)})}(t,u)})),c=c.next(function(){(function(l){l.createObjectStore(Ui.store,{keyPath:Ui.keyPath})})(t)})),r<5&&i>=5&&(c=c.next(function(){return s.Re(u)})),r<6&&i>=6&&(c=c.next(function(){return function(l){l.createObjectStore(fi.store)}(t),s.be(u)})),r<7&&i>=7&&(c=c.next(function(){return s.ve(u)})),r<8&&i>=8&&(c=c.next(function(){return s.Pe(t,u)})),r<9&&i>=9&&(c=c.next(function(){(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t),function(l){var h=l.objectStore(bt.store);h.createIndex(bt.readTimeIndex,bt.readTimeIndexPath,{unique:!1}),h.createIndex(bt.collectionReadTimeIndex,bt.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(c=c.next(function(){return s.Ve(u)})),r<11&&i>=11&&(c=c.next(function(){(function(l){l.createObjectStore(vu.store,{keyPath:vu.keyPath})})(t),function(l){l.createObjectStore(gu.store,{keyPath:gu.keyPath})}(t)})),c},e.prototype.be=function(t){var n=0;return t.store(bt.store).$t(function(r,i){n+=Gd(i)}).next(function(){var r=new fi(n);return t.store(fi.store).put(fi.key,r)})},e.prototype.Re=function(t){var n=this,r=t.store(So.store),i=t.store(ft.store);return r.Nt().next(function(s){return H.forEach(s,function(u){var c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return i.Nt(ft.userMutationsIndex,c).next(function(l){return H.forEach(l,function(h){ye(h.userId===u.userId);var d=Va(n.R,h);return uD(t,u.userId,d).next(function(){})})})})})},e.prototype.ve=function(t){var n=t.store(rn.store),r=t.store(bt.store);return t.store(rr.store).get(rr.key).next(function(i){var s=[];return r.$t(function(u,c){var l=new Ge(u),h=function(d){return[0,Gr(d)]}(l);s.push(n.get(h).next(function(d){return d?H.resolve():function(v){return n.put(new rn(0,Gr(v),i.highestListenSequenceNumber))}(l)}))}).next(function(){return H.waitFor(s)})})},e.prototype.Pe=function(t,n){t.createObjectStore(Ps.store,{keyPath:Ps.keyPath});var r=n.store(Ps.store),i=new ub,s=function(u){if(i.add(u)){var c=u.lastSegment(),l=u.popLast();return r.put({collectionId:c,parent:Gr(l)})}};return n.store(bt.store).$t({Ft:!0},function(u,c){var l=new Ge(u);return s(l.popLast())}).next(function(){return n.store(pn.store).$t({Ft:!0},function(u,c){u[0];var l=u[1];u[2];var h=Li(l);return s(h.popLast())})})},e.prototype.Ve=function(t){var n=this,r=t.store(Hn.store);return r.$t(function(i,s){var u=Wc(s),c=aD(n.R,u);return r.put(c)})},e}();function ek(e){e.createObjectStore(rn.store,{keyPath:rn.keyPath}).createIndex(rn.documentTargetsIndex,rn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Hn.store,{keyPath:Hn.keyPath}).createIndex(Hn.queryTargetsIndexName,Hn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(rr.store)}var _y="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",RG=function(){function e(t,n,r,i,s,u,c,l,h,d){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=u,this.document=c,this.De=h,this.Ce=d,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(v){return Promise.resolve()},!e.yt())throw new B(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SG(this,i),this.Le=n+"main",this.R=new oD(l),this.Be=new mu(this.Le,11,new kG(this.R)),this.qe=new bG(this.referenceDelegate,this.R),this.Ut=new _G,this.Ue=function(v,m){return new CG(v,m)}(this.R,this.Ut),this.Ke=new mG,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,d===!1&&Nt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new B(O.FAILED_PRECONDITION,_y);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t.qe.getHighestSequenceNumber(n)})}).then(function(n){t.Ne=new sr(n,t.De)}).then(function(){t.xe=!0}).catch(function(n){return t.Be&&t.Be.close(),Promise.reject(n)})},e.prototype.He=function(t){var n=this;return this.Me=function(r){return A(n,void 0,void 0,function(){return C(this,function(i){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var n=this;this.Be.vt(function(r){return A(n,void 0,void 0,function(){return C(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return A(n,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return Bh(n).put(new Ui(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(n).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(n)}).next(function(r){return t.isPrimary&&!r?t.Xe(n).next(function(){return!1}):!!r&&t.Ze(n).next(function(){return!0})})}).catch(function(n){if(ta(n))return z("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Se.enqueueRetryable(function(){return t.Me(n)}),t.isPrimary=n})},e.prototype.Je=function(t){var n=this;return jc(t).get(nr.key).next(function(r){return H.resolve(n.tn(r))})},e.prototype.en=function(t){return Bh(t).delete(this.clientId)},e.prototype.nn=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s=this;return C(this,function(u){switch(u.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var l=zn(c,Ui.store);return l.Nt().next(function(h){var d=s.rn(h,18e5),v=h.filter(function(m){return d.indexOf(m)===-1});return H.forEach(v,function(m){return l.delete(m.clientId)}).next(function(){return v})})}).catch(function(){return[]})]);case 1:if(t=u.sent(),this.Qe)for(n=0,r=t;n<r.length;n++)i=r[n],this.Qe.removeItem(this.on(i.clientId));u.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var n=this;return this.Ce?H.resolve(!0):jc(t).get(nr.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new B(O.FAILED_PRECONDITION,_y);return!1}}return!(!n.networkEnabled||!n.inForeground)||Bh(t).Nt().next(function(i){return n.rn(i,5e3).find(function(s){if(n.clientId!==s.clientId){var u=!n.networkEnabled&&s.networkEnabled,c=!n.inForeground&&s.inForeground,l=n.networkEnabled===s.networkEnabled;if(u||c&&l)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&z("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.shutdown=function(){return A(this,void 0,void 0,function(){var t=this;return C(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[nr.store,Ui.store],function(r){var i=new WA(r,sr.o);return t.Xe(i).next(function(){return t.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,n){var r=this;return t.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return Bh(n).Nt().next(function(r){return t.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return wG.Qt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;z("IndexedDbPersistence","Starting transaction:",t);var s,u=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(t,u,dG,function(c){return s=new WA(c,i.Ne?i.Ne.next():sr.o),n==="readwrite-primary"?i.Je(s).next(function(l){return!!l||i.Ye(s)}).next(function(l){if(!l)throw Nt("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new B(O.FAILED_PRECONDITION,nD);return r(s)}).next(function(l){return i.Ze(s).next(function(){return l})}):i.dn(s).next(function(){return r(s)})}).then(function(c){return s.raiseOnCommittedEvent(),c})},e.prototype.dn=function(t){var n=this;return jc(t).get(nr.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new B(O.FAILED_PRECONDITION,_y)})},e.prototype.Ze=function(t){var n=new nr(this.clientId,this.allowTabSynchronization,Date.now());return jc(t).put(nr.key,n)},e.yt=function(){return mu.yt()},e.prototype.Xe=function(t){var n=this,r=jc(t);return r.get(nr.key).next(function(i){return n.tn(i)?(z("IndexedDbPersistence","Releasing primary lease."),r.delete(nr.key)):H.resolve()})},e.prototype.sn=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(Nt("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.We=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground=t.document.visibilityState==="visible",t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ke=function(){n.un(),h4()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(t){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(t)))!==null;return z("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return Nt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Nt("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function jc(e){return zn(e,nr.store)}function Bh(e){return zn(e,Ui.store)}function cb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var NG=function(e,t){this.progress=e,this.wn=t},hD=function(){function e(t,n,r){this.Ue=t,this._n=n,this.Ut=r}return e.prototype.mn=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(i){return r.yn(t,n,i)})},e.prototype.yn=function(t,n,r){return this.Ue.getEntry(t,n).next(function(i){for(var s=0,u=r;s<u.length;s++)u[s].applyToLocalView(i);return i})},e.prototype.gn=function(t,n){t.forEach(function(r,i){for(var s=0,u=n;s<u.length;s++)u[s].applyToLocalView(i)})},e.prototype.pn=function(t,n){var r=this;return this.Ue.getEntries(t,n).next(function(i){return r.En(t,i).next(function(){return i})})},e.prototype.En=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,n).next(function(i){return r.gn(n,i)})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){return function(i){return he.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(t,n.path):Z0(n)?this.In(t,n,r):this.An(t,n,r)},e.prototype.Tn=function(t,n){return this.mn(t,new he(n)).next(function(r){var i=G_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},e.prototype.In=function(t,n,r){var i=this,s=n.collectionGroup,u=G_();return this.Ut.getCollectionParents(t,s).next(function(c){return H.forEach(c,function(l){var h=function(d,v){return new $i(v,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return i.An(t,h,r).next(function(d){d.forEach(function(v,m){u=u.insert(v,m)})})}).next(function(){return u})})},e.prototype.An=function(t,n,r){var i,s,u=this;return this.Ue.getDocumentsMatchingQuery(t,n,r).next(function(c){return i=c,u._n.getAllMutationBatchesAffectingQuery(t,n)}).next(function(c){return s=c,u.Rn(t,s,i).next(function(l){i=l;for(var h=0,d=s;h<d.length;h++)for(var v=d[h],m=0,y=v.mutations;m<y.length;m++){var w=y[m],E=w.key,T=i.get(E);T==null&&(T=un.newInvalidDocument(E),i=i.insert(E,T)),W_(w,T,v.localWriteTime),T.isFoundDocument()||(i=i.remove(E))}})}).next(function(){return i.forEach(function(c,l){vf(n,l)||(i=i.remove(c))}),i})},e.prototype.Rn=function(t,n,r){for(var i=Ze(),s=0,u=n;s<u.length;s++)for(var c=0,l=u[s].mutations;c<l.length;c++){var h=l[c];h instanceof Uo&&r.get(h.key)===null&&(i=i.add(h.key))}var d=r;return this.Ue.getEntries(t,i).next(function(v){return v.forEach(function(m,y){y.isFoundDocument()&&(d=d.insert(m,y))}),d})},e}(),PG=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.bn=r,this.vn=i}return e.Pn=function(t,n){for(var r=Ze(),i=Ze(),s=0,u=n.docChanges;s<u.length;s++){var c=u[s];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),dD=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,n,r,i){var s=this;return function(u){return u.filters.length===0&&u.limit===null&&u.startAt==null&&u.endAt==null&&(u.explicitOrderBy.length===0||u.explicitOrderBy.length===1&&u.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(xe.min())?this.Dn(t,n):this.Sn.pn(t,i).next(function(u){var c=s.Cn(n,u);return(nd(n)||Hd(n))&&s.Nn(n.limitType,c,i,r)?s.Dn(t,n):(B_()<=Me.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),H_(n)),s.Sn.getDocumentsMatchingQuery(t,n,r).next(function(l){return c.forEach(function(h){l=l.insert(h.key,h)}),l}))})},e.prototype.Cn=function(t,n){var r=new Ft(OO(t));return n.forEach(function(i,s){vf(t,s)&&(r=r.add(s))}),r},e.prototype.Nn=function(t,n,r,i){if(r.size!==n.size)return!0;var s=t==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)},e.prototype.Dn=function(t,n){return B_()<=Me.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",H_(n)),this.Sn.getDocumentsMatchingQuery(t,n,xe.min())},e}(),OG=function(){function e(t,n,r,i){this.persistence=t,this.xn=n,this.R=i,this.kn=new En(Ue),this.Fn=new Bu(function(s){return df(s)},Xp),this.$n=xe.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new hD(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,n.kn)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(e,t,n,r){return new OG(e,t,n,r)}function vD(e,t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(u){switch(u.label){case 0:return n=Z(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var l;return n._n.getAllMutationBatches(c).next(function(h){return l=h,r=n.persistence.getMutationQueue(t),i=new hD(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(c)}).next(function(h){for(var d=[],v=[],m=Ze(),y=0,w=l;y<w.length;y++){var E=w[y];d.push(E.batchId);for(var T=0,k=E.mutations;T<k.length;T++){var P=k[T];m=m.add(P.key)}}for(var M=0,K=h;M<K.length;M++){var Q=K[M];v.push(Q.batchId);for(var F=0,re=Q.mutations;F<re.length;F++){var te=re[F];m=m.add(te.key)}}return i.pn(c,m).next(function(Ee){return{Ln:Ee,removedBatchIds:d,addedBatchIds:v}})})})];case 1:return s=u.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function DG(e,t){var n=Z(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=t.batch.keys(),s=n.On.newChangeBuffer({trackRemovals:!0});return function(u,c,l,h){var d=l.batch,v=d.keys(),m=H.resolve();return v.forEach(function(y){m=m.next(function(){return h.getEntry(c,y)}).next(function(w){var E=l.docVersions.get(y);ye(E!==null),w.version.compareTo(E)<0&&(d.applyToRemoteDocument(w,l),w.isValidDocument()&&h.addEntry(w,l.commitVersion))})}),m.next(function(){return u._n.removeMutationBatch(c,d)})}(n,r,t,s).next(function(){return s.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function gD(e){var t=Z(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t.qe.getLastRemoteSnapshotVersion(n)})}function xG(e,t){var n=Z(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var u=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var c=[];t.targetChanges.forEach(function(d,v){var m=i.get(v);if(m){c.push(n.qe.removeMatchingKeys(s,d.removedDocuments,v).next(function(){return n.qe.addMatchingKeys(s,d.addedDocuments,v)}));var y=d.resumeToken;if(y.approximateByteSize()>0){var w=m.withResumeToken(y,r).withSequenceNumber(s.currentSequenceNumber);i=i.insert(v,w),function(E,T,k){return ye(T.resumeToken.approximateByteSize()>0),E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8||k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,w,d)&&c.push(n.qe.updateTargetData(s,w))}}});var l=Cr();if(t.documentUpdates.forEach(function(d,v){t.resolvedLimboDocuments.has(d)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),c.push(mD(s,u,t.documentUpdates,r,void 0).next(function(d){l=d})),!r.isEqual(xe.min())){var h=n.qe.getLastRemoteSnapshotVersion(s).next(function(d){return n.qe.setTargetsMetadata(s,s.currentSequenceNumber,r)});c.push(h)}return H.waitFor(c).next(function(){return u.apply(s)}).next(function(){return n.Mn.En(s,l)}).next(function(){return l})}).then(function(s){return n.kn=i,s})}function mD(e,t,n,r,i){var s=Ze();return n.forEach(function(u){return s=s.add(u)}),t.getEntries(e,s).next(function(u){var c=Cr();return n.forEach(function(l,h){var d=u.get(l),v=(i==null?void 0:i.get(l))||r;h.isNoDocument()&&h.version.isEqual(xe.min())?(t.removeEntry(l,v),c=c.insert(l,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(h,v),c=c.insert(l,h)):z("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",h.version)}),c})}function MG(e,t){var n=Z(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n._n.getNextMutationBatchAfterBatchId(r,t)})}function wu(e,t){var n=Z(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,t).next(function(s){return s?(i=s,H.resolve(i)):n.qe.allocateTargetId(r).next(function(u){return i=new tv(t,u,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(t,r.targetId)),r})}function bu(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,u;return C(this,function(c){switch(c.label){case 0:r=Z(e),i=r.kn.get(t),s=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(l){return r.persistence.referenceDelegate.removeTarget(l,i)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!ta(u=c.sent()))throw u;return z("LocalStore","Failed to update sequence numbers for target "+t+": "+u),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}})})}function zd(e,t,n){var r=Z(e),i=xe.min(),s=Ze();return r.persistence.runTransaction("Execute query","readonly",function(u){return function(c,l,h){var d=Z(c),v=d.Fn.get(h);return v!==void 0?H.resolve(d.kn.get(v)):d.qe.getTargetData(l,h)}(r,u,Rr(t)).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(u,c.targetId).next(function(l){s=l})}).next(function(){return r.xn.getDocumentsMatchingQuery(u,t,n?i:xe.min(),n?s:Ze())}).next(function(c){return{documents:c,Bn:s}})})}function yD(e,t){var n=Z(e),r=Z(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(s){return r.lt(s,t).next(function(u){return u?u.target:null})})}function _D(e){var t=Z(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,s){var u=Z(r),c=Cr(),l=sb(s),h=ho(i),d=IDBKeyRange.lowerBound(l,!0);return h.$t({index:bt.readTimeIndex,range:d},function(v,m){var y=z_(u.R,m);c=c.insert(y.key,y),l=m.readTime}).next(function(){return{wn:c,readTime:sD(l)}})}(t.On,n,t.$n)}).then(function(n){var r=n.wn,i=n.readTime;return t.$n=i,r})}function LG(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){return[2,(t=Z(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var s=ho(i),u=xe.min();return s.$t({index:bt.readTimeIndex,reverse:!0},function(c,l,h){l.readTime&&(u=sD(l.readTime)),h.done()}).next(function(){return u})}(r)}).then(function(r){t.$n=r})]})})}function FG(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,u,c,l,h,d,v,m,y;return C(this,function(w){switch(w.label){case 0:for(i=Z(e),s=Ze(),u=Cr(),c=KO(),l=0,h=n;l<h.length;l++)d=h[l],v=t.qn(d.metadata.name),d.document&&(s=s.add(v)),u=u.insert(v,t.Un(d)),c=c.insert(v,t.Kn(d.metadata.readTime));return m=i.On.newChangeBuffer({trackRemovals:!0}),[4,wu(i,function(E){return Rr(Vu(Ge.fromString("__bundle__/docs/"+E)))}(r))];case 1:return y=w.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(E){return mD(E,m,u,xe.min(),c).next(function(T){return m.apply(E),T}).next(function(T){return i.qe.removeMatchingKeysForTargetId(E,y.targetId).next(function(){return i.qe.addMatchingKeys(E,s,y.targetId)}).next(function(){return i.Mn.En(E,T)}).next(function(){return T})})})]}})})}function UG(e,t,n){return n===void 0&&(n=Ze()),A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,wu(e,Rr(ab(t.bundledQuery)))];case 1:return r=s.sent(),[2,(i=Z(e)).persistence.runTransaction("Save named query","readwrite",function(u){var c=$t(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ke.saveNamedQuery(u,t);var l=r.withResumeToken(Mn.EMPTY_BYTE_STRING,c);return i.kn=i.kn.insert(l.targetId,l),i.qe.updateTargetData(u,l).next(function(){return i.qe.removeMatchingKeysForTargetId(u,r.targetId)}).next(function(){return i.qe.addMatchingKeys(u,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(u,t)})})]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jG=function(){function e(t){this.R=t,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,n){return H.resolve(this.Qn.get(n))},e.prototype.saveBundleMetadata=function(t,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:$t(r.createTime)}),H.resolve()},e.prototype.getNamedQuery=function(t,n){return H.resolve(this.jn.get(n))},e.prototype.saveNamedQuery=function(t,n){return this.jn.set(n.name,function(r){return{name:r.name,query:ab(r.bundledQuery),readTime:$t(r.readTime)}}(n)),H.resolve()},e}(),lb=function(){function e(){this.Wn=new Ft(Bt.Gn),this.zn=new Ft(Bt.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,n){var r=new Bt(t,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},e.prototype.Jn=function(t,n){var r=this;t.forEach(function(i){return r.addReference(i,n)})},e.prototype.removeReference=function(t,n){this.Yn(new Bt(t,n))},e.prototype.Xn=function(t,n){var r=this;t.forEach(function(i){return r.removeReference(i,n)})},e.prototype.Zn=function(t){var n=this,r=new he(new Ge([])),i=new Bt(r,t),s=new Bt(r,t+1),u=[];return this.zn.forEachInRange([i,s],function(c){n.Yn(c),u.push(c.key)}),u},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(n){return t.Yn(n)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var n=new he(new Ge([])),r=new Bt(n,t),i=new Bt(n,t+1),s=Ze();return this.zn.forEachInRange([r,i],function(u){s=s.add(u.key)}),s},e.prototype.containsKey=function(t){var n=new Bt(t,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)},e}(),Bt=function(){function e(t,n){this.key=t,this.ns=n}return e.Gn=function(t,n){return he.comparator(t.key,n.key)||Ue(t.ns,n.ns)},e.Hn=function(t,n){return Ue(t.ns,n.ns)||he.comparator(t.key,n.key)},e}(),VG=function(){function e(t,n){this.Ut=t,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new Ft(Bt.Gn)}return e.prototype.checkEmpty=function(t){return H.resolve(this._n.length===0)},e.prototype.addMutationBatch=function(t,n,r,i){var s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var u=new ob(s,n,r,i);this._n.push(u);for(var c=0,l=i;c<l.length;c++){var h=l[c];this.rs=this.rs.add(new Bt(h.key,s)),this.Ut.addToCollectionParentIndex(t,h.key.path.popLast())}return H.resolve(u)},e.prototype.lookupMutationBatch=function(t,n){return H.resolve(this.os(n))},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=n+1,i=this.cs(r),s=i<0?0:i;return H.resolve(this._n.length>s?this._n[s]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return H.resolve(this._n.length===0?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return H.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=new Bt(n,0),s=new Bt(n,Number.POSITIVE_INFINITY),u=[];return this.rs.forEachInRange([i,s],function(c){var l=r.os(c.ns);u.push(l)}),H.resolve(u)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new Ft(Ue);return n.forEach(function(s){var u=new Bt(s,0),c=new Bt(s,Number.POSITIVE_INFINITY);r.rs.forEachInRange([u,c],function(l){i=i.add(l.ns)})}),H.resolve(this.us(i))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=n.path,i=r.length+1,s=r;he.isDocumentKey(s)||(s=s.child(""));var u=new Bt(new he(s),0),c=new Ft(Ue);return this.rs.forEachWhile(function(l){var h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(l.ns)),!0)},u),H.resolve(this.us(c))},e.prototype.us=function(t){var n=this,r=[];return t.forEach(function(i){var s=n.os(i);s!==null&&r.push(s)}),r},e.prototype.removeMutationBatch=function(t,n){var r=this;ye(this.hs(n.batchId,"removed")===0),this._n.shift();var i=this.rs;return H.forEach(n.mutations,function(s){var u=new Bt(s.key,n.batchId);return i=i.delete(u),r.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(function(){r.rs=i})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,n){var r=new Bt(n,0),i=this.rs.firstAfterOrEqual(r);return H.resolve(n.isEqual(i&&i.key))},e.prototype.performConsistencyCheck=function(t){return this._n.length,H.resolve()},e.prototype.hs=function(t,n){return this.cs(t)},e.prototype.cs=function(t){return this._n.length===0?0:t-this._n[0].batchId},e.prototype.os=function(t){var n=this.cs(t);return n<0||n>=this._n.length?null:this._n[n]},e}(),BG=function(){function e(t,n){this.Ut=t,this.ls=n,this.docs=new En(he.comparator),this.size=0}return e.prototype.addEntry=function(t,n,r){var i=n.key,s=this.docs.get(i),u=s?s.size:0,c=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:c,readTime:r}),this.size+=c-u,this.Ut.addToCollectionParentIndex(t,i.path.popLast())},e.prototype.removeEntry=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype.getEntry=function(t,n){var r=this.docs.get(n);return H.resolve(r?r.document.clone():un.newInvalidDocument(n))},e.prototype.getEntries=function(t,n){var r=this,i=Cr();return n.forEach(function(s){var u=r.docs.get(s);i=i.insert(s,u?u.document.clone():un.newInvalidDocument(s))}),H.resolve(i)},e.prototype.getDocumentsMatchingQuery=function(t,n,r){for(var i=Cr(),s=new he(n.path.child("")),u=this.docs.getIteratorFrom(s);u.hasNext();){var c=u.getNext(),l=c.key,h=c.value,d=h.document,v=h.readTime;if(!n.path.isPrefixOf(l.path))break;v.compareTo(r)<=0||vf(n,d)&&(i=i.insert(d.key,d.clone()))}return H.resolve(i)},e.prototype.fs=function(t,n){return H.forEach(this.docs,function(r){return n(r)})},e.prototype.newChangeBuffer=function(t){return new qG(this)},e.prototype.getSize=function(t){return H.resolve(this.size)},e}(),qG=function(e){function t(n){var r=this;return(r=e.call(this)||this).Ie=n,r}return ee(t,e),t.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(s,u){u.document.isValidDocument()?i.push(r.Ie.addEntry(n,u.document,r.getReadTime(s))):r.Ie.removeEntry(s)}),H.waitFor(i)},t.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},t.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},t}(fD),KG=function(){function e(t){this.persistence=t,this.ds=new Bu(function(n){return df(n)},Xp),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.ws=0,this._s=new lb,this.targetCount=0,this.ys=$d.Jt()}return e.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(r,i){return n(i)}),H.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return H.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return H.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),H.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),H.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.ys=new $d(n),this.highestTargetId=n),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,n){return this.te(n),this.targetCount+=1,H.resolve()},e.prototype.updateTargetData=function(t,n){return this.te(n),H.resolve()},e.prototype.removeTargetData=function(t,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,H.resolve()},e.prototype.removeTargets=function(t,n,r){var i=this,s=0,u=[];return this.ds.forEach(function(c,l){l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i.ds.delete(c),u.push(i.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),H.waitFor(u).next(function(){return s})},e.prototype.getTargetCount=function(t){return H.resolve(this.targetCount)},e.prototype.getTargetData=function(t,n){var r=this.ds.get(n)||null;return H.resolve(r)},e.prototype.addMatchingKeys=function(t,n,r){return this._s.Jn(n,r),H.resolve()},e.prototype.removeMatchingKeys=function(t,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(function(u){s.push(i.markPotentiallyOrphaned(t,u))}),H.waitFor(s)},e.prototype.removeMatchingKeysForTargetId=function(t,n){return this._s.Zn(n),H.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=this._s.es(n);return H.resolve(r)},e.prototype.containsKey=function(t,n){return H.resolve(this._s.containsKey(n))},e}(),HG=function(){function e(t,n){var r=this;this.gs={},this.Ne=new sr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new KG(this),this.Ut=new yG,this.Ue=function(i,s){return new BG(i,function(u){return r.referenceDelegate.ps(u)})}(this.Ut),this.R=new oD(n),this.Ke=new jG(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var n=this.gs[t.toKey()];return n||(n=new VG(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=n),n},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;z("MemoryPersistence","Starting transaction:",t);var s=new WG(this.Ne.next());return this.referenceDelegate.Es(),r(s).next(function(u){return i.referenceDelegate.Ts(s).next(function(){return u})}).toPromise().then(function(u){return s.raiseOnCommittedEvent(),u})},e.prototype.Is=function(t,n){return H.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,n)}}))},e}(),WG=function(e){function t(n){var r=this;return(r=e.call(this)||this).currentSequenceNumber=n,r}return ee(t,e),t}(rD),GG=function(){function e(t){this.persistence=t,this.As=new lb,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw le()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),H.resolve()},e.prototype.removeReference=function(t,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),H.resolve()},e.prototype.markPotentiallyOrphaned=function(t,n){return this.vs.add(n.toString()),H.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.As.Zn(n.targetId).forEach(function(s){return r.vs.add(s.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(function(s){s.forEach(function(u){return r.vs.add(u.toString())})}).next(function(){return i.removeTargetData(t,n)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.vs,function(i){var s=he.fromPath(i);return n.Ps(t,s).next(function(u){u||r.removeEntry(s)})}).next(function(){return n.Rs=null,r.apply(t)})},e.prototype.updateLimboDocument=function(t,n){var r=this;return this.Ps(t,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,n){var r=this;return H.or([function(){return H.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(t,n)},function(){return r.persistence.Is(t,n)}])},e}(),Zt=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return this.uid!=null},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(e,t){return"firestore_clients_"+e+"_"+t}function nk(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function wy(e,t){return"firestore_targets_"+e+"_"+t}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");var rk=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.Vs=function(t,n,r){var i,s=JSON.parse(r),u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(i=new B(s.error.code,s.error.message)),u?new e(t,n,s.state,i):(Nt("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),by=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.Vs=function(t,n){var r,i=JSON.parse(n),s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new B(i.error.code,i.error.message)),s?new e(t,i.state,r):(Nt("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),ik=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.Vs=function(t,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=ev(),u=0;i&&u<r.activeTargetIds.length;++u)i=CO(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new e(t,s):(Nt("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),$G=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.Vs=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(Nt("SharedClientState","Failed to parse online state: "+t),null)},e}(),Q_=function(){function e(){this.activeTargetIds=ev()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),Ey=function(){function e(t,n,r,i,s){this.window=t,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new En(Ue),this.started=!1,this.$s=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Os=tk(this.persistenceKey,this.Ns),this.Ms=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new Q_),this.Ls=new RegExp("^firestore_clients_"+u+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+u+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+u+"_(\\d+)$"),this.Us=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.Ks=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s,u,c,l,h,d,v,m=this;return C(this,function(y){switch(y.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=y.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Ns&&(s=this.getItem(tk(this.persistenceKey,i)))&&(u=ik.Vs(i,s))&&(this.Fs=this.Fs.insert(u.clientId,u));for(this.Qs(),(c=this.storage.getItem(this.Us))&&(l=this.js(c))&&this.Ws(l),h=0,d=this.$s;h<d.length;h++)v=d[h],this.ks(v);return this.$s=[],this.window.addEventListener("pagehide",function(){return m.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(t){var n=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,n,r){this.zs(t,n,r),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var n="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(wy(this.persistenceKey,t));if(r){var i=by.Vs(t,r);i&&(n=i.state)}}return this.Js.Ds(t),this.Qs(),n},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(wy(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,n,r){this.Ys(t,n,r)},e.prototype.handleUserChange=function(t,n,r){var i=this;n.forEach(function(s){i.Hs(s)}),this.currentUser=t,r.forEach(function(s){i.addPendingMutation(s)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return z("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){z("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){z("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.ks=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(z("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void Nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return A(n,void 0,void 0,function(){var i,s,u,c,l,h;return C(this,function(d){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(s=this.ni(r.key,r.newValue))return[2,this.ei(s.clientId,s)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(u=this.si(r.key,r.newValue)))return[2,this.ii(u)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(c=this.ri(r.key,r.newValue)))return[2,this.oi(c)]}else if(r.key===this.Us){if(r.newValue!==null&&(l=this.js(r.newValue)))return[2,this.Ws(l)]}else if(r.key===this.Ms)(h=function(v){var m=sr.o;if(v!=null)try{var y=JSON.parse(v);ye(typeof y=="number"),m=y}catch(w){Nt("SharedClientState","Failed to read sequence number from WebStorage",w)}return m}(r.newValue))!==sr.o&&this.sequenceNumberHandler(h);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,n,r){var i=new rk(this.currentUser,t,n,r),s=nk(this.persistenceKey,this.currentUser,t);this.setItem(s,i.Ss())},e.prototype.Hs=function(t){var n=nk(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Xs=function(t){var n={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(n))},e.prototype.Ys=function(t,n,r){var i=wy(this.persistenceKey,t),s=new by(t,n,r);this.setItem(i,s.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(t){var n=this.Ls.exec(t);return n?n[1]:null},e.prototype.ni=function(t,n){var r=this.ti(t);return ik.Vs(r,n)},e.prototype.si=function(t,n){var r=this.Bs.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return rk.Vs(new Zt(s),i,n)},e.prototype.ri=function(t,n){var r=this.qs.exec(t),i=Number(r[1]);return by.Vs(i,n)},e.prototype.js=function(t){return $G.Vs(t)},e.prototype.ii=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(z("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,n){var r=this,i=n?this.Fs.insert(t,n):this.Fs.remove(t),s=this.Gs(this.Fs),u=this.Gs(i),c=[],l=[];return u.forEach(function(h){s.has(h)||c.push(h)}),s.forEach(function(h){u.has(h)||l.push(h)}),this.syncEngine.hi(c,l).then(function(){r.Fs=i})},e.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var n=ev();return t.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},e}(),wD=function(){function e(){this.li=new Q_,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,n,r){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,n,r){this.fi[t]=n},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new Q_,Promise.resolve()},e.prototype.handleUserChange=function(t,n,r){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),zG=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),ok=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(0)},e.prototype.yi=function(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(1)},e.yt=function(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),QG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},YG=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),XG=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return ee(t,e),t.prototype.Fi=function(n,r,i,s){return new Promise(function(u,c){var l=new kW;l.listenOnce(SW.COMPLETE,function(){try{switch(l.getLastErrorCode()){case yy.NO_ERROR:var d=l.getResponseJson();z("Connection","XHR received:",JSON.stringify(d)),u(d);break;case yy.TIMEOUT:z("Connection",'RPC "'+n+'" timed out'),c(new B(O.DEADLINE_EXCEEDED,"Request time out"));break;case yy.HTTP_ERROR:var v=l.getStatus();if(z("Connection",'RPC "'+n+'" failed with status:',v,"response text:",l.getResponseText()),v>0){var m=l.getResponseJson().error;if(m&&m.status&&m.message){var y=function(w){var E=w.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(E)>=0?E:O.UNKNOWN}(m.status);c(new B(y,m.message))}else c(new B(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new B(O.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{z("Connection",'RPC "'+n+'" completed.')}});var h=JSON.stringify(s);l.send(r,"POST",h,i,15)})},t.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],s=TW(),u=IW(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new AW({})),this.ki(c.initMessageHeaders,r),Lw()||jN()||c4()||l4()||f4()||Fw()||(c.httpHeadersOverwriteParam="$httpHeaders");var l=i.join("");z("Connection","Creating WebChannel: "+l,c);var h=s.createWebChannel(l,c),d=!1,v=!1,m=new YG({Ei:function(w){v?z("Connection","Not sending because WebChannel is closed:",w):(d||(z("Connection","Opening WebChannel transport."),h.open(),d=!0),z("Connection","WebChannel sending:",w),h.send(w))},Ti:function(){return h.close()}}),y=function(w,E,T){w.listen(E,function(k){try{T(k)}catch(P){setTimeout(function(){throw P},0)}})};return y(h,Fh.EventType.OPEN,function(){v||z("Connection","WebChannel transport opened.")}),y(h,Fh.EventType.CLOSE,function(){v||(v=!0,z("Connection","WebChannel transport closed"),m.Vi())}),y(h,Fh.EventType.ERROR,function(w){v||(v=!0,Rl("Connection","WebChannel transport errored:",w),m.Vi(new B(O.UNAVAILABLE,"The operation could not be completed")))}),y(h,Fh.EventType.MESSAGE,function(w){var E;if(!v){var T=w.data[0];ye(!!T);var k=T,P=k.error||((E=k[0])===null||E===void 0?void 0:E.error);if(P){z("Connection","WebChannel received error:",P);var M=P.status,K=function(F){var re=kt[F];if(re!==void 0)return qO(re)}(M),Q=P.message;K===void 0&&(K=O.INTERNAL,Q="Unknown error status: "+M+" with message "+P.message),v=!0,m.Vi(new B(K,Q)),h.close()}else z("Connection","WebChannel received:",T),m.Si(T)}}),y(u,CW.STAT_EVENT,function(w){w.stat===EA.PROXY?z("Connection","Detected buffering proxy"):w.stat===EA.NOPROXY&&z("Connection","Detected no buffering proxy")}),setTimeout(function(){m.Pi()},0),m},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Di=n+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,n,r,i){var s=this.xi(t,n);z("RestConnection","Sending: ",s,r);var u={};return this.ki(u,i),this.Fi(t,s,u,r).then(function(c){return z("RestConnection","Received: ",c),c},function(c){throw Rl("RestConnection",t+" failed with error: ",c,"url: ",s,"request:",r),c})},e.prototype.$i=function(t,n,r,i){return this.Ni(t,n,r,i)},e.prototype.ki=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(t[r]=n.authHeaders[r])},e.prototype.xi=function(t,n){var r=QG[t];return this.Di+"/v1/"+n+":"+r},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return typeof window!="undefined"?window:null}function od(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(e){return new nG(e,!0)}var fb=function(){function e(t,n,r,i,s){r===void 0&&(r=1e3),i===void 0&&(i=1.5),s===void 0&&(s=6e4),this.Se=t,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=s,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(t){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),s=Math.max(0,r-i);s>0&&z("ExponentialBackoff","Backing off for "+s+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,s,function(){return n.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),ED=function(){function e(t,n,r,i,s,u){this.Se=t,this.zi=r,this.Hi=i,this.Ji=s,this.listener=u,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new fb(t,n)}return e.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},e.prototype.er=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.nr()},e.prototype.stop=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return A(this,void 0,void 0,function(){return C(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,n){return A(this,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,t!==3?this.Zi.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Nt(n.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===O.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){t.Yi===r&&t.lr(i)},function(i){n(function(){var s=new B(O.UNKNOWN,"Fetching auth token failed: "+i.message);return t.dr(s)})})},e.prototype.lr=function(t){var n=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return A(t,void 0,void 0,function(){return C(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return z("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===t?r():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),JG=function(e){function t(n,r,i,s,u){var c=this;return(c=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,u)||this).R=s,c}return ee(t,e),t.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},t.prototype.onMessage=function(n){this.Zi.reset();var r=function(s,u){var c;if("targetChange"in u){u.targetChange;var l=function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:le()}(u.targetChange.targetChangeType||"NO_CHANGE"),h=u.targetChange.targetIds||[],d=function(T,k){return T.I?(ye(k===void 0||typeof k=="string"),Mn.fromBase64String(k||"")):(ye(k===void 0||k instanceof Uint8Array),Mn.fromUint8Array(k||new Uint8Array))}(s,u.targetChange.resumeToken),v=(m=u.targetChange.cause)&&function(T){var k=T.code===void 0?O.UNKNOWN:qO(T.code);return new B(k,T.message||"")}(m);c=new WO(l,h,d,v||null)}else if("documentChange"in u){u.documentChange,(l=u.documentChange).document,l.document.name,l.document.updateTime,h=di(s,l.document.name),d=$t(l.document.updateTime);var m=new or({mapValue:{fields:l.document.fields}}),y=(v=un.newFoundDocument(h,d,m),l.targetIds||[]),w=l.removedTargetIds||[];c=new id(y,w,v.key,v)}else if("documentDelete"in u)u.documentDelete,(l=u.documentDelete).document,h=di(s,l.document),d=l.readTime?$t(l.readTime):xe.min(),m=un.newNoDocument(h,d),v=l.removedTargetIds||[],c=new id([],v,m.key,m);else if("documentRemove"in u)u.documentRemove,(l=u.documentRemove).document,h=di(s,l.document),d=l.removedTargetIds||[],c=new id([],d,h,null);else{if(!("filter"in u))return le();u.filter;var E=u.filter;E.targetId,l=E.count||0,h=new $W(l),d=E.targetId,c=new HO(d,h)}return c}(this.R,n),i=function(s){if(!("targetChange"in s))return xe.min();var u=s.targetChange;return u.targetIds&&u.targetIds.length?xe.min():u.readTime?$t(u.readTime):xe.min()}(n);return this.listener._r(r,i)},t.prototype.mr=function(n){var r={};r.database=Ml(this.R),r.addTarget=function(s,u){var c,l=u.target;return(c=qd(l)?{documents:XO(s,l)}:{query:JO(s,l)}).targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=GO(s,u.resumeToken):u.snapshotVersion.compareTo(xe.min())>0&&(c.readTime=Dl(s,u.snapshotVersion.toTimestamp())),c}(this.R,n);var i=function(s,u){var c=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return le()}}(0,u.purpose);return c==null?null:{"goog-listen-tags":c}}(this.R,n);i&&(r.labels=i),this.cr(r)},t.prototype.yr=function(n){var r={};r.database=Ml(this.R),r.removeTarget=n,this.cr(r)},t}(ED),ZG=function(e){function t(n,r,i,s,u){var c=this;return(c=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,u)||this).R=s,c.gr=!1,c}return ee(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(n){return this.Hi.Oi("Write",n)},t.prototype.onMessage=function(n){if(ye(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(s,u){return s&&s.length>0?(ye(u!==void 0),s.map(function(c){return function(l,h){var d=l.updateTime?$t(l.updateTime):$t(h);return d.isEqual(xe.min())&&(d=$t(h)),new HW(d,l.transformResults||[])}(c,u)})):[]}(n.writeResults,n.commitTime),i=$t(n.commitTime);return this.listener.Tr(i,r)}return ye(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var n={};n.database=Ml(this.R),this.cr(n)},t.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(s){return Wd(r.R,s)})};this.cr(i)},t}(ED),e$=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).credentials=n,s.Hi=r,s.R=i,s.Rr=!1,s}return ee(t,e),t.prototype.br=function(){if(this.Rr)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(u){return s.Hi.Ni(n,r,i,u)}).catch(function(u){throw u.name==="FirebaseError"?(u.code===O.UNAUTHENTICATED&&s.credentials.invalidateToken(),u):new B(O.UNKNOWN,u.toString())})},t.prototype.$i=function(n,r,i){var s=this;return this.br(),this.credentials.getToken().then(function(u){return s.Hi.$i(n,r,i,u)}).catch(function(u){throw u.name==="FirebaseError"?(u.code===O.UNAUTHENTICATED&&s.credentials.invalidateToken(),u):new B(O.UNKNOWN,u.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),t$=function(){function e(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.kr(),this.vr=0,t==="Online"&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(Nt(n),this.Vr=!1):z("OnlineStateTracker",n)},e.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},e}(),n$=function(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(u){n.enqueueAndForget(function(){return A(s,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return jo(this)?(z("RemoteStore","Restarting streams for network reachability change."),[4,function(l){return A(this,void 0,void 0,function(){var h;return C(this,function(d){switch(d.label){case 0:return(h=Z(l)).Or.add(4),[4,qu(h)];case 1:return d.sent(),h.Br.set("Unknown"),h.Or.delete(4),[4,wf(h)];case 2:return d.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Br=new t$(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:if(!jo(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function qu(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function nv(e,t){var n=Z(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),pb(n)?db(n):Hu(n).er()&&hb(n,t))}function Ll(e,t){var n=Z(e),r=Hu(n);n.$r.delete(t),r.er()&&TD(n,t),n.$r.size===0&&(r.er()?r.ir():jo(n)&&n.Br.set("Unknown"))}function hb(e,t){e.qr.U(t.targetId),Hu(e).mr(t)}function TD(e,t){e.qr.U(t),Hu(e).yr(t)}function db(e){e.qr=new ZW({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),Hu(e).start(),e.Br.Sr()}function pb(e){return jo(e)&&!Hu(e).tr()&&e.$r.size>0}function jo(e){return Z(e).Or.size===0}function ID(e){e.qr=void 0}function r$(e){return A(this,void 0,void 0,function(){return C(this,function(t){return e.$r.forEach(function(n,r){hb(e,n)}),[2]})})}function i$(e,t){return A(this,void 0,void 0,function(){return C(this,function(n){return ID(e),pb(e)?(e.Br.Nr(t),db(e)):e.Br.set("Unknown"),[2]})})}function o$(e,t,n){return A(this,void 0,void 0,function(){var r,i,s;return C(this,function(u){switch(u.label){case 0:if(e.Br.set("Online"),!(t instanceof WO&&t.state===2&&t.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(c,l){return A(this,void 0,void 0,function(){var h,d,v,m;return C(this,function(y){switch(y.label){case 0:h=l.cause,d=0,v=l.targetIds,y.label=1;case 1:return d<v.length?(m=v[d],c.$r.has(m)?[4,c.remoteSyncer.rejectListen(m,h)]:[3,3]):[3,5];case 2:y.sent(),c.$r.delete(m),c.qr.removeTarget(m),y.label=3;case 3:y.label=4;case 4:return d++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),z("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Qd(e,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof id?e.qr.X(t):t instanceof HO?e.qr.rt(t):e.qr.et(t),n.isEqual(xe.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,gD(e.localStore)];case 8:return i=u.sent(),n.compareTo(i)>=0?[4,function(c,l){var h=c.qr.ut(l);return h.targetChanges.forEach(function(d,v){if(d.resumeToken.approximateByteSize()>0){var m=c.$r.get(v);m&&c.$r.set(v,m.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach(function(d){var v=c.$r.get(d);if(v){c.$r.set(d,v.withResumeToken(Mn.EMPTY_BYTE_STRING,v.snapshotVersion)),TD(c,d);var m=new tv(v.target,d,1,v.sequenceNumber);hb(c,m)}}),c.remoteSyncer.applyRemoteEvent(h)}(e,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return z("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,Qd(e,s)];case 12:return u.sent(),[3,13];case 13:return[2]}})})}function Qd(e,t,n){return A(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:if(!ta(t))throw t;return e.Or.add(1),[4,qu(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return gD(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return A(r,void 0,void 0,function(){return C(this,function(s){switch(s.label){case 0:return z("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return s.sent(),e.Or.delete(1),[4,wf(e)];case 2:return s.sent(),[2]}})})}),[2]}})})}function SD(e,t){return t().catch(function(n){return Qd(e,n,t)})}function Ku(e){return A(this,void 0,void 0,function(){var t,n,r,i,s;return C(this,function(u){switch(u.label){case 0:t=Z(e),n=xo(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,u.label=1;case 1:if(!function(c){return jo(c)&&c.Fr.length<10}(t))return[3,7];u.label=2;case 2:return u.trys.push([2,4,,6]),[4,MG(t.localStore,r)];case 3:return(i=u.sent())===null?(t.Fr.length===0&&n.ir(),[3,7]):(r=i.batchId,function(c,l){c.Fr.push(l);var h=xo(c);h.er()&&h.pr&&h.Er(l.mutations)}(t,i),[3,6]);case 4:return s=u.sent(),[4,Qd(t,s)];case 5:return u.sent(),[3,6];case 6:return[3,1];case 7:return CD(t)&&AD(t),[2]}})})}function CD(e){return jo(e)&&!xo(e).tr()&&e.Fr.length>0}function AD(e){xo(e).start()}function s$(e){return A(this,void 0,void 0,function(){return C(this,function(t){return xo(e).Ar(),[2]})})}function a$(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){for(t=xo(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]})})}function u$(e,t,n){return A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=e.Fr.shift(),i=gG.from(r,t,n),[4,SD(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,Ku(e)];case 2:return s.sent(),[2]}})})}function c$(e,t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return t&&xo(e).pr?[4,function(r,i){return A(this,void 0,void 0,function(){var s,u;return C(this,function(c){switch(c.label){case 0:return BO(u=i.code)&&u!==O.ABORTED?(s=r.Fr.shift(),xo(r).sr(),[4,SD(r,function(){return r.remoteSyncer.rejectFailedWrite(s.batchId,i)})]):[3,3];case 1:return c.sent(),[4,Ku(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return CD(e)&&AD(e),[2]}})})}function Y_(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return n=Z(e),t?(n.Or.delete(2),[4,wf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,qu(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Hu(e){var t=this;return e.Ur||(e.Ur=function(n,r,i){var s=Z(n);return s.br(),new JG(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:r$.bind(null,e),Ri:i$.bind(null,e),_r:o$.bind(null,e)}),e.Mr.push(function(n){return A(t,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return n?(e.Ur.sr(),pb(e)?db(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:r.sent(),ID(e),r.label=3;case 3:return[2]}})})})),e.Ur}function xo(e){var t=this;return e.Kr||(e.Kr=function(n,r,i){var s=Z(n);return s.br(),new ZG(r,s.Hi,s.credentials,s.R,i)}(e.datastore,e.asyncQueue,{Ii:s$.bind(null,e),Ri:c$.bind(null,e),Ir:a$.bind(null,e),Tr:u$.bind(null,e)}),e.Mr.push(function(n){return A(t,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return n?(e.Kr.sr(),[4,Ku(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:r.sent(),e.Fr.length>0&&(z("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),r.label=4;case 4:return[2]}})})})),e.Kr}var l$=function(){function e(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(u){})}return e.createAndSchedule=function(t,n,r,i,s){var u=new e(t,n,Date.now()+r,i,s);return u.start(r),u},e.prototype.start=function(t){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(O.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.timerHandle!==null?(t.clearTimeout(),t.op().then(function(n){return t.deferred.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function Wu(e,t){if(Nt("AsyncQueue",t+": "+e),ta(e))return new B(O.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kD=function(){function e(t){this.comparator=t?function(n,r){return t(n,r)||he.comparator(n.key,r.key)}:function(n,r){return he.comparator(n.key,r.key)},this.keyedMap=G_(),this.sortedSet=new En(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return this.keyedMap.get(t)!=null},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),sk=function(){function e(){this.Qr=new En(he.comparator)}return e.prototype.track=function(t){var n=t.doc.key,r=this.Qr.get(n);r?t.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,t):t.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Qr=this.Qr.remove(n):t.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):le():this.Qr=this.Qr.insert(n,t)},e.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(n,r){t.push(r)}),t},e}(),Yd=function(){function e(t,n,r,i,s,u,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=l}return e.fromInitialDocuments=function(t,n,r,i){var s=[];return n.forEach(function(u){s.push({type:0,doc:u})}),new e(t,n,kD.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&pf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),f$=function(){this.Wr=void 0,this.listeners=[]},h$=function(){this.queries=new Bu(function(e){return PO(e)},pf),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,u,c,l;return C(this,function(h){switch(h.label){case 0:if(n=Z(e),r=t.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new f$),!i)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),u=s,[4,n.onListen(r)];case 2:return u.Wr=h.sent(),[3,4];case 3:return c=h.sent(),l=Wu(c,"Initialization of query '"+H_(t.query)+"' failed"),[2,void t.onError(l)];case 4:return n.queries.set(r,s),s.listeners.push(t),t.zr(n.onlineState),s.Wr&&t.Hr(s.Wr)&&mb(n),[2]}})})}function gb(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,u;return C(this,function(c){return n=Z(e),r=t.query,i=!1,(s=n.queries.get(r))&&(u=s.listeners.indexOf(t))>=0&&(s.listeners.splice(u,1),i=s.listeners.length===0),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function d$(e,t){for(var n=Z(e),r=!1,i=0,s=t;i<s.length;i++){var u=s[i],c=u.query,l=n.queries.get(c);if(l){for(var h=0,d=l.listeners;h<d.length;h++)d[h].Hr(u)&&(r=!0);l.Wr=u}}r&&mb(n)}function p$(e,t,n){var r=Z(e),i=r.queries.get(t);if(i)for(var s=0,u=i.listeners;s<u.length;s++)u[s].onError(n);r.queries.delete(t)}function mb(e){e.Gr.forEach(function(t){t.next()})}var yb=function(){function e(t,n,r){this.query=t,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var s=i[r];s.type!==3&&n.push(s)}t=new Yd(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var u=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),u=!0):this.eo(t,this.onlineState)&&(this.no(t),u=!0),this.Xr=t,u},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),n=!0),n},e.prototype.eo=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||t.docs.isEmpty()&&n!=="Offline")},e.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.no=function(t){t=Yd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}(),v$=function(){function e(t,n){this.payload=t,this.byteLength=n}return e.prototype.io=function(){return"metadata"in this.payload},e}(),ak=function(){function e(t){this.R=t}return e.prototype.qn=function(t){return di(this.R,t)},e.prototype.Un=function(t){return t.metadata.exists?YO(this.R,t.document,!1):un.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},e.prototype.Kn=function(t){return $t(t)},e}(),g$=function(){function e(t,n,r){this.ro=t,this.localStore=n,this.R=r,this.queries=[],this.documents=[],this.progress=RD(t)}return e.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var n=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++n):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},e.prototype.co=function(t){for(var n=new Map,r=new ak(this.R),i=0,s=t;i<s.length;i++){var u=s[i];if(u.metadata.queries)for(var c=r.qn(u.metadata.name),l=0,h=u.metadata.queries;l<h.length;l++){var d=h[l],v=(n.get(d)||Ze()).add(c);n.set(d,v)}}return n},e.prototype.complete=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s;return C(this,function(u){switch(u.label){case 0:return[4,FG(this.localStore,new ak(this.R),this.documents,this.ro.id)];case 1:t=u.sent(),n=this.co(this.documents),r=0,i=this.queries,u.label=2;case 2:return r<i.length?(s=i[r],[4,UG(this.localStore,s,n.get(s.name))]):[3,5];case 3:u.sent(),u.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new NG(Object.assign({},this.progress),t))]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ND=function(e){this.key=e},PD=function(e){this.key=e},OD=function(){function e(t,n){this.query=t,this.uo=n,this.ao=null,this.current=!1,this.ho=Ze(),this.mutatedKeys=Ze(),this.lo=OO(t),this.fo=new kD(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,n){var r=this,i=n?n.mo:new sk,s=n?n.fo:this.fo,u=n?n.mutatedKeys:this.mutatedKeys,c=s,l=!1,h=nd(this.query)&&s.size===this.query.limit?s.last():null,d=Hd(this.query)&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(function(m,y){var w=s.get(m),E=vf(r.query,y)?y:null,T=!!w&&r.mutatedKeys.has(w.key),k=!!E&&(E.hasLocalMutations||r.mutatedKeys.has(E.key)&&E.hasCommittedMutations),P=!1;w&&E?w.data.isEqual(E.data)?T!==k&&(i.track({type:3,doc:E}),P=!0):r.yo(w,E)||(i.track({type:2,doc:E}),P=!0,(h&&r.lo(E,h)>0||d&&r.lo(E,d)<0)&&(l=!0)):!w&&E?(i.track({type:0,doc:E}),P=!0):w&&!E&&(i.track({type:1,doc:w}),P=!0,(h||d)&&(l=!0)),P&&(E?(c=c.add(E),u=k?u.add(m):u.delete(m)):(c=c.delete(m),u=u.delete(m)))}),nd(this.query)||Hd(this.query))for(;c.size>this.query.limit;){var v=nd(this.query)?c.last():c.first();c=c.delete(v.key),u=u.delete(v.key),i.track({type:1,doc:v})}return{fo:c,mo:i,Nn:l,mutatedKeys:u}},e.prototype.yo=function(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},e.prototype.applyChanges=function(t,n,r){var i=this,s=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var u=t.mo.jr();u.sort(function(d,v){return function(m,y){var w=function(E){switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return w(m)-w(y)}(d.type,v.type)||i.lo(d.doc,v.doc)}),this.po(r);var c=n?this.Eo():[],l=this.ho.size===0&&this.current?1:0,h=l!==this.ao;return this.ao=l,u.length!==0||h?{snapshot:new Yd(this.query,t.fo,s,u,t.mutatedKeys,l===0,h,!1),To:c}:{To:c}},e.prototype.zr=function(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new sk,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var n=this;t&&(t.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var n=this.ho;this.ho=Ze(),this.fo.forEach(function(i){t.Io(i.key)&&(t.ho=t.ho.add(i.key))});var r=[];return n.forEach(function(i){t.ho.has(i)||r.push(new PD(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new ND(i))}),r},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ze();var n=this._o(t.documents);return this.applyChanges(n,!0)},e.prototype.Ro=function(){return Yd.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},e}(),m$=function(e,t,n){this.query=e,this.targetId=t,this.view=n},y$=function(e){this.key=e,this.bo=!1},_$=function(){function e(t,n,r,i,s,u){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.vo={},this.Po=new Bu(function(c){return PO(c)},pf),this.Vo=new Map,this.So=new Set,this.Do=new En(he.comparator),this.Co=new Map,this.No=new lb,this.xo={},this.ko=new Map,this.Fo=$d.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),e}();function w$(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,u,c;return C(this,function(l){switch(l.label){case 0:return n=Tb(e),(s=n.Po.get(t))?(r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro(),[3,4]):[3,1];case 1:return[4,wu(n.localStore,Rr(t))];case 2:return u=l.sent(),c=n.sharedClientState.addLocalQueryTarget(u.targetId),r=u.targetId,[4,_b(n,t,r,c==="current")];case 3:i=l.sent(),n.isPrimaryClient&&nv(n.remoteStore,u),l.label=4;case 4:return[2,i]}})})}function _b(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,u,c,l,h;return C(this,function(d){switch(d.label){case 0:return e.Oo=function(v,m,y){return function(w,E,T,k){return A(this,void 0,void 0,function(){var P,M,K;return C(this,function(Q){switch(Q.label){case 0:return P=E.view._o(T),P.Nn?[4,zd(w.localStore,E.query,!1).then(function(F){var re=F.documents;return E.view._o(re,P)})]:[3,2];case 1:P=Q.sent(),Q.label=2;case 2:return M=k&&k.targetChanges.get(E.targetId),K=E.view.applyChanges(P,w.isPrimaryClient,M),[2,(X_(w,E.targetId,K.To),K.snapshot)]}})})}(e,v,m,y)},[4,zd(e.localStore,t,!0)];case 1:return i=d.sent(),s=new OD(t,i.Bn),u=s._o(i.documents),c=nb.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline"),l=s.applyChanges(u,e.isPrimaryClient,c),X_(e,n,l.To),h=new m$(t,n,s),[2,(e.Po.set(t,h),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),l.snapshot)]}})})}function b$(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return n=Z(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(u){return!pf(u,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,bu(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Ll(n.remoteStore,r.targetId),Eu(n,r.targetId)}).catch(na)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return Eu(n,r.targetId),[4,bu(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function E$(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,u;return C(this,function(c){switch(c.label){case 0:r=Ib(e),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,function(l,h){var d,v=Z(l),m=Gn.now(),y=h.reduce(function(w,E){return w.add(E.key)},Ze());return v.persistence.runTransaction("Locally write mutations","readwrite",function(w){return v.Mn.pn(w,y).next(function(E){d=E;for(var T=[],k=0,P=h;k<P.length;k++){var M=P[k],K=GW(M,d.get(M.key));K!=null&&T.push(new Uo(M.key,K,AO(K.value.mapValue),vn.exists(!0)))}return v._n.addMutationBatch(w,m,T,h)})}).then(function(w){return w.applyToLocalDocumentSet(d),{batchId:w.batchId,changes:d}})}(r.localStore,t)];case 2:return i=c.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(l,h,d){var v=l.xo[l.currentUser.toKey()];v||(v=new En(Ue)),v=v.insert(h,d),l.xo[l.currentUser.toKey()]=v}(r,i.batchId,n),[4,zi(r,i.changes)];case 3:return c.sent(),[4,Ku(r.remoteStore)];case 4:return c.sent(),[3,6];case 5:return s=c.sent(),u=Wu(s,"Failed to persist write"),n.reject(u),[3,6];case 6:return[2]}})})}function DD(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:n=Z(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,xG(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(s,u){var c=n.Co.get(u);c&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.bo=!0:s.modifiedDocuments.size>0?ye(c.bo):s.removedDocuments.size>0&&(ye(c.bo),c.bo=!1))}),[4,zi(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,na(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function uk(e,t,n){var r=Z(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var i=[];r.Po.forEach(function(s,u){var c=u.view.zr(t);c.snapshot&&i.push(c.snapshot)}),function(s,u){var c=Z(s);c.onlineState=u;var l=!1;c.queries.forEach(function(h,d){for(var v=0,m=d.listeners;v<m.length;v++)m[v].zr(u)&&(l=!0)}),l&&mb(c)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function T$(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,u,c,l;return C(this,function(h){switch(h.label){case 0:return(r=Z(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(s=i&&i.key)?(u=(u=new En(he.comparator)).insert(s,un.newNoDocument(s,xe.min())),c=Ze().add(s),l=new tb(xe.min(),new Map,new Ft(Ue),u,c),[4,DD(r,l)]):[3,2];case 1:return h.sent(),r.Do=r.Do.remove(s),r.Co.delete(t),Eb(r),[3,4];case 2:return[4,bu(r.localStore,t,!1).then(function(){return Eu(r,t,n)}).catch(na)];case 3:h.sent(),h.label=4;case 4:return[2]}})})}function I$(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:n=Z(e),r=t.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,DG(n.localStore,t)];case 2:return i=s.sent(),bb(n,r,null),wb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,zi(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,na(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function S$(e,t,n){return A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:r=Z(e),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(u,c){var l=Z(u);return l.persistence.runTransaction("Reject batch","readwrite-primary",function(h){var d;return l._n.lookupMutationBatch(h,c).next(function(v){return ye(v!==null),d=v.keys(),l._n.removeMutationBatch(h,v)}).next(function(){return l._n.performConsistencyCheck(h)}).next(function(){return l.Mn.pn(h,d)})})}(r.localStore,t)];case 2:return i=s.sent(),bb(r,t,n),wb(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,zi(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,na(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function C$(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,u;return C(this,function(c){switch(c.label){case 0:jo((n=Z(e)).remoteStore)||z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(l){var h=Z(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(d){return h._n.getHighestUnacknowledgedBatchId(d)})}(n.localStore)];case 2:return(r=c.sent())===-1?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return s=c.sent(),u=Wu(s,"Initialization of waitForPendingWrites() operation failed"),t.reject(u),[3,4];case 4:return[2]}})})}function wb(e,t){(e.ko.get(t)||[]).forEach(function(n){n.resolve()}),e.ko.delete(t)}function bb(e,t,n){var r=Z(e),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function Eu(e,t,n){n===void 0&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var s=i[r];e.Po.delete(s),n&&e.vo.Mo(s,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(u){e.No.containsKey(u)||xD(e,u)})}function xD(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);n!==null&&(Ll(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),Eb(e))}function X_(e,t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof ND?(e.No.addReference(s.key,t),A$(e,s)):s instanceof PD?(z("SyncEngine","Document no longer in limbo: "+s.key),e.No.removeReference(s.key,t),e.No.containsKey(s.key)||xD(e,s.key)):le()}}function A$(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(z("SyncEngine","New document in limbo: "+n),e.So.add(r),Eb(e))}function Eb(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new he(Ge.fromString(t)),r=e.Fo.next();e.Co.set(r,new y$(n)),e.Do=e.Do.insert(n,r),nv(e.remoteStore,new tv(Rr(Vu(n.path)),r,2,sr.o))}}function zi(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,u;return C(this,function(c){switch(c.label){case 0:return r=Z(e),i=[],s=[],u=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(l,h){u.push(r.Oo(h,t,n).then(function(d){if(d){r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,d.fromCache?"not-current":"current"),i.push(d);var v=PG.Pn(h.targetId,d);s.push(v)}}))}),[4,Promise.all(u)]);case 1:return c.sent(),r.vo._r(i),[4,function(l,h){return A(this,void 0,void 0,function(){var d,v,m,y,w,E,T,k,P;return C(this,function(M){switch(M.label){case 0:d=Z(l),M.label=1;case 1:return M.trys.push([1,3,,4]),[4,d.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(K){return H.forEach(h,function(Q){return H.forEach(Q.bn,function(F){return d.persistence.referenceDelegate.addReference(K,Q.targetId,F)}).next(function(){return H.forEach(Q.vn,function(F){return d.persistence.referenceDelegate.removeReference(K,Q.targetId,F)})})})})];case 2:return M.sent(),[3,4];case 3:if(!ta(v=M.sent()))throw v;return z("LocalStore","Failed to update sequence numbers: "+v),[3,4];case 4:for(m=0,y=h;m<y.length;m++)w=y[m],E=w.targetId,w.fromCache||(T=d.kn.get(E),k=T.snapshotVersion,P=T.withLastLimboFreeSnapshotVersion(k),d.kn=d.kn.insert(E,P));return[2]}})})}(r.localStore,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function k$(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return(n=Z(e)).currentUser.isEqual(t)?[3,3]:(z("SyncEngine","User change. New user:",t.toKey()),[4,vD(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(s,u){s.ko.forEach(function(c){c.forEach(function(l){l.reject(new B(O.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,zi(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function R$(e,t){var n=Z(e),r=n.Co.get(t);if(r&&r.bo)return Ze().add(r.key);var i=Ze(),s=n.Vo.get(t);if(!s)return i;for(var u=0,c=s;u<c.length;u++){var l=c[u],h=n.Po.get(l);i=i.unionWith(h.view.wo)}return i}function N$(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,zd((n=Z(e)).localStore,t.query,!0)];case 1:return r=s.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&X_(n,t.targetId,i.To),i)]}})})}function P$(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){return[2,_D((t=Z(e)).localStore).then(function(r){return zi(t,r)})]})})}function O$(e,t,n,r){return A(this,void 0,void 0,function(){var i,s;return C(this,function(u){switch(u.label){case 0:return[4,function(c,l){var h=Z(c),d=Z(h._n);return h.persistence.runTransaction("Lookup mutation documents","readonly",function(v){return d.jt(v,l).next(function(m){return m?h.Mn.pn(v,m):H.resolve(null)})})}((i=Z(e)).localStore,t)];case 1:return(s=u.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,Ku(i.remoteStore)];case 2:return u.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(bb(i,t,r||null),wb(i,t),function(c,l){Z(Z(c)._n).Gt(l)}(i.localStore,t)):le(),u.label=4;case 4:return[4,zi(i,s)];case 5:return u.sent(),[3,7];case 6:z("SyncEngine","Cannot apply mutation batch with id: "+t),u.label=7;case 7:return[2]}})})}function D$(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,u,c,l,h;return C(this,function(d){switch(d.label){case 0:return Tb(n=Z(e)),Ib(n),t!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,ck(n,r.toArray())]);case 1:return i=d.sent(),n.$o=!0,[4,Y_(n.remoteStore,!0)];case 2:for(d.sent(),s=0,u=i;s<u.length;s++)c=u[s],nv(n.remoteStore,c);return[3,7];case 3:return t!==!1||n.$o===!1?[3,7]:(l=[],h=Promise.resolve(),n.Vo.forEach(function(v,m){n.sharedClientState.isLocalQueryTarget(m)?l.push(m):h=h.then(function(){return Eu(n,m),bu(n.localStore,m,!0)}),Ll(n.remoteStore,m)}),[4,h]);case 4:return d.sent(),[4,ck(n,l)];case 5:return d.sent(),function(v){var m=Z(v);m.Co.forEach(function(y,w){Ll(m.remoteStore,w)}),m.No.ts(),m.Co=new Map,m.Do=new En(he.comparator)}(n),n.$o=!1,[4,Y_(n.remoteStore,!1)];case 6:d.sent(),d.label=7;case 7:return[2]}})})}function ck(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,u,c,l,h,d,v,m,y,w,E,T;return C(this,function(k){switch(k.label){case 0:r=Z(e),i=[],s=[],u=0,c=t,k.label=1;case 1:return u<c.length?(l=c[u],h=void 0,(d=r.Vo.get(l))&&d.length!==0?[4,wu(r.localStore,Rr(d[0]))]:[3,7]):[3,13];case 2:h=k.sent(),v=0,m=d,k.label=3;case 3:return v<m.length?(y=m[v],w=r.Po.get(y),[4,N$(r,w)]):[3,6];case 4:(E=k.sent()).snapshot&&s.push(E.snapshot),k.label=5;case 5:return v++,[3,3];case 6:return[3,11];case 7:return[4,yD(r.localStore,l)];case 8:return T=k.sent(),[4,wu(r.localStore,T)];case 9:return h=k.sent(),[4,_b(r,MD(T),l,!1)];case 10:k.sent(),k.label=11;case 11:i.push(h),k.label=12;case 12:return u++,[3,1];case 13:return[2,(r.vo._r(s),i)]}})})}function MD(e){return RO(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function x$(e){var t=Z(e);return Z(Z(t.localStore).persistence).fn()}function M$(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,u;return C(this,function(c){switch(c.label){case 0:return(i=Z(e)).$o?(z("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,_D(i.localStore)];case 3:return s=c.sent(),u=tb.createSynthesizedRemoteEventForCurrentChange(t,n==="current"),[4,zi(i,s,u)];case 4:return c.sent(),[3,8];case 5:return[4,bu(i.localStore,t,!0)];case 6:return c.sent(),Eu(i,t,r),[3,8];case 7:le(),c.label=8;case 8:return[2]}})})}function L$(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,u,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:if(!(r=Tb(e)).$o)return[3,10];i=0,s=t,y.label=1;case 1:return i<s.length?(u=s[i],r.Vo.has(u)?(z("SyncEngine","Adding an already active target "+u),[3,5]):[4,yD(r.localStore,u)]):[3,6];case 2:return c=y.sent(),[4,wu(r.localStore,c)];case 3:return l=y.sent(),[4,_b(r,MD(c),l.targetId,!1)];case 4:y.sent(),nv(r.remoteStore,l),y.label=5;case 5:return i++,[3,1];case 6:h=function(w){return C(this,function(E){switch(E.label){case 0:return r.Vo.has(w)?[4,bu(r.localStore,w,!1).then(function(){Ll(r.remoteStore,w),Eu(r,w)}).catch(na)]:[3,2];case 1:E.sent(),E.label=2;case 2:return[2]}})},d=0,v=n,y.label=7;case 7:return d<v.length?(m=v[d],[5,h(m)]):[3,10];case 8:y.sent(),y.label=9;case 9:return d++,[3,7];case 10:return[2]}})})}function Tb(e){var t=Z(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=DD.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=R$.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=T$.bind(null,t),t.vo._r=d$.bind(null,t.eventManager),t.vo.Mo=p$.bind(null,t.eventManager),t}function Ib(e){var t=Z(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=I$.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=S$.bind(null,t),t}function F$(e,t,n){var r=Z(e);(function(i,s,u){return A(this,void 0,void 0,function(){var c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return y.trys.push([0,14,,15]),[4,s.getMetadata()];case 1:return c=y.sent(),[4,function(w,E){var T=Z(w),k=$t(E.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",function(P){return T.Ke.getBundleMetadata(P,E.id)}).then(function(P){return!!P&&P.createTime.compareTo(k)>=0})}(i.localStore,c)];case 2:return y.sent()?[4,s.close()]:[3,4];case 3:return[2,(y.sent(),void u._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(c)))];case 4:return u._updateProgress(RD(c)),l=new g$(c,i.localStore,s.R),[4,s.Lo()];case 5:h=y.sent(),y.label=6;case 6:return h?[4,l.oo(h)]:[3,10];case 7:return(d=y.sent())&&u._updateProgress(d),[4,s.Lo()];case 8:h=y.sent(),y.label=9;case 9:return[3,6];case 10:return[4,l.complete()];case 11:return v=y.sent(),[4,zi(i,v.wn,void 0)];case 12:return y.sent(),[4,function(w,E){var T=Z(w);return T.persistence.runTransaction("Save bundle","readwrite",function(k){return T.Ke.saveBundleMetadata(k,E)})}(i.localStore,c)];case 13:return y.sent(),u._completeWith(v.progress),[3,15];case 14:return Rl("SyncEngine","Loading bundle failed with "+(m=y.sent())),u._failWith(m),[3,15];case 15:return[2]}})})})(r,t,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var LD=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return this.R=_f(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Ko=function(t){return pD(this.persistence,new dD,t.initialUser,this.R)},e.prototype.qo=function(t){return new HG(GG.bs,this.R)},e.prototype.Bo=function(t){return new wD},e.prototype.terminate=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),FD=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).Qo=n,s.cacheSizeBytes=r,s.forceOwnership=i,s.synchronizeTabs=!1,s}return ee(t,e),t.prototype.initialize=function(n){return A(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return i.sent(),[4,LG(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,n)];case 3:return i.sent(),[4,Ib(this.Qo.syncEngine)];case 4:return i.sent(),[4,Ku(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},t.prototype.Ko=function(n){return pD(this.persistence,new dD,n.initialUser,this.R)},t.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new TG(r,n.asyncQueue)},t.prototype.qo=function(n){var r=cb(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?si.withCacheSize(this.cacheSizeBytes):si.DEFAULT;return new RG(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,bD(),od(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(n){return new wD},t}(LD),U$=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Qo=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ee(t,e),t.prototype.initialize=function(n){return A(this,void 0,void 0,function(){var r,i=this;return C(this,function(s){switch(s.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return s.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof Ey?(this.sharedClientState.syncEngine={ui:O$.bind(null,r),ai:M$.bind(null,r),hi:L$.bind(null,r),fn:x$.bind(null,r),ci:P$.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.He(function(u){return A(i,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return[4,D$(this.Qo.syncEngine,u)];case 1:return c.sent(),this.gcScheduler&&(u&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):u||this.gcScheduler.stop()),[2]}})})})];case 4:return s.sent(),[2]}})})},t.prototype.Bo=function(n){var r=bD();if(!Ey.yt(r))throw new B(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=cb(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new Ey(r,n.asyncQueue,i,n.clientId,n.initialUser)},t}(FD),J_=function(){function e(){}return e.prototype.initialize=function(t,n){return A(this,void 0,void 0,function(){var r=this;return C(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(s){return uk(r.syncEngine,s,1)},this.remoteStore.remoteSyncer.handleCredentialChange=k$.bind(null,this.syncEngine),[4,Y_(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new h$},e.prototype.createDatastore=function(t){var n,r=_f(t.databaseInfo.databaseId),i=(n=t.databaseInfo,new XG(n));return function(s,u,c){return new e$(s,u,c)}(t.credentials,i,r)},e.prototype.createRemoteStore=function(t){var n,r,i,s,u,c=this;return n=this.localStore,r=this.datastore,i=t.asyncQueue,s=function(l){return uk(c.syncEngine,l,0)},u=ok.yt()?new ok:new zG,new n$(n,r,i,s,u)},e.prototype.createSyncEngine=function(t,n){return function(r,i,s,u,c,l,h){var d=new _$(r,i,s,u,c,l);return h&&(d.$o=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)},e.prototype.terminate=function(){return function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return n=Z(t),z("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,qu(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(e,t){t===void 0&&(t=10240);var n=0;return{read:function(){return A(this,void 0,void 0,function(){var r;return C(this,function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]})})},cancel:function(){return A(this,void 0,void 0,function(){return C(this,function(r){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rv=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),j$=function(){function e(t,n){var r=this;this.Go=t,this.R=n,this.metadata=new bn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(i){i&&i.io()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(i==null?void 0:i.payload)))},function(i){return r.metadata.reject(i)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return A(this,void 0,void 0,function(){return C(this,function(t){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,this.Jo()];case 1:return(t=s.sent())===null?[2,null]:(n=this.zo.decode(t),r=Number(n),isNaN(r)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(r)]);case 2:return i=s.sent(),[2,new v$(JSON.parse(i),t.length+r)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},e.prototype.Jo=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),n)])}})})},e.prototype.Xo=function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),n)]}})})},e.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},e.prototype.tc=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(t=r.sent()).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),[2,t.done]}})})},e}(),V$=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new B(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,u){return A(this,void 0,void 0,function(){var c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return c=Z(s),l=Ml(c.R)+"/documents",h={documents:u.map(function(w){return xl(c.R,w)})},[4,c.$i("BatchGetDocuments",l,h)];case 1:return d=y.sent(),v=new Map,d.forEach(function(w){var E=function(T,k){return"found"in k?function(P,M){ye(!!M.found),M.found.name,M.found.updateTime;var K=di(P,M.found.name),Q=$t(M.found.updateTime),F=new or({mapValue:{fields:M.found.fields}});return un.newFoundDocument(K,Q,F)}(T,k):"missing"in k?function(P,M){ye(!!M.missing),ye(!!M.readTime);var K=di(P,M.missing),Q=$t(M.readTime);return un.newNoDocument(K,Q)}(T,k):le()}(c.R,w);v.set(E.key.toString(),E)}),m=[],[2,(u.forEach(function(w){var E=v.get(w.toString());ye(!!E),m.push(E)}),m)]}})})}(this.datastore,t)];case 1:return[2,((n=i.sent()).forEach(function(s){return r.recordVersion(s)}),n)]}})})},e.prototype.set=function(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new yf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return A(this,void 0,void 0,function(){var t,n=this;return C(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,s){var u=he.fromPath(s);n.mutations.push(new eb(u,n.precondition(u)))}),[4,function(i,s){return A(this,void 0,void 0,function(){var u,c,l;return C(this,function(h){switch(h.label){case 0:return u=Z(i),c=Ml(u.R)+"/documents",l={writes:s.map(function(d){return Wd(u.R,d)})},[4,u.Ni("Commit",c,l)];case 1:return h.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw le();n=xe.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new B(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)},e.prototype.precondition=function(t){var n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?vn.updateTime(n):vn.none()},e.prototype.preconditionForUpdate=function(t){var n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(xe.min()))throw new B(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vn.updateTime(n)}return vn.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),B$=function(){function e(t,n,r,i){this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new fb(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return A(t,void 0,void 0,function(){var n,r,i=this;return C(this,function(s){return n=new V$(this.datastore),(r=this.sc(n))&&r.then(function(u){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(u)}).catch(function(c){i.ic(c)})})}).catch(function(u){i.ic(u)}),[2]})})})},e.prototype.sc=function(t){try{var n=this.updateFunction(t);return!ea(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},e.prototype.ic=function(t){var n=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!BO(n)}return!1},e}(),q$=function(){function e(t,n,r){var i=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Zt.UNAUTHENTICATED,this.clientId=bO.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(s){return A(i,void 0,void 0,function(){return C(this,function(u){switch(u.label){case 0:return z("FirestoreClient","Received user=",s.uid),[4,this.credentialListener(s)];case 1:return u.sent(),this.user=s,[2]}})})})}return e.prototype.getConfiguration=function(){return A(this,void 0,void 0,function(){return C(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return A(t,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=s.sent(),i=Wu(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(e,t){return A(this,void 0,void 0,function(){var n,r,i=this;return C(this,function(s){switch(s.label){case 0:return e.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=s.sent(),[4,t.initialize(n)];case 2:return s.sent(),r=n.initialUser,e.setCredentialChangeListener(function(u){return A(i,void 0,void 0,function(){return C(this,function(c){switch(c.label){case 0:return r.isEqual(u)?[3,2]:[4,vD(t.localStore,u)];case 1:c.sent(),r=u,c.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function jD(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,Sb(e)];case 1:return n=i.sent(),z("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(s){return function(u,c){return A(this,void 0,void 0,function(){var l,h;return C(this,function(d){switch(d.label){case 0:return(l=Z(u)).asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials"),h=jo(l),l.Or.add(3),[4,qu(l)];case 1:return d.sent(),h&&l.Br.set("Unknown"),[4,l.remoteSyncer.handleCredentialChange(c)];case 2:return d.sent(),l.Or.delete(3),[4,wf(l)];case 3:return d.sent(),[2]}})})}(t.remoteStore,s)}),e.onlineComponents=t,[2]}})})}function Sb(e){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(z("FirestoreClient","Using default OfflineComponentProvider"),[4,UD(e,new LD)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function iv(e){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(z("FirestoreClient","Using default OnlineComponentProvider"),[4,jD(e,new J_)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function fk(e){return Sb(e).then(function(t){return t.persistence})}function Cb(e){return Sb(e).then(function(t){return t.localStore})}function hk(e){return iv(e).then(function(t){return t.remoteStore})}function Ab(e){return iv(e).then(function(t){return t.syncEngine})}function Tu(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,iv(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=w$.bind(null,t.syncEngine),n.onUnlisten=b$.bind(null,t.syncEngine),n)]}})})}function dk(e,t,n){var r=this;n===void 0&&(n={});var i=new bn;return e.asyncQueue.enqueueAndForget(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(u){switch(u.label){case 0:return s=function(c,l,h,d,v){var m=new rv({next:function(w){l.enqueueAndForget(function(){return gb(c,y)});var E=w.docs.has(h);!E&&w.fromCache?v.reject(new B(O.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&d&&d.source==="server"?v.reject(new B(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(w)},error:function(w){return v.reject(w)}}),y=new yb(Vu(h.path),m,{includeMetadataChanges:!0,so:!0});return vb(c,y)},[4,Tu(e)];case 1:return[2,s.apply(void 0,[u.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function pk(e,t,n){var r=this;n===void 0&&(n={});var i=new bn;return e.asyncQueue.enqueueAndForget(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(u){switch(u.label){case 0:return s=function(c,l,h,d,v){var m=new rv({next:function(w){l.enqueueAndForget(function(){return gb(c,y)}),w.fromCache&&d.source==="server"?v.reject(new B(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(w)},error:function(w){return v.reject(w)}}),y=new yb(h,m,{includeMetadataChanges:!0,so:!0});return vb(c,y)},[4,Tu(e)];case 1:return[2,s.apply(void 0,[u.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}var K$=function(e,t,n,r,i,s,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.useFetchStreams=c},Xd=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),vk=new Map,VD=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},gk=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){this.changeListener=n,t.enqueueRetryable(function(){return n(Zt.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),H$=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){var r=this;this.changeListener=n,t.enqueueRetryable(function(){return n(r.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),W$=function(){function e(t){var n=this;this.currentUser=Zt.UNAUTHENTICATED,this.oc=new bn,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){z("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};t.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=t.getImmediate({optional:!0});i?r(i):(z("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.cc!==n?(z("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(ye(typeof i.accessToken=="string"),new VD(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,n){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return A(r,void 0,void 0,function(){return C(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ye(t===null||typeof t=="string"),new Zt(t)},e}(),G$=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),$$=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r}return e.prototype.getToken=function(){return Promise.resolve(new G$(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,n){t.enqueueRetryable(function(){return n(Zt.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(e,t,n){if(!n)throw new B(O.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function Rb(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new B(O.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function BD(e,t,n,r){if(t===!0&&r===!0)throw new B(O.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function mk(e){if(!he.isDocumentKey(e))throw new B(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function yk(e){if(he.isDocumentKey(e))throw new B(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function ov(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":le()}function He(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new B(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ov(e);throw new B(O.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function _k(e,t){if(t<=0)throw new B(O.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wk=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new B(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new B(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,BD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),Fl=function(){function e(t,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wk({}),this._settingsFrozen=!1,t instanceof Xd?(this._databaseId=t,this._credentials=new gk):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new B(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xd(r.options.projectId)}(t),this._credentials=new W$(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wk(t),t.credentials!==void 0&&(this._credentials=function(n){if(!n)return new gk;switch(n.type){case"gapi":var r=n.client;return ye(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new $$(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new B(O.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return t=this,(n=vk.get(t))&&(z("ComponentProvider","Removing Datastore"),vk.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),yt=function(){function e(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Co(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),$n=function(){function e(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Co=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,Vu(i))||this)._path=i,s.type="collection",s}return ee(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new yt(this.firestore,null,new he(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this._path)},t}($n);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Re(e),kb("collection","path",t),e instanceof Fl)return yk(n=Ge.fromString.apply(Ge,Ne([t],r))),new Co(e,null,n);if(!(e instanceof yt||e instanceof Co))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return yk(n=Ge.fromString.apply(Ge,Ne([e.path],r)).child(Ge.fromString(t))),new Co(e.firestore,null,n)}function sd(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Re(e),arguments.length===1&&(t=bO.u()),kb("doc","path",t),e instanceof Fl)return mk(n=Ge.fromString.apply(Ge,Ne([t],r))),new yt(e,null,new he(n));if(!(e instanceof yt||e instanceof Co))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return mk(n=e._path.child(Ge.fromString.apply(Ge,Ne([t],r)))),new yt(e.firestore,e instanceof Co?e.converter:null,new he(n))}function KD(e,t){return e=Re(e),t=Re(t),(e instanceof yt||e instanceof Co)&&(t instanceof yt||t instanceof Co)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function HD(e,t){return e=Re(e),t=Re(t),e instanceof $n&&t instanceof $n&&e.firestore===t.firestore&&pf(e._query,t._query)&&e.converter===t.converter}var z$=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new fb(this,"async_queue_retry"),this.Ic=function(){var r=od();r&&z("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var n=od();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},e.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var n=od();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(t){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new bn;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},e.prototype.enqueueRetryable=function(t){var n=this;this.enqueueAndForget(function(){return n.wc.push(t),n.bc()})},e.prototype.bc=function(){return A(this,void 0,void 0,function(){var t,n=this;return C(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ta(t=r.sent()))throw t;return z("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},e.prototype.Rc=function(t){var n=this,r=this.dc.then(function(){return n.gc=!0,t().catch(function(i){throw n.yc=i,n.gc=!1,Nt("INTERNAL UNHANDLED ERROR: ",function(s){var u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),u}(i)),i}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},e.prototype.enqueueAfterDelay=function(t,n,r){var i=this;this.Ac(),this.Tc.indexOf(t)>-1&&(n=0);var s=l$.createAndSchedule(this,t,n,r,function(u){return i.vc(u)});return this.mc.push(s),s},e.prototype.Ac=function(){this.yc&&le()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,t=this.dc];case 1:n.sent(),n.label=2;case 2:if(t!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.Vc=function(t){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===t)return!0;return!1},e.prototype.Sc=function(t){var n=this;return this.Pc().then(function(){n.mc.sort(function(u,c){return u.targetTimeMs-c.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var s=i[r];if(s.skipDelay(),t!=="all"&&s.timerId===t)break}return n.Pc()})},e.prototype.Dc=function(t){this.Tc.push(t)},e.prototype.vc=function(t){var n=this.mc.indexOf(t);this.mc.splice(n,1)},e}();function Iu(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,i=0,s=["next","error","complete"];i<s.length;i++){var u=s[i];if(u in r&&typeof r[u]=="function")return!0}return!1}(e)}var Q$=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new bn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(t,n,r){this._progressObserver={next:t,error:n,complete:r}},e.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},e.prototype.then=function(t,n){return this._taskCompletionResolver.promise.then(t,n)},e.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},e.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},e.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},e}(),Y$=-1,Ct=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).type="firestore",i._queue=new z$,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return ee(t,e),t.prototype._terminate=function(){return this._firestoreClient||WD(this),this._firestoreClient.terminate()},t}(Fl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(e){return e._firestoreClient||WD(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function WD(e){var t,n=e._freezeSettings(),r=function(i,s,u,c){return new K$(i,s,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new q$(e._credentials,e._queue,r)}function bk(e,t,n){var r=this,i=new bn;return e.asyncQueue.enqueue(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,UD(e,n)];case 1:return u.sent(),[4,jD(e,t)];case 2:return u.sent(),i.resolve(),[3,4];case 3:if(!function(c){return c.name==="FirebaseError"?c.code===O.FAILED_PRECONDITION||c.code===O.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(s=u.sent()))throw s;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Ek(e){if(e._initialized||e._terminated)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $r(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),Hs=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(Mn.fromBase64String(t))}catch(n){throw new B(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(Mn.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),ra=function(e){this._methodName=e},sv=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new B(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new B(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return Ue(this._lat,t._lat)||Ue(this._long,t._long)},e}(),X$=/^__.*__$/,J$=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return this.fieldMask!==null?new Uo(t,this.data,this.fieldMask,n,this.fieldTransforms):new mf(t,this.data,n,this.fieldTransforms)},e}(),GD=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return new Uo(t,this.data,this.fieldMask,n,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}var zD=function(){function e(t,n,r,i,s,u){this.settings=t,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Cc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.$c(t),i},e.prototype.Oc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.Cc(),i},e.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(t){return Jd(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(t){return this.fieldMask.find(function(n){return t.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return t.isPrefixOf(n.field)})!==void 0},e.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},e.prototype.$c=function(t){if(t.length===0)throw this.Lc("Document fields must not be empty");if($D(this.Nc)&&X$.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),Z$=function(){function e(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.R=r||_f(t)}return e.prototype.Uc=function(t,n,r,i){return i===void 0&&(i=!1),new zD({Nc:t,methodName:n,qc:r,path:$r.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function ia(e){var t=e._freezeSettings(),n=_f(e._databaseId);return new Z$(e._databaseId,!!t.ignoreUndefinedProperties,n)}function av(e,t,n,r,i,s){s===void 0&&(s={});var u=e.Uc(s.merge||s.mergeFields?2:0,t,n,i);Db("Data must be an object, but it was:",u,r);var c,l,h=XD(r,u);if(s.merge)c=new cu(u.fieldMask),l=u.fieldTransforms;else if(s.mergeFields){for(var d=[],v=0,m=s.mergeFields;v<m.length;v++){var y=Z_(t,m[v],n);if(!u.contains(y))throw new B(O.INVALID_ARGUMENT,"Field '"+y+"' is specified in your field mask but missing from your input data.");ZD(d,y)||d.push(y)}c=new cu(d),l=u.fieldTransforms.filter(function(w){return c.covers(w.field)})}else c=null,l=u.fieldTransforms;return new J$(new or(h),c,l)}var Nb=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ee(t,e),t.prototype._toFieldTransform=function(n){if(n.Nc!==2)throw n.Nc===1?n.Lc(this._methodName+"() can only appear at the top level of your update data"):n.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(ra);function QD(e,t,n){return new zD({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var ez=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ee(t,e),t.prototype._toFieldTransform=function(n){return new gf(n.path,new du)},t.prototype.isEqual=function(n){return n instanceof t},t}(ra),tz=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return ee(t,e),t.prototype._toFieldTransform=function(n){var r=QD(this,n,!0),i=this.Kc.map(function(u){return oa(u,r)}),s=new qs(i);return new gf(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(ra),nz=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return ee(t,e),t.prototype._toFieldTransform=function(n){var r=QD(this,n,!0),i=this.Kc.map(function(u){return oa(u,r)}),s=new Ks(i);return new gf(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(ra),rz=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Qc=r,i}return ee(t,e),t.prototype._toFieldTransform=function(n){var r=new pu(n.R,MO(n.R,this.Qc));return new gf(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(ra);function Pb(e,t,n,r){var i=e.Uc(1,t,n);Db("Data must be an object, but it was:",i,r);var s=[],u=or.empty();Zs(r,function(l,h){var d=xb(t,l,n);h=Re(h);var v=i.Oc(d);if(h instanceof Nb)s.push(d);else{var m=oa(h,v);m!=null&&(s.push(d),u.set(d,m))}});var c=new cu(s);return new GD(u,c,i.fieldTransforms)}function Ob(e,t,n,r,i,s){var u=e.Uc(1,t,n),c=[Z_(t,r,n)],l=[i];if(s.length%2!=0)throw new B(O.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<s.length;h+=2)c.push(Z_(t,s[h])),l.push(s[h+1]);for(var d=[],v=or.empty(),m=c.length-1;m>=0;--m)if(!ZD(d,c[m])){var y=c[m],w=l[m];w=Re(w);var E=u.Oc(y);if(w instanceof Nb)d.push(y);else{var T=oa(w,E);T!=null&&(d.push(y),v.set(y,T))}}var k=new cu(d);return new GD(v,k,u.fieldTransforms)}function YD(e,t,n,r){return r===void 0&&(r=!1),oa(n,e.Uc(r?4:3,t))}function oa(e,t){if(JD(e=Re(e)))return Db("Unsupported field value:",t,e),XD(e,t);if(e instanceof ra)return function(n,r){if(!$D(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.Nc!==4)throw t.Lc("Nested arrays are not supported");return function(n,r){for(var i=[],s=0,u=0,c=n;u<c.length;u++){var l=oa(c[u],r.Mc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if((n=Re(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return MO(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=Gn.fromDate(n);return{timestampValue:Dl(r.R,i)}}if(n instanceof Gn)return i=new Gn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:Dl(r.R,i)};if(n instanceof sv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Hs)return{bytesValue:GO(r.R,n._byteString)};if(n instanceof yt){i=r.databaseId;var s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Lc("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:rb(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+ov(n))}(e,t)}function XD(e,t){var n={};return TO(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zs(e,function(r,i){var s=oa(i,t.kc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function JD(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Gn||e instanceof sv||e instanceof Hs||e instanceof yt||e instanceof ra)}function Db(e,t,n){if(!JD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=ov(n);throw r==="an object"?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function Z_(e,t,n){if((t=Re(t))instanceof pi)return t._internalPath;if(typeof t=="string")return xb(e,t);throw Jd("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var iz=new RegExp("[~\\*/\\[\\]]");function xb(e,t,n){if(t.search(iz)>=0)throw Jd("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(pi.bind.apply(pi,Ne([void 0],t.split("."))))()._internalPath}catch{throw Jd("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Jd(e,t,n,r,i){var s=r&&!r.isEmpty(),u=i!==void 0,c="Function "+t+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var l="";return(s||u)&&(l+=" (found",s&&(l+=" in field "+r),u&&(l+=" in document "+i),l+=")"),new B(O.INVALID_ARGUMENT,(c+=". ")+e+l)}function ZD(e,t){return e.some(function(n){return n.isEqual(t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ul=function(){function e(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new yt(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this._document!==null},e.prototype.data=function(){if(this._document){if(this._converter){var t=new oz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var n=this._document.data.field(Zd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}},e}(),oz=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ee(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Ul);function Zd(e,t){return typeof t=="string"?xb(e,t):t instanceof pi?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ts=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),ji=function(e){function t(n,r,i,s,u,c){var l=this;return(l=e.call(this,n,r,i,s,c)||this)._firestore=n,l._firestoreImpl=n,l.metadata=u,l}return ee(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new sl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(Zd("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},t}(Ul),sl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ee(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(ji),mo=function(){function e(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ts(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._snapshot.docs.forEach(function(i){t.call(n,new sl(r._firestore,r._userDataWriter,i.key,i,new Ts(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var s=0;return r._snapshot.docChanges.map(function(c){return{type:"added",doc:new sl(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ts(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}})}var u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(c){return i||c.type!==3}).map(function(c){var l=new sl(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ts(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,d=-1;return c.type!==0&&(h=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(d=(u=u.add(c.doc)).indexOf(c.doc.key)),{type:sz(c.type),doc:l,oldIndex:h,newIndex:d}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},e}();function sz(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}function ex(e,t){return e instanceof ji&&t instanceof ji?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof mo&&t instanceof mo&&e._firestore===t._firestore&&HD(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(e){if(Hd(e)&&e.explicitOrderBy.length===0)throw new B(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bf=function(){};function ao(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];e=s._apply(e)}return e}var az=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).jc=n,s.Wc=r,s.Gc=i,s.type="where",s}return ee(t,e),t.prototype._apply=function(n){var r=ia(n.firestore),i=function(s,u,c,l,h,d,v){var m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+d+"' queries on FieldPath.documentId().");if(d==="in"||d==="not-in"){Ak(v,d);for(var y=[],w=0,E=v;w<E.length;w++){var T=E[w];y.push(Ck(l,s,T))}m={arrayValue:{values:y}}}else m=Ck(l,s,v)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ak(v,d),m=YD(c,"where",v,d==="in"||d==="not-in");var k=ar.create(h,d,m);return function(P,M){if(M.g()){var K=J0(P);if(K!==null&&!K.isEqual(M.field))throw new B(O.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+K.toString()+"' and '"+M.field.toString()+"'");var Q=X0(P);Q!==null&&rx(P,M.field,Q)}var F=function(re,te){for(var Ee=0,N=re.filters;Ee<N.length;Ee++){var _t=N[Ee];if(te.indexOf(_t.op)>=0)return _t.op}return null}(P,function(re){switch(re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(M.op));if(F!==null)throw F===M.op?new B(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+M.op.toString()+"' filter."):new B(O.INVALID_ARGUMENT,"Invalid query. You cannot use '"+M.op.toString()+"' filters with '"+F.toString()+"' filters.")}(s,k),k}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new $n(n.firestore,n.converter,function(s,u){var c=s.filters.concat([u]);return new $i(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(n._query,i))},t}(bf),uz=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).jc=n,i.zc=r,i.type="orderBy",i}return ee(t,e),t.prototype._apply=function(n){var r=function(i,s,u){if(i.startAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new Qa(s,u);return function(l,h){if(X0(l)===null){var d=J0(l);d!==null&&rx(l,d,h.field)}}(i,c),c}(n._query,this.jc,this.zc);return new $n(n.firestore,n.converter,function(i,s){var u=i.explicitOrderBy.concat([s]);return new $i(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n._query,r))},t}(bf),Tk=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Hc=r,s.Jc=i,s}return ee(t,e),t.prototype._apply=function(n){return new $n(n.firestore,n.converter,NO(n._query,this.Hc,this.Jc))},t}(bf),Ik=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=i,s}return ee(t,e),t.prototype._apply=function(n){var r=nx(n,this.type,this.Yc,this.Xc);return new $n(n.firestore,n.converter,function(i,s){return new $i(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(n._query,r))},t}(bf),Sk=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.Yc=r,s.Xc=i,s}return ee(t,e),t.prototype._apply=function(n){var r=nx(n,this.type,this.Yc,this.Xc);return new $n(n.firestore,n.converter,function(i,s){return new $i(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(n._query,r))},t}(bf);function nx(e,t,n,r){if(n[0]=Re(n[0]),n[0]instanceof Ul)return function(s,u,c,l,h){if(!l)throw new B(O.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var d=[],v=0,m=hu(s);v<m.length;v++){var y=m[v];if(y.field.isKeyField())d.push(Bd(u,l.key));else{var w=l.data.field(y.field);if(z0(w))throw new B(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){var E=y.field.canonicalString();throw new B(O.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+E+"' (used as the orderBy) does not exist.")}d.push(w)}}return new Ol(d,h)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ia(e.firestore);return function(s,u,c,l,h,d){var v=s.explicitOrderBy;if(h.length>v.length)throw new B(O.INVALID_ARGUMENT,"Too many arguments provided to "+l+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var m=[],y=0;y<h.length;y++){var w=h[y];if(v[y].field.isKeyField()){if(typeof w!="string")throw new B(O.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+l+"(), but got a "+typeof w);if(!Z0(s)&&w.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+l+"() must be a plain document ID, but '"+w+"' contains a slash.");var E=s.path.child(Ge.fromString(w));if(!he.isDocumentKey(E))throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+l+"() must result in a valid document path, but '"+E+"' is not because it contains an odd number of segments.");var T=new he(E);m.push(Bd(u,T))}else{var k=YD(c,l,w);m.push(k)}}return new Ol(m,d)}(e._query,e.firestore._databaseId,i,t,n,r)}function Ck(e,t,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z0(t)&&n.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(Ge.fromString(n));if(!he.isDocumentKey(r))throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Bd(e,new he(r))}if(n instanceof yt)return Bd(e,n._key);throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ov(n)+".")}function Ak(e,t){if(!Array.isArray(e)||e.length===0)throw new B(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new B(O.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function rx(e,t,n){if(!n.isEqual(t))throw new B(O.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mb=function(){function e(){}return e.prototype.convertValue=function(t,n){switch(n===void 0&&(n="none"),Bs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(lu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw le()}},e.prototype.convertObject=function(t,n){var r=this,i={};return Zs(t.fields,function(s,u){i[s]=r.convertValue(u,n)}),i},e.prototype.convertGeoPoint=function(t){return new sv(Rt(t.latitude),Rt(t.longitude))},e.prototype.convertArray=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.convertValue(i,n)})},e.prototype.convertServerTimestamp=function(t,n){switch(n){case"previous":var r=SO(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nl(t));default:return null}},e.prototype.convertTimestamp=function(t){var n=Do(t);return new Gn(n.seconds,n.nanos)},e.prototype.convertDocumentKey=function(t,n){var r=Ge.fromString(t);ye(tD(r));var i=new Xd(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(n)||Nt("Document "+s+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),s},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var cz=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return ee(t,e),t.prototype.convertBytes=function(n){return new Hs(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new yt(this.firestore,null,r)},t}(Mb),lz=function(){function e(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ia(t)}return e.prototype.set=function(t,n,r){this._verifyNotCommitted();var i=yo(t,this._firestore),s=uv(i.converter,n,r),u=av(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(u.toMutation(i._key,vn.none())),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this._verifyNotCommitted();var u,c=yo(t,this._firestore);return u=typeof(n=Re(n))=="string"||n instanceof pi?Ob(this._dataReader,"WriteBatch.update",c._key,n,r,i):Pb(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(u.toMutation(c._key,vn.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var n=yo(t,this._firestore);return this._mutations=this._mutations.concat(new yf(n._key,vn.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new B(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(e,t){if((e=Re(e)).firestore!==t)throw new B(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Os=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return ee(t,e),t.prototype.convertBytes=function(n){return new Hs(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new yt(this.firestore,null,r)},t}(Mb);function kk(e,t,n){e=He(e,yt);var r=He(e.firestore,Ct),i=uv(e.converter,t,n);return Ef(r,[av(ia(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,vn.none())])}function Rk(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=He(e,yt);var s=He(e.firestore,Ct),u=ia(s);return Ef(s,[(typeof(t=Re(t))=="string"||t instanceof pi?Ob(u,"updateDoc",e._key,t,n,r):Pb(u,"updateDoc",e._key,t)).toMutation(e._key,vn.exists(!0))])}function ix(e){for(var t,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];e=Re(e);var u={includeMetadataChanges:!1},c=0;typeof i[c]!="object"||Iu(i[c])||(u=i[c],c++);var l,h,d,v={includeMetadataChanges:u.includeMetadataChanges};if(Iu(i[c])){var m=i[c];i[c]=(t=m.next)===null||t===void 0?void 0:t.bind(m),i[c+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),i[c+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}if(e instanceof yt)h=He(e.firestore,Ct),d=Vu(e._key.path),l={next:function(E){i[c]&&i[c](ew(h,e,E))},error:i[c+1],complete:i[c+2]};else{var y=He(e,$n);h=He(y.firestore,Ct),d=y._query;var w=new Os(h);l={next:function(E){i[c]&&i[c](new mo(h,w,y,E))},error:i[c+1],complete:i[c+2]},tx(e._query)}return function(E,T,k,P){var M=this,K=new rv(P),Q=new yb(T,K,k);return E.asyncQueue.enqueueAndForget(function(){return A(M,void 0,void 0,function(){var F;return C(this,function(re){switch(re.label){case 0:return F=vb,[4,Tu(E)];case 1:return[2,F.apply(void 0,[re.sent(),Q])]}})})}),function(){K.Wo(),E.asyncQueue.enqueueAndForget(function(){return A(M,void 0,void 0,function(){var F;return C(this,function(re){switch(re.label){case 0:return F=gb,[4,Tu(E)];case 1:return[2,F.apply(void 0,[re.sent(),Q])]}})})})}}(Ht(h),d,v,l)}function Ef(e,t){return function(n,r){var i=this,s=new bn;return n.asyncQueue.enqueueAndForget(function(){return A(i,void 0,void 0,function(){var u;return C(this,function(c){switch(c.label){case 0:return u=E$,[4,Ab(n)];case 1:return[2,u.apply(void 0,[c.sent(),r,s])]}})})}),s.promise}(Ht(e),t)}function ew(e,t,n){var r=n.docs.get(t._key),i=new Os(e);return new ji(e,i,t._key,r,new Ts(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fz=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this)._firestore=n,i}return ee(t,e),t.prototype.get=function(n){var r=this,i=yo(n,this._firestore),s=new Os(this._firestore);return e.prototype.get.call(this,n).then(function(u){return new ji(r._firestore,s,i._key,u._document,new Ts(!1,!1),i.converter)})},t}(function(){function e(t,n){this._firestore=t,this._transaction=n,this._dataReader=ia(t)}return e.prototype.get=function(t){var n=this,r=yo(t,this._firestore),i=new cz(this._firestore);return this._transaction.lookup([r._key]).then(function(s){if(!s||s.length!==1)return le();var u=s[0];if(u.isFoundDocument())return new Ul(n._firestore,i,u.key,u,r.converter);if(u.isNoDocument())return new Ul(n._firestore,i,r._key,null,r.converter);throw le()})},e.prototype.set=function(t,n,r){var i=yo(t,this._firestore),s=uv(i.converter,n,r),u=av(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,u),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var u,c=yo(t,this._firestore);return u=typeof(n=Re(n))=="string"||n instanceof pi?Ob(this._dataReader,"Transaction.update",c._key,n,r,i):Pb(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,u),this},e.prototype.delete=function(t){var n=yo(t,this._firestore);return this._transaction.delete(n._key),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(){if(typeof Uint8Array=="undefined")throw new B(O.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Pk(){if(typeof atob=="undefined")throw new B(O.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ox=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return Pk(),new e(Hs.fromBase64String(t))},e.fromUint8Array=function(t){return Nk(),new e(Hs.fromUint8Array(t))},e.prototype.toBase64=function(){return Pk(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Nk(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),hz=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){Ek(r=He(r,Ct));var s=Ht(r),u=r._freezeSettings(),c=new J_;return bk(s,c,new FD(c,u.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(t._delegate,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){Ek(n=He(n,Ct));var r=Ht(n),i=n._freezeSettings(),s=new J_;return bk(r,s,new U$(s,i.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new B(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new bn;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return A(r,void 0,void 0,function(){var s;return C(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,function(c){return A(this,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return mu.yt()?(l=c+"main",[4,mu.delete(l)]):[2,Promise.resolve()];case 1:return h.sent(),[2]}})})}(cb(n._databaseId,n._persistenceKey))];case 1:return u.sent(),i.resolve(),[3,3];case 2:return s=u.sent(),i.reject(s),[3,3];case 3:return[2]}})})}),i.promise}(t._delegate)},e}(),Lb=function(){function e(t,n,r){var i=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Xd||(this.tu=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var n=this._delegate._getSettings();t.merge||n.host===t.host||Rl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},n),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),function(i,s,u,c){var l;c===void 0&&(c={});var h=(i=He(i,Fl))._getSettings();if(h.host!=="firestore.googleapis.com"&&h.host!==s&&Rl("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:s+":"+u,ssl:!1})),c.mockUserToken){var d,v;if(typeof c.mockUserToken=="string")d=c.mockUserToken,v=Zt.MOCK_USER;else{d=Mw(c.mockUserToken,(l=i._app)===null||l===void 0?void 0:l.options.projectId);var m=c.mockUserToken.sub||c.mockUserToken.user_id;if(!m)throw new B(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Zt(m)}i._credentials=new H$(new VD(d,v))}}(this._delegate,t,n,r)},e.prototype.enableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return A(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,fk(t)];case 1:return r=s.sent(),[4,hk(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!0),function(u){var c=Z(u);return c.Or.delete(0),wf(c)}(i))]}})})})}(Ht(He(this._delegate,Ct)))},e.prototype.disableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return A(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return[4,fk(t)];case 1:return r=s.sent(),[4,hk(t)];case 2:return i=s.sent(),[2,(r.setNetworkEnabled(!1),function(u){return A(this,void 0,void 0,function(){var c;return C(this,function(l){switch(l.label){case 0:return(c=Z(u)).Or.add(0),[4,qu(c)];case 1:return l.sent(),c.Br.set("Offline"),[2]}})})}(i))]}})})})}(Ht(He(this._delegate,Ct)))},e.prototype.enablePersistence=function(t){var n=!1,r=!1;return t&&BD("synchronizeTabs",n=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new bn;return t.asyncQueue.enqueueAndForget(function(){return A(n,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return i=C$,[4,Ab(t)];case 1:return[2,i.apply(void 0,[s.sent(),r])]}})})}),r.promise}(Ht(He(this._delegate,Ct)))},e.prototype.onSnapshotsInSync=function(t){return function(n,r){return function(i,s){var u=this,c=new rv(s);return i.asyncQueue.enqueueAndForget(function(){return A(u,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return l=function(d,v){Z(d).Gr.add(v),v.next()},[4,Tu(i)];case 1:return[2,l.apply(void 0,[h.sent(),c])]}})})}),function(){c.Wo(),i.asyncQueue.enqueueAndForget(function(){return A(u,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return l=function(d,v){Z(d).Gr.delete(v)},[4,Tu(i)];case 1:return[2,l.apply(void 0,[h.sent(),c])]}})})})}}(Ht(n=He(n,Ct)),Iu(r)?r:{next:r})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new ep(this,qD(this._delegate,t))}catch(n){throw Rn(n,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Ds(this,sd(this._delegate,t))}catch(n){throw Rn(n,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Tf(this,function(n,r){if(n=He(n,Fl),kb("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new B(O.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new $n(n,null,function(i){return new $i(Ge.emptyPath(),i)}(r))}(this._delegate,t))}catch(n){throw Rn(n,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var n=this;return function(r,i){return function(s,u){var c=this,l=new bn;return s.asyncQueue.enqueueAndForget(function(){return A(c,void 0,void 0,function(){var h;return C(this,function(d){switch(d.label){case 0:return[4,function(v){return iv(v).then(function(m){return m.datastore})}(s)];case 1:return h=d.sent(),new B$(s.asyncQueue,h,u,l).run(),[2]}})})}),l.promise}(Ht(r),function(s){return i(new fz(r,s))})}(this._delegate,function(r){return t(new sx(n,r))})},e.prototype.batch=function(){var t=this;return Ht(this._delegate),new ax(new lz(this._delegate,function(n){return Ef(t._delegate,n)}))},e.prototype.loadBundle=function(t){throw new B(O.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new B(O.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),cv=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return ee(t,e),t.prototype.convertBytes=function(n){return new ox(new Hs(n))},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return Ds.eu(r,this.firestore,null)},t}(Mb);function dz(e){var t;t=e,Wr.setLogLevel(t)}var sx=function(){function e(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new cv(t)}return e.prototype.get=function(t){var n=this,r=Is(t);return this._delegate.get(r).then(function(i){return new jl(n._firestore,new ji(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},e.prototype.set=function(t,n,r){var i=Is(t);return r?(Rb("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];var c=Is(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,Ne([c,n,r],s)),this},e.prototype.delete=function(t){var n=Is(t);return this._delegate.delete(n),this},e}(),ax=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,n,r){var i=Is(t);return r?(Rb("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];var c=Is(t);return arguments.length===2?this._delegate.update(c,n):(i=this._delegate).update.apply(i,Ne([c,n,r],s)),this},e.prototype.delete=function(t){var n=Is(t);return this._delegate.delete(n),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),lv=function(){function e(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}return e.prototype.fromFirestore=function(t,n){var r=new sl(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Vl(this._firestore,r),n!=null?n:{})},e.prototype.toFirestore=function(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var s=i.get(n);return s||(s=new e(t,new cv(t),n),i.set(n,s)),s},e}();lv.su=new WeakMap;var Ds=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new cv(t)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new B(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new yt(n._delegate,r,new he(t)))},e.eu=function(t,n,r){return new e(n,new yt(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ep(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new ep(this.firestore,qD(this._delegate,t))}catch(n){throw Rn(n,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=Re(t))instanceof yt&&KD(this._delegate,t)},e.prototype.set=function(t,n){n=Rb("DocumentReference.set",n);try{return n?kk(this._delegate,t,n):kk(this._delegate,t)}catch(r){throw Rn(r,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?Rk(this._delegate,t):Rk.apply(void 0,Ne([this._delegate,t,n],r))}catch(s){throw Rn(s,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Ef(He((t=this._delegate).firestore,Ct),[new yf(t._key,vn.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=ux(n),s=cx(n,function(u){return new jl(t.firestore,new ji(t.firestore._delegate,t._userDataWriter,u._key,u._document,u.metadata,t._delegate.converter))});return ix(this._delegate,i,s)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=He(r,yt);var i=He(r.firestore,Ct),s=Ht(i),u=new Os(i);return function(c,l){var h=this,d=new bn;return c.asyncQueue.enqueueAndForget(function(){return A(h,void 0,void 0,function(){var v;return C(this,function(m){switch(m.label){case 0:return v=function(y,w,E){return A(this,void 0,void 0,function(){var T,k;return C(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,,3]),[4,function(M,K){var Q=Z(M);return Q.persistence.runTransaction("read document","readonly",function(F){return Q.Mn.mn(F,K)})}(y,w)];case 1:return(k=P.sent()).isFoundDocument()?E.resolve(k):k.isNoDocument()?E.resolve(null):E.reject(new B(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return T=P.sent(),k=Wu(T,"Failed to get document '"+w+" from cache"),E.reject(k),[3,3];case 3:return[2]}})})},[4,Cb(c)];case 1:return[2,v.apply(void 0,[m.sent(),l,d])]}})})}),d.promise}(s,r._key).then(function(c){return new ji(i,u,r._key,c,new Ts(c!==null&&c.hasLocalMutations,!0),r.converter)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=He(r,yt);var i=He(r.firestore,Ct);return dk(Ht(i),r._key,{source:"server"}).then(function(s){return ew(i,r,s)})}(this._delegate):function(r){r=He(r,yt);var i=He(r.firestore,Ct);return dk(Ht(i),r._key).then(function(s){return ew(i,r,s)})}(this._delegate)).then(function(r){return new jl(n.firestore,new ji(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(lv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function Rn(e,t,n){return e.message=e.message.replace(t,n),e}function ux(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!Iu(r))return r}return{}}function cx(e,t){var n,r,i;return{next:function(s){i.next&&i.next(t(s))},error:(n=(i=Iu(e[0])?e[0]:Iu(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var jl=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"ref",{get:function(){return new Ds(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,n){return this._delegate.get(t,n)},e.prototype.isEqual=function(t){return ex(this._delegate,t._delegate)},e}(),Vl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return ee(t,e),t.prototype.data=function(n){return this._delegate.data(n)},t}(jl),Tf=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new cv(t)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,ao(this._delegate,function(i,s,u){var c=s,l=Zd("where",i);return new az(l,c,u)}(t,n,r)))}catch(i){throw Rn(i,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,ao(this._delegate,function(r,i){i===void 0&&(i="asc");var s=i,u=Zd("orderBy",r);return new uz(u,s)}(t,n)))}catch(r){throw Rn(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,ao(this._delegate,function(n){return _k("limit",n),new Tk("limit",n,"F")}(t)))}catch(n){throw Rn(n,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,ao(this._delegate,function(n){return _k("limitToLast",n),new Tk("limitToLast",n,"L")}(t)))}catch(n){throw Rn(n,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ao(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Ik("startAt",r,!0)}.apply(void 0,t)))}catch(r){throw Rn(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ao(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Ik("startAfter",r,!1)}.apply(void 0,t)))}catch(r){throw Rn(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ao(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Sk("endBefore",r,!0)}.apply(void 0,t)))}catch(r){throw Rn(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ao(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new Sk("endAt",r,!1)}.apply(void 0,t)))}catch(r){throw Rn(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return HD(this._delegate,t._delegate)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=He(r,$n);var i=He(r.firestore,Ct),s=Ht(i),u=new Os(i);return function(c,l){var h=this,d=new bn;return c.asyncQueue.enqueueAndForget(function(){return A(h,void 0,void 0,function(){var v;return C(this,function(m){switch(m.label){case 0:return v=function(y,w,E){return A(this,void 0,void 0,function(){var T,k,P,M,K;return C(this,function(Q){switch(Q.label){case 0:return Q.trys.push([0,2,,3]),[4,zd(y,w,!0)];case 1:return K=Q.sent(),T=new OD(w,K.Bn),k=T._o(K.documents),P=T.applyChanges(k,!1),E.resolve(P.snapshot),[3,3];case 2:return M=Q.sent(),K=Wu(M,"Failed to execute query '"+w+" against cache"),E.reject(K),[3,3];case 3:return[2]}})})},[4,Cb(c)];case 1:return[2,v.apply(void 0,[m.sent(),l,d])]}})})}),d.promise}(s,r._query).then(function(c){return new mo(i,u,r,c)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=He(r,$n);var i=He(r.firestore,Ct),s=Ht(i),u=new Os(i);return pk(s,r._query,{source:"server"}).then(function(c){return new mo(i,u,r,c)})}(this._delegate):function(r){r=He(r,$n);var i=He(r.firestore,Ct),s=Ht(i),u=new Os(i);return tx(r._query),pk(s,r._query).then(function(c){return new mo(i,u,r,c)})}(this._delegate)).then(function(r){return new tw(n.firestore,new mo(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=ux(n),s=cx(n,function(u){return new tw(t.firestore,new mo(t.firestore._delegate,t._userDataWriter,t._delegate,u._snapshot))});return ix(this._delegate,i,s)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(lv.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),pz=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Vl(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),tw=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"query",{get:function(){return new Tf(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(n){return new Vl(t._firestore,n)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var n=this;return this._delegate.docChanges(t).map(function(r){return new pz(n._firestore,r)})},e.prototype.forEach=function(t,n){var r=this;this._delegate.forEach(function(i){t.call(n,new Vl(r._firestore,i))})},e.prototype.isEqual=function(t){return ex(this._delegate,t._delegate)},e}(),ep=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i._delegate=r,i}return ee(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new Ds(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new Ds(this.firestore,n===void 0?sd(this._delegate):sd(this._delegate,n))}catch(r){throw Rn(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(i,s){var u=He(i.firestore,Ct),c=sd(i),l=uv(i.converter,s);return Ef(u,[av(ia(i.firestore),"addDoc",c._key,l,i.converter!==null,{}).toMutation(c._key,vn.exists(!1))]).then(function(){return c})}(this._delegate,n).then(function(i){return new Ds(r.firestore,i)})},t.prototype.isEqual=function(n){return KD(this._delegate,n._delegate)},t.prototype.withConverter=function(n){return new t(this.firestore,n?this._delegate.withConverter(lv.nu(this.firestore,n)):this._delegate.withConverter(null))},t}(Tf);function Is(e){return He(e,yt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vz=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._delegate=new(pi.bind.apply(pi,Ne([void 0],t)))}return e.documentId=function(){return new e($r.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=Re(t))instanceof pi&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),gz=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new ez("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Nb("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new tz("arrayUnion",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new nz("arrayRemove",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(r){return new rz("increment",r)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(e){return function(t,n){var r=Ht(t=He(t,Ct)),i=new Q$;return function(s,u,c,l){var h=this,d=function(v,m){return function(y,w){return new j$(y,w)}(function(y,w){if(y instanceof Uint8Array)return lk(y,w);if(y instanceof ArrayBuffer)return lk(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(typeof v=="string"?new TextEncoder().encode(v):v),m)}(c,_f(u));s.asyncQueue.enqueueAndForget(function(){return A(h,void 0,void 0,function(){var v;return C(this,function(m){switch(m.label){case 0:return v=F$,[4,Ab(s)];case 1:return v.apply(void 0,[m.sent(),d,l]),[2]}})})})}(r,t._databaseId,n,i),i}(this._delegate,e)}function yz(e){var t,n,r=this;return(t=this._delegate,n=e,function(i,s){var u=this;return i.asyncQueue.enqueue(function(){return A(u,void 0,void 0,function(){var c;return C(this,function(l){switch(l.label){case 0:return c=function(h,d){var v=Z(h);return v.persistence.runTransaction("Get named query","readonly",function(m){return v.Ke.getNamedQuery(m,d)})},[4,Cb(i)];case 1:return[2,c.apply(void 0,[l.sent(),s])]}})})})}(Ht(t=He(t,Ct)),n).then(function(i){return i?new $n(t,null,i.query):null})).then(function(i){return i?new Tf(r,i):null})}var _z={Firestore:Lb,GeoPoint:sv,Timestamp:Gn,Blob:ox,Transaction:sx,WriteBatch:ax,DocumentReference:Ds,DocumentSnapshot:jl,Query:Tf,QueryDocumentSnapshot:Vl,QuerySnapshot:tw,CollectionReference:ep,FieldPath:vz,FieldValue:gz,setLogLevel:dz,CACHE_SIZE_UNLIMITED:Y$};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wz(e){(function(t,n){t.INTERNAL.registerComponent(new wn("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},_z)))})(e,function(t,n){return new Lb(t,new Ct(t,n),new hz)}),e.registerVersion("@firebase/firestore","2.4.1")}wz(fe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(e){e.prototype.loadBundle=mz,e.prototype.namedQuery=yz}bz(Lb);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ok={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ya=function(e){ee(t,e);function t(n,r,i){var s=e.call(this,r)||this;return Object.setPrototypeOf(s,t.prototype),s.code=n,s.details=i,s}return t}(Error);function Ez(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Tz(e,t,n){var r=Ez(e),i=r,s=void 0;try{var u=t&&t.error;if(u){var c=u.status;if(typeof c=="string"){if(!Ok[c])return new Ya("internal","internal");r=Ok[c],i=c}var l=u.message;typeof l=="string"&&(i=l),s=u.details,s!==void 0&&(s=n.decode(s))}}catch{}return r==="ok"?null:new Ya(r,i,s)}var Iz=function(){function e(t,n){var r=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(function(i){return r.auth=i},function(){}),this.messaging||n.get().then(function(i){return r.messaging=i},function(){})}return e.prototype.getAuthToken=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:if(!this.auth)return[2,void 0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=n.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return n.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||Notification.permission!=="granted")return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getContext=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return t=r.sent(),[4,this.getInstanceIdToken()];case 2:return n=r.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sz="type.googleapis.com/google.protobuf.Int64Value",Cz="type.googleapis.com/google.protobuf.UInt64Value";function Dk(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var Az=function(){function e(){}return e.prototype.encode=function(t){var n=this;if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(r){return n.encode(r)});if(typeof t=="function"||typeof t=="object")return Dk(t,function(r){return n.encode(r)});throw new Error("Data cannot be encoded in JSON: "+t)},e.prototype.decode=function(t){var n=this;if(t==null)return t;if(t["@type"])switch(t["@type"]){case Sz:case Cz:{var r=Number(t.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+t);return r}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(i){return n.decode(i)}):typeof t=="function"||typeof t=="object"?Dk(t,function(i){return n.decode(i)}):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kz(e){var t,n=new Promise(function(r,i){t=setTimeout(function(){i(new Ya("deadline-exceeded","deadline-exceeded"))},e)});return{timer:t,promise:n}}var xk=function(){function e(t,n,r,i,s,u){var c=this;s===void 0&&(s="us-central1"),this.app_=t,this.appCheckProvider=i,this.fetchImpl=u,this.serializer=new Az,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(c.deleteService())}},this.contextProvider=new Iz(n,r),this.cancelAllRequests=new Promise(function(h){c.deleteService=function(){return h()}});try{var l=new URL(s);this.customDomain=l.origin,this.region="us-central1"}catch{this.customDomain=null,this.region=s}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(t){var n=this.app_.options.projectId;if(this.emulatorOrigin!==null){var r=this.emulatorOrigin;return r+"/"+n+"/"+this.region+"/"+t}return this.customDomain!==null?this.customDomain+"/"+t:"https://"+this.region+"-"+n+".cloudfunctions.net/"+t},e.prototype.useEmulator=function(t,n){this.emulatorOrigin="http://"+t+":"+n},e.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},e.prototype.httpsCallable=function(t,n){var r=this;return function(i){return r.call(t,i,n||{})}},e.prototype.postJSON=function(t,n,r){return A(this,void 0,void 0,function(){var i,s,u;return C(this,function(c){switch(c.label){case 0:return r["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:i=c.sent(),i!==null&&(r["X-Firebase-AppCheck"]=i),c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:r})];case 3:return s=c.sent(),[3,5];case 4:return c.sent(),[2,{status:0,json:null}];case 5:u=null,c.label=6;case 6:return c.trys.push([6,8,,9]),[4,s.json()];case 7:return u=c.sent(),[3,9];case 8:return c.sent(),[3,9];case 9:return[2,{status:s.status,json:u}]}})})},e.prototype.getAppCheckToken=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=this.appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return n=r.sent(),[2,n.token];case 2:return[2,null]}})})},e.prototype.call=function(t,n,r){return A(this,void 0,void 0,function(){var i,s,u,c,l,h,d,v,m,y,w,E;return C(this,function(T){switch(T.label){case 0:return i=this._url(t),n=this.serializer.encode(n),s={data:n},u={},[4,this.contextProvider.getContext()];case 1:return c=T.sent(),c.authToken&&(u.Authorization="Bearer "+c.authToken),c.instanceIdToken&&(u["Firebase-Instance-ID-Token"]=c.instanceIdToken),l=r.timeout||7e4,h=kz(l),d=h.timer,v=h.promise,[4,Promise.race([Mk(d,this.postJSON(i,s,u)),v,Mk(d,this.cancelAllRequests)])];case 2:if(m=T.sent(),!m)throw new Ya("cancelled","Firebase Functions instance was deleted.");if(y=Tz(m.status,m.json,this.serializer),y)throw y;if(!m.json)throw new Ya("internal","Response is not valid JSON object.");if(w=m.json.data,typeof w=="undefined"&&(w=m.json.result),typeof w=="undefined")throw new Ya("internal","Response is missing data field.");return E=this.serializer.decode(w),[2,{data:E}]}})})},e}();function Mk(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rz="functions";function Nz(e,t){var n={Functions:xk};function r(i,s){var u=s.instanceIdentifier,c=i.getProvider("app").getImmediate(),l=i.getProvider("auth-internal"),h=i.getProvider("app-check-internal"),d=i.getProvider("messaging");return new xk(c,l,d,h,u,t)}e.INTERNAL.registerComponent(new wn(Rz,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var Pz="@firebase/functions",Oz="0.6.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nz(fe,fetch.bind(self));fe.registerVersion(Pz,Oz);function Dz(e){return Array.prototype.slice.call(e)}function lx(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function fv(e,t,n){var r,i=new Promise(function(s,u){r=e[t].apply(e,n),lx(r).then(s,u)});return i.request=r,i}function xz(e,t,n){var r=fv(e,t,n);return r.then(function(i){if(!!i)return new Bl(i,r.request)})}function Gu(e,t,n){n.forEach(function(r){Object.defineProperty(e.prototype,r,{get:function(){return this[t][r]},set:function(i){this[t][r]=i}})})}function Fb(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return fv(this[t],i,arguments)})})}function hv(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return this[t][i].apply(this[t],arguments)})})}function fx(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return xz(this[t],i,arguments)})})}function sa(e){this._index=e}Gu(sa,"_index",["name","keyPath","multiEntry","unique"]);Fb(sa,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);fx(sa,"_index",IDBIndex,["openCursor","openKeyCursor"]);function Bl(e,t){this._cursor=e,this._request=t}Gu(Bl,"_cursor",["direction","key","primaryKey","value"]);Fb(Bl,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(Bl.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,n),lx(t._request).then(function(r){if(!!r)return new Bl(r,t._request)})})})});function Ii(e){this._store=e}Ii.prototype.createIndex=function(){return new sa(this._store.createIndex.apply(this._store,arguments))};Ii.prototype.index=function(){return new sa(this._store.index.apply(this._store,arguments))};Gu(Ii,"_store",["name","keyPath","indexNames","autoIncrement"]);Fb(Ii,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);fx(Ii,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);hv(Ii,"_store",IDBObjectStore,["deleteIndex"]);function If(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}If.prototype.objectStore=function(){return new Ii(this._tx.objectStore.apply(this._tx,arguments))};Gu(If,"_tx",["objectStoreNames","mode"]);hv(If,"_tx",IDBTransaction,["abort"]);function dv(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new If(n)}dv.prototype.createObjectStore=function(){return new Ii(this._db.createObjectStore.apply(this._db,arguments))};Gu(dv,"_db",["name","version","objectStoreNames"]);hv(dv,"_db",IDBDatabase,["deleteObjectStore","close"]);function pv(e){this._db=e}pv.prototype.transaction=function(){return new If(this._db.transaction.apply(this._db,arguments))};Gu(pv,"_db",["name","version","objectStoreNames"]);hv(pv,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(e){[Ii,sa].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var n=Dz(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})});[sa,Ii].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(s){r.iterateCursor(t,function(u){if(!u){s(i);return}if(i.push(u.value),n!==void 0&&i.length==n){s(i);return}u.continue()})})})});function Ub(e,t,n){var r=fv(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(s){n&&n(new dv(i.result,s.oldVersion,i.transaction))}),r.then(function(s){return new pv(s)})}function Ty(e){return fv(indexedDB,"deleteDatabase",[e])}var Mz="@firebase/installations",hx="0.4.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dx=1e4,px="w:"+hx,vx="FIS_v2",Lz="https://firebaseinstallations.googleapis.com/v1",Fz=60*60*1e3,Uz="installations",jz="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uo,Vz=(uo={},uo["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',uo["not-registered"]="Firebase Installation is not registered.",uo["installation-not-found"]="Firebase Installation not found.",uo["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',uo["app-offline"]="Could not process request. Application offline.",uo["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",uo),Ki=new Gi(Uz,jz,Vz);function gx(e){return e instanceof Ou&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(e){var t=e.projectId;return Lz+"/projects/"+t+"/installations"}function mx(e){return{token:e.token,requestStatus:2,expiresIn:Bz(e.expiresIn),creationTime:Date.now()}}function Vb(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Ki.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function yx(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _x(e,t){var n=t.refreshToken,r=yx(e);return r.append("Authorization",qz(n)),r}function Bb(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}})})}function Bz(e){return Number(e.replace("s","000"))}function qz(e){return vx+" "+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kz(e,t){var n=t.fid;return A(this,void 0,void 0,function(){var r,i,s,u,c,l,h;return C(this,function(d){switch(d.label){case 0:return r=jb(e),i=yx(e),s={fid:n,authVersion:vx,appId:e.appId,sdkVersion:px},u={method:"POST",headers:i,body:JSON.stringify(s)},[4,Bb(function(){return fetch(r,u)})];case 1:return c=d.sent(),c.ok?[4,c.json()]:[3,3];case 2:return l=d.sent(),h={fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:mx(l.authToken)},[2,h];case 3:return[4,Vb("Create Installation",c)];case 4:throw d.sent()}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(e){var t=btoa(String.fromCharCode.apply(String,Ne([],nn(e))));return t.replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wz=/^[cdef][\w-]{21}$/,nw="";function Gz(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=$z(e);return Wz.test(n)?n:nw}catch{return nw}}function $z(e){var t=Hz(e);return t.substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(e){return e.appName+"!"+e.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Su=new Map;function bx(e,t){var n=$u(e);Ex(n,t),Yz(n,t)}function zz(e,t){Tx();var n=$u(e),r=Su.get(n);r||(r=new Set,Su.set(n,r)),r.add(t)}function Qz(e,t){var n=$u(e),r=Su.get(n);!r||(r.delete(t),r.size===0&&Su.delete(n),Ix())}function Ex(e,t){var n,r,i=Su.get(e);if(!!i)try{for(var s=zt(i),u=s.next();!u.done;u=s.next()){var c=u.value;c(t)}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}function Yz(e,t){var n=Tx();n&&n.postMessage({key:e,fid:t}),Ix()}var Ss=null;function Tx(){return!Ss&&"BroadcastChannel"in self&&(Ss=new BroadcastChannel("[Firebase] FID Change"),Ss.onmessage=function(e){Ex(e.data.key,e.data.fid)}),Ss}function Ix(){Su.size===0&&Ss&&(Ss.close(),Ss=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xz="firebase-installations-database",Jz=1,Ws="firebase-installations-store",Iy=null;function qb(){return Iy||(Iy=Ub(Xz,Jz,function(e){switch(e.oldVersion){case 0:e.createObjectStore(Ws)}})),Iy}function tp(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,u;return C(this,function(c){switch(c.label){case 0:return n=$u(e),[4,qb()];case 1:return r=c.sent(),i=r.transaction(Ws,"readwrite"),s=i.objectStore(Ws),[4,s.get(n)];case 2:return u=c.sent(),[4,s.put(t,n)];case 3:return c.sent(),[4,i.complete];case 4:return c.sent(),(!u||u.fid!==t.fid)&&bx(e,t.fid),[2,t]}})})}function Kb(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return t=$u(e),[4,qb()];case 1:return n=i.sent(),r=n.transaction(Ws,"readwrite"),[4,r.objectStore(Ws).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Sf(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,u,c;return C(this,function(l){switch(l.label){case 0:return n=$u(e),[4,qb()];case 1:return r=l.sent(),i=r.transaction(Ws,"readwrite"),s=i.objectStore(Ws),[4,s.get(n)];case 2:return u=l.sent(),c=t(u),c!==void 0?[3,4]:[4,s.delete(n)];case 3:return l.sent(),[3,6];case 4:return[4,s.put(c,n)];case 5:l.sent(),l.label=6;case 6:return[4,i.complete];case 7:return l.sent(),c&&(!u||u.fid!==c.fid)&&bx(e,c.fid),[2,c]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,Sf(e,function(s){var u=Zz(s),c=e6(e,u);return t=c.registrationPromise,c.installationEntry})];case 1:return n=i.sent(),n.fid!==nw?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function Zz(e){var t=e||{fid:Gz(),registrationStatus:0};return Sx(t)}function e6(e,t){if(t.registrationStatus===0){if(!navigator.onLine){var n=Promise.reject(Ki.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=t6(e,r);return{installationEntry:r,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:n6(e)}:{installationEntry:t}}function t6(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Kz(e,t)];case 1:return n=i.sent(),[2,tp(e,n)];case 2:return r=i.sent(),gx(r)&&r.customData.serverCode===409?[4,Kb(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,tp(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function n6(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,Lk(e)];case 1:t=s.sent(),s.label=2;case 2:return t.registrationStatus!==1?[3,5]:[4,wx(100)];case 3:return s.sent(),[4,Lk(e)];case 4:return t=s.sent(),[3,2];case 5:return t.registrationStatus!==0?[3,7]:[4,Hb(e)];case 6:return n=s.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}})})}function Lk(e){return Sf(e,function(t){if(!t)throw Ki.create("installation-not-found");return Sx(t)})}function Sx(e){return r6(e)?{fid:e.fid,registrationStatus:0}:e}function r6(e){return e.registrationStatus===1&&e.registrationTime+dx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return A(this,void 0,void 0,function(){var i,s,u,c,l,h,d,v;return C(this,function(m){switch(m.label){case 0:return i=o6(n,t),s=_x(n,t),u=r.getImmediate({optional:!0}),u&&s.append("x-firebase-client",u.getPlatformInfoString()),c={installation:{sdkVersion:px}},l={method:"POST",headers:s,body:JSON.stringify(c)},[4,Bb(function(){return fetch(i,l)})];case 1:return h=m.sent(),h.ok?[4,h.json()]:[3,3];case 2:return d=m.sent(),v=mx(d),[2,v];case 3:return[4,Vb("Generate Auth Token",h)];case 4:throw m.sent()}})})}function o6(e,t){var n=t.fid;return jb(e)+"/"+n+"/authTokens:generate"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(e,t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(u){switch(u.label){case 0:return[4,Sf(e.appConfig,function(c){if(!Cx(c))throw Ki.create("not-registered");var l=c.authToken;if(!t&&u6(l))return c;if(l.requestStatus===1)return n=s6(e,t),c;if(!navigator.onLine)throw Ki.create("app-offline");var h=l6(c);return n=a6(e,h),h})];case 1:return r=u.sent(),n?[4,n]:[3,3];case 2:return s=u.sent(),[3,4];case 3:s=r.authToken,u.label=4;case 4:return i=s,[2,i]}})})}function s6(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,Fk(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return n.authToken.requestStatus!==1?[3,5]:[4,wx(100)];case 3:return i.sent(),[4,Fk(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,r.requestStatus===0?[2,Wb(e,t)]:[2,r]}})})}function Fk(e){return Sf(e,function(t){if(!Cx(t))throw Ki.create("not-registered");var n=t.authToken;return f6(n)?ge(ge({},t),{authToken:{requestStatus:0}}):t})}function a6(e,t){return A(this,void 0,void 0,function(){var n,i,r,i;return C(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,8]),[4,i6(e,t)];case 1:return n=s.sent(),i=ge(ge({},t),{authToken:n}),[4,tp(e.appConfig,i)];case 2:return s.sent(),[2,n];case 3:return r=s.sent(),gx(r)&&(r.customData.serverCode===401||r.customData.serverCode===404)?[4,Kb(e.appConfig)]:[3,5];case 4:return s.sent(),[3,7];case 5:return i=ge(ge({},t),{authToken:{requestStatus:0}}),[4,tp(e.appConfig,i)];case 6:s.sent(),s.label=7;case 7:throw r;case 8:return[2]}})})}function Cx(e){return e!==void 0&&e.registrationStatus===2}function u6(e){return e.requestStatus===2&&!c6(e)}function c6(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Fz}function l6(e){var t={requestStatus:1,requestTime:Date.now()};return ge(ge({},e),{authToken:t})}function f6(e){return e.requestStatus===1&&e.requestTime+dx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,Hb(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?r.catch(console.error):Wb(e).catch(console.error),[2,n.fid]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(e,t){return t===void 0&&(t=!1),A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,p6(e.appConfig)];case 1:return r.sent(),[4,Wb(e,t)];case 2:return n=r.sent(),[2,n.token]}})})}function p6(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,Hb(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(e,t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(u){switch(u.label){case 0:return n=g6(e,t),r=_x(e,t),i={method:"DELETE",headers:r},[4,Bb(function(){return fetch(n,i)})];case 1:return s=u.sent(),s.ok?[3,3]:[4,Vb("Delete Installation",s)];case 2:throw u.sent();case 3:return[2]}})})}function g6(e,t){var n=t.fid;return jb(e)+"/"+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=e.appConfig,[4,Sf(t,function(i){if(!(i&&i.registrationStatus===0))return i})];case 1:if(n=r.sent(),!n)return[3,6];if(n.registrationStatus!==1)return[3,2];throw Ki.create("delete-pending-registration");case 2:if(n.registrationStatus!==2)return[3,6];if(navigator.onLine)return[3,3];throw Ki.create("app-offline");case 3:return[4,v6(t,n)];case 4:return r.sent(),[4,Kb(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(e,t){var n=e.appConfig;return zz(n,t),function(){Qz(n,t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(e){var t,n;if(!e||!e.options)throw Sy("App Configuration");if(!e.name)throw Sy("App Name");var r=["projectId","apiKey","appId"];try{for(var i=zt(r),s=i.next();!s.done;s=i.next()){var u=s.value;if(!e.options[u])throw Sy(u)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Sy(e){return Ki.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(e){var t="installations";e.INTERNAL.registerComponent(new wn(t,function(n){var r=n.getProvider("app").getImmediate(),i=_6(r),s=n.getProvider("platform-logger"),u={appConfig:i,platformLoggerProvider:s},c={app:r,getId:function(){return h6(u)},getToken:function(l){return d6(u,l)},delete:function(){return m6(u)},onIdChange:function(l){return y6(u,l)}};return c},"PUBLIC")),e.registerVersion(Mz,hx)}w6(fe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,b6=(xt={},xt["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',xt["only-available-in-window"]="This method is available in a Window context.",xt["only-available-in-sw"]="This method is available in a service worker context.",xt["permission-default"]="The notification permission was not granted and dismissed instead.",xt["permission-blocked"]="The notification permission was not granted and blocked instead.",xt["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",xt["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",xt["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",xt["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",xt["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",xt["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",xt["token-update-no-token"]="FCM returned no token when updating the user to push.",xt["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",xt["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",xt["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",xt["invalid-vapid-key"]="The public VAPID key must be a string.",xt["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",xt),Je=new Gi("messaging","Messaging",b6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E6="/firebase-messaging-sw.js",T6="/firebase-cloud-messaging-push-scope",np="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",I6="https://fcmregistrations.googleapis.com/v1",Ax="FCM_MSG",S6="FirebaseMessaging: ",C6="google.c.a.e",kx="google.c.a.c_id",A6="google.c.a.ts",k6="google.c.a.c_l",R6=1e3,N6=3e3;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Gs;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(Gs||(Gs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,Ne([],nn(t))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function P6(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cy="fcm_token_details_db",O6=5,Uk="fcm_token_object_Store";function D6(e){return A(this,void 0,void 0,function(){var t,n,r,i,s=this;return C(this,function(u){switch(u.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=u.sent(),n=t.map(function(c){return c.name}),!n.includes(Cy))return[2,null];u.label=2;case 2:return r=null,[4,Ub(Cy,O6,function(c){return A(s,void 0,void 0,function(){var l,h,d,d,d,v;return C(this,function(m){switch(m.label){case 0:return c.oldVersion<2?[2]:c.objectStoreNames.contains(Uk)?(l=c.transaction.objectStore(Uk),[4,l.index("fcmSenderId").get(e)]):[2];case 1:return h=m.sent(),[4,l.clear()];case 2:if(m.sent(),!h)return[2];if(c.oldVersion===2){if(d=h,!d.auth||!d.p256dh||!d.endpoint)return[2];r={token:d.fcmToken,createTime:(v=d.createTime)!==null&&v!==void 0?v:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Oi(d.vapidKey)}}}else c.oldVersion===3?(d=h,r={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Oi(d.auth),p256dh:Oi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Oi(d.vapidKey)}}):c.oldVersion===4&&(d=h,r={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Oi(d.auth),p256dh:Oi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Oi(d.vapidKey)}});return[2]}})})})];case 3:return i=u.sent(),i.close(),[4,Ty(Cy)];case 4:return u.sent(),[4,Ty("fcm_vapid_details_db")];case 5:return u.sent(),[4,Ty("undefined")];case 6:return u.sent(),[2,x6(r)?r:null]}})})}function x6(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M6="firebase-messaging-database",L6=1,$s="firebase-messaging-store",Ay=null;function Gb(){return Ay||(Ay=Ub(M6,L6,function(e){switch(e.oldVersion){case 0:e.createObjectStore($s)}})),Ay}function rp(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return t=zb(e),[4,Gb()];case 1:return n=s.sent(),[4,n.transaction($s).objectStore($s).get(t)];case 2:return r=s.sent(),r?[2,r]:[3,3];case 3:return[4,D6(e.appConfig.senderId)];case 4:return i=s.sent(),i?[4,$b(e,i)]:[3,6];case 5:return s.sent(),[2,i];case 6:return[2]}})})}function $b(e,t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return n=zb(e),[4,Gb()];case 1:return r=s.sent(),i=r.transaction($s,"readwrite"),[4,i.objectStore($s).put(t,n)];case 2:return s.sent(),[4,i.complete];case 3:return s.sent(),[2,t]}})})}function F6(e){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return t=zb(e),[4,Gb()];case 1:return n=i.sent(),r=n.transaction($s,"readwrite"),[4,r.objectStore($s).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function zb(e){var t=e.appConfig;return t.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,u,c,l;return C(this,function(h){switch(h.label){case 0:return[4,Yb(e)];case 1:n=h.sent(),r=Nx(t),i={method:"POST",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(Qb(e.appConfig),i)];case 3:return u=h.sent(),[4,u.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Je.create("token-subscribe-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Je.create("token-subscribe-failed",{errorInfo:l});if(!s.token)throw Je.create("token-subscribe-no-token");return[2,s.token]}})})}function j6(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,u,c,l;return C(this,function(h){switch(h.label){case 0:return[4,Yb(e)];case 1:n=h.sent(),r=Nx(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(Qb(e.appConfig)+"/"+t.token,i)];case 3:return u=h.sent(),[4,u.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Je.create("token-update-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Je.create("token-update-failed",{errorInfo:l});if(!s.token)throw Je.create("token-update-no-token");return[2,s.token]}})})}function Rx(e,t){return A(this,void 0,void 0,function(){var n,r,i,s,u,c;return C(this,function(l){switch(l.label){case 0:return[4,Yb(e)];case 1:n=l.sent(),r={method:"DELETE",headers:n},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(Qb(e.appConfig)+"/"+t,r)];case 3:return i=l.sent(),[4,i.json()];case 4:if(s=l.sent(),s.error)throw u=s.error.message,Je.create("token-unsubscribe-failed",{errorInfo:u});return[3,6];case 5:throw c=l.sent(),Je.create("token-unsubscribe-failed",{errorInfo:c});case 6:return[2]}})})}function Qb(e){var t=e.projectId;return I6+"/projects/"+t+"/registrations"}function Yb(e){var t=e.appConfig,n=e.installations;return A(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function Nx(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,s={web:{endpoint:r,auth:n,p256dh:t}};return i!==np&&(s.web.applicationPubKey=i),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V6=7*24*60*60*1e3;function rw(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,u;return C(this,function(c){switch(c.label){case 0:if(Notification.permission!=="granted")throw Je.create("permission-blocked");return[4,q6(t,n)];case 1:return r=c.sent(),[4,rp(e)];case 2:return i=c.sent(),s={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:Oi(r.getKey("auth")),p256dh:Oi(r.getKey("p256dh"))},i?[3,3]:[2,jk(e,s)];case 3:if(K6(i.subscriptionOptions,s))return[3,8];c.label=4;case 4:return c.trys.push([4,6,,7]),[4,Rx(e,i.token)];case 5:return c.sent(),[3,7];case 6:return u=c.sent(),console.warn(u),[3,7];case 7:return[2,jk(e,s)];case 8:return Date.now()>=i.createTime+V6?[2,B6({token:i.token,createTime:Date.now(),subscriptionOptions:s},e,t)]:[2,i.token];case 9:return[2]}})})}function al(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,rp(e)];case 1:return n=i.sent(),n?[4,Rx(e,n.token)]:[3,4];case 2:return i.sent(),[4,F6(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}})})}function B6(e,t,n){return A(this,void 0,void 0,function(){var r,i,s;return C(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,5]),[4,j6(t,e)];case 1:return r=u.sent(),i=ge(ge({},e),{token:r,createTime:Date.now()}),[4,$b(t,i)];case 2:return u.sent(),[2,r];case 3:return s=u.sent(),[4,al(t,n)];case 4:throw u.sent(),s;case 5:return[2]}})})}function jk(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return[4,U6(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,$b(e,r)];case 2:return i.sent(),[2,r.token]}})})}function q6(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:P6(t)})]}})})}function K6(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return W6(t,e),G6(t,e),$6(t,e),t}function W6(e,t){if(!!t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}function G6(e,t){!t.data||(e.data=t.data)}function $6(e,t){if(!!t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(e){return typeof e=="object"&&!!e&&kx in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z6=function(){function e(t){var n=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(n.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(n.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(n.onNotificationClick(r))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||typeof t!="function")throw Je.create("invalid-bg-handler");this.bgMessageHandler=t},e.prototype.onBackgroundMessage=function(t){var n=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){n.bgMessageHandler=null}},e.prototype.getToken=function(){var t,n;return A(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,rp(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=(n=(t=r==null?void 0:r.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&n!==void 0?n:np,i.label=2;case 2:return[2,rw(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return al(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw Je.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Je.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Je.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(){throw Je.create("only-available-in-window")},e.prototype.onMessage=function(){throw Je.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw Je.create("only-available-in-window")},e.prototype.onPush=function(t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(u){switch(u.label){case 0:return n=Y6(t),n?[4,Ox()]:(console.debug(S6+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return r=u.sent(),J6(r)?[2,Z6(r,n)]:(i=!1,n.notification?[4,eQ(Q6(n))]:[3,3]);case 2:u.sent(),i=!0,u.label=3;case 3:return i===!0&&this.isOnBackgroundMessageUsed===!1?[2]:(this.bgMessageHandler&&(s=H6(n),typeof this.bgMessageHandler=="function"?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,Vk(R6)]);case 4:return u.sent(),[2]}})})},e.prototype.onSubChange=function(t){var n,r;return A(this,void 0,void 0,function(){var i,s;return C(this,function(u){switch(u.label){case 0:return i=t.newSubscription,i?[3,2]:[4,al(this.firebaseDependencies,self.registration)];case 1:return u.sent(),[2];case 2:return[4,rp(this.firebaseDependencies)];case 3:return s=u.sent(),[4,al(this.firebaseDependencies,self.registration)];case 4:return u.sent(),[4,rw(this.firebaseDependencies,self.registration,(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:np)];case 5:return u.sent(),[2]}})})},e.prototype.onNotificationClick=function(t){var n,r;return A(this,void 0,void 0,function(){var i,s,u,c,l;return C(this,function(h){switch(h.label){case 0:if(i=(r=(n=t.notification)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[Ax],i){if(t.action)return[2]}else return[2];return t.stopImmediatePropagation(),t.notification.close(),s=tQ(i),s?(u=new URL(s,self.location.href),c=new URL(self.location.origin),u.host!==c.host?[2]:[4,X6(u)]):[2];case 1:return l=h.sent(),l?[3,4]:[4,self.clients.openWindow(s)];case 2:return l=h.sent(),[4,Vk(N6)];case 3:return h.sent(),[3,6];case 4:return[4,l.focus()];case 5:l=h.sent(),h.label=6;case 6:return l?(i.messageType=Gs.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,l.postMessage(i)]):[2]}})})},e}();function Q6(e){var t,n=ge({},e.notification);return n.data=(t={},t[Ax]=e,t),n}function Y6(e){var t=e.data;if(!t)return null;try{return t.json()}catch{return null}}function X6(e){return A(this,void 0,void 0,function(){var t,n,r,i,s,u,c;return C(this,function(l){switch(l.label){case 0:return[4,Ox()];case 1:t=l.sent();try{for(n=zt(t),r=n.next();!r.done;r=n.next())if(i=r.value,s=new URL(i.url,self.location.href),e.host===s.host)return[2,i]}catch(h){u={error:h}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(u)throw u.error}}return[2,null]}})})}function J6(e){return e.some(function(t){return t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://")})}function Z6(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=Gs.PUSH_RECEIVED;try{for(var i=zt(e),s=i.next();!s.done;s=i.next()){var u=s.value;u.postMessage(t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Ox(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function eQ(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification((t=e.title)!==null&&t!==void 0?t:"",e)}function tQ(e){var t,n,r,i=(n=(t=e.fcmOptions)===null||t===void 0?void 0:t.link)!==null&&n!==void 0?n:(r=e.notification)===null||r===void 0?void 0:r.click_action;return i||(Px(e.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nQ=function(){function e(t){var n=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return n.messageEventListener(r)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return n=t.data,n.isFirebaseMessaging?(this.onMessageCallback&&n.messageType===Gs.PUSH_RECEIVED&&(typeof this.onMessageCallback=="function"?this.onMessageCallback(iQ(Object.assign({},n))):this.onMessageCallback.next(Object.assign({},n))),r=n.data,Px(r)&&r[C6]==="1"?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return Notification.permission!=="default"?[3,2]:[4,Notification.requestPermission()];case 1:n.sent(),n.label=2;case 2:if(Notification.permission!=="granted")throw Je.create("permission-blocked");return[4,this.updateVapidKey(t==null?void 0:t.vapidKey)];case 3:return n.sent(),[4,this.updateSwReg(t==null?void 0:t.serviceWorkerRegistration)];case 4:return n.sent(),[2,rw(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=np),[2]})})},e.prototype.updateSwReg=function(t){return A(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return!t&&!this.swRegistration?[4,this.registerDefaultSw()]:[3,2];case 1:n.sent(),n.label=2;case 2:if(!t&&!!this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Je.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},e.prototype.registerDefaultSw=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(E6,{scope:T6})];case 1:return t.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw n=r.sent(),Je.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,al(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return Notification.permission==="granted"?[2]:[4,Notification.requestPermission()];case 1:if(t=n.sent(),t==="granted")return[2];throw t==="denied"?Je.create("permission-blocked"):Je.create("permission-default")}})})},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Je.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Je.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Je.create("invalid-sw-registration");if(this.swRegistration)throw Je.create("use-sw-after-get-token");this.swRegistration=t},e.prototype.onMessage=function(t){var n=this;return this.onMessageCallback=t,function(){n.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw Je.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw Je.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(t,n){return A(this,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=rQ(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i=s.sent(),i.logEvent(r,{message_id:n[kx],message_name:n[k6],message_time:n[A6],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();function rQ(e){switch(e){case Gs.NOTIFICATION_CLICKED:return"notification_open";case Gs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function iQ(e){return delete e.messageType,delete e.isFirebaseMessaging,e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oQ(e){var t,n;if(!e||!e.options)throw ky("App Configuration Object");if(!e.name)throw ky("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=e.options;try{for(var s=zt(r),u=s.next();!u.done;u=s.next()){var c=u.value;if(!i[c])throw ky(c)}}catch(l){t={error:l}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function ky(e){return Je.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sQ="messaging";function aQ(e){var t=e.getProvider("app").getImmediate(),n=oQ(t),r=e.getProvider("installations").getImmediate(),i=e.getProvider("analytics-internal"),s={app:t,appConfig:n,installations:r,analyticsProvider:i};if(!Dx())throw Je.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new z6(s):new nQ(s)}var uQ={isSupported:Dx};fe.INTERNAL.registerComponent(new wn(sQ,aQ,"PUBLIC").setServiceProps(uQ));function Dx(){return self&&"ServiceWorkerGlobalScope"in self?lQ():cQ()}function cQ(){return"indexedDB"in window&&indexedDB!==null&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function lQ(){return"indexedDB"in self&&indexedDB!==null&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xx="firebasestorage.googleapis.com",Mx="storageBucket",fQ=2*60*1e3,hQ=10*60*1e3,Ot=function(e){ee(t,e);function t(n,r){var i=e.call(this,Ry(n),"Firebase Storage: "+r+" ("+Ry(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return t.prototype._codeEquals=function(n){return Ry(n)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(n){this.customData.serverResponse=n,this.customData.serverResponse?this.message=this._baseMessage+`
`+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(Ou);function Ry(e){return"storage/"+e}function Xb(){var e="An unknown error occurred, please check the error payload for server response.";return new Ot("unknown",e)}function dQ(e){return new Ot("object-not-found","Object '"+e+"' does not exist.")}function pQ(e){return new Ot("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vQ(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot("unauthenticated",e)}function gQ(){return new Ot("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function mQ(e){return new Ot("unauthorized","User does not have permission to access '"+e+"'.")}function yQ(){return new Ot("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Lx(){return new Ot("canceled","User canceled the upload/download.")}function _Q(e){return new Ot("invalid-url","Invalid URL '"+e+"'.")}function wQ(e){return new Ot("invalid-default-bucket","Invalid default bucket '"+e+"'.")}function bQ(){return new Ot("no-default-bucket","No default bucket found. Did you set the '"+Mx+"' property when initializing the app?")}function Fx(){return new Ot("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function EQ(){return new Ot("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function TQ(){return new Ot("no-download-url","The given file does not have any download URLs.")}function Xa(e){return new Ot("invalid-argument",e)}function Ux(){return new Ot("app-deleted","The Firebase app was deleted.")}function jx(e){return new Ot("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ul(e,t){return new Ot("invalid-format","String does not match format '"+e+"': "+t)}function qh(e){throw new Ot("internal-error","Internal error: "+e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IQ(e){return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ny=function(){function e(t,n){this.data=t,this.contentType=n||null}return e}();function Vx(e,t){switch(e){case Er.RAW:return new Ny(Bx(t));case Er.BASE64:case Er.BASE64URL:return new Ny(qx(e,t));case Er.DATA_URL:return new Ny(CQ(t),AQ(t))}throw Xb()}function Bx(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296){var i=n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320;if(!i)t.push(239,191,189);else{var s=r,u=e.charCodeAt(++n);r=65536|(s&1023)<<10|u&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function SQ(e){var t;try{t=decodeURIComponent(e)}catch{throw ul(Er.DATA_URL,"Malformed data URL.")}return Bx(t)}function qx(e,t){switch(e){case Er.BASE64:{var n=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw ul(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break}case Er.BASE64URL:{var s=t.indexOf("+")!==-1,u=t.indexOf("/")!==-1;if(s||u){var i=s?"+":"/";throw ul(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}var c;try{c=IQ(t)}catch{throw ul(e,"Invalid character found")}for(var l=new Uint8Array(c.length),h=0;h<c.length;h++)l[h]=c.charCodeAt(h);return l}var Kx=function(){function e(t){this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(n===null)throw ul(Er.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;r!=null&&(this.base64=kQ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}return e}();function CQ(e){var t=new Kx(e);return t.base64?qx(Er.BASE64,t.rest):SQ(t.rest)}function AQ(e){var t=new Kx(e);return t.contentType}function kQ(e,t){var n=e.length>=t.length;return n?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RQ={STATE_CHANGED:"state_changed"},Nn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Py(e){switch(e){case"running":case"pausing":case"canceling":return Nn.RUNNING;case"paused":return Nn.PAUSED;case"success":return Nn.SUCCESS;case"canceled":return Nn.CANCELED;case"error":return Nn.ERROR;default:return Nn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xs;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(xs||(xs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NQ=function(){function e(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=xs.NO_ERROR,this.sendPromise_=new Promise(function(n){t.xhr_.addEventListener("abort",function(){t.errorCode_=xs.ABORT,n()}),t.xhr_.addEventListener("error",function(){t.errorCode_=xs.NETWORK_ERROR,n()}),t.xhr_.addEventListener("load",function(){n()})})}return e.prototype.send=function(t,n,r,i){if(this.sent_)throw qh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(var s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw qh("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw qh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw qh("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},e.prototype.addUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)},e.prototype.removeUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)},e}();function PQ(){return new NQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OQ=function(){function e(){}return e.prototype.createConnection=function(){return PQ()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tr=function(){function e(t,n){this.bucket=t,this.path_=n}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.path.length===0},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},e.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch{return new e(t,"")}if(r.path==="")return r;throw wQ(t)},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function s(Ee){Ee.path.charAt(Ee.path.length-1)==="/"&&(Ee.path_=Ee.path_.slice(0,-1))}var u="(/(.*))?$",c=new RegExp("^gs://"+i+u,"i"),l={bucket:1,path:3};function h(Ee){Ee.path_=decodeURIComponent(Ee.path)}for(var d="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp("^https?://"+v+"/"+d+"/b/"+i+"/o"+m,"i"),w={bucket:1,path:3},E=n===xx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",k=new RegExp("^https?://"+E+"/"+i+"/"+T,"i"),P={bucket:1,path:2},M=[{regex:c,indices:l,postModify:s},{regex:y,indices:w,postModify:h},{regex:k,indices:P,postModify:h}],K=0;K<M.length;K++){var Q=M[K],F=Q.regex.exec(t);if(F){var re=F[Q.indices.bucket],te=F[Q.indices.path];te||(te=""),r=new e(re,te),Q.postModify(r);break}}if(r==null)throw _Q(t);return r},e}(),DQ=function(){function e(t){this.promise_=Promise.reject(t)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xQ(e,t,n){var r=1,i=null,s=!1,u=0;function c(){return u===2}var l=!1;function h(){for(var w=[],E=0;E<arguments.length;E++)w[E]=arguments[E];l||(l=!0,t.apply(null,w))}function d(w){i=setTimeout(function(){i=null,e(v,c())},w)}function v(w){for(var E=[],T=1;T<arguments.length;T++)E[T-1]=arguments[T];if(!l){if(w){h.call.apply(h,Ne([null,w],E));return}var k=c()||s;if(k){h.call.apply(h,Ne([null,w],E));return}r<64&&(r*=2);var P;u===1?(u=2,P=0):P=(r+Math.random())*1e3,d(P)}}var m=!1;function y(w){m||(m=!0,!l&&(i!==null?(w||(u=2),clearTimeout(i),d(0)):w||(u=1)))}return d(0),setTimeout(function(){s=!0,y(!0)},n),y}function MQ(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(e){return e!==void 0}function FQ(e){return typeof e=="function"}function UQ(e){return typeof e=="object"&&!Array.isArray(e)}function vv(e){return typeof e=="string"||e instanceof String}function Bk(e){return Jb()&&e instanceof Blob}function Jb(){return typeof Blob!="undefined"}function iw(e,t,n,r){if(r<t)throw Xa("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw Xa("Invalid value for '"+e+"'. Expected "+n+" or less.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(e,t){var n=t.match(/^(\w+):\/\/.+/),r=n==null?void 0:n[1],i=t;return r==null&&(i="https://"+t),i+"/v0"+e}function Hx(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jQ=function(){function e(t,n,r,i,s,u,c,l,h,d,v){var m=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s.slice(),this.additionalRetryCodes_=u.slice(),this.callback_=c,this.errorCallback_=l,this.progressCallback_=d,this.timeout_=h,this.pool_=v,this.promise_=new Promise(function(y,w){m.resolve_=y,m.reject_=w,m.start_()})}return e.prototype.start_=function(){var t=this;function n(i,s){if(s){i(!1,new Kh(!1,null,!0));return}var u=t.pool_.createConnection();t.pendingConnection_=u;function c(l){var h=l.loaded,d=l.lengthComputable?l.total:-1;t.progressCallback_!==null&&t.progressCallback_(h,d)}t.progressCallback_!==null&&u.addUploadProgressListener(c),u.send(t.url_,t.method_,t.body_,t.headers_).then(function(){t.progressCallback_!==null&&u.removeUploadProgressListener(c),t.pendingConnection_=null;var l=u.getErrorCode()===xs.NO_ERROR,h=u.getStatus();if(!l||t.isRetryStatusCode_(h)){var d=u.getErrorCode()===xs.ABORT;i(!1,new Kh(!1,null,d));return}var v=t.successCodes_.indexOf(h)!==-1;i(!0,new Kh(v,u))})}function r(i,s){var u=t.resolve_,c=t.reject_,l=s.connection;if(s.wasSuccessCode)try{var h=t.callback_(l,l.getResponseText());LQ(h)?u(h):u()}catch(v){c(v)}else if(l!==null){var d=Xb();d.serverResponse=l.getResponseText(),t.errorCallback_?c(t.errorCallback_(l,d)):c(d)}else if(s.canceled){var d=t.appDelete_?Ux():Lx();c(d)}else{var d=yQ();c(d)}}this.canceled_?r(!1,new Kh(!1,null,!0)):this.backoffId_=xQ(n,r,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&MQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(t){var n=t>=500&&t<600,r=[408,429],i=r.indexOf(t)!==-1,s=this.additionalRetryCodes_.indexOf(t)!==-1;return n||i||s},e}(),Kh=function(){function e(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}return e}();function VQ(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function BQ(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t!=null?t:"AppManager")}function qQ(e,t){t&&(e["X-Firebase-GMPID"]=t)}function KQ(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function HQ(e,t,n,r,i,s){var u=Hx(e.urlParams),c=e.url+u,l=Object.assign({},e.headers);return qQ(l,t),VQ(l,n),BQ(l,s),KQ(l,r),new jQ(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WQ(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function GQ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=WQ();if(n!==void 0){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}else{if(Jb())return new Blob(e);throw new Ot("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function $Q(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zb=function(){function e(t,n){var r=0,i="";Bk(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(Bk(this.data_)){var r=this.data_,i=$Q(r,t,n);return i===null?null:new e(i)}else{var s=new Uint8Array(this.data_.buffer,t,n-t);return new e(s,!0)}},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(Jb()){var r=t.map(function(l){return l instanceof e?l.data_:l});return new e(GQ.apply(null,r))}else{var i=t.map(function(l){return vv(l)?Vx(Er.RAW,l).data:l.data_}),s=0;i.forEach(function(l){s+=l.byteLength});var u=new Uint8Array(s),c=0;return i.forEach(function(l){for(var h=0;h<l.length;h++)u[c++]=l[h]}),new e(u,!0)}},e.prototype.uploadData=function(){return this.data_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(e){var t;try{t=JSON.parse(e)}catch{return null}return UQ(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zQ(e){if(e.length===0)return null;var t=e.lastIndexOf("/");if(t===-1)return"";var n=e.slice(0,t);return n}function QQ(e,t){var n=t.split("/").filter(function(r){return r.length>0}).join("/");return e.length===0?n:e+"/"+n}function Wx(e){var t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YQ(e,t){return t}var Cn=function(){function e(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||YQ}return e}(),Hh=null;function XQ(e){return!vv(e)||e.length<2?e:Wx(e)}function gv(){if(Hh)return Hh;var e=[];e.push(new Cn("bucket")),e.push(new Cn("generation")),e.push(new Cn("metageneration")),e.push(new Cn("name","fullPath",!0));function t(s,u){return XQ(u)}var n=new Cn("name");n.xform=t,e.push(n);function r(s,u){return u!==void 0?Number(u):u}var i=new Cn("size");return i.xform=r,e.push(i),e.push(new Cn("timeCreated")),e.push(new Cn("updated")),e.push(new Cn("md5Hash",null,!0)),e.push(new Cn("cacheControl",null,!0)),e.push(new Cn("contentDisposition",null,!0)),e.push(new Cn("contentEncoding",null,!0)),e.push(new Cn("contentLanguage",null,!0)),e.push(new Cn("contentType",null,!0)),e.push(new Cn("metadata","customMetadata",!0)),Hh=e,Hh}function JQ(e,t){function n(){var r=e.bucket,i=e.fullPath,s=new Tr(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function ZQ(e,t,n){var r={};r.type="file";for(var i=n.length,s=0;s<i;s++){var u=n[s];r[u.local]=u.xform(r,t[u.server])}return JQ(r,e),r}function Gx(e,t,n){var r=eE(t);if(r===null)return null;var i=r;return ZQ(e,i,n)}function e5(e,t,n){var r=eE(t);if(r===null||!vv(r.downloadTokens))return null;var i=r.downloadTokens;if(i.length===0)return null;var s=encodeURIComponent,u=i.split(","),c=u.map(function(l){var h=e.bucket,d=e.fullPath,v="/b/"+s(h)+"/o/"+s(d),m=Vo(v,n),y=Hx({alt:"media",token:l});return m+y});return c[0]}function tE(e,t){for(var n={},r=t.length,i=0;i<r;i++){var s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qk="prefixes",Kk="items";function t5(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[qk])for(var i=0,s=n[qk];i<s.length;i++){var u=s[i],c=u.replace(/\/$/,""),l=e._makeStorageReference(new Tr(t,c));r.prefixes.push(l)}if(n[Kk])for(var h=0,d=n[Kk];h<d.length;h++){var v=d[h],l=e._makeStorageReference(new Tr(t,v.name));r.items.push(l)}return r}function n5(e,t,n){var r=eE(n);if(r===null)return null;var i=r;return t5(e,t,i)}var Qi=function(){function e(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(e){if(!e)throw Xb()}function mv(e,t){function n(r,i){var s=Gx(e,i,t);return vi(s!==null),s}return n}function r5(e,t){function n(r,i){var s=n5(e,t,i);return vi(s!==null),s}return n}function i5(e,t){function n(r,i){var s=Gx(e,i,t);return vi(s!==null),e5(s,i,e.host)}return n}function zu(e){function t(n,r){var i;return n.getStatus()===401?n.getResponseText().includes("Firebase App Check token is invalid")?i=gQ():i=vQ():n.getStatus()===402?i=pQ(e.bucket):n.getStatus()===403?i=mQ(e.path):i=r,i.serverResponse=r.serverResponse,i}return t}function yv(e){var t=zu(e);function n(r,i){var s=t(r,i);return r.getStatus()===404&&(s=dQ(e.path)),s.serverResponse=i.serverResponse,s}return n}function $x(e,t,n){var r=t.fullServerUrl(),i=Vo(r,e.host),s="GET",u=e.maxOperationRetryTime,c=new Qi(i,s,mv(e,n),u);return c.errorHandler=yv(t),c}function o5(e,t,n,r,i){var s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);var u=t.bucketOnlyServerUrl(),c=Vo(u,e.host),l="GET",h=e.maxOperationRetryTime,d=new Qi(c,l,r5(e,t.bucket),h);return d.urlParams=s,d.errorHandler=zu(t),d}function s5(e,t,n){var r=t.fullServerUrl(),i=Vo(r,e.host),s="GET",u=e.maxOperationRetryTime,c=new Qi(i,s,i5(e,n),u);return c.errorHandler=yv(t),c}function a5(e,t,n,r){var i=t.fullServerUrl(),s=Vo(i,e.host),u="PATCH",c=tE(n,r),l={"Content-Type":"application/json; charset=utf-8"},h=e.maxOperationRetryTime,d=new Qi(s,u,mv(e,r),h);return d.headers=l,d.body=c,d.errorHandler=yv(t),d}function u5(e,t){var n=t.fullServerUrl(),r=Vo(n,e.host),i="DELETE",s=e.maxOperationRetryTime;function u(l,h){}var c=new Qi(r,i,u,s);return c.successCodes=[200,204],c.errorHandler=yv(t),c}function c5(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function zx(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=c5(null,t)),r}function l5(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function c(){for(var M="",K=0;K<2;K++)M=M+Math.random().toString().slice(2);return M}var l=c();u["Content-Type"]="multipart/related; boundary="+l;var h=zx(t,r,i),d=tE(h,n),v="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=Zb.getBlob(v,r,m);if(y===null)throw Fx();var w={name:h.fullPath},E=Vo(s,e.host),T="POST",k=e.maxUploadRetryTime,P=new Qi(E,T,mv(e,n),k);return P.urlParams=w,P.headers=u,P.body=y.uploadData(),P.errorHandler=zu(t),P}var ip=function(){function e(t,n,r,i){this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}return e}();function nE(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch{vi(!1)}var r=t||["active"];return vi(!!n&&r.indexOf(n)!==-1),n}function f5(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),u=zx(t,r,i),c={name:u.fullPath},l=Vo(s,e.host),h="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},v=tE(u,n),m=e.maxUploadRetryTime;function y(E){nE(E);var T;try{T=E.getResponseHeader("X-Goog-Upload-URL")}catch{vi(!1)}return vi(vv(T)),T}var w=new Qi(l,h,y,m);return w.urlParams=c,w.headers=d,w.body=v,w.errorHandler=zu(t),w}function h5(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function s(h){var d=nE(h,["active","final"]),v=null;try{v=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{vi(!1)}v||vi(!1);var m=Number(v);return vi(!isNaN(m)),new ip(m,r.size(),d==="final")}var u="POST",c=e.maxUploadRetryTime,l=new Qi(n,u,s,c);return l.headers=i,l.errorHandler=zu(t),l}var Hk=256*1024;function d5(e,t,n,r,i,s,u,c){var l=new ip(0,0);if(u?(l.current=u.current,l.total=u.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw EQ();var h=l.total-l.current,d=h;i>0&&(d=Math.min(d,i));var v=l.current,m=v+d,y=d===h?"upload, finalize":"upload",w={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":""+l.current},E=r.slice(v,m);if(E===null)throw Fx();function T(K,Q){var F=nE(K,["active","final"]),re=l.current+d,te=r.size(),Ee;return F==="final"?Ee=mv(t,s)(K,Q):Ee=null,new ip(re,te,F==="final",Ee)}var k="POST",P=t.maxUploadRetryTime,M=new Qi(n,k,T,P);return M.headers=w,M.body=E.uploadData(),M.progressCallback=c||null,M.errorHandler=zu(e),M}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p5=function(){function e(t,n,r){var i=FQ(t)||n!=null||r!=null;if(i)this.next=t,this.error=n,this.complete=r;else{var s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qx=function(){function e(t,n,r){var i=this;r===void 0&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=r,this._mappings=gv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(s){i._request=void 0,i._chunkMultiplier=1,s._codeEquals("canceled")?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=s,i._transition("error"))},this._metadataErrorHandler=function(s){i._request=void 0,s._codeEquals("canceled")?i.completeTransitions_():(i._error=s,i._transition("error"))},this._promise=new Promise(function(s,u){i._resolve=s,i._reject=u,i._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var t=this,n=this._transferred;return function(r){return t._updateProgress(n+r)}},e.prototype._shouldDoResumable=function(t){return t.size()>256*1024},e.prototype._start=function(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(t){var n=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(r){var i=r[0],s=r[1];switch(n._state){case"running":t(i,s);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused");break}})},e.prototype._createResumable=function(){var t=this;this._resolveToken(function(n,r){var i=f5(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(u){t._request=void 0,t._uploadUrl=u,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},e.prototype._fetchStatus=function(){var t=this,n=this._uploadUrl;this._resolveToken(function(r,i){var s=h5(t._ref.storage,t._ref._location,n,t._blob),u=t._ref.storage._makeRequest(s,r,i);t._request=u,u.getPromise().then(function(c){c=c,t._request=void 0,t._updateProgress(c.current),t._needToFetchStatus=!1,c.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},e.prototype._continueUpload=function(){var t=this,n=Hk*this._chunkMultiplier,r=new ip(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(function(s,u){var c;try{c=d5(t._ref._location,t._ref.storage,i,t._blob,n,t._mappings,r,t._makeProgressCallback())}catch(h){t._error=h,t._transition("error");return}var l=t._ref.storage._makeRequest(c,s,u);t._request=l,l.getPromise().then(function(h){t._increaseMultiplier(),t._request=void 0,t._updateProgress(h.current),h.finalized?(t._metadata=h.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},e.prototype._increaseMultiplier=function(){var t=Hk*this._chunkMultiplier;t<32*1024*1024&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(n,r){var i=$x(t._ref.storage,t._ref._location,t._mappings),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(u){t._request=void 0,t._metadata=u,t._transition("success")},t._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(n,r){var i=l5(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),s=t._ref.storage._makeRequest(i,n,r);t._request=s,s.getPromise().then(function(u){t._request=void 0,t._metadata=u,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},e.prototype._updateProgress=function(t){var n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()},e.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":this._state=t,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=t,this._request!==void 0&&this._request.cancel();break;case"running":var n=this._state==="paused";this._state=t,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Lx(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var t=Py(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n,r,i){var s=this,u=new p5(n,r,i);return this._addObserver(u),function(){s._removeObserver(u)}},e.prototype.then=function(t,n){return this._promise.then(t,n)},e.prototype.catch=function(t){return this.then(null,t)},e.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},e.prototype._removeObserver=function(t){var n=this._observers.indexOf(t);n!==-1&&this._observers.splice(n,1)},e.prototype._notifyObservers=function(){var t=this;this._finishPromise();var n=this._observers.slice();n.forEach(function(r){t._notifyObserver(r)})},e.prototype._finishPromise=function(){if(this._resolve!==void 0){var t=!0;switch(Py(this._state)){case Nn.SUCCESS:xa(this._resolve.bind(null,this.snapshot))();break;case Nn.CANCELED:case Nn.ERROR:var n=this._reject;xa(n.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(t){var n=Py(this._state);switch(n){case Nn.RUNNING:case Nn.PAUSED:t.next&&xa(t.next.bind(t,this.snapshot))();break;case Nn.SUCCESS:t.complete&&xa(t.complete.bind(t))();break;case Nn.CANCELED:case Nn.ERROR:t.error&&xa(t.error.bind(t,this._error))();break;default:t.error&&xa(t.error.bind(t,this._error))()}},e.prototype.resume=function(){var t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t},e.prototype.pause=function(){var t=this._state==="running";return t&&this._transition("pausing"),t},e.prototype.cancel=function(){var t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _v=function(){function e(t,n){this._service=t,n instanceof Tr?this._location=n:this._location=Tr.makeFromUrl(n,t.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var t=new Tr(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Wx(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=zQ(this._location.path);if(t===null)return null;var n=new Tr(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(t){if(this._location.path==="")throw jx(t)},e}();function v5(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Qx(e,new Zb(t),n)}function g5(e){var t={prefixes:[],items:[]};return Yx(e,t).then(function(){return t})}function Yx(e,t,n){return A(this,void 0,void 0,function(){var r,i,s,u;return C(this,function(c){switch(c.label){case 0:return r={pageToken:n},[4,Xx(e,r)];case 1:return i=c.sent(),(s=t.prefixes).push.apply(s,i.prefixes),(u=t.items).push.apply(u,i.items),i.nextPageToken==null?[3,3]:[4,Yx(e,t,i.nextPageToken)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function Xx(e,t){return A(this,void 0,void 0,function(){var n,r;return C(this,function(i){switch(i.label){case 0:return t!=null&&typeof t.maxResults=="number"&&iw("options.maxResults",1,1e3,t.maxResults),n=t||{},r=o5(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function m5(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=$x(e.storage,e._location,gv()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}function y5(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=a5(e.storage,e._location,t,gv()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}function _5(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=s5(e.storage,e._location,gv()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then(function(r){if(r===null)throw TQ();return r})]}})})}function w5(e){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=u5(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}function Jx(e,t){var n=QQ(e._location.path,t),r=new Tr(e._location.bucket,n);return new _v(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(e){return/^[A-Za-z]+:\/\//.test(e)}function b5(e,t){return new _v(e,t)}function Zx(e,t){if(e instanceof wv){var n=e;if(n._bucket==null)throw bQ();var r=new _v(n,n._bucket);return t!=null?Zx(r,t):r}else return t!==void 0?Jx(e,t):e}function E5(e,t){if(t&&ow(t)){if(e instanceof wv)return b5(e,t);throw Xa("To use ref(service, url), the first argument must be a Storage instance.")}else return Zx(e,t)}function Wk(e,t){var n=t==null?void 0:t[Mx];return n==null?null:Tr.makeFromBucketSpec(n,e)}function T5(e,t,n,r){r===void 0&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken=typeof i=="string"?i:Mw(i,e.app.options.projectId))}var wv=function(){function e(t,n,r,i,s,u){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._pool=i,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=xx,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fQ,this._maxUploadRetryTime=hQ,this._requests=new Set,s!=null?this._bucket=Tr.makeFromBucketSpec(s,this._host):this._bucket=Wk(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._url!=null?this._bucket=Tr.makeFromBucketSpec(this._url,t):this._bucket=Wk(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){iw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){iw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2]);case 1:if(n=r.sent(),n!==null)return[2,n.accessToken];r.label=2;case 2:return[2,null]}})})},e.prototype._getAppCheckToken=function(){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return t=this._appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return n=r.sent(),[2,n.token];case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(t){return new _v(this,t)},e.prototype._makeRequest=function(t,n,r){var i=this;if(this._deleted)return new DQ(Ux());var s=HQ(t,this._appId,n,r,this._pool,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(function(){return i._requests.delete(s)},function(){return i._requests.delete(s)}),s},e.prototype.makeRequestWithTokens=function(t){return A(this,void 0,void 0,function(){var n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=s.sent(),r=n[0],i=n[1],[2,this._makeRequest(t,r,i)]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(e,t,n){return e=Re(e),v5(e,t,n)}function S5(e){return e=Re(e),m5(e)}function C5(e,t){return e=Re(e),y5(e,t)}function A5(e,t){return e=Re(e),Xx(e,t)}function k5(e){return e=Re(e),g5(e)}function R5(e){return e=Re(e),_5(e)}function N5(e){return e=Re(e),w5(e)}function Gk(e,t){return e=Re(e),E5(e,t)}function P5(e,t){return Jx(e,t)}function O5(e,t,n,r){r===void 0&&(r={}),T5(e,t,n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wh=function(){function e(t,n,r){this._delegate=t,this.task=n,this.ref=r}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $k=function(){function e(t,n){this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new Wh(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(t,n){var r=this;return this._delegate.then(function(i){if(t)return t(new Wh(i,r,r._ref))},n)},e.prototype.on=function(t,n,r,i){var s=this,u=void 0;return n&&(typeof n=="function"?u=function(c){return n(new Wh(c,s,s._ref))}:u={next:n.next?function(c){return n.next(new Wh(c,s,s._ref))}:void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(t,u,r||void 0,i||void 0)},e}(),zk=function(){function e(t,n){this._delegate=t,this._service=n}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(n){return new ql(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(n){return new ql(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ql=function(){function e(t,n){this._delegate=t,this.storage=n}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=P5(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t==null?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(t,n){return this._throwIfRoot("put"),new $k(I5(this._delegate,t,n),this)},e.prototype.putString=function(t,n,r){n===void 0&&(n=Er.RAW),this._throwIfRoot("putString");var i=Vx(n,t),s=ge({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new $k(new Qx(this._delegate,new Zb(i.data,!0),s),this)},e.prototype.listAll=function(){var t=this;return k5(this._delegate).then(function(n){return new zk(n,t.storage)})},e.prototype.list=function(t){var n=this;return A5(this._delegate,t||void 0).then(function(r){return new zk(r,n.storage)})},e.prototype.getMetadata=function(){return S5(this._delegate)},e.prototype.updateMetadata=function(t){return C5(this._delegate,t)},e.prototype.getDownloadURL=function(){return R5(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),N5(this._delegate)},e.prototype._throwIfRoot=function(t){if(this._delegate._location.path==="")throw jx(t)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D5=function(){function e(t,n){this.app=t,this._delegate=n}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(t){if(ow(t))throw Xa("ref() expected a child path but got a URL, use refFromURL instead.");return new ql(Gk(this._delegate,t),this)},e.prototype.refFromURL=function(t){if(!ow(t))throw Xa("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Tr.makeFromUrl(t,this._delegate.host)}catch{throw Xa("refFromUrl() expected a valid full URL but got an invalid one.")}return new ql(Gk(this._delegate,t),this)},e.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},e.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),O5(this._delegate,t,n,r)},e}(),x5="@firebase/storage",M5="0.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L5="storage";function F5(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal"),u=new D5(r,new wv(r,i,s,new OQ,n,fe.SDK_VERSION));return u}function U5(e){var t={TaskState:Nn,TaskEvent:RQ,StringFormat:Er,Storage:wv,Reference:ql};e.INTERNAL.registerComponent(new wn(L5,F5,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(x5,M5)}U5(fe);var j5="@firebase/performance",eM="0.4.18";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tM=eM,V5="FB-PERF-TRACE-START",B5="FB-PERF-TRACE-STOP",sw="FB-PERF-TRACE-MEASURE",nM="_wt_",rM="_fp",iM="_fcp",oM="_fid",sM="@firebase/performance/config",aM="@firebase/performance/configexpire",q5="performance",uM="Performance";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,K5=(Jt={},Jt["trace started"]="Trace {$traceName} was started before.",Jt["trace stopped"]="Trace {$traceName} is not running.",Jt["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Jt["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Jt["no window"]="Window is not available.",Jt["no app id"]="App id is not available.",Jt["no project id"]="Project id is not available.",Jt["no api key"]="Api key is not available.",Jt["invalid cc log"]="Attempted to queue invalid cc event",Jt["FB not default"]="Performance can only start when Firebase app instance is the default one.",Jt["RC response not ok"]="RC response is not ok",Jt["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Jt["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Jt["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Jt["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Jt),dn=new Gi(q5,uM,K5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hi=new zs(uM);Hi.logLevel=Me.INFO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oy,cM,mn=function(){function e(t){if(this.window=t,!t)throw dn.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(t){!this.performance||!this.performance.mark||this.performance.mark(t)},e.prototype.measure=function(t,n,r){!this.performance||!this.performance.measure||this.performance.measure(t,n,r)},e.prototype.getEntriesByType=function(t){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(t)},e.prototype.getEntriesByName=function(t){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(t)},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!fetch||!Promise||!this.navigator||!this.navigator.cookieEnabled?(Hi.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):$l()?!0:(Hi.info("IndexedDB is not supported by current browswer"),!1)},e.prototype.setupObserver=function(t,n){if(!!this.PerformanceObserver){var r=new this.PerformanceObserver(function(i){for(var s=0,u=i.getEntries();s<u.length;s++){var c=u[s];n(c)}});r.observe({entryTypes:[t]})}},e.getInstance=function(){return Oy===void 0&&(Oy=new e(cM)),Oy},e}();function H5(e){cM=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(e,t){var n=e.length-t.length;if(n<0||n>1)throw dn.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dy,Lt=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Qk("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Qk("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw dn.create("no app id");return t},e.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw dn.create("no project id");return t},e.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw dn.create("no api key");return t},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return Dy===void 0&&(Dy=new e),Dy},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lM;function W5(){var e=Lt.getInstance().installationsService.getId();return e.then(function(t){lM=t}),e}function rE(){return lM}function G5(){var e=Lt.getInstance().installationsService.getToken();return e.then(function(t){}),e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ja;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"})(Ja||(Ja={}));var $5=["firebase_","google_","ga_"],z5=new RegExp("^[a-zA-Z]\\w*$"),Q5=40,Y5=100;function X5(){var e=mn.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function fM(){var e=mn.getInstance().document,t=e.visibilityState;switch(t){case"visible":return Ja.VISIBLE;case"hidden":return Ja.HIDDEN;default:return Ja.UNKNOWN}}function J5(){var e=mn.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Z5(e){if(e.length===0||e.length>Q5)return!1;var t=$5.some(function(n){return e.startsWith(n)});return!t&&!!e.match(z5)}function eY(e){return e.length!==0&&e.length<=Y5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tY="0.0.1",nY={loggingEnabled:!0},rY="FIREBASE_INSTALLATIONS_AUTH";function iY(e){var t=oY();return t?(Yk(t),Promise.resolve()):uY(e).then(Yk).then(function(n){return sY(n)},function(){})}function oY(){var e=mn.getInstance().localStorage;if(!!e){var t=e.getItem(aM);if(!(!t||!cY(t))){var n=e.getItem(sM);if(!!n)try{var r=JSON.parse(n);return r}catch{return}}}}function sY(e){var t=mn.getInstance().localStorage;!e||!t||(t.setItem(sM,JSON.stringify(e)),t.setItem(aM,String(Date.now()+Lt.getInstance().configTimeToLive*60*60*1e3)))}var aY="Could not fetch config, will use default configs";function uY(e){return G5().then(function(t){var n=Lt.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+Lt.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:rY+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Lt.getInstance().getAppId(),app_version:tM,sdk_version:tY})});return fetch(i).then(function(s){if(s.ok)return s.json();throw dn.create("RC response not ok")})}).catch(function(){Hi.info(aY)})}function Yk(e){if(!e)return e;var t=Lt.getInstance(),n=e.entries||{};return n.fpr_enabled!==void 0?t.loggingEnabled=String(n.fpr_enabled)==="true":t.loggingEnabled=nY.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),n.fpr_vc_network_request_sampling_rate!==void 0&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),n.fpr_vc_trace_sampling_rate!==void 0&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=Xk(t.tracesSamplingRate),t.logNetworkAfterSampling=Xk(t.networkRequestsSamplingRate),e}function cY(e){return Number(e)>Date.now()}function Xk(e){return Math.random()<=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iE=1,xy;function hM(){return iE=2,xy=xy||fY(),xy}function lY(){return iE===3}function fY(){return hY().then(function(){return W5()}).then(function(e){return iY(e)}).then(function(){return Jk()},function(){return Jk()})}function hY(){var e=mn.getInstance().document;return new Promise(function(t){if(e&&e.readyState!=="complete"){var n=function(){e.readyState==="complete"&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}function Jk(){iE=3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oE=10*1e3,dY=5.5*1e3,dM=3,pY=1e3,op=dM,Ao=[],Zk=!1;function vY(){Zk||(bv(dY),Zk=!0)}function bv(e){setTimeout(function(){if(op!==0){if(!Ao.length)return bv(oE);gY()}},e)}function gY(){var e=Ao.splice(0,pY),t=e.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Lt.getInstance().logSource,log_event:t};mY(n,e).catch(function(){Ao=Ne(Ne([],e),Ao),op--,Hi.info("Tries left: "+op+"."),bv(oE)})}function mY(e,t){return yY(e).then(function(n){return n.ok||Hi.info("Call to Firebase backend failed."),n.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=oE;isNaN(r)||(i=Math.max(r,i));var s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(Ao=Ne(Ne([],t),Ao),Hi.info("Retry transport request later.")),op=dM,bv(i)})}function yY(e){var t=Lt.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function _Y(e){if(!e.eventTime||!e.message)throw dn.create("invalid cc log");Ao=Ne(Ne([],Ao),[e])}function wY(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);_Y({message:r,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var My;function pM(e,t){My||(My=wY(EY)),My(e,t)}function Gh(e){var t=Lt.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||!mn.getInstance().requiredApisAvailable()||e.isAuto&&fM()!==Ja.VISIBLE||(lY()?Ly(e):hM().then(function(){return Ly(e)},function(){return Ly(e)}))}function Ly(e){if(!!rE()){var t=Lt.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(function(){return pM(e,1)},0)}}function bY(e){var t=Lt.getInstance();if(!!t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n===r||n===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(function(){return pM(e,0)},0)}}function EY(e,t){return t===0?TY(e):IY(e)}function TY(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:vM(),network_request_metric:t};return JSON.stringify(n)}function IY(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};Object.keys(e.counters).length!==0&&(t.counters=e.counters);var n=e.getAttributes();Object.keys(n).length!==0&&(t.custom_attributes=n);var r={application_info:vM(),trace_metric:t};return JSON.stringify(r)}function vM(){return{google_app_id:Lt.getInstance().getAppId(),app_instance_id:rE(),web_app_info:{sdk_version:tM,page_url:mn.getInstance().getUrl(),service_worker_status:X5(),visibility_state:fM(),effective_connection_type:J5()},application_process_state:0}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SY=100,CY="_",AY=[rM,iM,oM];function kY(e,t){return e.length===0||e.length>SY?!1:t&&t.startsWith(nM)&&AY.indexOf(e)>-1||!e.startsWith(CY)}function RY(e){var t=Math.floor(e);return t<e&&Hi.info("Metric value should be an Integer, setting the value as : "+t+"."),t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cl=function(){function e(t,n,r){n===void 0&&(n=!1),this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=mn.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=V5+"-"+this.randomId+"-"+this.name,this.traceStopMark=B5+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||sw+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(this.state!==1)throw dn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(this.state!==2)throw dn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Gh(this)},e.prototype.record=function(t,n,r){if(t<=0)throw dn.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw dn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(t*1e3),r&&r.attributes&&(this.customAttributes=ge({},r.attributes)),r&&r.metrics)for(var i=0,s=Object.keys(r.metrics);i<s.length;i++){var u=s[i];isNaN(Number(r.metrics[u]))||(this.counters[u]=Number(Math.floor(r.metrics[u])))}Gh(this)},e.prototype.incrementMetric=function(t,n){n===void 0&&(n=1),this.counters[t]===void 0?this.putMetric(t,n):this.putMetric(t,this.counters[t]+n)},e.prototype.putMetric=function(t,n){if(kY(t,this.name))this.counters[t]=RY(n);else throw dn.create("invalid custom metric name",{customMetricName:t})},e.prototype.getMetric=function(t){return this.counters[t]||0},e.prototype.putAttribute=function(t,n){var r=Z5(t),i=eY(n);if(r&&i){this.customAttributes[t]=n;return}if(!r)throw dn.create("invalid attribute name",{attributeName:t});if(!i)throw dn.create("invalid attribute value",{attributeValue:n})},e.prototype.getAttribute=function(t){return this.customAttributes[t]},e.prototype.removeAttribute=function(t){this.customAttributes[t]!==void 0&&delete this.customAttributes[t]},e.prototype.getAttributes=function(){return ge({},this.customAttributes)},e.prototype.setStartTime=function(t){this.startTimeUs=t},e.prototype.setDuration=function(t){this.durationUs=t},e.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),n=t&&t[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))},e.createOobTrace=function(t,n,r){var i=mn.getInstance().getUrl();if(!!i){var s=new e(nM+i,!0),u=Math.floor(mn.getInstance().getTimeOrigin()*1e3);s.setStartTime(u),t&&t[0]&&(s.setDuration(Math.floor(t[0].duration*1e3)),s.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),s.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),s.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));var c="first-paint",l="first-contentful-paint";if(n){var h=n.find(function(v){return v.name===c});h&&h.startTime&&s.putMetric(rM,Math.floor(h.startTime*1e3));var d=n.find(function(v){return v.name===l});d&&d.startTime&&s.putMetric(iM,Math.floor(d.startTime*1e3)),r&&s.putMetric(oM,Math.floor(r*1e3))}Gh(s)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);Gh(n)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(e){var t=e;if(!(!t||t.responseStart===void 0)){var n=mn.getInstance().getTimeOrigin(),r=Math.floor((t.startTime+n)*1e3),i=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,s=Math.floor((t.responseEnd-t.startTime)*1e3),u=t.name&&t.name.split("?")[0],c={url:u,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:s};bY(c)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NY=5e3;function tR(){!rE()||(setTimeout(function(){return OY()},0),setTimeout(function(){return PY()},0),setTimeout(function(){return DY()},0))}function PY(){for(var e=mn.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];eR(i)}e.setupObserver("resource",eR)}function OY(){var e=mn.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){cl.createOobTrace(t,n),r=void 0},NY);e.onFirstInputDelay(function(i){r&&(clearTimeout(r),cl.createOobTrace(t,n,i))})}else cl.createOobTrace(t,n)}function DY(){for(var e=mn.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];nR(i)}e.setupObserver("measure",nR)}function nR(e){var t=e.name;t.substring(0,sw.length)!==sw&&cl.createUserTimingTrace(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xY=function(){function e(t){this.app=t,mn.getInstance().requiredApisAvailable()&&Uw().then(function(n){n&&(vY(),hM().then(tR,tR))}).catch(function(n){Hi.info("Environment doesn't support IndexedDB: "+n)})}return e.prototype.trace=function(t){return new cl(t)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return Lt.getInstance().instrumentationEnabled},set:function(t){Lt.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return Lt.getInstance().dataCollectionEnabled},set:function(t){Lt.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MY="[DEFAULT]";function LY(e){var t=function(n,r){if(n.name!==MY)throw dn.create("FB not default");if(typeof window=="undefined")throw dn.create("no window");return H5(window),Lt.getInstance().firebaseAppInstance=n,Lt.getInstance().installationsService=r,new xY(n)};e.INTERNAL.registerComponent(new wn("performance",function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return t(r,i)},"PUBLIC")),e.registerVersion(j5,eM)}LY(fe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FY="firebase_id",UY="origin",jY=60*1e3,VY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",gM="https://www.googletagmanager.com/gtag/js",yn;(function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"})(yn||(yn={}));var aw;(function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"})(aw||(aw={}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BY(e,t,n,r,i){return A(this,void 0,void 0,function(){var s,u;return C(this,function(c){switch(c.label){case 0:return i&&i.global?(e(yn.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:s=c.sent(),u=ge(ge({},r),{send_to:s}),e(yn.EVENT,n,u),c.label=3;case 3:return[2]}})})}function qY(e,t,n,r){return A(this,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return r&&r.global?(e(yn.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(yn.CONFIG,i,{update:!0,screen_name:n}),s.label=3;case 3:return[2]}})})}function KY(e,t,n,r){return A(this,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return r&&r.global?(e(yn.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(yn.CONFIG,i,{update:!0,user_id:n}),s.label=3;case 3:return[2]}})})}function HY(e,t,n,r){return A(this,void 0,void 0,function(){var i,s,u,c,l;return C(this,function(h){switch(h.label){case 0:if(!(r&&r.global))return[3,1];for(i={},s=0,u=Object.keys(n);s<u.length;s++)c=u[s],i["user_properties."+c]=n[c];return e(yn.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:l=h.sent(),e(yn.CONFIG,l,{update:!0,user_properties:n}),h.label=3;case 3:return[2]}})})}function WY(e,t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en=new zs("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GY(e,t){var n=document.createElement("script");n.src=gM+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}function $Y(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function zY(e,t,n,r,i,s){return A(this,void 0,void 0,function(){var u,c,l,h;return C(this,function(d){switch(d.label){case 0:u=r[i],d.label=1;case 1:return d.trys.push([1,7,,8]),u?[4,t[u]]:[3,3];case 2:return d.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return c=d.sent(),l=c.find(function(v){return v.measurementId===i}),l?[4,t[l.appId]]:[3,6];case 5:d.sent(),d.label=6;case 6:return[3,8];case 7:return h=d.sent(),en.error(h),[3,8];case 8:return e(yn.CONFIG,i,s),[2]}})})}function QY(e,t,n,r,i){return A(this,void 0,void 0,function(){var s,u,c,l,h,d,v,m,y;return C(this,function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),s=[],i&&i.send_to?(u=i.send_to,Array.isArray(u)||(u=[u]),[4,Promise.all(n)]):[3,2];case 1:for(c=w.sent(),l=function(E){var T=c.find(function(P){return P.measurementId===E}),k=T&&t[T.appId];if(k)s.push(k);else return s=[],"break"},h=0,d=u;h<d.length&&(v=d[h],m=l(v),m!=="break");h++);w.label=2;case 2:return s.length===0&&(s=Object.values(t)),[4,Promise.all(s)];case 3:return w.sent(),e(yn.EVENT,r,i||{}),[3,5];case 4:return y=w.sent(),en.error(y),[3,5];case 5:return[2]}})})}function YY(e,t,n,r){function i(s,u,c){return A(this,void 0,void 0,function(){var l;return C(this,function(h){switch(h.label){case 0:return h.trys.push([0,6,,7]),s!==yn.EVENT?[3,2]:[4,QY(e,t,n,u,c)];case 1:return h.sent(),[3,5];case 2:return s!==yn.CONFIG?[3,4]:[4,zY(e,t,n,r,u,c)];case 3:return h.sent(),[3,5];case 4:e(yn.SET,u),h.label=5;case 5:return[3,7];case 6:return l=h.sent(),en.error(l),[3,7];case 7:return[2]}})})}return i}function XY(e,t,n,r,i){var s=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=YY(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}function JY(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(gM))return r}return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jr,ZY=(jr={},jr["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",jr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",jr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",jr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",jr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",jr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",jr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",jr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',jr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',jr),Ar=new Gi("analytics","Analytics",ZY);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eX=30,tX=1e3,nX=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=tX),this.throttleMetadata=t,this.intervalMillis=n}return e.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},e.prototype.setThrottleMetadata=function(t,n){this.throttleMetadata[t]=n},e.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},e}(),mM=new nX;function rX(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function iX(e){var t;return A(this,void 0,void 0,function(){var n,r,i,s,u,c,l;return C(this,function(h){switch(h.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:rX(r)},s=VY.replace("{app-id}",n),[4,fetch(s,i)];case 1:if(u=h.sent(),!(u.status!==200&&u.status!==304))return[3,6];c="",h.label=2;case 2:return h.trys.push([2,4,,5]),[4,u.json()];case 3:return l=h.sent(),((t=l.error)===null||t===void 0?void 0:t.message)&&(c=l.error.message),[3,5];case 4:return h.sent(),[3,5];case 5:throw Ar.create("config-fetch-failed",{httpStatus:u.status,responseMessage:c});case 6:return[2,u.json()]}})})}function oX(e,t,n){return t===void 0&&(t=mM),A(this,void 0,void 0,function(){var r,i,s,u,c,l,h=this;return C(this,function(d){if(r=e.options,i=r.appId,s=r.apiKey,u=r.measurementId,!i)throw Ar.create("no-app-id");if(!s){if(u)return[2,{measurementId:u,appId:i}];throw Ar.create("no-api-key")}return c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new uX,setTimeout(function(){return A(h,void 0,void 0,function(){return C(this,function(v){return l.abort(),[2]})})},n!==void 0?n:jY),[2,yM({appId:i,apiKey:s,measurementId:u},c,l,t)]})})}function yM(e,t,n,r){var i=t.throttleEndTimeMillis,s=t.backoffCount;return r===void 0&&(r=mM),A(this,void 0,void 0,function(){var u,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:u=e.appId,c=e.measurementId,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,sX(n,i)];case 2:return y.sent(),[3,4];case 3:if(l=y.sent(),c)return en.warn("Timed out fetching this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]")),[2,{appId:u,measurementId:c}];throw l;case 4:return y.trys.push([4,6,,7]),[4,iX(e)];case 5:return h=y.sent(),r.deleteThrottleMetadata(u),[2,h];case 6:if(d=y.sent(),!aX(d)){if(r.deleteThrottleMetadata(u),c)return en.warn("Failed to fetch this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+d.message+"]")),[2,{appId:u,measurementId:c}];throw d}return v=Number(d.customData.httpStatus)===503?a_(s,r.intervalMillis,eX):a_(s,r.intervalMillis),m={throttleEndTimeMillis:Date.now()+v,backoffCount:s+1},r.setThrottleMetadata(u,m),en.debug("Calling attemptFetch again in "+v+" millis"),[2,yM(e,m,n,r)];case 7:return[2]}})})}function sX(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(Ar.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function aX(e){if(!(e instanceof Ou)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var uX=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cX(){return A(this,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:return $l()?[3,1]:(en.warn(Ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Uw()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),en.warn(Ar.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}function lX(e,t,n,r,i,s){return A(this,void 0,void 0,function(){var u,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return u=oX(e),u.then(function(w){n[w.measurementId]=w.appId,e.options.measurementId&&w.measurementId!==e.options.measurementId&&en.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+")"+(" does not match the measurement ID fetched from the server ("+w.measurementId+").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(w){return en.error(w)}),t.push(u),c=cX().then(function(w){if(w)return r.getId()}),[4,Promise.all([u,c])];case 1:return l=y.sent(),h=l[0],d=l[1],JY()||GY(s,h.measurementId),i("js",new Date),v=(m={},m[UY]="firebase",m.update=!0,m),d!=null&&(v[FY]=d),i(yn.CONFIG,h.measurementId,v),[2,h.measurementId]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni={},rR=[],iR={},ad="dataLayer",_M="gtag",oR,Vc,uw=!1;function fX(e){if(uw)throw Ar.create("already-initialized");e.dataLayerName&&(ad=e.dataLayerName),e.gtagName&&(_M=e.gtagName)}function hX(){var e=[];if(Fw()&&e.push("This is a browser extension environment."),BN()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(r,i){return"("+(i+1)+") "+r}).join(" "),n=Ar.create("invalid-analytics-context",{errorInfo:t});en.warn(n.message)}}function dX(e,t){hX();var n=e.options.appId;if(!n)throw Ar.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)en.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+(" measurement ID for this Firebase app. Falling back to the measurement ID "+e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw Ar.create("no-api-key");if(Ni[n]!=null)throw Ar.create("already-exists",{id:n});if(!uw){$Y(ad);var r=XY(Ni,rR,iR,ad,_M),i=r.wrappedGtag,s=r.gtagCore;Vc=i,oR=s,uw=!0}Ni[n]=lX(e,rR,iR,t,oR,ad);var u={app:e,logEvent:function(c,l,h){BY(Vc,Ni[n],c,l,h).catch(function(d){return en.error(d)})},setCurrentScreen:function(c,l){qY(Vc,Ni[n],c,l).catch(function(h){return en.error(h)})},setUserId:function(c,l){KY(Vc,Ni[n],c,l).catch(function(h){return en.error(h)})},setUserProperties:function(c,l){HY(Vc,Ni[n],c,l).catch(function(h){return en.error(h)})},setAnalyticsCollectionEnabled:function(c){WY(Ni[n],c).catch(function(l){return en.error(l)})},INTERNAL:{delete:function(){return delete Ni[n],Promise.resolve()}}};return u}var pX="@firebase/analytics",vX="0.6.18",sR="analytics";function gX(e){e.INTERNAL.registerComponent(new wn(sR,function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return dX(r,i)},"PUBLIC").setServiceProps({settings:fX,EventName:aw,isSupported:mX})),e.INTERNAL.registerComponent(new wn("analytics-internal",t,"PRIVATE")),e.registerVersion(pX,vX);function t(n){try{var r=n.getProvider(sR).getImmediate();return{logEvent:r.logEvent}}catch(i){throw Ar.create("interop-component-reg-failed",{reason:i})}}}gX(fe);function mX(){return A(this,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:if(Fw())return[2,!1];if(!BN())return[2,!1];if(!$l())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Uw()];case 2:return e=t.sent(),[2,e];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yX=function(){function e(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return e.prototype.isCachedDataFresh=function(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-n,i=r<=t;return this.logger.debug("Config fetch cache check."+(" Cache age millis: "+r+".")+(" Cache max age millis (minimumFetchIntervalMillis setting): "+t+".")+(" Is cache hit: "+i+".")),i},e.prototype.fetch=function(t){return A(this,void 0,void 0,function(){var n,r,i,s,u;return C(this,function(c){switch(c.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return n=c.sent(),r=n[0],i=n[1],i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,r)?[2,i]:(t.eTag=i&&i.eTag,[4,this.client.fetch(t)]);case 2:return s=c.sent(),u=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],s.status===200&&u.push(this.storage.setLastSuccessfulFetchResponse(s)),[4,Promise.all(u)];case 3:return c.sent(),[2,s]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An,_X=(An={},An["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",An["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",An["registration-api-key"]="Undefined API key. Check Firebase app initialization.",An["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",An["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",An["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",An["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",An["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",An["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",An["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',An["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',An["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",An["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",An),Ir=new Gi("remoteconfig","Remote Config",_X);function wX(e,t){return e instanceof Ou&&e.code.indexOf(t)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bX(e){return e===void 0&&(e=navigator),e.languages&&e.languages[0]||e.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EX=function(){function e(t,n,r,i,s,u){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=u}return e.prototype.fetch=function(t){return A(this,void 0,void 0,function(){var n,r,i,s,u,c,l,h,d,v,m,y,w,E,T,k,P,M,K;return C(this,function(Q){switch(Q.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=Q.sent(),r=n[0],i=n[1],s=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",u=s+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:bX()},h={method:"POST",headers:c,body:JSON.stringify(l)},d=fetch(u,h),v=new Promise(function(F,re){t.signal.addEventListener(function(){var te=new Error("The operation was aborted.");te.name="AbortError",re(te)})}),Q.label=2;case 2:return Q.trys.push([2,5,,6]),[4,Promise.race([d,v])];case 3:return Q.sent(),[4,d];case 4:return m=Q.sent(),[3,6];case 5:throw y=Q.sent(),w="fetch-client-network",y.name==="AbortError"&&(w="fetch-timeout"),Ir.create(w,{originalErrorMessage:y.message});case 6:if(E=m.status,T=m.headers.get("ETag")||void 0,m.status!==200)return[3,11];M=void 0,Q.label=7;case 7:return Q.trys.push([7,9,,10]),[4,m.json()];case 8:return M=Q.sent(),[3,10];case 9:throw K=Q.sent(),Ir.create("fetch-client-parse",{originalErrorMessage:K.message});case 10:k=M.entries,P=M.state,Q.label=11;case 11:if(P==="INSTANCE_STATE_UNSPECIFIED"?E=500:P==="NO_CHANGE"?E=304:(P==="NO_TEMPLATE"||P==="EMPTY_CONFIG")&&(k={}),E!==304&&E!==200)throw Ir.create("fetch-status",{httpStatus:E});return[2,{status:E,eTag:T,config:k}]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TX=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var IX=!1,SX="",aR=0,CX=["1","true","t","yes","y","on"],Fy=function(){function e(t,n){n===void 0&&(n=SX),this._source=t,this._value=n}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return this._source==="static"?IX:CX.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if(this._source==="static")return aR;var t=Number(this._value);return isNaN(t)&&(t=aR),t},e.prototype.getSource=function(){return this._source},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AX=60*1e3,kX=12*60*60*1e3,RX=function(){function e(t,n,r,i,s){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:AX,minimumFetchIntervalMillis:kX},this.defaultConfig={}}return e.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Me.DEBUG;break;case"silent":this._logger.logLevel=Me.SILENT;break;default:this._logger.logLevel=Me.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=i.sent(),n=t[0],r=t[1],!n||!n.config||!n.eTag||n.eTag===r?[2,!1]:[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])];case 2:return i.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return A(this,void 0,void 0,function(){var t,n,r,i=this;return C(this,function(s){switch(s.label){case 0:t=new TX,setTimeout(function(){return A(i,void 0,void 0,function(){return C(this,function(u){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return s.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return s.sent(),[3,6];case 4:return n=s.sent(),r=wX(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw s.sent(),n;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return A(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var t=this;return NX(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(n,r){return n[r]=t.getValue(r),n},{})},e.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},e.prototype.getNumber=function(t){return this.getValue(t).asNumber()},e.prototype.getString=function(t){return this.getValue(t).asString()},e.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var n=this._storageCache.getActiveConfig();return n&&n[t]!==void 0?new Fy("remote",n[t]):this.defaultConfig&&this.defaultConfig[t]!==void 0?new Fy("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Fy("static"))},e}();function NX(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(ge(ge({},e),t))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(e,t){var n=e.target.error||void 0;return Ir.create(t,{originalErrorMessage:n&&n.message})}var ds="app_namespace_store",PX="firebase_remote_config",OX=1;function DX(){return new Promise(function(e,t){var n=indexedDB.open(PX,OX);n.onerror=function(r){t(ud(r,"storage-open"))},n.onsuccess=function(r){e(r.target.result)},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ds,{keyPath:"compositeKey"})}}})}var xX=function(){function e(t,n,r,i){i===void 0&&(i=DX()),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(t){return this.set("active_config",t)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,u){var c=n.transaction([ds],"readonly"),l=c.objectStore(ds),h=r.createCompositeKey(t);try{var d=l.get(h);d.onerror=function(v){u(ud(v,"storage-get"))},d.onsuccess=function(v){var m=v.target.result;s(m?m.value:void 0)}}catch(v){u(Ir.create("storage-get",{originalErrorMessage:v&&v.message}))}})]}})})},e.prototype.set=function(t,n){return A(this,void 0,void 0,function(){var r,i=this;return C(this,function(s){switch(s.label){case 0:return[4,this.openDbPromise];case 1:return r=s.sent(),[2,new Promise(function(u,c){var l=r.transaction([ds],"readwrite"),h=l.objectStore(ds),d=i.createCompositeKey(t);try{var v=h.put({compositeKey:d,value:n});v.onerror=function(m){c(ud(m,"storage-set"))},v.onsuccess=function(){u()}}catch(m){c(Ir.create("storage-set",{originalErrorMessage:m&&m.message}))}})]}})})},e.prototype.delete=function(t){return A(this,void 0,void 0,function(){var n,r=this;return C(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,u){var c=n.transaction([ds],"readwrite"),l=c.objectStore(ds),h=r.createCompositeKey(t);try{var d=l.delete(h);d.onerror=function(v){u(ud(v,"storage-delete"))},d.onsuccess=function(){s()}}catch(v){u(Ir.create("storage-delete",{originalErrorMessage:v&&v.message}))}})]}})})},e.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MX=function(){function e(t){this.storage=t}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return A(this,void 0,void 0,function(){var t,n,r,i,s,u;return C(this,function(c){switch(c.label){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,t];case 1:return i=c.sent(),i&&(this.lastFetchStatus=i),[4,n];case 2:return s=c.sent(),s&&(this.lastSuccessfulFetchTimestampMillis=s),[4,r];case 3:return u=c.sent(),u&&(this.activeConfig=u),[2]}})})},e.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},e.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LX(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(Ir.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function FX(e){if(!(e instanceof Ou)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var UX=function(){function e(t,n){this.client=t,this.storage=n}return e.prototype.fetch=function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return n=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,n)]}})})},e.prototype.attemptFetch=function(t,n){var r=n.throttleEndTimeMillis,i=n.backoffCount;return A(this,void 0,void 0,function(){var s,u,c;return C(this,function(l){switch(l.label){case 0:return[4,LX(t.signal,r)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return s=l.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return l.sent(),[2,s];case 5:if(u=l.sent(),!FX(u))throw u;return c={throttleEndTimeMillis:Date.now()+a_(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(c)];case 6:return l.sent(),[2,this.attemptFetch(t,c)];case 7:return[2]}})})},e}(),uR="@firebase/remote-config",jX="0.1.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VX(e){e.INTERNAL.registerComponent(new wn("remoteConfig",t,"PUBLIC").setMultipleInstances(!0)),e.registerVersion(uR,jX);function t(n,r){var i=r.instanceIdentifier,s=n.getProvider("app").getImmediate(),u=n.getProvider("installations").getImmediate();if(typeof window=="undefined")throw Ir.create("registration-window");var c=s.options,l=c.projectId,h=c.apiKey,d=c.appId;if(!l)throw Ir.create("registration-project-id");if(!h)throw Ir.create("registration-api-key");if(!d)throw Ir.create("registration-app-id");i=i||"firebase";var v=new xX(d,s.name,i),m=new MX(v),y=new zs(uR);y.logLevel=Me.ERROR;var w=new EX(u,e.SDK_VERSION,i,l,h,d),E=new UX(w,v),T=new yX(E,v,m,y),k=new RX(s,T,m,v,y);return k.ensureInitialized(),k}}VX(fe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vr,BX=(Vr={},Vr["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",Vr["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",Vr["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Vr["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Vr["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Vr["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Vr["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Vr["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Vr["recaptcha-error"]="ReCAPTCHA error.",Vr),ur=new Gi("appCheck","AppCheck",BX);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wM=new Map,qX={activated:!1,tokenObservers:[]},KX={enabled:!1};function Ln(e){return wM.get(e)||qX}function gi(e,t){wM.set(e,t)}function sE(){return KX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bM="https://content-firebaseappcheck.googleapis.com/v1beta",HX="exchangeRecaptchaToken",WX="exchangeDebugToken",cR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GX=function(){function e(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(t){return A(this,void 0,void 0,function(){var n;return C(this,function(r){switch(r.label){case 0:this.stop(),r.label=1;case 1:return r.trys.push([1,6,,7]),this.pending=new Gt,[4,$X(this.getNextRun(t))];case 2:return r.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return r.sent(),this.pending=new Gt,[4,this.operation()];case 4:return r.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return r.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return n=r.sent(),this.retryPolicy(n)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}})})},e.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n},e}();function $X(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){return self.grecaptcha}function EM(e){if(!Ln(e).activated)throw ur.create("use-before-activation",{appName:e.name})}function zX(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function QX(e){return mp.encodeString(JSON.stringify(e),!1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(e,t){var n=e.url,r=e.body;return A(this,void 0,void 0,function(){var i,s,u,c,l,h,d,v,m,y;return C(this,function(w){switch(w.label){case 0:i={"Content-Type":"application/json"},s=t.getImmediate({optional:!0}),s&&(i["X-Firebase-Client"]=s.getPlatformInfoString()),u={method:"POST",body:JSON.stringify(r),headers:i},w.label=1;case 1:return w.trys.push([1,3,,4]),[4,fetch(n,u)];case 2:return c=w.sent(),[3,4];case 3:throw l=w.sent(),ur.create("fetch-network-error",{originalErrorMessage:l.message});case 4:if(c.status!==200)throw ur.create("fetch-status-error",{httpStatus:c.status});w.label=5;case 5:return w.trys.push([5,7,,8]),[4,c.json()];case 6:return h=w.sent(),[3,8];case 7:throw d=w.sent(),ur.create("fetch-parse-error",{originalErrorMessage:d.message});case 8:if(v=h.ttl.match(/^([\d.]+)(s)$/),!v||!v[2]||isNaN(Number(v[1])))throw ur.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration "+("format: "+h.ttl)});return m=Number(v[1])*1e3,y=Date.now(),[2,{token:h.attestationToken,expireTimeMillis:y+m,issuedAtTimeMillis:y}]}})})}function YX(e,t){var n=e.options,r=n.projectId,i=n.appId,s=n.apiKey;return{url:bM+"/projects/"+r+"/apps/"+i+":"+HX+"?key="+s,body:{recaptcha_token:t}}}function XX(e,t){var n=e.options,r=n.projectId,i=n.appId,s=n.apiKey;return{url:bM+"/projects/"+r+"/apps/"+i+":"+WX+"?key="+s,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JX="firebase-app-check-database",ZX=1,Kl="firebase-app-check-store",IM="debug-token",$h=null;function SM(){return $h||($h=new Promise(function(e,t){try{var n=indexedDB.open(JX,ZX);n.onsuccess=function(r){e(r.target.result)},n.onerror=function(r){var i;t(ur.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Kl,{keyPath:"compositeKey"})}}}catch(r){t(ur.create("storage-open",{originalErrorMessage:r.message}))}}),$h)}function e8(e){return AM(kM(e))}function t8(e,t){return CM(kM(e),t)}function n8(e){return CM(IM,e)}function r8(){return AM(IM)}function CM(e,t){return A(this,void 0,void 0,function(){var n,r,i,s;return C(this,function(u){switch(u.label){case 0:return[4,SM()];case 1:return n=u.sent(),r=n.transaction(Kl,"readwrite"),i=r.objectStore(Kl),s=i.put({compositeKey:e,value:t}),[2,new Promise(function(c,l){s.onsuccess=function(h){c()},r.onerror=function(h){var d;l(ur.create("storage-set",{originalErrorMessage:(d=h.target.error)===null||d===void 0?void 0:d.message}))}})]}})})}function AM(e){return A(this,void 0,void 0,function(){var t,n,r,i;return C(this,function(s){switch(s.label){case 0:return[4,SM()];case 1:return t=s.sent(),n=t.transaction(Kl,"readonly"),r=n.objectStore(Kl),i=r.get(e),[2,new Promise(function(u,c){i.onsuccess=function(l){var h=l.target.result;u(h?h.value:void 0)},n.onerror=function(l){var h;c(ur.create("storage-get",{originalErrorMessage:(h=l.target.error)===null||h===void 0?void 0:h.message}))}})]}})})}function kM(e){return e.options.appId+"-"+e.name}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ev=new zs("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:if(!$l())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e8(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),Ev.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}})})}function fR(e,t){return $l()?t8(e,t).catch(function(n){Ev.warn("Failed to write token to indexeddb. Error: "+n)}):Promise.resolve()}function o8(){return A(this,void 0,void 0,function(){var e,t;return C(this,function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,r8()];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t=zX(),n8(t).catch(function(r){return Ev.warn("Failed to persist debug token to indexeddb. Error: "+r)}),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(){var e=sE();return e.enabled}function a8(){return A(this,void 0,void 0,function(){var e;return C(this,function(t){if(e=sE(),e.enabled&&e.token)return[2,e.token.promise];throw Error(`
            Can't get debug token in production mode.
        `)})})}function u8(){var e=d4();if(!(typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)){var t=sE();t.enabled=!0;var n=new Gt;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(o8())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c8={error:"UNKNOWN_ERROR"};function sp(e,t,n){return n===void 0&&(n=!1),A(this,void 0,void 0,function(){var r,i,s,u,c,l,h,d,v,m;return C(this,function(y){switch(y.label){case 0:return EM(e),r=Ln(e),i=r.token,s=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:u=y.sent(),u&&Hl(u)&&(i=u,gi(e,ge(ge({},r),{token:i})),hR(e,{token:i.token})),y.label=2;case 2:return!n&&i&&Hl(i)?[2,{token:i.token}]:s8()?(l=TM,h=XX,d=[e],[4,a8()]):[3,6];case 3:return[4,l.apply(void 0,[h.apply(void 0,d.concat([y.sent()])),t])];case 4:return c=y.sent(),[4,fR(e,c)];case 5:return y.sent(),gi(e,ge(ge({},r),{token:c})),[2,{token:c.token}];case 6:return y.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=y.sent(),[3,9];case 8:return v=y.sent(),Ev.error(v),s=v,[3,9];case 9:return i?[3,10]:(m=f8(s),[3,12]);case 10:return m={token:i.token},gi(e,ge(ge({},r),{token:i})),[4,fR(e,i)];case 11:y.sent(),y.label=12;case 12:return hR(e,m),[2,m]}})})}function RM(e,t,n,r,i){var s=Ln(e),u={next:r,error:i,type:n},c=ge(ge({},s),{tokenObservers:Ne(Ne([],s.tokenObservers),[u])});if(!c.tokenRefresher){var l=l8(e,t);c.tokenRefresher=l}if(!c.tokenRefresher.isRunning()&&s.isTokenAutoRefreshEnabled&&c.tokenRefresher.start(),s.token&&Hl(s.token)){var h=s.token;Promise.resolve().then(function(){return r({token:h.token})}).catch(function(){})}else s.token==null&&s.cachedTokenPromise.then(function(d){d&&Hl(d)&&r({token:d.token})}).catch(function(){});gi(e,c)}function aE(e,t){var n=Ln(e),r=n.tokenObservers.filter(function(i){return i.next!==t});r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),gi(e,ge(ge({},n),{tokenObservers:r}))}function l8(e,t){var n=this;return new GX(function(){return A(n,void 0,void 0,function(){var r,i;return C(this,function(s){switch(s.label){case 0:return r=Ln(e),r.token?[3,2]:[4,sp(e,t)];case 1:return i=s.sent(),[3,4];case 2:return[4,sp(e,t,!0)];case 3:i=s.sent(),s.label=4;case 4:if(i.error)throw i.error;return[2]}})})},function(){return!0},function(){var r=Ln(e);if(r.token){var i=r.token.issuedAtTimeMillis+(r.token.expireTimeMillis-r.token.issuedAtTimeMillis)*.5+3e5,s=r.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},cR.RETRIAL_MIN_WAIT,cR.RETRIAL_MAX_WAIT)}function hR(e,t){for(var n=Ln(e).tokenObservers,r=0,i=n;r<i.length;r++){var s=i[r];try{s.type==="EXTERNAL"&&t.error!=null?s.error(t.error):s.next(t)}catch{}}}function Hl(e){return e.expireTimeMillis-Date.now()>0}function f8(e){return{token:QX(c8),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h8="https://www.google.com/recaptcha/api.js";function d8(e,t){var n=Ln(e),r=new Gt;gi(e,ge(ge({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u=lR();return u?u.ready(function(){dR(e,t,u,i),r.resolve(u)}):v8(function(){var c=lR();if(!c)throw new Error("no recaptcha");c.ready(function(){dR(e,t,c,i),r.resolve(c)})}),r.promise}function p8(e){return A(this,void 0,void 0,function(){var t,n;return C(this,function(r){switch(r.label){case 0:return EM(e),t=Ln(e).reCAPTCHAState,[4,t.initialized.promise];case 1:return n=r.sent(),[2,new Promise(function(i,s){var u=Ln(e).reCAPTCHAState;n.ready(function(){i(n.execute(u.widgetId,{action:"fire_app_check"}))})})]}})})}function dR(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),s=Ln(e);gi(e,ge(ge({},s),{reCAPTCHAState:ge(ge({},s.reCAPTCHAState),{widgetId:i})}))}function v8(e){var t=document.createElement("script");t.src=""+h8,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cw=function(){function e(t){this._siteKey=t}return e.prototype.getToken=function(){return A(this,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:if(!this._app||!this._platformLoggerProvider)throw ur.create("use-before-activation",{appName:""});n.label=1;case 1:return n.trys.push([1,3,,4]),[4,p8(this._app)];case 2:return t=n.sent(),[3,4];case 3:throw n.sent(),ur.create("recaptcha-error");case 4:return[2,TM(YX(this._app,t),this._platformLoggerProvider)]}})})},e.prototype.initialize=function(t,n){this._app=t,this._platformLoggerProvider=n,d8(t,this._siteKey).catch(function(){})},e}(),lw=function(){function e(t){this._customProviderOptions=t}return e.prototype.getToken=function(){return A(this,void 0,void 0,function(){var t,n,r;return C(this,function(i){switch(i.label){case 0:if(!this._app)throw ur.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=i.sent(),n=m4(t.token),r=n!==null&&n<Date.now()&&n>0?n*1e3:Date.now(),[2,ge(ge({},t),{issuedAtTimeMillis:r})]}})})},e.prototype.initialize=function(t){this._app=t},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(e,t,n,r){var i=Ln(e);if(i.activated)throw ur.create("already-activated",{appName:e.name});var s=ge(ge({},i),{activated:!0});s.cachedTokenPromise=i8(e).then(function(u){return u&&Hl(u)&&gi(e,ge(ge({},Ln(e)),{token:u})),u}),typeof t=="string"?s.provider=new cw(t):t instanceof cw||t instanceof lw?s.provider=t:s.provider=new lw({getToken:t.getToken}),s.isTokenAutoRefreshEnabled=r===void 0?e.automaticDataCollectionEnabled:r,gi(e,s),s.provider.initialize(e,n)}function m8(e,t){var n=Ln(e);n.tokenRefresher&&(t===!0?n.tokenRefresher.start():n.tokenRefresher.stop()),gi(e,ge(ge({},n),{isTokenAutoRefreshEnabled:t}))}function y8(e,t,n){return A(this,void 0,void 0,function(){var r;return C(this,function(i){switch(i.label){case 0:return[4,sp(e,t,n)];case 1:if(r=i.sent(),r.error)throw r.error;return[2,{token:r.token}]}})})}function _8(e,t,n,r,i){var s=function(){},u=function(){};return n.next!=null?s=n.next.bind(n):s=n,n.error!=null?u=n.error.bind(n):r&&(u=r),RM(e,t,"EXTERNAL",s,u),function(){return aE(e,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(e,t){return{app:e,activate:function(n,r){return g8(e,n,t,r)},setTokenAutoRefreshEnabled:function(n){return m8(e,n)},getToken:function(n){return y8(e,t,n)},onTokenChanged:function(n,r,i){return _8(e,t,n,r)},INTERNAL:{delete:function(){for(var n=Ln(e).tokenObservers,r=0,i=n;r<i.length;r++){var s=i[r];aE(e,s.next)}return Promise.resolve()}}}}function b8(e,t){return{getToken:function(n){return sp(e,t,n)},addTokenListener:function(n){return RM(e,t,"INTERNAL",n)},removeTokenListener:function(n){return aE(e,n)}}}var E8="@firebase/app-check",T8="0.3.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I8="appCheck",pR="app-check-internal";function S8(e){e.INTERNAL.registerComponent(new wn(I8,function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("platform-logger");return w8(n,r)},"PUBLIC").setServiceProps({ReCaptchaV3Provider:cw,CustomProvider:lw}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,n,r){var i=t.getProvider(pR);i.initialize()})),e.INTERNAL.registerComponent(new wn(pR,function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("platform-logger");return b8(n,r)},"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion(E8,T8)}S8(fe);u8();var C8="firebase",NM="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fe.registerVersion(C8,NM,"app");fe.SDK_VERSION=NM;var A8="firebase",k8="8.10.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);fe.registerVersion(A8,k8);/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const PM=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Qu=e=>PM?Symbol(e):"_vr_"+e,R8=Qu("rvlm"),vR=Qu("rvd"),uE=Qu("r"),OM=Qu("rl"),fw=Qu("rvl"),qa=typeof window!="undefined";function N8(e){return e.__esModule||PM&&e[Symbol.toStringTag]==="Module"}const it=Object.assign;function Uy(e,t){const n={};for(const r in t){const i=t[r];n[r]=Array.isArray(i)?i.map(e):e(i)}return n}const ll=()=>{},P8=/\/$/,O8=e=>e.replace(P8,"");function jy(e,t,n="/"){let r,i={},s="",u="";const c=t.indexOf("?"),l=t.indexOf("#",c>-1?c:0);return c>-1&&(r=t.slice(0,c),s=t.slice(c+1,l>-1?l:t.length),i=e(s)),l>-1&&(r=r||t.slice(0,l),u=t.slice(l,t.length)),r=L8(r!=null?r:t,n),{fullPath:r+(s&&"?")+s+u,path:r,query:i,hash:u}}function D8(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function gR(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function x8(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Cu(t.matched[r],n.matched[i])&&DM(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Cu(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function DM(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!M8(e[n],t[n]))return!1;return!0}function M8(e,t){return Array.isArray(e)?mR(e,t):Array.isArray(t)?mR(t,e):e===t}function mR(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function L8(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i=n.length-1,s,u;for(s=0;s<r.length;s++)if(u=r[s],!(i===1||u==="."))if(u==="..")i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(s-(s===r.length?1:0)).join("/")}var Wl;(function(e){e.pop="pop",e.push="push"})(Wl||(Wl={}));var fl;(function(e){e.back="back",e.forward="forward",e.unknown=""})(fl||(fl={}));function F8(e){if(!e)if(qa){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),O8(e)}const U8=/^[^#]+#/;function j8(e,t){return e.replace(U8,"#")+t}function V8(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Tv=()=>({left:window.pageXOffset,top:window.pageYOffset});function B8(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=V8(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function yR(e,t){return(history.state?history.state.position-t:-1)+e}const hw=new Map;function q8(e,t){hw.set(e,t)}function K8(e){const t=hw.get(e);return hw.delete(e),t}let H8=()=>location.protocol+"//"+location.host;function xM(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let c=i.includes(e.slice(s))?e.slice(s).length:1,l=i.slice(c);return l[0]!=="/"&&(l="/"+l),gR(l,"")}return gR(n,e)+r+i}function W8(e,t,n,r){let i=[],s=[],u=null;const c=({state:m})=>{const y=xM(e,location),w=n.value,E=t.value;let T=0;if(m){if(n.value=y,t.value=m,u&&u===w){u=null;return}T=E?m.position-E.position:0}else r(y);i.forEach(k=>{k(n.value,w,{delta:T,type:Wl.pop,direction:T?T>0?fl.forward:fl.back:fl.unknown})})};function l(){u=n.value}function h(m){i.push(m);const y=()=>{const w=i.indexOf(m);w>-1&&i.splice(w,1)};return s.push(y),y}function d(){const{history:m}=window;!m.state||m.replaceState(it({},m.state,{scroll:Tv()}),"")}function v(){for(const m of s)m();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",d),{pauseListeners:l,listen:h,destroy:v}}function _R(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Tv():null}}function G8(e){const{history:t,location:n}=window,r={value:xM(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,h,d){const v=e.indexOf("#"),m=v>-1?(n.host&&document.querySelector("base")?e:e.slice(v))+l:H8()+e+l;try{t[d?"replaceState":"pushState"](h,"",m),i.value=h}catch(y){console.error(y),n[d?"replace":"assign"](m)}}function u(l,h){const d=it({},t.state,_R(i.value.back,l,i.value.forward,!0),h,{position:i.value.position});s(l,d,!0),r.value=l}function c(l,h){const d=it({},i.value,t.state,{forward:l,scroll:Tv()});s(d.current,d,!0);const v=it({},_R(r.value,l,null),{position:d.position+1},h);s(l,v,!1),r.value=l}return{location:r,state:i,push:c,replace:u}}function VJ(e){e=F8(e);const t=G8(e),n=W8(e,t.state,t.location,t.replace);function r(s,u=!0){u||n.pauseListeners(),history.go(s)}const i=it({location:"",base:e,go:r,createHref:j8.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function $8(e){return typeof e=="string"||e&&typeof e=="object"}function MM(e){return typeof e=="string"||typeof e=="symbol"}const co={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},LM=Qu("nf");var wR;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(wR||(wR={}));function Au(e,t){return it(new Error,{type:e,[LM]:!0},t)}function cs(e,t){return e instanceof Error&&LM in e&&(t==null||!!(e.type&t))}const bR="[^/]+?",z8={sensitive:!1,strict:!1,start:!0,end:!0},Q8=/[.+*?^${}()[\]/\\]/g;function Y8(e,t){const n=it({},z8,t),r=[];let i=n.start?"^":"";const s=[];for(const h of e){const d=h.length?[]:[90];n.strict&&!h.length&&(i+="/");for(let v=0;v<h.length;v++){const m=h[v];let y=40+(n.sensitive?.25:0);if(m.type===0)v||(i+="/"),i+=m.value.replace(Q8,"\\$&"),y+=40;else if(m.type===1){const{value:w,repeatable:E,optional:T,regexp:k}=m;s.push({name:w,repeatable:E,optional:T});const P=k||bR;if(P!==bR){y+=10;try{new RegExp(`(${P})`)}catch(K){throw new Error(`Invalid custom RegExp for param "${w}" (${P}): `+K.message)}}let M=E?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;v||(M=T&&h.length<2?`(?:/${M})`:"/"+M),T&&(M+="?"),i+=M,y+=20,T&&(y+=-8),E&&(y+=-20),P===".*"&&(y+=-50)}d.push(y)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const u=new RegExp(i,n.sensitive?"":"i");function c(h){const d=h.match(u),v={};if(!d)return null;for(let m=1;m<d.length;m++){const y=d[m]||"",w=s[m-1];v[w.name]=y&&w.repeatable?y.split("/"):y}return v}function l(h){let d="",v=!1;for(const m of e){(!v||!d.endsWith("/"))&&(d+="/"),v=!1;for(const y of m)if(y.type===0)d+=y.value;else if(y.type===1){const{value:w,repeatable:E,optional:T}=y,k=w in h?h[w]:"";if(Array.isArray(k)&&!E)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const P=Array.isArray(k)?k.join("/"):k;if(!P)if(T)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):v=!0);else throw new Error(`Missing required param "${w}"`);d+=P}}return d}return{re:u,score:r,keys:s,parse:c,stringify:l}}function X8(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function J8(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=X8(r[n],i[n]);if(s)return s;n++}return i.length-r.length}const Z8={type:0,value:""},eJ=/[a-zA-Z0-9_]/;function tJ(e){if(!e)return[[]];if(e==="/")return[[Z8]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${h}": ${y}`)}let n=0,r=n;const i=[];let s;function u(){s&&i.push(s),s=[]}let c=0,l,h="",d="";function v(){!h||(n===0?s.push({type:0,value:h}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function m(){h+=l}for(;c<e.length;){if(l=e[c++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(h&&v(),u()):l===":"?(v(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:eJ.test(l)?m():(v(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:v(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),v(),u(),i}function nJ(e,t,n){const r=Y8(tJ(e.path),n),i=it(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function rJ(e,t){const n=[],r=new Map;t=TR({strict:!1,end:!0,sensitive:!1},t);function i(d){return r.get(d)}function s(d,v,m){const y=!m,w=oJ(d);w.aliasOf=m&&m.record;const E=TR(t,d),T=[w];if("alias"in d){const M=typeof d.alias=="string"?[d.alias]:d.alias;for(const K of M)T.push(it({},w,{components:m?m.record.components:w.components,path:K,aliasOf:m?m.record:w}))}let k,P;for(const M of T){const{path:K}=M;if(v&&K[0]!=="/"){const Q=v.record.path,F=Q[Q.length-1]==="/"?"":"/";M.path=v.record.path+(K&&F+K)}if(k=nJ(M,v,E),m?m.alias.push(k):(P=P||k,P!==k&&P.alias.push(k),y&&d.name&&!ER(k)&&u(d.name)),"children"in w){const Q=w.children;for(let F=0;F<Q.length;F++)s(Q[F],k,m&&m.children[F])}m=m||k,l(k)}return P?()=>{u(P)}:ll}function u(d){if(MM(d)){const v=r.get(d);v&&(r.delete(d),n.splice(n.indexOf(v),1),v.children.forEach(u),v.alias.forEach(u))}else{const v=n.indexOf(d);v>-1&&(n.splice(v,1),d.record.name&&r.delete(d.record.name),d.children.forEach(u),d.alias.forEach(u))}}function c(){return n}function l(d){let v=0;for(;v<n.length&&J8(d,n[v])>=0;)v++;n.splice(v,0,d),d.record.name&&!ER(d)&&r.set(d.record.name,d)}function h(d,v){let m,y={},w,E;if("name"in d&&d.name){if(m=r.get(d.name),!m)throw Au(1,{location:d});E=m.record.name,y=it(iJ(v.params,m.keys.filter(P=>!P.optional).map(P=>P.name)),d.params),w=m.stringify(y)}else if("path"in d)w=d.path,m=n.find(P=>P.re.test(w)),m&&(y=m.parse(w),E=m.record.name);else{if(m=v.name?r.get(v.name):n.find(P=>P.re.test(v.path)),!m)throw Au(1,{location:d,currentLocation:v});E=m.record.name,y=it({},v.params,d.params),w=m.stringify(y)}const T=[];let k=m;for(;k;)T.unshift(k.record),k=k.parent;return{name:E,path:w,params:y,matched:T,meta:aJ(T)}}return e.forEach(d=>s(d)),{addRoute:s,resolve:h,removeRoute:u,getRoutes:c,getRecordMatcher:i}}function iJ(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function oJ(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:sJ(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function sJ(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function ER(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function aJ(e){return e.reduce((t,n)=>it(t,n.meta),{})}function TR(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}const FM=/#/g,uJ=/&/g,cJ=/\//g,lJ=/=/g,fJ=/\?/g,UM=/\+/g,hJ=/%5B/g,dJ=/%5D/g,jM=/%5E/g,pJ=/%60/g,VM=/%7B/g,vJ=/%7C/g,BM=/%7D/g,gJ=/%20/g;function cE(e){return encodeURI(""+e).replace(vJ,"|").replace(hJ,"[").replace(dJ,"]")}function mJ(e){return cE(e).replace(VM,"{").replace(BM,"}").replace(jM,"^")}function dw(e){return cE(e).replace(UM,"%2B").replace(gJ,"+").replace(FM,"%23").replace(uJ,"%26").replace(pJ,"`").replace(VM,"{").replace(BM,"}").replace(jM,"^")}function yJ(e){return dw(e).replace(lJ,"%3D")}function _J(e){return cE(e).replace(FM,"%23").replace(fJ,"%3F")}function wJ(e){return e==null?"":_J(e).replace(cJ,"%2F")}function ap(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function bJ(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(UM," "),u=s.indexOf("="),c=ap(u<0?s:s.slice(0,u)),l=u<0?null:ap(s.slice(u+1));if(c in t){let h=t[c];Array.isArray(h)||(h=t[c]=[h]),h.push(l)}else t[c]=l}return t}function IR(e){let t="";for(let n in e){const r=e[n];if(n=yJ(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(r)?r.map(s=>s&&dw(s)):[r&&dw(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function EJ(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Array.isArray(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}function Bc(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function po(e,t,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((u,c)=>{const l=v=>{v===!1?c(Au(4,{from:n,to:t})):v instanceof Error?c(v):$8(v)?c(Au(2,{from:t,to:v})):(s&&r.enterCallbacks[i]===s&&typeof v=="function"&&s.push(v),u())},h=e.call(r&&r.instances[i],t,n,l);let d=Promise.resolve(h);e.length<3&&(d=d.then(l)),d.catch(v=>c(v))})}function Vy(e,t,n,r){const i=[];for(const s of e)for(const u in s.components){let c=s.components[u];if(!(t!=="beforeRouteEnter"&&!s.instances[u]))if(TJ(c)){const h=(c.__vccOpts||c)[t];h&&i.push(po(h,n,r,s,u))}else{let l=c();i.push(()=>l.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${u}" at "${s.path}"`));const d=N8(h)?h.default:h;s.components[u]=d;const m=(d.__vccOpts||d)[t];return m&&po(m,n,r,s,u)()}))}}return i}function TJ(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function SR(e){const t=Eo(uE),n=Eo(OM),r=ci(()=>t.resolve(Gc(e.to))),i=ci(()=>{const{matched:l}=r.value,{length:h}=l,d=l[h-1],v=n.matched;if(!d||!v.length)return-1;const m=v.findIndex(Cu.bind(null,d));if(m>-1)return m;const y=CR(l[h-2]);return h>1&&CR(d)===y&&v[v.length-1].path!==y?v.findIndex(Cu.bind(null,l[h-2])):m}),s=ci(()=>i.value>-1&&AJ(n.params,r.value.params)),u=ci(()=>i.value>-1&&i.value===n.matched.length-1&&DM(n.params,r.value.params));function c(l={}){return CJ(l)?t[Gc(e.replace)?"replace":"push"](Gc(e.to)).catch(ll):Promise.resolve()}return{route:r,href:ci(()=>r.value.href),isActive:s,isExactActive:u,navigate:c}}const IJ=hN({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:SR,setup(e,{slots:t}){const n=Gl(SR(e)),{options:r}=Eo(uE),i=ci(()=>({[AR(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[AR(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:ON("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),SJ=IJ;function CJ(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function AJ(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some((s,u)=>s!==i[u]))return!1}return!0}function CR(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const AR=(e,t,n)=>e!=null?e:t!=null?t:n,kJ=hN({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const r=Eo(fw),i=ci(()=>e.route||r.value),s=Eo(vR,0),u=ci(()=>i.value.matched[s]);Yh(vR,s+1),Yh(R8,u),Yh(fw,i);const c=bj();return Xh(()=>[c.value,u.value,e.name],([l,h,d],[v,m,y])=>{h&&(h.instances[d]=l,m&&m!==h&&l&&l===v&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),l&&h&&(!m||!Cu(h,m)||!v)&&(h.enterCallbacks[d]||[]).forEach(w=>w(l))},{flush:"post"}),()=>{const l=i.value,h=u.value,d=h&&h.components[e.name],v=e.name;if(!d)return kR(n.default,{Component:d,route:l});const m=h.props[e.name],y=m?m===!0?l.params:typeof m=="function"?m(l):m:null,E=ON(d,it({},y,t,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(h.instances[v]=null)},ref:c}));return kR(n.default,{Component:E,route:l})||E}}});function kR(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const RJ=kJ;function BJ(e){const t=rJ(e.routes,e),n=e.parseQuery||bJ,r=e.stringifyQuery||IR,i=e.history,s=Bc(),u=Bc(),c=Bc(),l=Ej(co);let h=co;qa&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Uy.bind(null,U=>""+U),v=Uy.bind(null,wJ),m=Uy.bind(null,ap);function y(U,se){let X,J;return MM(U)?(X=t.getRecordMatcher(U),J=se):J=U,t.addRoute(J,X)}function w(U){const se=t.getRecordMatcher(U);se&&t.removeRoute(se)}function E(){return t.getRoutes().map(U=>U.record)}function T(U){return!!t.getRecordMatcher(U)}function k(U,se){if(se=it({},se||l.value),typeof U=="string"){const Ce=jy(n,U,se.path),S=t.resolve({path:Ce.path},se),R=i.createHref(Ce.fullPath);return it(Ce,S,{params:m(S.params),hash:ap(Ce.hash),redirectedFrom:void 0,href:R})}let X;if("path"in U)X=it({},U,{path:jy(n,U.path,se.path).path});else{const Ce=it({},U.params);for(const S in Ce)Ce[S]==null&&delete Ce[S];X=it({},U,{params:v(U.params)}),se.params=v(se.params)}const J=t.resolve(X,se),Ye=U.hash||"";J.params=d(m(J.params));const et=D8(r,it({},U,{hash:mJ(Ye),path:J.path})),Se=i.createHref(et);return it({fullPath:et,hash:Ye,query:r===IR?EJ(U.query):U.query||{}},J,{redirectedFrom:void 0,href:Se})}function P(U){return typeof U=="string"?jy(n,U,l.value.path):it({},U)}function M(U,se){if(h!==U)return Au(8,{from:se,to:U})}function K(U){return re(U)}function Q(U){return K(it(P(U),{replace:!0}))}function F(U){const se=U.matched[U.matched.length-1];if(se&&se.redirect){const{redirect:X}=se;let J=typeof X=="function"?X(U):X;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=P(J):{path:J},J.params={}),it({query:U.query,hash:U.hash,params:U.params},J)}}function re(U,se){const X=h=k(U),J=l.value,Ye=U.state,et=U.force,Se=U.replace===!0,Ce=F(X);if(Ce)return re(it(P(Ce),{state:Ye,force:et,replace:Se}),se||X);const S=X;S.redirectedFrom=se;let R;return!et&&x8(r,J,X)&&(R=Au(16,{to:S,from:J}),Qn(J,J,!0,!1)),(R?Promise.resolve(R):Ee(S,J)).catch(D=>cs(D)?D:Qe(D,S,J)).then(D=>{if(D){if(cs(D,2))return re(it(P(D.to),{state:Ye,force:et,replace:Se}),se||S)}else D=_t(S,J,!0,Se,Ye);return N(S,J,D),D})}function te(U,se){const X=M(U,se);return X?Promise.reject(X):Promise.resolve()}function Ee(U,se){let X;const[J,Ye,et]=NJ(U,se);X=Vy(J.reverse(),"beforeRouteLeave",U,se);for(const Ce of J)Ce.leaveGuards.forEach(S=>{X.push(po(S,U,se))});const Se=te.bind(null,U,se);return X.push(Se),Ma(X).then(()=>{X=[];for(const Ce of s.list())X.push(po(Ce,U,se));return X.push(Se),Ma(X)}).then(()=>{X=Vy(Ye,"beforeRouteUpdate",U,se);for(const Ce of Ye)Ce.updateGuards.forEach(S=>{X.push(po(S,U,se))});return X.push(Se),Ma(X)}).then(()=>{X=[];for(const Ce of U.matched)if(Ce.beforeEnter&&!se.matched.includes(Ce))if(Array.isArray(Ce.beforeEnter))for(const S of Ce.beforeEnter)X.push(po(S,U,se));else X.push(po(Ce.beforeEnter,U,se));return X.push(Se),Ma(X)}).then(()=>(U.matched.forEach(Ce=>Ce.enterCallbacks={}),X=Vy(et,"beforeRouteEnter",U,se),X.push(Se),Ma(X))).then(()=>{X=[];for(const Ce of u.list())X.push(po(Ce,U,se));return X.push(Se),Ma(X)}).catch(Ce=>cs(Ce,8)?Ce:Promise.reject(Ce))}function N(U,se,X){for(const J of c.list())J(U,se,X)}function _t(U,se,X,J,Ye){const et=M(U,se);if(et)return et;const Se=se===co,Ce=qa?history.state:{};X&&(J||Se?i.replace(U.fullPath,it({scroll:Se&&Ce&&Ce.scroll},Ye)):i.push(U.fullPath,Ye)),l.value=U,Qn(U,se,X,Se),ln()}let Et;function Qr(){Et=i.listen((U,se,X)=>{const J=k(U),Ye=F(J);if(Ye){re(it(Ye,{replace:!0}),J).catch(ll);return}h=J;const et=l.value;qa&&q8(yR(et.fullPath,X.delta),Tv()),Ee(J,et).catch(Se=>cs(Se,12)?Se:cs(Se,2)?(re(Se.to,J).then(Ce=>{cs(Ce,20)&&!X.delta&&X.type===Wl.pop&&i.go(-1,!1)}).catch(ll),Promise.reject()):(X.delta&&i.go(-X.delta,!1),Qe(Se,J,et))).then(Se=>{Se=Se||_t(J,et,!1),Se&&(X.delta?i.go(-X.delta,!1):X.type===Wl.pop&&cs(Se,20)&&i.go(-1,!1)),N(J,et,Se)}).catch(ll)})}let Yr=Bc(),dr=Bc(),ct;function Qe(U,se,X){ln(U);const J=dr.list();return J.length?J.forEach(Ye=>Ye(U,se,X)):console.error(U),Promise.reject(U)}function Ae(){return ct&&l.value!==co?Promise.resolve():new Promise((U,se)=>{Yr.add([U,se])})}function ln(U){ct||(ct=!0,Qr(),Yr.list().forEach(([se,X])=>U?X(U):se()),Yr.reset())}function Qn(U,se,X,J){const{scrollBehavior:Ye}=e;if(!qa||!Ye)return Promise.resolve();const et=!X&&K8(yR(U.fullPath,0))||(J||!X)&&history.state&&history.state.scroll||null;return eN().then(()=>Ye(U,se,et)).then(Se=>Se&&B8(Se)).catch(Se=>Qe(Se,U,se))}const Yn=U=>i.go(U);let Xn;const Tn=new Set;return{currentRoute:l,addRoute:y,removeRoute:w,hasRoute:T,getRoutes:E,resolve:k,options:e,push:K,replace:Q,go:Yn,back:()=>Yn(-1),forward:()=>Yn(1),beforeEach:s.add,beforeResolve:u.add,afterEach:c.add,onError:dr.add,isReady:Ae,install(U){const se=this;U.component("RouterLink",SJ),U.component("RouterView",RJ),U.config.globalProperties.$router=se,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>Gc(l)}),qa&&!Xn&&l.value===co&&(Xn=!0,K(i.location).catch(Ye=>{}));const X={};for(const Ye in co)X[Ye]=ci(()=>l.value[Ye]);U.provide(uE,se),U.provide(OM,Gl(X)),U.provide(fw,l);const J=U.unmount;Tn.add(U),U.unmount=function(){Tn.delete(U),Tn.size<1&&(h=co,Et&&Et(),l.value=co,Xn=!1,ct=!1),J()}}}}function Ma(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function NJ(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let u=0;u<s;u++){const c=t.matched[u];c&&(e.matched.find(h=>Cu(h,c))?r.push(c):n.push(c));const l=e.matched[u];l&&(t.matched.find(h=>Cu(h,l))||i.push(l))}return[n,r,i]}export{ai as F,DJ as a,yV as b,xJ as c,RN as d,Kn as e,fe as f,TV as g,LJ as h,MJ as i,wV as j,bj as k,OJ as l,FJ as m,BJ as n,pN as o,VJ as p,jJ as q,Gl as r,PJ as t,Gc as u,UJ as v,Dj as w};
